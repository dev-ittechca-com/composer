{"version":3,"file":"menu_resizer.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/menu_resizer.js"],"sourcesContent":["/**\n * Handles the resizing of a menu according to the available screen width\n *\n * Uses themes/original/css/resizable-menu.css.php\n *\n * To initialize:\n * $('#myMenu').menuResizer(function () {\n *     // This function will be called to find out how much\n *     // available horizontal space there is for the menu\n *     return $('body').width() - 5; // Some extra margin for good measure\n * });\n *\n * To trigger a resize operation:\n * $('#myMenu').menuResizer('resize'); // Bind this to $(window).resize()\n *\n * To restore the menu to a state like before it was initialized:\n * $('#myMenu').menuResizer('destroy');\n *\n * @package PhpMyAdmin\n */\n(function ($) {\n    function MenuResizer ($container, widthCalculator) {\n        var self = this;\n        self.$container = $container;\n        self.widthCalculator = widthCalculator;\n        var windowWidth = $(window).width();\n\n        if (windowWidth < 768) {\n            $('#pma_navigation_resizer').css({ 'width': '0px' });\n        }\n\n        // create submenu container\n        var link = $('<a></a>', {\n            'href': '#',\n            'class': 'nav-link dropdown-toggle',\n            'id': 'navbarDropdown',\n            'role': 'button',\n            'data-bs-toggle': 'dropdown',\n            'aria-haspopup': 'true',\n            'aria-expanded': 'false'\n        }).text(Messages.strMore);\n\n        var img = $container.find('li img');\n        if (img.length) {\n            $(Functions.getImage('b_more').toString()).prependTo(link);\n        }\n        var $submenu = $('<li></li>', { 'class': 'nav-item dropdown d-none' })\n            .append(link)\n            .append($('<ul></ul>', {\n                'class': 'dropdown-menu dropdown-menu-end',\n                'aria-labelledby': 'navbarDropdown'\n            }));\n        $container.append($submenu);\n        setTimeout(function () {\n            self.resize();\n        }, 4);\n    }\n    MenuResizer.prototype.resize = function () {\n        var wmax = this.widthCalculator.call(this.$container);\n        var windowWidth = $(window).width();\n        var $submenu = this.$container.find('.nav-item.dropdown').last();\n        var submenuW = $submenu.outerWidth(true);\n        var $submenuUl = $submenu.find('.dropdown-menu');\n        var $li = this.$container.find('> li');\n        var $li2 = $submenuUl.find('.dropdown-item');\n        var moreShown = $li2.length > 0;\n        // Calculate the total width used by all the shown tabs\n        var totalLen = moreShown ? submenuW : 0;\n        var l = $li.length - 1;\n        var i;\n        for (i = 0; i < l; i++) {\n            totalLen += $($li[i]).outerWidth(true);\n        }\n\n        // eslint-disable-next-line compat/compat\n        var hasVScroll = document.body.scrollHeight > document.body.clientHeight;\n        if (hasVScroll) {\n            windowWidth += 15;\n        }\n        if (windowWidth < 768) {\n            wmax = 2000;\n        }\n\n        // Now hide menu elements that don't fit into the menubar\n        var hidden = false; // Whether we have hidden any tabs\n        while (totalLen >= wmax && --l >= 0) { // Process the tabs backwards\n            hidden = true;\n            var el = $($li[l]);\n            el.removeClass('nav-item').addClass('dropdown-item');\n            var elWidth = el.outerWidth(true);\n            el.data('width', elWidth);\n            if (! moreShown) {\n                totalLen -= elWidth;\n                el.prependTo($submenuUl);\n                totalLen += submenuW;\n                moreShown = true;\n            } else {\n                totalLen -= elWidth;\n                el.prependTo($submenuUl);\n            }\n        }\n        // If we didn't hide any tabs, then there might be some space to show some\n        if (! hidden) {\n            // Show menu elements that do fit into the menubar\n            for (i = 0, l = $li2.length; i < l; i++) {\n                totalLen += $($li2[i]).data('width');\n                // item fits or (it is the last item\n                // and it would fit if More got removed)\n                if (totalLen < wmax ||\n                    (i === $li2.length - 1 && totalLen - submenuW < wmax)\n                ) {\n                    $($li2[i]).removeClass('dropdown-item').addClass('nav-item');\n                    $($li2[i]).insertBefore($submenu);\n                } else {\n                    break;\n                }\n            }\n        }\n        // Show/hide the \"More\" tab as needed\n        if (windowWidth < 768) {\n            $('.navbar-collapse').css({ 'width': windowWidth - 80 - $('#pma_navigation').width() });\n            $submenu.addClass('d-none');\n            $('.navbar-collapse').css({ 'overflow': 'hidden' });\n        } else {\n            $('.navbar-collapse').css({ 'width': 'auto' });\n            $('.navbar-collapse').css({ 'overflow': 'visible' });\n            if ($submenuUl.find('li').length > 0) {\n                $submenu.removeClass('d-none');\n            } else {\n                $submenu.addClass('d-none');\n            }\n        }\n    };\n    MenuResizer.prototype.destroy = function () {\n        var $submenu = this.$container.find('.nav-item.dropdown').removeData();\n        $submenu.find('li').appendTo(this.$container);\n        $submenu.remove();\n    };\n\n    /** Public API */\n    var methods = {\n        init: function (widthCalculator) {\n            return this.each(function () {\n                var $this = $(this);\n                if (! $this.data('menuResizer')) {\n                    $this.data(\n                        'menuResizer',\n                        new MenuResizer($this, widthCalculator)\n                    );\n                }\n            });\n        },\n        resize: function () {\n            return this.each(function () {\n                var self = $(this).data('menuResizer');\n                if (self) {\n                    self.resize();\n                }\n            });\n        },\n        destroy: function () {\n            return this.each(function () {\n                var self = $(this).data('menuResizer');\n                if (self) {\n                    self.destroy();\n                }\n            });\n        }\n    };\n\n    /**\n     * Extend jQuery\n     *\n     * @param {string} method\n     *\n     * @return {any}\n     */\n    $.fn.menuResizer = function (method) {\n        if (methods[method]) {\n            return methods[method].call(this);\n        } else if (typeof method === 'function') {\n            return methods.init.apply(this, [method]);\n        } else {\n            $.error('Method ' +  method + ' does not exist on jQuery.menuResizer');\n        }\n    };\n}(jQuery));\n"],"names":["$","MenuResizer","$container","widthCalculator","self","windowWidth","window","width","css","link","text","Messages","strMore","img","find","length","Functions","getImage","toString","prependTo","$submenu","append","setTimeout","resize","prototype","wmax","call","last","submenuW","outerWidth","$submenuUl","$li","$li2","moreShown","totalLen","l","i","hasVScroll","document","body","scrollHeight","clientHeight","hidden","el","removeClass","addClass","elWidth","data","insertBefore","destroy","removeData","appendTo","remove","methods","init","each","$this","fn","menuResizer","method","apply","error","jQuery"],"sourceRoot":""}