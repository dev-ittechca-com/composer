{"version":3,"file":"keyhandler.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/keyhandler.js"],"sourcesContent":["\n// global var that holds: 0- if ctrl key is not pressed 1- if ctrl key is pressed\nvar ctrlKeyHistory = 0;\n\n/**\n  * Allows moving around inputs/select by Ctrl+arrows\n  *\n  * @param {object} event data\n  */\nfunction onKeyDownArrowsHandler (event) {\n    var e = event || window.event;\n\n    var o = (e.srcElement || e.target);\n    if (!o) {\n        return;\n    }\n    if (o.tagName !== 'TEXTAREA' && o.tagName !== 'INPUT' && o.tagName !== 'SELECT') {\n        return;\n    }\n    if ((e.which !== 17) && (e.which !== 37) && (e.which !== 38) && (e.which !== 39) && (e.which !== 40)) {\n        return;\n    }\n    if (!o.id) {\n        return;\n    }\n\n    if (e.type === 'keyup') {\n        if (e.which === 17) {\n            ctrlKeyHistory = 0;\n        }\n        return;\n    } else if (e.type === 'keydown') {\n        if (e.which === 17) {\n            ctrlKeyHistory = 1;\n        }\n    }\n\n    if (ctrlKeyHistory !== 1) {\n        return;\n    }\n\n    e.preventDefault();\n\n    var pos = o.id.split('_');\n    if (pos[0] !== 'field' || typeof pos[2] === 'undefined') {\n        return;\n    }\n\n    var x = pos[2];\n    var y = pos[1];\n\n    switch (e.keyCode) {\n    case 38:\n        // up\n        y--;\n        break;\n    case 40:\n        // down\n        y++;\n        break;\n    case 37:\n        // left\n        x--;\n        break;\n    case 39:\n        // right\n        x++;\n        break;\n    default:\n        return;\n    }\n\n    // eslint-disable-next-line compat/compat\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox/') > -1;\n\n    var id = 'field_' + y + '_' + x;\n\n    var nO = document.getElementById(id);\n    if (! nO) {\n        id = 'field_' + y + '_' + x + '_0';\n        nO = document.getElementById(id);\n    }\n\n    // skip non existent fields\n    if (! nO) {\n        return;\n    }\n\n    // for firefox select tag\n    var lvalue = o.selectedIndex;\n    var nOvalue = nO.selectedIndex;\n\n    nO.focus();\n\n    if (isFirefox) {\n        var ffcheck = 0;\n        var ffversion;\n        for (ffversion = 3 ; ffversion < 25 ; ffversion++) {\n            var isFirefoxV24 = navigator.userAgent.toLowerCase().indexOf('firefox/' + ffversion) > -1;\n            if (isFirefoxV24) {\n                ffcheck = 1;\n                break;\n            }\n        }\n        if (ffcheck === 1) {\n            if (e.which === 38 || e.which === 37) {\n                nOvalue++;\n            } else if (e.which === 40 || e.which === 39) {\n                nOvalue--;\n            }\n            nO.selectedIndex = nOvalue;\n        } else {\n            if (e.which === 38 || e.which === 37) {\n                lvalue++;\n            } else if (e.which === 40 || e.which === 39) {\n                lvalue--;\n            }\n            o.selectedIndex = lvalue;\n        }\n    }\n\n    if (nO.tagName !== 'SELECT') {\n        nO.select();\n    }\n    e.returnValue = false;\n}\n\nAJAX.registerTeardown('keyhandler.js', function () {\n    $(document).off('keydown keyup', '#table_columns');\n    $(document).off('keydown keyup', 'table.insertRowTable');\n});\n\nAJAX.registerOnload('keyhandler.js', function () {\n    $(document).on('keydown keyup', '#table_columns', function (event) {\n        onKeyDownArrowsHandler(event.originalEvent);\n    });\n    $(document).on('keydown keyup', 'table.insertRowTable', function (event) {\n        onKeyDownArrowsHandler(event.originalEvent);\n    });\n});\n"],"names":["ctrlKeyHistory","onKeyDownArrowsHandler","event","e","window","o","srcElement","target","tagName","which","id","type","preventDefault","pos","split","x","y","keyCode","isFirefox","navigator","userAgent","toLowerCase","indexOf","nO","document","getElementById","lvalue","selectedIndex","nOvalue","focus","ffcheck","ffversion","isFirefoxV24","select","returnValue","AJAX","registerTeardown","$","off","registerOnload","on","originalEvent"],"sourceRoot":""}