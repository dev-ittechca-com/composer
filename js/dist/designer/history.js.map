{"version":3,"file":"designer/history.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/designer/history.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport getImageTag from '../modules/functions/getImageTag.js';\n\n/**\n * @fileoverview    function used in this file builds history tab and generates query.\n *\n * @requires    jQuery\n * @requires    move.js\n */\n\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerHistory = {};\nwindow.DesignerHistory = DesignerHistory;\n\nvar historyArray = []; // Global array to store history objects\nvar selectField = [];  // Global array to store information for columns which are used in select clause\nvar gIndex;\nvar vqbEditor = null;\n\n/**\n * To display details of objects(where,rename,Having,aggregate,groupby,orderby,having)\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {string}\n */\nDesignerHistory.detail = function (index) {\n    var type = historyArray[index].getType();\n    var str;\n    if (type === 'Where') {\n        str = 'Where ' + historyArray[index].getColumnName() + historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n    } else if (type === 'Rename') {\n        str = 'Rename ' + historyArray[index].getColumnName() + ' To ' + historyArray[index].getObj().getRenameTo();\n    } else if (type === 'Aggregate') {\n        str = 'Select ' + historyArray[index].getObj().getOperator() + '( ' + historyArray[index].getColumnName() + ' )';\n    } else if (type === 'GroupBy') {\n        str = 'GroupBy ' + historyArray[index].getColumnName();\n    } else if (type === 'OrderBy') {\n        str = 'OrderBy ' + historyArray[index].getColumnName() + ' ' + historyArray[index].getObj().getOrder();\n    } else if (type === 'Having') {\n        str = 'Having ';\n        if (historyArray[index].getObj().getOperator() !== 'None') {\n            str += historyArray[index].getObj().getOperator() + '( ' + historyArray[index].getColumnName() + ' )';\n            str += historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n        } else {\n            str = 'Having ' + historyArray[index].getColumnName() + historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n        }\n    }\n    return str;\n};\n\n/**\n * Sorts historyArray[] first,using table name as the key and then generates the HTML code for history tab,\n * clubbing all objects of same tables together\n * This function is called whenever changes are made in historyArray[]\n *\n *\n * @param {number} init starting index of unsorted array\n * @param {number} finit last index of unsorted array\n * @return {string}\n */\nDesignerHistory.display = function (init, finit) {\n    var str;\n    var i;\n    var j;\n    var k;\n    var sto;\n    var temp;\n    // this part sorts the history array based on table name,this is needed for clubbing all object of same name together.\n    for (i = init; i < finit; i++) {\n        sto = historyArray[i];\n        temp = historyArray[i].getTab();// + '.' + historyArray[i].getObjNo(); for Self JOINS\n        for (j = 0; j < i; j++) {\n            if (temp > (historyArray[j].getTab())) {// + '.' + historyArray[j].getObjNo())) { //for Self JOINS\n                for (k = i; k > j; k--) {\n                    historyArray[k] = historyArray[k - 1];\n                }\n                historyArray[j] = sto;\n                break;\n            }\n        }\n    }\n    // this part generates HTML code for history tab.adds delete,edit,and/or and detail features with objects.\n    str = ''; // string to store Html code for history tab\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        temp = historyArray[i].getTab(); // + '.' + historyArray[i].getObjNo(); for Self JOIN\n        str += '<h3 class=\"tiger\"><a href=\"#\">' + temp + '</a></h3>';\n        str += '<div class=\"toggle_container\">\\n';\n        while ((historyArray[i].getTab()) === temp) { // + '.' + historyArray[i].getObjNo()) === temp) {\n            str += '<div class=\"block\"> <table class=\"table table-sm w-auto mb-0\">';\n            str += '<thead><tr><td>';\n            if (historyArray[i].getAndOr()) {\n                str += '<img src=\"' + themeImagePath + 'designer/or_icon.png\" onclick=\"DesignerHistory.andOr(' + i + ')\" title=\"OR\"></td>';\n            } else {\n                str += '<img src=\"' + themeImagePath + 'designer/and_icon.png\" onclick=\"DesignerHistory.andOr(' + i + ')\" title=\"AND\"></td>';\n            }\n            str += '<td style=\"padding-left: 5px;\" class=\"text-end\">' + getImageTag('b_sbrowse', window.Messages.strColumnName) + '</td>' +\n                '<td width=\"175\" style=\"padding-left: 5px\">' + $('<div/>').text(historyArray[i].getColumnName()).html() + '<td>';\n            if (historyArray[i].getType() === 'GroupBy' || historyArray[i].getType() === 'OrderBy') {\n                var detailDescGroupBy = $('<div/>').text(DesignerHistory.detail(i)).html();\n                str += '<td class=\"text-center\">' + getImageTag('s_info', DesignerHistory.detail(i)) + '</td>' +\n                    '<td title=\"' + detailDescGroupBy + '\">' + historyArray[i].getType() + '</td>' +\n                    '<td onclick=DesignerHistory.historyDelete(' + i + ')>' + getImageTag('b_drop', window.Messages.strDelete) + '</td>';\n            } else {\n                var detailDesc = $('<div/>').text(DesignerHistory.detail(i)).html();\n                str += '<td class=\"text-center\">' + getImageTag('s_info', DesignerHistory.detail(i)) + '</td>' +\n                    '<td title=\"' + detailDesc + '\">' + historyArray[i].getType() + '</td>' +\n                    '<td onclick=DesignerHistory.historyEdit(' + i + ')>' + getImageTag('b_edit', window.Messages.strEdit) + '</td>' +\n                    '<td onclick=DesignerHistory.historyDelete(' + i + ')>' + getImageTag('b_drop', window.Messages.strDelete) + '</td>';\n            }\n            str += '</tr></thead>';\n            i++;\n            if (i >= historyArrayLength) {\n                break;\n            }\n            str += '</table></div>';\n        }\n        i--;\n        str += '</div>';\n    }\n    return str;\n};\n\n/**\n * To change And/Or relation in history tab\n *\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.andOr = function (index) {\n    if (historyArray[index].getAndOr()) {\n        historyArray[index].setAndOr(0);\n    } else {\n        historyArray[index].setAndOr(1);\n    }\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * Deletes entry in historyArray\n *\n * @param {number} index of historyArray[] which is to be deleted\n * @return {void}\n */\nDesignerHistory.historyDelete = function (index) {\n    var fromArrayLength = window.fromArray.length;\n    for (var k = 0; k < fromArrayLength; k++) {\n        if (window.fromArray[k] === historyArray[index].getTab()) {\n            window.fromArray.splice(k, 1);\n            break;\n        }\n    }\n    historyArray.splice(index, 1);\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * @param {string} elementId\n * @return {void}\n */\nDesignerHistory.changeStyle = function (elementId) {\n    var element = document.getElementById(elementId);\n    element.style.left = '530px';\n    element.style.top = '130px';\n    element.style.position = 'absolute';\n    element.style.zIndex = '103';\n    element.style.visibility = 'visible';\n    element.style.display = 'block';\n};\n\n/**\n * To show where,rename,aggregate,having forms to edit a object\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.historyEdit = function (index) {\n    gIndex = index;\n    var type = historyArray[index].getType();\n    if (type === 'Where') {\n        document.getElementById('eQuery').value = historyArray[index].getObj().getQuery();\n        document.getElementById('erel_opt').value = historyArray[index].getObj().getRelationOperator();\n        DesignerHistory.changeStyle('query_where');\n    } else if (type === 'Having') {\n        document.getElementById('hQuery').value = historyArray[index].getObj().getQuery();\n        document.getElementById('hrel_opt').value = historyArray[index].getObj().getRelationOperator();\n        document.getElementById('hoperator').value = historyArray[index].getObj().getOperator();\n        DesignerHistory.changeStyle('query_having');\n    } else if (type === 'Rename') {\n        document.getElementById('e_rename').value = historyArray[index].getObj().getRenameTo();\n        DesignerHistory.changeStyle('query_rename_to');\n    } else if (type === 'Aggregate') {\n        document.getElementById('e_operator').value = historyArray[index].getObj().getOperator();\n        DesignerHistory.changeStyle('query_Aggregate');\n    }\n};\n\n/**\n * Make changes in historyArray when Edit button is clicked\n * checks for the type of object and then sets the new value\n *\n * @param {string} type of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.edit = function (type) {\n    if (type === 'Rename') {\n        if (document.getElementById('e_rename').value !== '') {\n            historyArray[gIndex].getObj().setRenameTo(document.getElementById('e_rename').value);\n            document.getElementById('e_rename').value = '';\n        }\n        document.getElementById('query_rename_to').style.visibility = 'hidden';\n    } else if (type === 'Aggregate') {\n        if (document.getElementById('e_operator').value !== '---') {\n            historyArray[gIndex].getObj().setOperator(document.getElementById('e_operator').value);\n            document.getElementById('e_operator').value = '---';\n        }\n        document.getElementById('query_Aggregate').style.visibility = 'hidden';\n    } else if (type === 'Where') {\n        if (document.getElementById('erel_opt').value !== '--' && document.getElementById('eQuery').value !== '') {\n            historyArray[gIndex].getObj().setQuery(document.getElementById('eQuery').value);\n            historyArray[gIndex].getObj().setRelationOperator(document.getElementById('erel_opt').value);\n        }\n        document.getElementById('query_where').style.visibility = 'hidden';\n    } else if (type === 'Having') {\n        if (document.getElementById('hrel_opt').value !== '--' && document.getElementById('hQuery').value !== '') {\n            historyArray[gIndex].getObj().setQuery(document.getElementById('hQuery').value);\n            historyArray[gIndex].getObj().setRelationOperator(document.getElementById('hrel_opt').value);\n            historyArray[gIndex].getObj().setOperator(document.getElementById('hoperator').value);\n        }\n        document.getElementById('query_having').style.visibility = 'hidden';\n    }\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * history object closure\n *\n * @param nColumnName  name of the column on which conditions are put\n * @param nObj          object details(where,rename,orderby,groupby,aggregate)\n * @param nTab          table name of the column on which conditions are applied\n * @param nObjNo       object no used for inner join\n * @param nType         type of object\n *\n */\nDesignerHistory.HistoryObj = function (nColumnName, nObj, nTab, nObjNo, nType) {\n    var andOr;\n    var obj;\n    var tab;\n    var columnName;\n    var objNo;\n    var type;\n    this.setColumnName = function (nColumnName) {\n        columnName = nColumnName;\n    };\n    this.getColumnName = function () {\n        return columnName;\n    };\n    this.setAndOr = function (nAndOr) {\n        andOr = nAndOr;\n    };\n    this.getAndOr = function () {\n        return andOr;\n    };\n    this.getRelation = function () {\n        return andOr;\n    };\n    this.setObj = function (nObj) {\n        obj = nObj;\n    };\n    this.getObj = function () {\n        return obj;\n    };\n    this.setTab = function (nTab) {\n        tab = nTab;\n    };\n    this.getTab = function () {\n        return tab;\n    };\n    this.setObjNo = function (nObjNo) {\n        objNo = nObjNo;\n    };\n    this.getObjNo = function () {\n        return objNo;\n    };\n    this.setType = function (nType) {\n        type = nType;\n    };\n    this.getType = function () {\n        return type;\n    };\n    this.setObjNo(nObjNo);\n    this.setTab(nTab);\n    this.setAndOr(0);\n    this.setObj(nObj);\n    this.setColumnName(nColumnName);\n    this.setType(nType);\n};\n\n/**\n * where object closure, makes an object with all information of where\n *\n * @param nRelationOperator type of relation operator to be applied\n * @param nQuery             stores value of value/sub-query\n *\n */\n\nDesignerHistory.Where = function (nRelationOperator, nQuery) {\n    var relationOperator;\n    var query;\n    this.setRelationOperator = function (nRelationOperator) {\n        relationOperator = nRelationOperator;\n    };\n    this.setQuery = function (nQuery) {\n        query = nQuery;\n    };\n    this.getQuery = function () {\n        return query;\n    };\n    this.getRelationOperator = function () {\n        return relationOperator;\n    };\n    this.setQuery(nQuery);\n    this.setRelationOperator(nRelationOperator);\n};\n\n/**\n * Orderby object closure\n *\n * @param nOrder order, ASC or DESC\n */\nDesignerHistory.OrderBy = function (nOrder) {\n    var order;\n    this.setOrder = function (nOrder) {\n        order = nOrder;\n    };\n    this.getOrder = function () {\n        return order;\n    };\n    this.setOrder(nOrder);\n};\n\n/**\n * Having object closure, makes an object with all information of where\n *\n * @param nRelationOperator type of relation operator to be applied\n * @param nQuery             stores value of value/sub-query\n * @param nOperator          operator\n */\nDesignerHistory.Having = function (nRelationOperator, nQuery, nOperator) {\n    var relationOperator;\n    var query;\n    var operator;\n    this.setOperator = function (nOperator) {\n        operator = nOperator;\n    };\n    this.setRelationOperator = function (nRelationOperator) {\n        relationOperator = nRelationOperator;\n    };\n    this.setQuery = function (nQuery) {\n        query = nQuery;\n    };\n    this.getQuery = function () {\n        return query;\n    };\n    this.getRelationOperator = function () {\n        return relationOperator;\n    };\n    this.getOperator = function () {\n        return operator;\n    };\n    this.setQuery(nQuery);\n    this.setRelationOperator(nRelationOperator);\n    this.setOperator(nOperator);\n};\n\n/**\n * rename object closure,makes an object with all information of rename\n *\n * @param nRenameTo new name information\n *\n */\nDesignerHistory.Rename = function (nRenameTo) {\n    var renameTo;\n    this.setRenameTo = function (nRenameTo) {\n        renameTo = nRenameTo;\n    };\n    this.getRenameTo = function () {\n        return renameTo;\n    };\n    this.setRenameTo(nRenameTo);\n};\n\n/**\n * aggregate object closure\n *\n * @param nOperator aggregate operator\n *\n */\nDesignerHistory.Aggregate = function (nOperator) {\n    var operator;\n    this.setOperator = function (nOperator) {\n        operator = nOperator;\n    };\n    this.getOperator = function () {\n        return operator;\n    };\n    this.setOperator(nOperator);\n};\n\n/**\n * This function returns unique element from an array\n *\n * @param arrayName array from which duplicate elem are to be removed.\n * @return unique array\n */\n\nDesignerHistory.unique = function (arrayName) {\n    var newArray = [];\n    uniquetop:\n    for (var i = 0; i < arrayName.length; i++) {\n        var newArrayLength = newArray.length;\n        for (var j = 0; j < newArrayLength; j++) {\n            if (newArray[j] === arrayName[i]) {\n                continue uniquetop;\n            }\n        }\n        newArray[newArrayLength] = arrayName[i];\n    }\n    return newArray;\n};\n\n/**\n * This function takes in array and a value as input and returns 1 if values is present in array\n * else returns -1\n *\n * @param arrayName array\n * @param value  value which is to be searched in the array\n */\n\nDesignerHistory.found = function (arrayName, value) {\n    var arrayNameLength = arrayName.length;\n    for (var i = 0; i < arrayNameLength; i++) {\n        if (arrayName[i] === value) {\n            return 1;\n        }\n    }\n    return -1;\n};\n\n/**\n * This function concatenates two array\n *\n * @param {object} add array elements of which are pushed in\n * @param {obj[]} arr array in which elements are added\n *\n * @return {obj[]}\n */\nDesignerHistory.addArray = function (add, arr) {\n    var addLength = add.length;\n    for (var i = 0; i < addLength; i++) {\n        arr.push(add[i]);\n    }\n    return arr;\n};\n\n/**\n * This function removes all elements present in one array from the other.\n *\n * @param {object} rem array from which each element is removed from other array.\n * @param {obj[]} arr array from which elements are removed.\n *\n * @return {obj[]}\n *\n */\nDesignerHistory.removeArray = function (rem, arr) {\n    var remLength = rem.length;\n    for (var i = 0; i < remLength; i++) {\n        var arrLength = arr.length;\n        for (var j = 0; j < arrLength; j++) {\n            if (rem[i] === arr[j]) {\n                arr.splice(j, 1);\n            }\n        }\n    }\n    return arr;\n};\n\n/**\n * This function builds the groupby clause from history object\n * @return {string}\n */\nDesignerHistory.queryGroupBy = function () {\n    var i;\n    var str = '';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'GroupBy') {\n            str += '`' + historyArray[i].getColumnName() + '`, ';\n        }\n    }\n    str = str.substring(0, str.length - 2);\n    return str;\n};\n\n/**\n * This function builds the Having clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryHaving = function () {\n    var i;\n    var and = '(';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'Having') {\n            if (historyArray[i].getObj().getOperator() !== 'None') {\n                and += historyArray[i].getObj().getOperator() + '(`' + historyArray[i].getColumnName() + '`) ' + historyArray[i].getObj().getRelationOperator();\n                and += ' ' + historyArray[i].getObj().getQuery() + ', ';\n            } else {\n                and += '`' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ', ';\n            }\n        }\n    }\n    if (and === '(') {\n        and = '';\n    } else {\n        and = and.substring(0, and.length - 2) + ')';\n    }\n    return and;\n};\n\n\n/**\n * This function builds the orderby clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryOrderBy = function () {\n    var i;\n    var str = '';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'OrderBy') {\n            str += '`' + historyArray[i].getColumnName() + '` ' +\n                historyArray[i].getObj().getOrder() + ', ';\n        }\n    }\n    str = str.substring(0, str.length - 2);\n    return str;\n};\n\n\n/**\n * This function builds the Where clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryWhere = function () {\n    var i;\n    var and = '(';\n    var or = '(';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'Where') {\n            if (historyArray[i].getAndOr() === 0) {\n                and += '( `' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ')';\n                and += ' AND ';\n            } else {\n                or += '( `' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ')';\n                or += ' OR ';\n            }\n        }\n    }\n    if (or !== '(') {\n        or = or.substring(0, (or.length - 4)) + ')';\n    } else {\n        or = '';\n    }\n    if (and !== '(') {\n        and = and.substring(0, (and.length - 5)) + ')';\n    } else {\n        and = '';\n    }\n    if (or !== '') {\n        and = and + ' OR ' + or + ' )';\n    }\n    return and;\n};\n\nDesignerHistory.checkAggregate = function (idThis) {\n    var i;\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        var temp = '`' + historyArray[i].getTab() + '`.`' + historyArray[i].getColumnName() + '`';\n        if (temp === idThis && historyArray[i].getType() === 'Aggregate') {\n            return historyArray[i].getObj().getOperator() + '(' + idThis + ')';\n        }\n    }\n    return '';\n};\n\nDesignerHistory.checkRename = function (idThis) {\n    var i;\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        var temp = '`' + historyArray[i].getTab() + '`.`' + historyArray[i].getColumnName() + '`';\n        if (temp === idThis && historyArray[i].getType() === 'Rename') {\n            return ' AS `' + historyArray[i].getObj().getRenameTo() + '`';\n        }\n    }\n    return '';\n};\n\n/**\n * This function builds from clause of query\n * makes automatic joins.\n *\n * @return {string}\n */\nDesignerHistory.queryFrom = function () {\n    var i;\n    var tabLeft = [];\n    var tabUsed = [];\n    var tTabLeft = [];\n    var temp;\n    var query = '';\n    var quer = '';\n    var parts = [];\n    var tArray = [];\n    tArray = window.fromArray;\n    var K = 0;\n    var k;\n    var key;\n    var key2;\n    var key3;\n    var parts1;\n\n    // the constraints that have been used in the LEFT JOIN\n    var constraintsAdded = [];\n\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        window.fromArray.push(historyArray[i].getTab());\n    }\n    window.fromArray = DesignerHistory.unique(window.fromArray);\n    tabLeft = window.fromArray;\n    temp = tabLeft.shift();\n    quer = '`' + temp + '`';\n    tabUsed.push(temp);\n\n    // if master table (key2) matches with tab used get all keys and check if tab_left matches\n    // after this check if master table (key2) matches with tab left then check if any foreign matches with master .\n    for (i = 0; i < 2; i++) {\n        for (K in window.contr) {\n            for (key in window.contr[K]) {// contr name\n                for (key2 in window.contr[K][key]) {// table name\n                    parts = key2.split('.');\n                    if (DesignerHistory.found(tabUsed, parts[1]) > 0) {\n                        for (key3 in window.contr[K][key][key2]) {\n                            parts1 = window.contr[K][key][key2][key3][0].split('.');\n                            if (DesignerHistory.found(tabLeft, parts1[1]) > 0) {\n                                if (DesignerHistory.found(constraintsAdded, key) > 0) {\n                                    query += ' AND ' + '`' + parts[1] + '`.`' + key3 + '` = ';\n                                    query += '`' + parts1[1] + '`.`' + window.contr[K][key][key2][key3][1] + '` ';\n                                } else {\n                                    query += '\\n' + 'LEFT JOIN ';\n                                    query += '`' + parts[1] + '` ON ';\n                                    query += '`' + parts1[1] + '`.`' + window.contr[K][key][key2][key3][1] + '` = ';\n                                    query += '`' + parts[1] + '`.`' + key3 + '` ';\n\n                                    constraintsAdded.push(key);\n                                }\n                                tTabLeft.push(parts[1]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        K = 0;\n        tTabLeft = DesignerHistory.unique(tTabLeft);\n        tabUsed = DesignerHistory.addArray(tTabLeft, tabUsed);\n        tabLeft = DesignerHistory.removeArray(tTabLeft, tabLeft);\n        tTabLeft = [];\n        for (K in window.contr) {\n            for (key in window.contr[K]) {\n                for (key2 in window.contr[K][key]) {// table name\n                    parts = key2.split('.');\n                    if (DesignerHistory.found(tabLeft, parts[1]) > 0) {\n                        for (key3 in window.contr[K][key][key2]) {\n                            parts1 = window.contr[K][key][key2][key3][0].split('.');\n                            if (DesignerHistory.found(tabUsed, parts1[1]) > 0) {\n                                if (DesignerHistory.found(constraintsAdded, key) > 0) {\n                                    query += ' AND ' + '`' + parts[1] + '`.`' + key3 + '` = ';\n                                    query += '`' + parts1[1] + '`.`' + window.contr[K][key][key2][key3][1] + '` ';\n                                } else {\n                                    query += '\\n' + 'LEFT JOIN ';\n                                    query += '`' + parts[1] + '` ON ';\n                                    query += '`' + parts1[1] + '`.`' + window.contr[K][key][key2][key3][1] + '` = ';\n                                    query += '`' + parts[1] + '`.`' + key3 + '` ';\n\n                                    constraintsAdded.push(key);\n                                }\n                                tTabLeft.push(parts[1]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        tTabLeft = DesignerHistory.unique(tTabLeft);\n        tabUsed = DesignerHistory.addArray(tTabLeft, tabUsed);\n        tabLeft = DesignerHistory.removeArray(tTabLeft, tabLeft);\n        tTabLeft = [];\n    }\n    for (k in tabLeft) {\n        quer += ' , `' + tabLeft[k] + '`';\n    }\n    query = quer + query;\n    window.fromArray = tArray;\n    return query;\n};\n\n/**\n * This function is the main function for query building.\n * uses history object details for this.\n *\n * @uses DesignerHistory.queryWhere()\n * @uses DesignerHistory.queryGroupBy()\n * @uses DesignerHistory.queryHaving()\n * @uses DesignerHistory.queryOrderBy()\n */\nDesignerHistory.buildQuery = function () {\n    var qSelect = 'SELECT ';\n    var temp;\n    var selectFieldLength = selectField.length;\n    if (selectFieldLength > 0) {\n        for (var i = 0; i < selectFieldLength; i++) {\n            temp = DesignerHistory.checkAggregate(selectField[i]);\n            if (temp !== '') {\n                qSelect += temp;\n                temp = DesignerHistory.checkRename(selectField[i]);\n                qSelect += temp + ', ';\n            } else {\n                temp = DesignerHistory.checkRename(selectField[i]);\n                qSelect += selectField[i] + temp + ', ';\n            }\n        }\n        qSelect = qSelect.substring(0, qSelect.length - 2);\n    } else {\n        qSelect += '* ';\n    }\n\n    qSelect += '\\nFROM ' + DesignerHistory.queryFrom();\n\n    var qWhere = DesignerHistory.queryWhere();\n    if (qWhere !== '') {\n        qSelect += '\\nWHERE ' + qWhere;\n    }\n\n    var qGroupBy = DesignerHistory.queryGroupBy();\n    if (qGroupBy !== '') {\n        qSelect += '\\nGROUP BY ' + qGroupBy;\n    }\n\n    var qHaving = DesignerHistory.queryHaving();\n    if (qHaving !== '') {\n        qSelect += '\\nHAVING ' + qHaving;\n    }\n\n    var qOrderBy = DesignerHistory.queryOrderBy();\n    if (qOrderBy !== '') {\n        qSelect += '\\nORDER BY ' + qOrderBy;\n    }\n    $('#buildQuerySubmitButton').on('click', function () {\n        if (vqbEditor) {\n            var $elm = $('#buildQueryModal').find('textarea');\n            vqbEditor.save();\n            $elm.val(vqbEditor.getValue());\n        }\n        $('#vqb_form').trigger('submit');\n    });\n\n    $('#buildQueryModal').modal('show');\n    $('#buildQueryModalLabel').first().text('SELECT');\n    $('#buildQueryModal').on('shown.bs.modal', function () {\n        // Attach syntax highlighted editor to query dialog\n        /**\n         * @var $elm jQuery object containing the reference\n         *           to the query textarea.\n         */\n        var $elm = $('#buildQueryModal').find('textarea');\n        if (! vqbEditor) {\n            vqbEditor = Functions.getSqlEditor($elm);\n        }\n        if (vqbEditor) {\n            vqbEditor.setValue(qSelect);\n            vqbEditor.focus();\n        } else {\n            $elm.val(qSelect);\n            $elm.trigger('focus');\n        }\n    });\n};\n\nAJAX.registerTeardown('designer/history.js', function () {\n    vqbEditor = null;\n    historyArray = [];\n    selectField = [];\n    $('#ok_edit_rename').off('click');\n    $('#ok_edit_having').off('click');\n    $('#ok_edit_Aggr').off('click');\n    $('#ok_edit_where').off('click');\n});\n\nAJAX.registerOnload('designer/history.js', function () {\n    $('#ok_edit_rename').on('click', function () {\n        DesignerHistory.edit('Rename');\n    });\n    $('#ok_edit_having').on('click', function () {\n        DesignerHistory.edit('Having');\n    });\n    $('#ok_edit_Aggr').on('click', function () {\n        DesignerHistory.edit('Aggregate');\n    });\n    $('#ok_edit_where').on('click', function () {\n        DesignerHistory.edit('Where');\n    });\n    $('#ab').accordion({ collapsible: true, active: 'none' });\n});\n"],"names":["$","AJAX","Functions","getImageTag","DesignerHistory","window","historyArray","selectField","gIndex","vqbEditor","detail","index","type","getType","str","getColumnName","getObj","getRelationOperator","getQuery","getRenameTo","getOperator","getOrder","display","init","finit","i","j","k","sto","temp","getTab","historyArrayLength","length","getAndOr","themeImagePath","Messages","strColumnName","text","html","detailDescGroupBy","strDelete","detailDesc","strEdit","andOr","setAndOr","existingDiv","document","getElementById","innerHTML","accordion","historyDelete","fromArrayLength","fromArray","splice","changeStyle","elementId","element","style","left","top","position","zIndex","visibility","historyEdit","value","edit","setRenameTo","setOperator","setQuery","setRelationOperator","HistoryObj","nColumnName","nObj","nTab","nObjNo","nType","obj","tab","columnName","objNo","setColumnName","nAndOr","getRelation","setObj","setTab","setObjNo","getObjNo","setType","Where","nRelationOperator","nQuery","relationOperator","query","OrderBy","nOrder","order","setOrder","Having","nOperator","operator","Rename","nRenameTo","renameTo","Aggregate","unique","arrayName","newArray","uniquetop","newArrayLength","found","arrayNameLength","addArray","add","arr","addLength","push","removeArray","rem","remLength","arrLength","queryGroupBy","substring","queryHaving","and","queryOrderBy","queryWhere","or","checkAggregate","idThis","checkRename","queryFrom","tabLeft","tabUsed","tTabLeft","quer","parts","tArray","K","key","key2","key3","parts1","constraintsAdded","shift","contr","split","buildQuery","qSelect","selectFieldLength","qWhere","qGroupBy","qHaving","qOrderBy","on","$elm","find","save","val","getValue","trigger","modal","first","getSqlEditor","setValue","focus","registerTeardown","off","registerOnload","collapsible","active"],"sourceRoot":""}