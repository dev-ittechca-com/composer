{"version":3,"file":"designer/history.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/designer/history.js"],"sourcesContent":["/**\n * @fileoverview    function used in this file builds history tab and generates query.\n *\n * @requires    jQuery\n * @requires    move.js\n */\n\n/* global contr */ // js/designer/init.js\n/* global fromArray:writable */ // js/designer/move.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerHistory = {};\n\nvar historyArray = []; // Global array to store history objects\nvar selectField = [];  // Global array to store information for columns which are used in select clause\nvar gIndex;\nvar vqbEditor = null;\n\n/**\n * To display details of objects(where,rename,Having,aggregate,groupby,orderby,having)\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {string}\n */\nDesignerHistory.detail = function (index) {\n    var type = historyArray[index].getType();\n    var str;\n    if (type === 'Where') {\n        str = 'Where ' + historyArray[index].getColumnName() + historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n    } else if (type === 'Rename') {\n        str = 'Rename ' + historyArray[index].getColumnName() + ' To ' + historyArray[index].getObj().getRenameTo();\n    } else if (type === 'Aggregate') {\n        str = 'Select ' + historyArray[index].getObj().getOperator() + '( ' + historyArray[index].getColumnName() + ' )';\n    } else if (type === 'GroupBy') {\n        str = 'GroupBy ' + historyArray[index].getColumnName();\n    } else if (type === 'OrderBy') {\n        str = 'OrderBy ' + historyArray[index].getColumnName() + ' ' + historyArray[index].getObj().getOrder();\n    } else if (type === 'Having') {\n        str = 'Having ';\n        if (historyArray[index].getObj().getOperator() !== 'None') {\n            str += historyArray[index].getObj().getOperator() + '( ' + historyArray[index].getColumnName() + ' )';\n            str += historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n        } else {\n            str = 'Having ' + historyArray[index].getColumnName() + historyArray[index].getObj().getRelationOperator() + historyArray[index].getObj().getQuery();\n        }\n    }\n    return str;\n};\n\n/**\n * Sorts historyArray[] first,using table name as the key and then generates the HTML code for history tab,\n * clubbing all objects of same tables together\n * This function is called whenever changes are made in historyArray[]\n *\n *\n * @param {number} init starting index of unsorted array\n * @param {number} finit last index of unsorted array\n * @return {string}\n */\nDesignerHistory.display = function (init, finit) {\n    var str;\n    var i;\n    var j;\n    var k;\n    var sto;\n    var temp;\n    // this part sorts the history array based on table name,this is needed for clubbing all object of same name together.\n    for (i = init; i < finit; i++) {\n        sto = historyArray[i];\n        temp = historyArray[i].getTab();// + '.' + historyArray[i].getObjNo(); for Self JOINS\n        for (j = 0; j < i; j++) {\n            if (temp > (historyArray[j].getTab())) {// + '.' + historyArray[j].getObjNo())) { //for Self JOINS\n                for (k = i; k > j; k--) {\n                    historyArray[k] = historyArray[k - 1];\n                }\n                historyArray[j] = sto;\n                break;\n            }\n        }\n    }\n    // this part generates HTML code for history tab.adds delete,edit,and/or and detail features with objects.\n    str = ''; // string to store Html code for history tab\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        temp = historyArray[i].getTab(); // + '.' + historyArray[i].getObjNo(); for Self JOIN\n        str += '<h3 class=\"tiger\"><a href=\"#\">' + temp + '</a></h3>';\n        str += '<div class=\"toggle_container\">\\n';\n        while ((historyArray[i].getTab()) === temp) { // + '.' + historyArray[i].getObjNo()) === temp) {\n            str += '<div class=\"block\"> <table class=\"table table-sm w-auto mb-0\">';\n            str += '<thead><tr><td>';\n            if (historyArray[i].getAndOr()) {\n                str += '<img src=\"' + themeImagePath + 'designer/or_icon.png\" onclick=\"DesignerHistory.andOr(' + i + ')\" title=\"OR\"></td>';\n            } else {\n                str += '<img src=\"' + themeImagePath + 'designer/and_icon.png\" onclick=\"DesignerHistory.andOr(' + i + ')\" title=\"AND\"></td>';\n            }\n            str += '<td style=\"padding-left: 5px;\" class=\"text-end\">' + Functions.getImage('b_sbrowse', Messages.strColumnName) + '</td>' +\n                '<td width=\"175\" style=\"padding-left: 5px\">' + $('<div/>').text(historyArray[i].getColumnName()).html() + '<td>';\n            if (historyArray[i].getType() === 'GroupBy' || historyArray[i].getType() === 'OrderBy') {\n                var detailDescGroupBy = $('<div/>').text(DesignerHistory.detail(i)).html();\n                str += '<td class=\"text-center\">' + Functions.getImage('s_info', DesignerHistory.detail(i)) + '</td>' +\n                    '<td title=\"' + detailDescGroupBy + '\">' + historyArray[i].getType() + '</td>' +\n                    '<td onclick=DesignerHistory.historyDelete(' + i + ')>' + Functions.getImage('b_drop', Messages.strDelete) + '</td>';\n            } else {\n                var detailDesc = $('<div/>').text(DesignerHistory.detail(i)).html();\n                str += '<td class=\"text-center\">' + Functions.getImage('s_info', DesignerHistory.detail(i)) + '</td>' +\n                    '<td title=\"' + detailDesc + '\">' + historyArray[i].getType() + '</td>' +\n                    '<td onclick=DesignerHistory.historyEdit(' + i + ')>' + Functions.getImage('b_edit', Messages.strEdit) + '</td>' +\n                    '<td onclick=DesignerHistory.historyDelete(' + i + ')>' + Functions.getImage('b_drop', Messages.strDelete) + '</td>';\n            }\n            str += '</tr></thead>';\n            i++;\n            if (i >= historyArrayLength) {\n                break;\n            }\n            str += '</table></div>';\n        }\n        i--;\n        str += '</div>';\n    }\n    return str;\n};\n\n/**\n * To change And/Or relation in history tab\n *\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.andOr = function (index) {\n    if (historyArray[index].getAndOr()) {\n        historyArray[index].setAndOr(0);\n    } else {\n        historyArray[index].setAndOr(1);\n    }\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * Deletes entry in historyArray\n *\n * @param {number} index of historyArray[] which is to be deleted\n * @return {void}\n */\nDesignerHistory.historyDelete = function (index) {\n    var fromArrayLength = fromArray.length;\n    for (var k = 0; k < fromArrayLength; k++) {\n        if (fromArray[k] === historyArray[index].getTab()) {\n            fromArray.splice(k, 1);\n            break;\n        }\n    }\n    historyArray.splice(index, 1);\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * @param {string} elementId\n * @return {void}\n */\nDesignerHistory.changeStyle = function (elementId) {\n    var element = document.getElementById(elementId);\n    element.style.left =  '530px';\n    element.style.top  = '130px';\n    element.style.position  = 'absolute';\n    element.style.zIndex = '103';\n    element.style.visibility = 'visible';\n    element.style.display = 'block';\n};\n\n/**\n * To show where,rename,aggregate,having forms to edit a object\n *\n * @param {number} index index of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.historyEdit = function (index) {\n    gIndex = index;\n    var type = historyArray[index].getType();\n    if (type === 'Where') {\n        document.getElementById('eQuery').value = historyArray[index].getObj().getQuery();\n        document.getElementById('erel_opt').value = historyArray[index].getObj().getRelationOperator();\n        DesignerHistory.changeStyle('query_where');\n    } else if (type === 'Having') {\n        document.getElementById('hQuery').value = historyArray[index].getObj().getQuery();\n        document.getElementById('hrel_opt').value = historyArray[index].getObj().getRelationOperator();\n        document.getElementById('hoperator').value = historyArray[index].getObj().getOperator();\n        DesignerHistory.changeStyle('query_having');\n    } else if (type === 'Rename') {\n        document.getElementById('e_rename').value = historyArray[index].getObj().getRenameTo();\n        DesignerHistory.changeStyle('query_rename_to');\n    } else if (type === 'Aggregate') {\n        document.getElementById('e_operator').value = historyArray[index].getObj().getOperator();\n        DesignerHistory.changeStyle('query_Aggregate');\n    }\n};\n\n/**\n * Make changes in historyArray when Edit button is clicked\n * checks for the type of object and then sets the new value\n *\n * @param {string} type of historyArray where change is to be made\n * @return {void}\n */\nDesignerHistory.edit = function (type) {\n    if (type === 'Rename') {\n        if (document.getElementById('e_rename').value !== '') {\n            historyArray[gIndex].getObj().setRenameTo(document.getElementById('e_rename').value);\n            document.getElementById('e_rename').value = '';\n        }\n        document.getElementById('query_rename_to').style.visibility = 'hidden';\n    } else if (type === 'Aggregate') {\n        if (document.getElementById('e_operator').value !== '---') {\n            historyArray[gIndex].getObj().setOperator(document.getElementById('e_operator').value);\n            document.getElementById('e_operator').value = '---';\n        }\n        document.getElementById('query_Aggregate').style.visibility = 'hidden';\n    } else if (type === 'Where') {\n        if (document.getElementById('erel_opt').value !== '--' && document.getElementById('eQuery').value !== '') {\n            historyArray[gIndex].getObj().setQuery(document.getElementById('eQuery').value);\n            historyArray[gIndex].getObj().setRelationOperator(document.getElementById('erel_opt').value);\n        }\n        document.getElementById('query_where').style.visibility = 'hidden';\n    } else if (type === 'Having') {\n        if (document.getElementById('hrel_opt').value !== '--' && document.getElementById('hQuery').value !== '') {\n            historyArray[gIndex].getObj().setQuery(document.getElementById('hQuery').value);\n            historyArray[gIndex].getObj().setRelationOperator(document.getElementById('hrel_opt').value);\n            historyArray[gIndex].getObj().setOperator(document.getElementById('hoperator').value);\n        }\n        document.getElementById('query_having').style.visibility = 'hidden';\n    }\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(0, 0);\n    $('#ab').accordion('refresh');\n};\n\n/**\n * history object closure\n *\n * @param nColumnName  name of the column on which conditions are put\n * @param nObj          object details(where,rename,orderby,groupby,aggregate)\n * @param nTab          table name of the column on which conditions are applied\n * @param nObjNo       object no used for inner join\n * @param nType         type of object\n *\n */\nDesignerHistory.HistoryObj = function (nColumnName, nObj, nTab, nObjNo, nType) {\n    var andOr;\n    var obj;\n    var tab;\n    var columnName;\n    var objNo;\n    var type;\n    this.setColumnName = function (nColumnName) {\n        columnName = nColumnName;\n    };\n    this.getColumnName = function () {\n        return columnName;\n    };\n    this.setAndOr = function (nAndOr) {\n        andOr = nAndOr;\n    };\n    this.getAndOr = function () {\n        return andOr;\n    };\n    this.getRelation = function () {\n        return andOr;\n    };\n    this.setObj = function (nObj) {\n        obj = nObj;\n    };\n    this.getObj = function () {\n        return obj;\n    };\n    this.setTab = function (nTab) {\n        tab = nTab;\n    };\n    this.getTab = function () {\n        return tab;\n    };\n    this.setObjNo = function (nObjNo) {\n        objNo = nObjNo;\n    };\n    this.getObjNo = function () {\n        return objNo;\n    };\n    this.setType = function (nType) {\n        type = nType;\n    };\n    this.getType = function () {\n        return type;\n    };\n    this.setObjNo(nObjNo);\n    this.setTab(nTab);\n    this.setAndOr(0);\n    this.setObj(nObj);\n    this.setColumnName(nColumnName);\n    this.setType(nType);\n};\n\n/**\n * where object closure, makes an object with all information of where\n *\n * @param nRelationOperator type of relation operator to be applied\n * @param nQuery             stores value of value/sub-query\n *\n */\n\nDesignerHistory.Where = function (nRelationOperator, nQuery) {\n    var relationOperator;\n    var query;\n    this.setRelationOperator = function (nRelationOperator) {\n        relationOperator = nRelationOperator;\n    };\n    this.setQuery = function (nQuery) {\n        query = nQuery;\n    };\n    this.getQuery = function () {\n        return query;\n    };\n    this.getRelationOperator = function () {\n        return relationOperator;\n    };\n    this.setQuery(nQuery);\n    this.setRelationOperator(nRelationOperator);\n};\n\n/**\n * Orderby object closure\n *\n * @param nOrder order, ASC or DESC\n */\nDesignerHistory.OrderBy = function (nOrder) {\n    var order;\n    this.setOrder = function (nOrder) {\n        order = nOrder;\n    };\n    this.getOrder = function () {\n        return order;\n    };\n    this.setOrder(nOrder);\n};\n\n/**\n * Having object closure, makes an object with all information of where\n *\n * @param nRelationOperator type of relation operator to be applied\n * @param nQuery             stores value of value/sub-query\n * @param nOperator          operator\n */\nDesignerHistory.Having = function (nRelationOperator, nQuery, nOperator) {\n    var relationOperator;\n    var query;\n    var operator;\n    this.setOperator = function (nOperator) {\n        operator = nOperator;\n    };\n    this.setRelationOperator = function (nRelationOperator) {\n        relationOperator = nRelationOperator;\n    };\n    this.setQuery = function (nQuery) {\n        query = nQuery;\n    };\n    this.getQuery = function () {\n        return query;\n    };\n    this.getRelationOperator = function () {\n        return relationOperator;\n    };\n    this.getOperator = function () {\n        return operator;\n    };\n    this.setQuery(nQuery);\n    this.setRelationOperator(nRelationOperator);\n    this.setOperator(nOperator);\n};\n\n/**\n * rename object closure,makes an object with all information of rename\n *\n * @param nRenameTo new name information\n *\n */\nDesignerHistory.Rename = function (nRenameTo) {\n    var renameTo;\n    this.setRenameTo = function (nRenameTo) {\n        renameTo = nRenameTo;\n    };\n    this.getRenameTo = function () {\n        return renameTo;\n    };\n    this.setRenameTo(nRenameTo);\n};\n\n/**\n * aggregate object closure\n *\n * @param nOperator aggregate operator\n *\n */\nDesignerHistory.Aggregate = function (nOperator) {\n    var operator;\n    this.setOperator = function (nOperator) {\n        operator = nOperator;\n    };\n    this.getOperator = function () {\n        return operator;\n    };\n    this.setOperator(nOperator);\n};\n\n/**\n * This function returns unique element from an array\n *\n * @param arrayName array from which duplicate elem are to be removed.\n * @return unique array\n */\n\nDesignerHistory.unique = function (arrayName) {\n    var newArray = [];\n    uniquetop:\n    for (var i = 0; i < arrayName.length; i++) {\n        var newArrayLength = newArray.length;\n        for (var j = 0; j < newArrayLength; j++) {\n            if (newArray[j] === arrayName[i]) {\n                continue uniquetop;\n            }\n        }\n        newArray[newArrayLength] = arrayName[i];\n    }\n    return newArray;\n};\n\n/**\n * This function takes in array and a value as input and returns 1 if values is present in array\n * else returns -1\n *\n * @param arrayName array\n * @param value  value which is to be searched in the array\n */\n\nDesignerHistory.found = function (arrayName, value) {\n    var arrayNameLength = arrayName.length;\n    for (var i = 0; i < arrayNameLength; i++) {\n        if (arrayName[i] === value) {\n            return 1;\n        }\n    }\n    return -1;\n};\n\n/**\n * This function concatenates two array\n *\n * @param {object} add array elements of which are pushed in\n * @param {obj[]} arr array in which elements are added\n *\n * @return {obj[]}\n */\nDesignerHistory.addArray = function (add, arr) {\n    var addLength = add.length;\n    for (var i = 0; i < addLength; i++) {\n        arr.push(add[i]);\n    }\n    return arr;\n};\n\n/**\n * This function removes all elements present in one array from the other.\n *\n * @param {object} rem array from which each element is removed from other array.\n * @param {obj[]} arr array from which elements are removed.\n *\n * @return {obj[]}\n *\n */\nDesignerHistory.removeArray = function (rem, arr) {\n    var remLength = rem.length;\n    for (var i = 0; i < remLength; i++) {\n        var arrLength = arr.length;\n        for (var j = 0; j < arrLength; j++) {\n            if (rem[i] === arr[j]) {\n                arr.splice(j, 1);\n            }\n        }\n    }\n    return arr;\n};\n\n/**\n * This function builds the groupby clause from history object\n * @return {string}\n */\nDesignerHistory.queryGroupBy = function () {\n    var i;\n    var str = '';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'GroupBy') {\n            str += '`' + historyArray[i].getColumnName() + '`, ';\n        }\n    }\n    str = str.substring(0, str.length - 2);\n    return str;\n};\n\n/**\n * This function builds the Having clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryHaving = function () {\n    var i;\n    var and = '(';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'Having') {\n            if (historyArray[i].getObj().getOperator() !== 'None') {\n                and += historyArray[i].getObj().getOperator() + '(`' + historyArray[i].getColumnName() + '`) ' + historyArray[i].getObj().getRelationOperator();\n                and += ' ' + historyArray[i].getObj().getQuery() + ', ';\n            } else {\n                and += '`' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ', ';\n            }\n        }\n    }\n    if (and === '(') {\n        and = '';\n    } else {\n        and = and.substring(0, and.length - 2) + ')';\n    }\n    return and;\n};\n\n\n/**\n * This function builds the orderby clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryOrderBy = function () {\n    var i;\n    var str = '';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'OrderBy') {\n            str += '`' + historyArray[i].getColumnName() + '` ' +\n                historyArray[i].getObj().getOrder() + ', ';\n        }\n    }\n    str = str.substring(0, str.length - 2);\n    return str;\n};\n\n\n/**\n * This function builds the Where clause from the history object.\n * @return {string}\n */\nDesignerHistory.queryWhere = function () {\n    var i;\n    var and = '(';\n    var or = '(';\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        if (historyArray[i].getType() === 'Where') {\n            if (historyArray[i].getAndOr() === 0) {\n                and += '( `' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ')';\n                and += ' AND ';\n            } else {\n                or += '( `' + historyArray[i].getColumnName() + '` ' + historyArray[i].getObj().getRelationOperator() + ' ' + historyArray[i].getObj().getQuery() + ')';\n                or += ' OR ';\n            }\n        }\n    }\n    if (or !== '(') {\n        or = or.substring(0, (or.length - 4)) + ')';\n    } else {\n        or = '';\n    }\n    if (and !== '(') {\n        and = and.substring(0, (and.length - 5)) + ')';\n    } else {\n        and = '';\n    }\n    if (or !== '') {\n        and = and + ' OR ' + or + ' )';\n    }\n    return and;\n};\n\nDesignerHistory.checkAggregate = function (idThis) {\n    var i;\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        var temp = '`' + historyArray[i].getTab() + '`.`' + historyArray[i].getColumnName() + '`';\n        if (temp === idThis && historyArray[i].getType() === 'Aggregate') {\n            return historyArray[i].getObj().getOperator() + '(' + idThis + ')';\n        }\n    }\n    return '';\n};\n\nDesignerHistory.checkRename = function (idThis) {\n    var i;\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        var temp = '`' + historyArray[i].getTab() + '`.`' + historyArray[i].getColumnName() + '`';\n        if (temp === idThis && historyArray[i].getType() === 'Rename') {\n            return ' AS `' + historyArray[i].getObj().getRenameTo() + '`';\n        }\n    }\n    return '';\n};\n\n/**\n  * This function builds from clause of query\n  * makes automatic joins.\n  *\n  * @return {string}\n  */\nDesignerHistory.queryFrom = function () {\n    var i;\n    var tabLeft = [];\n    var tabUsed = [];\n    var tTabLeft = [];\n    var temp;\n    var query = '';\n    var quer = '';\n    var parts = [];\n    var tArray = [];\n    tArray = fromArray;\n    var K = 0;\n    var k;\n    var key;\n    var key2;\n    var key3;\n    var parts1;\n\n    // the constraints that have been used in the LEFT JOIN\n    var constraintsAdded = [];\n\n    var historyArrayLength = historyArray.length;\n    for (i = 0; i < historyArrayLength; i++) {\n        fromArray.push(historyArray[i].getTab());\n    }\n    fromArray = DesignerHistory.unique(fromArray);\n    tabLeft = fromArray;\n    temp = tabLeft.shift();\n    quer = '`' + temp + '`';\n    tabUsed.push(temp);\n\n    // if master table (key2) matches with tab used get all keys and check if tab_left matches\n    // after this check if master table (key2) matches with tab left then check if any foreign matches with master .\n    for (i = 0; i < 2; i++) {\n        for (K in contr) {\n            for (key in contr[K]) {// contr name\n                for (key2 in contr[K][key]) {// table name\n                    parts = key2.split('.');\n                    if (DesignerHistory.found(tabUsed, parts[1]) > 0) {\n                        for (key3 in contr[K][key][key2]) {\n                            parts1 = contr[K][key][key2][key3][0].split('.');\n                            if (DesignerHistory.found(tabLeft, parts1[1]) > 0) {\n                                if (DesignerHistory.found(constraintsAdded, key) > 0) {\n                                    query += ' AND ' + '`' + parts[1] + '`.`' + key3 + '` = ';\n                                    query += '`' + parts1[1] + '`.`' + contr[K][key][key2][key3][1] + '` ';\n                                } else {\n                                    query += '\\n' + 'LEFT JOIN ';\n                                    query += '`' + parts[1] + '` ON ';\n                                    query += '`' + parts1[1] + '`.`' + contr[K][key][key2][key3][1] + '` = ';\n                                    query += '`' + parts[1] + '`.`' + key3 + '` ';\n\n                                    constraintsAdded.push(key);\n                                }\n                                tTabLeft.push(parts[1]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        K = 0;\n        tTabLeft = DesignerHistory.unique(tTabLeft);\n        tabUsed = DesignerHistory.addArray(tTabLeft, tabUsed);\n        tabLeft = DesignerHistory.removeArray(tTabLeft, tabLeft);\n        tTabLeft = [];\n        for (K in contr) {\n            for (key in contr[K]) {\n                for (key2 in contr[K][key]) {// table name\n                    parts = key2.split('.');\n                    if (DesignerHistory.found(tabLeft, parts[1]) > 0) {\n                        for (key3 in contr[K][key][key2]) {\n                            parts1 = contr[K][key][key2][key3][0].split('.');\n                            if (DesignerHistory.found(tabUsed, parts1[1]) > 0) {\n                                if (DesignerHistory.found(constraintsAdded, key) > 0) {\n                                    query += ' AND ' + '`' + parts[1] + '`.`' + key3 + '` = ';\n                                    query += '`' + parts1[1] + '`.`' + contr[K][key][key2][key3][1] + '` ';\n                                } else {\n                                    query += '\\n' + 'LEFT JOIN ';\n                                    query += '`' + parts[1] + '` ON ';\n                                    query += '`' + parts1[1] + '`.`' + contr[K][key][key2][key3][1] + '` = ';\n                                    query += '`' + parts[1] + '`.`' + key3 + '` ';\n\n                                    constraintsAdded.push(key);\n                                }\n                                tTabLeft.push(parts[1]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        tTabLeft = DesignerHistory.unique(tTabLeft);\n        tabUsed = DesignerHistory.addArray(tTabLeft, tabUsed);\n        tabLeft = DesignerHistory.removeArray(tTabLeft, tabLeft);\n        tTabLeft = [];\n    }\n    for (k in tabLeft) {\n        quer += ' , `' + tabLeft[k] + '`';\n    }\n    query = quer + query;\n    fromArray = tArray;\n    return query;\n};\n\n/**\n * This function is the main function for query building.\n * uses history object details for this.\n *\n * @uses DesignerHistory.queryWhere()\n * @uses DesignerHistory.queryGroupBy()\n * @uses DesignerHistory.queryHaving()\n * @uses DesignerHistory.queryOrderBy()\n */\nDesignerHistory.buildQuery = function () {\n    var qSelect = 'SELECT ';\n    var temp;\n    var selectFieldLength = selectField.length;\n    if (selectFieldLength > 0) {\n        for (var i = 0; i < selectFieldLength; i++) {\n            temp = DesignerHistory.checkAggregate(selectField[i]);\n            if (temp !== '') {\n                qSelect += temp;\n                temp = DesignerHistory.checkRename(selectField[i]);\n                qSelect += temp + ', ';\n            } else {\n                temp = DesignerHistory.checkRename(selectField[i]);\n                qSelect += selectField[i] + temp + ', ';\n            }\n        }\n        qSelect = qSelect.substring(0, qSelect.length - 2);\n    } else {\n        qSelect += '* ';\n    }\n\n    qSelect += '\\nFROM ' + DesignerHistory.queryFrom();\n\n    var qWhere = DesignerHistory.queryWhere();\n    if (qWhere !== '') {\n        qSelect += '\\nWHERE ' + qWhere;\n    }\n\n    var qGroupBy = DesignerHistory.queryGroupBy();\n    if (qGroupBy !== '') {\n        qSelect += '\\nGROUP BY ' + qGroupBy;\n    }\n\n    var qHaving = DesignerHistory.queryHaving();\n    if (qHaving !== '') {\n        qSelect += '\\nHAVING ' + qHaving;\n    }\n\n    var qOrderBy = DesignerHistory.queryOrderBy();\n    if (qOrderBy !== '') {\n        qSelect += '\\nORDER BY ' + qOrderBy;\n    }\n    $('#buildQuerySubmitButton').on('click', function () {\n        if (vqbEditor) {\n            var $elm = $('#buildQueryModal').find('textarea');\n            vqbEditor.save();\n            $elm.val(vqbEditor.getValue());\n        }\n        $('#vqb_form').trigger('submit');\n    });\n\n    $('#buildQueryModal').modal('show');\n    $('#buildQueryModalLabel').first().text('SELECT');\n    $('#buildQueryModal').on('shown.bs.modal', function () {\n        // Attach syntax highlighted editor to query dialog\n        /**\n         * @var $elm jQuery object containing the reference\n         *           to the query textarea.\n         */\n        var $elm = $('#buildQueryModal').find('textarea');\n        if (! vqbEditor) {\n            vqbEditor = Functions.getSqlEditor($elm);\n        }\n        if (vqbEditor) {\n            vqbEditor.setValue(qSelect);\n            vqbEditor.focus();\n        } else {\n            $elm.val(qSelect);\n            $elm.trigger('focus');\n        }\n    });\n};\n\nAJAX.registerTeardown('designer/history.js', function () {\n    vqbEditor = null;\n    historyArray = [];\n    selectField = [];\n    $('#ok_edit_rename').off('click');\n    $('#ok_edit_having').off('click');\n    $('#ok_edit_Aggr').off('click');\n    $('#ok_edit_where').off('click');\n});\n\nAJAX.registerOnload('designer/history.js', function () {\n    $('#ok_edit_rename').on('click', function () {\n        DesignerHistory.edit('Rename');\n    });\n    $('#ok_edit_having').on('click', function () {\n        DesignerHistory.edit('Having');\n    });\n    $('#ok_edit_Aggr').on('click', function () {\n        DesignerHistory.edit('Aggregate');\n    });\n    $('#ok_edit_where').on('click', function () {\n        DesignerHistory.edit('Where');\n    });\n    $('#ab').accordion({ collapsible : true, active : 'none' });\n});\n"],"names":["DesignerHistory","historyArray","selectField","gIndex","vqbEditor","detail","index","type","getType","str","getColumnName","getObj","getRelationOperator","getQuery","getRenameTo","getOperator","getOrder","display","init","finit","i","j","k","sto","temp","getTab","historyArrayLength","length","getAndOr","themeImagePath","Functions","getImage","Messages","strColumnName","$","text","html","detailDescGroupBy","strDelete","detailDesc","strEdit","andOr","setAndOr","existingDiv","document","getElementById","innerHTML","accordion","historyDelete","fromArrayLength","fromArray","splice","changeStyle","elementId","element","style","left","top","position","zIndex","visibility","historyEdit","value","edit","setRenameTo","setOperator","setQuery","setRelationOperator","HistoryObj","nColumnName","nObj","nTab","nObjNo","nType","obj","tab","columnName","objNo","setColumnName","nAndOr","getRelation","setObj","setTab","setObjNo","getObjNo","setType","Where","nRelationOperator","nQuery","relationOperator","query","OrderBy","nOrder","order","setOrder","Having","nOperator","operator","Rename","nRenameTo","renameTo","Aggregate","unique","arrayName","newArray","uniquetop","newArrayLength","found","arrayNameLength","addArray","add","arr","addLength","push","removeArray","rem","remLength","arrLength","queryGroupBy","substring","queryHaving","and","queryOrderBy","queryWhere","or","checkAggregate","idThis","checkRename","queryFrom","tabLeft","tabUsed","tTabLeft","quer","parts","tArray","K","key","key2","key3","parts1","constraintsAdded","shift","contr","split","buildQuery","qSelect","selectFieldLength","qWhere","qGroupBy","qHaving","qOrderBy","on","$elm","find","save","val","getValue","trigger","modal","first","getSqlEditor","setValue","focus","AJAX","registerTeardown","off","registerOnload","collapsible","active"],"sourceRoot":""}