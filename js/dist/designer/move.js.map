{"version":3,"file":"designer/move.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/designer/move.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\n\n/**\n * @package PhpMyAdmin-Designer\n */\n\n/* global DesignerObjects */ // js/designer/objects.js\n/* global DesignerHistory, historyArray, selectField */ // js/designer/history.js\n/* global DesignerPage */ // js/designer/page.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerMove = {};\nwindow.DesignerMove = DesignerMove;\n\nvar change = 0; // variable to track any change in designer layout.\nvar showRelationLines = true;\nvar alwaysShowText = false;\n\nwindow.AJAX.registerTeardown('designer/move.js', function () {\n    $(document).off('fullscreenchange');\n    $('#selflink').show();\n});\n\nwindow.AJAX.registerOnload('designer/move.js', function () {\n    var $content = $('#page_content');\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n\n    $content.css({ 'margin-left': '3px' });\n    $(document).on('fullscreenchange', function () {\n        if (! document.fullscreenElement) {\n            $content.removeClass('content_fullscreen')\n                .css({ 'width': 'auto', 'height': 'auto' });\n            $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n            $img.attr('src', $img.data('enter'))\n                .attr('title', $span.data('enter'));\n            $span.text($span.data('enter'));\n\n            // Saving the fullscreen state in config when\n            // designer exists fullscreen mode via ESC key\n\n            var valueSent = 'off';\n            DesignerMove.saveValueInConfig('full_screen', valueSent);\n        }\n    });\n\n    $('#selflink').hide();\n});\n\nDesignerMove.markSaved = function () {\n    change = 0;\n    $('#saved_state').text('');\n};\n\nDesignerMove.markUnsaved = function () {\n    change = 1;\n    $('#saved_state').text('*');\n};\n\nvar mainDirection = $('html').attr('dir') === 'rtl' ? 'right' : 'left';\n// Will be used to multiply the offsetLeft by -1 if the direction is rtl.\nvar directionEffect = mainDirection === 'right' ? -1 : 1;\nvar curClick = null;\nvar smS           = 0;\nvar smAdd         = 10;\nvar sLeft         = 0;\nvar sRight        = 0;\nvar onRelation    = 0;\nvar onGrid        = 0;\nvar onDisplayField = 0;\n// relation_style: 0 - angular 1 - direct\nvar onAngularDirect = 1;\nvar clickField    = 0;\nvar linkRelation  = '';\nvar canvasWidth   = 0;\nvar canvasHeight  = 0;\nvar osnTabWidth  = 0;\nvar osnTabHeight = 0;\nvar heightField   = 7;\nvar globX;\nvar globY;\nvar timeoutId;\nvar layerMenuCurClick = 0;\nwindow.fromArray = [];\nvar menuMoved = false;\nvar gridSize = 10;\n\n// ------------------------------------------------------------------------------\n\nvar isIe = document.all && !window.opera;\n\nif (isIe) {\n    window.onscroll = DesignerMove.generalScroll;\n    document.onselectstart = function () {\n        return false;\n    };\n}\n\nDesignerMove.mouseDown = function (e) {\n    // eslint-disable-next-line compat/compat\n    globX = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    globY = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    if (e.target.tagName === 'SPAN') {\n        curClick = e.target.parentNode.parentNode.parentNode.parentNode;\n    } else if (e.target.className === 'tab_zag_2') {\n        curClick = e.target.parentNode.parentNode.parentNode;\n    } else if (e.target.id === 'layer_menu_sizer_btn') {\n        layerMenuCurClick = 1;\n    } else if (e.target.className === 'M_butt') {\n        return false;\n    }\n\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'none';\n        curClick.style.zIndex = 2;\n    }\n};\n\nDesignerMove.mouseMove = function (e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    // eslint-disable-next-line compat/compat\n    var newDx = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    var newDy = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    var deltaX = globX - newDx;\n    var deltaY = globY - newDy;\n\n    globX = newDx;\n    globY = newDy;\n\n    if (curClick !== null) {\n        DesignerMove.markUnsaved();\n\n        var $curClick = $(curClick);\n\n        var curX = parseFloat($curClick.attr('data-' + mainDirection) || $curClick.css(mainDirection));\n        var curY = parseFloat($curClick.attr('data-top') || $curClick.css('top'));\n\n        var newX = curX - directionEffect * deltaX;\n        var newY = curY - deltaY;\n\n        $curClick.attr('data-' + mainDirection, newX);\n        $curClick.attr('data-top', newY);\n\n        if (onGrid) {\n            newX = parseInt(newX / gridSize) * gridSize;\n            newY = parseInt(newY / gridSize) * gridSize;\n        }\n\n        if (newX < 0) {\n            newX = 0;\n        } else if (newY < 0) {\n            newY = 0;\n        }\n        $curClick.css(mainDirection, newX + 'px');\n        $curClick.css('top', newY + 'px');\n    } else if (layerMenuCurClick) {\n        if (menuMoved) {\n            deltaX = -deltaX;\n        }\n        var $layerMenu = $('#layer_menu');\n        var newWidth = $layerMenu.width() + directionEffect * deltaX;\n        if (newWidth < 150) {\n            newWidth = 150;\n        }\n        $layerMenu.width(newWidth);\n    }\n\n    if (onRelation || onDisplayField) {\n        document.getElementById('designer_hint').style.left = (globX + 20) + 'px';\n        document.getElementById('designer_hint').style.top  = (globY + 20) + 'px';\n    }\n};\n\nDesignerMove.mouseUp = function () {\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'inline-block';\n        DesignerMove.reload();\n        curClick.style.zIndex = 1;\n        curClick = null;\n    }\n    layerMenuCurClick = 0;\n};\n\n// ------------------------------------------------------------------------------\n\nDesignerMove.canvasPos = function () {\n    canvasWidth  = document.getElementById('canvas').width  = osnTabWidth  - 3;\n    canvasHeight = document.getElementById('canvas').height = osnTabHeight - 3;\n\n    if (isIe) {\n        document.getElementById('canvas').style.width  = ((osnTabWidth  - 3) ? (osnTabWidth  - 3) : 0) + 'px';\n        document.getElementById('canvas').style.height = ((osnTabHeight - 3) ? (osnTabHeight - 3) : 0) + 'px';\n    }\n};\n\nDesignerMove.osnTabPos = function () {\n    osnTabWidth  = parseInt(document.getElementById('osn_tab').style.width, 10);\n    osnTabHeight = parseInt(document.getElementById('osn_tab').style.height, 10);\n};\n\nDesignerMove.setDefaultValuesFromSavedState = function () {\n    if ($('#angular_direct_button').attr('class') === 'M_butt') {\n        onAngularDirect = 0;\n    } else {\n        onAngularDirect = 1;\n    }\n    DesignerMove.angularDirect();\n\n    if ($('#grid_button').attr('class') === 'M_butt') {\n        onGrid = 1;\n    } else {\n        onGrid = 0;\n    }\n    DesignerMove.grid();\n\n    var $relLineInvert = $('#relLineInvert');\n    if ($relLineInvert.attr('class') === 'M_butt') {\n        showRelationLines = false;\n        $relLineInvert.attr('class', 'M_butt');\n    } else {\n        showRelationLines = true;\n        $relLineInvert.attr('class', 'M_butt_Selected_down');\n    }\n    DesignerMove.relationLinesInvert();\n\n    if ($('#pin_Text').attr('class') === 'M_butt_Selected_down') {\n        alwaysShowText = true;\n        DesignerMove.showText();\n    } else {\n        alwaysShowText = false;\n    }\n\n    var $keySbAll = $('#key_SB_all');\n    if ($keySbAll.attr('class') === 'M_butt_Selected_down') {\n        $keySbAll.trigger('click');\n        $keySbAll.toggleClass('M_butt_Selected_down');\n        $keySbAll.toggleClass('M_butt');\n    }\n\n    var $keyLeftRight = $('#key_Left_Right');\n    if ($keyLeftRight.attr('class') === 'M_butt_Selected_down') {\n        $keyLeftRight.trigger('click');\n    }\n};\n\nDesignerMove.main = function () {\n    // ---CROSS\n\n    document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n    DesignerMove.osnTabPos();\n    DesignerMove.canvasPos();\n    DesignerMove.smallTabRefresh();\n    DesignerMove.reload();\n    DesignerMove.setDefaultValuesFromSavedState();\n    if (isIe) {\n        DesignerMove.generalScroll();\n    }\n};\n\nDesignerMove.resizeOsnTab = function () {\n    var maxX = 0;\n    var maxY = 0;\n    for (var key in window.jTabs) {\n        var kX = parseInt(document.getElementById(key).style[mainDirection], 10) + document.getElementById(key).offsetWidth;\n        var kY = parseInt(document.getElementById(key).style.top, 10) + document.getElementById(key).offsetHeight;\n        maxX = maxX < kX ? kX : maxX;\n        maxY = maxY < kY ? kY : maxY;\n    }\n\n    osnTabWidth  = maxX + 50;\n    osnTabHeight = maxY + 50;\n    DesignerMove.canvasPos();\n};\n\n/**\n * Draw a colored line\n *\n * @param {number} x1\n * @param {number} x2\n * @param {number} y1\n * @param {number} y2\n * @param {HTMLElement} osnTab\n * @param {string} colorTarget\n * @return {void}\n */\nDesignerMove.drawLine0 = function (x1, x2, y1, y2, osnTab, colorTarget) {\n    DesignerMove.line0(\n        x1 + directionEffect * osnTab.offsetLeft,\n        y1 - osnTab.offsetTop,\n        x2 + directionEffect * osnTab.offsetLeft,\n        y2 - osnTab.offsetTop,\n        DesignerMove.getColorByTarget(colorTarget)\n    );\n};\n\n/**\n * refreshes display, must be called after state changes\n */\nDesignerMove.reload = function () {\n    DesignerMove.resizeOsnTab();\n    var n;\n    var x1;\n    var x2;\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    if (!document.getElementById('check_vis_' + key2).checked ||\n                        !document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        // if hide\n                        continue;\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft = 1;\n                    }\n\n                    var rowOffsetTop = 0;\n                    var tabHideButton = document.getElementById('id_hide_tbody_' + key2);\n\n                    if (tabHideButton.innerHTML === 'v') {\n                        var fromColumn = document.getElementById(key2 + '.' + key3);\n                        if (fromColumn) {\n                            rowOffsetTop = fromColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n\n                    rowOffsetTop = 0;\n                    tabHideButton = document.getElementById('id_hide_tbody_' + window.contr[K][key][key2][key3][0]);\n                    if (tabHideButton.innerHTML === 'v') {\n                        var toColumn = document.getElementById(window.contr[K][key][key2][key3][0] +\n                            '.' + window.contr[K][key][key2][key3][1]);\n                        if (toColumn) {\n                            rowOffsetTop = toColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y2 =\n                        document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n                    DesignerMove.drawLine0(\n                        x1, x2, y1, y2, osnTab, window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                    );\n                }\n            }\n        }\n    }\n};\n\n/**\n * draws a line from x1:y1 to x2:y2 with color\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line = function (x1, y1, x2, y2, colorLine) {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.strokeStyle = colorLine;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n};\n\n/**\n * draws a relation/constraint line, whether angular or not\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line0 = function (x1, y1, x2, y2, colorLine) {\n    if (! showRelationLines) {\n        return;\n    }\n    DesignerMove.circle(x1, y1, 3, 3, colorLine);\n    DesignerMove.rect(x2 - 1, y2 - 2, 4, 4, colorLine);\n\n    if (onAngularDirect) {\n        DesignerMove.line2(x1, y1, x2, y2, colorLine);\n    } else {\n        DesignerMove.line3(x1, y1, x2, y2, colorLine);\n    }\n};\n\n/**\n * draws a angular relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line2 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        x1Local += smAdd;\n        x2Local += smAdd;\n    } else if (sLeft) {\n        x1Local -= smAdd;\n        x2Local -= smAdd;\n    } else if (x1 < x2) {\n        x1Local += smAdd;\n        x2Local -= smAdd;\n    } else {\n        x1Local -= smAdd;\n        x2Local += smAdd;\n    }\n\n    DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n    DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n    DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n};\n\n/**\n * draws a relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line3 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        if (x1 < x2) {\n            x1Local += x2 - x1 + smAdd;\n            x2Local += smAdd;\n        } else {\n            x2Local += x1 - x2 + smAdd;\n            x1Local += smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n    if (sLeft) {\n        if (x1 < x2) {\n            x2Local -= x2 - x1 + smAdd;\n            x1Local -= smAdd;\n        } else {\n            x1Local -= x1 - x2 + smAdd;\n            x2Local -= smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n\n    var xS = (x1 + x2) / 2;\n    DesignerMove.line(x1, y1, xS, y1, colorLine);\n    DesignerMove.line(xS, y2, x2, y2, colorLine);\n    DesignerMove.line(xS, y1, xS, y2, colorLine);\n};\n\nDesignerMove.circle = function (x, y, r, w, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.lineWidth = w;\n    ctx.strokeStyle = color;\n    ctx.arc(x, y, r, 0, 2 * Math.PI, true);\n    ctx.stroke();\n};\n\nDesignerMove.clear = function () {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n};\n\nDesignerMove.rect = function (x1, y1, w, h, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.fillStyle = color;\n    ctx.fillRect(x1, y1, w, h);\n};\n\n// --------------------------- FULLSCREEN -------------------------------------\nDesignerMove.toggleFullscreen = function () {\n    var valueSent = '';\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n    var $content = $('#page_content');\n    const pageContent = document.getElementById('page_content');\n\n    if (! document.fullscreenElement) {\n        $img.attr('src', $img.data('exit'))\n            .attr('title', $span.data('exit'));\n        $span.text($span.data('exit'));\n        $content\n            .addClass('content_fullscreen')\n            .css({ 'width': screen.width - 5, 'height': screen.height - 5 });\n\n        $('#osn_tab').css({ 'width': screen.width + 'px', 'height': screen.height });\n        valueSent = 'on';\n        pageContent.requestFullscreen();\n    } else {\n        $img.attr('src', $img.data('enter'))\n            .attr('title', $span.data('enter'));\n        $span.text($span.data('enter'));\n        $content.removeClass('content_fullscreen')\n            .css({ 'width': 'auto', 'height': 'auto' });\n        $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n        document.exitFullscreen();\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('full_screen', valueSent);\n};\n\nDesignerMove.addTableToTablesList = function (index, tableDom) {\n    var db = $(tableDom).find('.small_tab_pref').attr('db');\n    var table = $(tableDom).find('.small_tab_pref').attr('table_name');\n    var dbEncoded = $(tableDom).find('.small_tab_pref').attr('db_url');\n    var tableEncoded = $(tableDom).find('.small_tab_pref').attr('table_name_url');\n    var tableIsChecked = $(tableDom).css('display') === 'block' ? 'checked' : '';\n    var checkboxStatus = (tableIsChecked === 'checked') ? window.Messages.strHide : window.Messages.strShow;\n    var $newTableLine = $('<tr>' +\n        '    <td title=\"' + window.Messages.strStructure + '\"' +\n        '        width=\"1px\"' +\n        '        class=\"L_butt2_1\">' +\n        '        <img alt=\"\"' +\n        '            db=\"' + dbEncoded + '\"' +\n        '            table_name=\"' + tableEncoded + '\"' +\n        '            class=\"scroll_tab_struct\"' +\n        '            src=\"' + themeImagePath + 'designer/exec.png\"/>' +\n        '    </td>' +\n        '    <td width=\"1px\">' +\n        '        <input class=\"scroll_tab_checkbox\"' +\n        '            title=\"' + checkboxStatus + '\"' +\n        '            id=\"check_vis_' + dbEncoded + '.' + tableEncoded + '\"' +\n        '            style=\"margin:0;\"' +\n        '            type=\"checkbox\"' +\n        '            value=\"' + dbEncoded + '.' + tableEncoded + '\"' + tableIsChecked +\n        '            />' +\n        '    </td>' +\n        '    <td class=\"designer_Tabs\"' +\n        '        designer_url_table_name=\"' + dbEncoded + '.' + tableEncoded + '\">' + $('<div/>').text(db + '.' + table).html() + '</td>' +\n        '</tr>');\n    $('#id_scroll_tab table').first().append($newTableLine);\n    $($newTableLine).find('.scroll_tab_struct').on('click', function () {\n        DesignerMove.startTabUpd(db, table);\n    });\n    $($newTableLine).on('click', '.designer_Tabs2,.designer_Tabs', function () {\n        DesignerMove.selectTab($(this).attr('designer_url_table_name'));\n    });\n    $($newTableLine).find('.scroll_tab_checkbox').on('click', function () {\n        $(this).attr('title', function (i, currentvalue) {\n            return currentvalue === window.Messages.strHide ? window.Messages.strShow : window.Messages.strHide;\n        });\n        DesignerMove.visibleTab(this,$(this).val());\n    });\n    var $tablesCounter = $('#tables_counter');\n    $tablesCounter.text(parseInt($tablesCounter.text(), 10) + 1);\n};\n\n/**\n * This function shows modal with Go buttons where required in designer\n * @param {object} form\n * @param {string} heading\n * @param {string} type\n *\n * @return {object} modal;\n */\nDesignerMove.displayModal = function (form, heading, type) {\n    var modal = $(type);\n    modal.modal('show');\n    modal.find('.modal-body').first().html(form);\n    $(type + 'Label').first().html(heading);\n    return modal;\n};\n\nDesignerMove.addOtherDbTables = function () {\n    var $selectDb = $('<select id=\"add_table_from\"></select>');\n    $selectDb.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    var $selectTable = $('<select id=\"add_table\"></select>');\n    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    $.post('index.php?route=/sql', {\n        'ajax_request' : true,\n        'sql_query' : 'SHOW databases;',\n        'server': window.CommonParams.get('server')\n    }, function (data) {\n        $(data.message).find('table.table_results.data.ajax').find('td.data').each(function () {\n            var val = $(this)[0].innerText;\n            $selectDb.append($('<option></option>').val(val).text(val));\n        });\n    });\n\n    var $form = $('<form action=\"\" class=\"ajax\"></form>')\n        .append($selectDb).append($selectTable);\n    var modal = DesignerMove.displayModal($form, window.Messages.strAddTables, '#designerGoModal');\n    $('#designerModalGoButton').on('click', function () {\n        var db = $('#add_table_from').val();\n        var table = $('#add_table').val();\n\n        // Check if table already imported or not.\n        var $table = $('[id=\"' + encodeURIComponent(db) + '.' + encodeURIComponent(table) + '\"]');\n        if ($table.length !== 0) {\n            Functions.ajaxShowMessage(\n                Functions.sprintf(window.Messages.strTableAlreadyExists, db + '.' + table),\n                undefined,\n                'error'\n            );\n            return;\n        }\n\n        $.post('index.php?route=/database/designer', {\n            'ajax_request' : true,\n            'dialog' : 'add_table',\n            'db' : db,\n            'table' : table,\n            'server': window.CommonParams.get('server')\n        }, function (data) {\n            var $newTableDom = $(data.message);\n            $newTableDom.find('a').first().remove();\n\n            var dbEncoded = $($newTableDom).find('.small_tab_pref').attr('db_url');\n            var tableEncoded = $($newTableDom).find('.small_tab_pref').attr('table_name_url');\n\n            if (typeof dbEncoded === 'string' && typeof tableEncoded === 'string') { // Do not try to add if attr not found !\n                $('#container-form').append($newTableDom);\n                DesignerMove.enableTableEvents(null, $newTableDom);\n                DesignerMove.addTableToTablesList(null, $newTableDom);\n                window.jTabs[dbEncoded + '.' + tableEncoded] = 1;\n                DesignerMove.markUnsaved();\n            }\n        });\n\n        $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n        modal.modal('hide');\n    });\n    $('#add_table_from').on('change', function () {\n        if ($(this).val()) {\n            var dbName = $(this).val();\n            var sqlQuery = 'SHOW tables;';\n            $.post('index.php?route=/sql', {\n                'ajax_request' : true,\n                'sql_query': sqlQuery,\n                'db' : dbName,\n                'server': window.CommonParams.get('server')\n            }, function (data) {\n                $selectTable.html('');\n                var rows = $(data.message).find('table.table_results.data.ajax').find('td.data');\n                if (rows.length === 0) {\n                    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n                }\n                rows.each(function () {\n                    var val = $(this)[0].innerText;\n                    $selectTable.append($('<option></option>').val(val).text(val));\n                });\n            });\n        }\n    });\n};\n\n// ------------------------------ NEW ------------------------------------------\nDesignerMove.new = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        DesignerMove.loadPage(-1);\n    });\n};\n\n// ------------------------------ SAVE ------------------------------------------\n// (del?) no for pdf\nDesignerMove.save = function (url) {\n    for (var key in window.jTabs) {\n        document.getElementById('t_x_' + key + '_').value = parseInt(document.getElementById(key).style.left, 10);\n        document.getElementById('t_y_' + key + '_').value = parseInt(document.getElementById(key).style.top, 10);\n        document.getElementById('t_v_' + key + '_').value = document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1;\n        document.getElementById('t_h_' + key + '_').value = document.getElementById('check_vis_' + key).checked ? 1 : 0;\n    }\n    document.getElementById('container-form').action = url;\n    $('#container-form').trigger('submit');\n};\n\nDesignerMove.getUrlPos = function (forceString) {\n    var key;\n    if (window.designerTablesEnabled || forceString) {\n        var poststr = '';\n        var argsep = window.CommonParams.get('arg_separator');\n        var i = 1;\n        for (key in window.jTabs) {\n            poststr += argsep + 't_x[' + i + ']=' + parseInt(document.getElementById(key).style.left, 10);\n            poststr += argsep + 't_y[' + i + ']=' + parseInt(document.getElementById(key).style.top, 10);\n            poststr += argsep + 't_v[' + i + ']=' + (document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1);\n            poststr += argsep + 't_h[' + i + ']=' + (document.getElementById('check_vis_' + key).checked ? 1 : 0);\n            poststr += argsep + 't_db[' + i + ']=' + $(document.getElementById(key)).attr('db_url');\n            poststr += argsep + 't_tbl[' + i + ']=' + $(document.getElementById(key)).attr('table_name_url');\n            i++;\n        }\n        return poststr;\n    } else {\n        var coords = [];\n        for (key in window.jTabs) {\n            if (document.getElementById('check_vis_' + key).checked) {\n                var x = parseInt(document.getElementById(key).style.left, 10);\n                var y = parseInt(document.getElementById(key).style.top, 10);\n                var tbCoords = new DesignerObjects.TableCoordinate(\n                    $(document.getElementById(key)).attr('db_url'),\n                    $(document.getElementById(key)).attr('table_name_url'),\n                    -1, x, y);\n                coords.push(tbCoords);\n            }\n        }\n        return coords;\n    }\n};\n\nDesignerMove.save2 = function (callback) {\n    if (window.designerTablesEnabled) {\n        var argsep = window.CommonParams.get('arg_separator');\n        var poststr = 'operation=savePage' + argsep + 'save_page=same' + argsep + 'ajax_request=true';\n        poststr += argsep + 'server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + argsep + 'selected_page=' + window.selectedPage;\n        poststr += DesignerMove.getUrlPos();\n\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer', poststr, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                Functions.ajaxShowMessage(window.Messages.strModificationSaved);\n                DesignerMove.markSaved();\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        var name = $('#page_name').html().trim();\n        DesignerPage.saveToSelectedPage(window.db, window.selectedPage, name, DesignerMove.getUrlPos(), function () {\n            DesignerMove.markSaved();\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.submitSaveDialogAndClose = function (callback, modal) {\n    var $form = $('#save_page');\n    var name = $form.find('input[name=\"selected_value\"]').val().trim();\n    if (name === '') {\n        Functions.ajaxShowMessage(window.Messages.strEnterValidPageName, false);\n        return;\n    }\n    modal.modal('hide');\n\n    if (window.designerTablesEnabled) {\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n        $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                DesignerMove.markSaved();\n                if (data.id) {\n                    window.selectedPage = data.id;\n                }\n                $('#page_name').text(name);\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n            DesignerMove.markSaved();\n            if (page.pgNr) {\n                window.selectedPage = page.pgNr;\n            }\n            $('#page_name').text(page.pageDescr);\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.save3 = function (callback) {\n    if (window.selectedPage !== -1) {\n        DesignerMove.save2(callback);\n    } else {\n        var $form = $('<form action=\"index.php?route=/database/designer\" method=\"post\" name=\"save_page\" id=\"save_page\" class=\"ajax\"></form>')\n            .append('<input type=\"hidden\" name=\"server\" value=\"' + window.server + '\">')\n            .append($('<input type=\"hidden\" name=\"db\" />').val(window.db))\n            .append('<input type=\"hidden\" name=\"operation\" value=\"savePage\">')\n            .append('<input type=\"hidden\" name=\"save_page\" value=\"new\">')\n            .append('<label for=\"selected_value\">' + window.Messages.strPageName +\n                '</label>:<input type=\"text\" name=\"selected_value\">');\n        var modal = DesignerMove.displayModal($form, window.Messages.strSavePage, '#designerGoModal');\n        $form.on('submit', function (e) {\n            e.preventDefault();\n            DesignerMove.submitSaveDialogAndClose(callback, modal);\n        });\n        $('#designerModalGoButton').on('click', function () {\n            var $form = $('#save_page');\n            $form.trigger('submit');\n\n            $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n            modal.modal('hide');\n        });\n    }\n};\n\n// ------------------------------ EDIT PAGES ------------------------------------------\nDesignerMove.editPages = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        var $msgbox = Functions.ajaxShowMessage();\n        $.post('index.php?route=/database/designer', {\n            'ajax_request': true,\n            'server': window.server,\n            'db': window.db,\n            'dialog': 'edit'\n        }, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n\n                if (! window.designerTablesEnabled) {\n                    DesignerPage.createPageList(window.db, function (options) {\n                        $('#selected_page').append(options);\n                    });\n                }\n                var modal = DesignerMove.displayModal(data.message, window.Messages.strOpenPage, '#designerGoModal');\n                $('#designerModalGoButton').on('click', function () {\n                    var $form = $('#edit_delete_pages');\n                    var selected = $form.find('select[name=\"selected_page\"]').val();\n                    if (selected === '0') {\n                        Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n\n                    $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                    modal.modal('hide');\n                    DesignerMove.loadPage(selected);\n                });\n            }\n        }); // end $.post()\n    });\n};\n\n// -----------------------------  DELETE PAGES ---------------------------------------\nDesignerMove.deletePages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'delete'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strDeletePage, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form = $('#edit_delete_pages');\n                var selected = $form.find('select[name=\"selected_page\"]').val();\n                if (selected === '0') {\n                    Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                    return;\n                }\n\n                var $messageBox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n                var deletingCurrentPage = parseInt(selected) === window.selectedPage;\n                Functions.prepareForAjaxRequest($form);\n\n                if (window.designerTablesEnabled) {\n                    $.post($form.attr('action'), $form.serialize(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    }); // end $.post()\n                } else {\n                    DesignerPage.deletePage(selected, function (success) {\n                        if (! success) {\n                            Functions.ajaxShowMessage('Error', false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    });\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\n// ------------------------------ SAVE AS PAGES ---------------------------------------\nDesignerMove.saveAs = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'save_as'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strSavePageAs, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form           = $('#save_as_pages');\n                var selectedValue  = $form.find('input[name=\"selected_value\"]').val().trim();\n                var $selectedPage  = $form.find('select[name=\"selected_page\"]');\n                var choice          = $form.find('input[name=\"save_page\"]:checked').val();\n                var name            = '';\n\n                if (choice === 'same') {\n                    if ($selectedPage.val() === '0') {\n                        Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n                    name = $selectedPage.find('option:selected').text();\n                } else if (choice === 'new') {\n                    if (selectedValue === '') {\n                        Functions.ajaxShowMessage(window.Messages.strEnterValidPageName, 2000);\n                        return;\n                    }\n                    name = selectedValue;\n                }\n\n                var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n                if (window.designerTablesEnabled) {\n                    Functions.prepareForAjaxRequest($form);\n                    $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (data.id) {\n                                window.selectedPage = data.id;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        }\n                    }); // end $.post()\n                } else {\n                    if (choice === 'same') {\n                        var selectedPageId = $selectedPage.find('option:selected').val();\n                        DesignerPage.saveToSelectedPage(window.db, selectedPageId, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    } else if (choice === 'new') {\n                        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    }\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n            // select current page by default\n            if (window.selectedPage !== -1) {\n                $('select[name=\"selected_page\"]').val(window.selectedPage);\n            }\n        }\n    }); // end $.post()\n};\n\nDesignerMove.promptToSaveCurrentPage = function (callback) {\n    if (change === 1 || window.selectedPage === -1) {\n        var modal = DesignerMove.displayModal('<div>' + window.Messages.strLeavingPage + '</div>',\n            window.Messages.strSavePage, '#designerPromptModal');\n        $('#designerModalYesButton').on('click', function () {\n            modal.modal('hide');\n            DesignerMove.save3(callback);\n        });\n        $('#designerModalNoButton').on('click', function () {\n            modal.modal('hide');\n            callback();\n        });\n    } else {\n        callback();\n    }\n};\n\n// ------------------------------ EXPORT PAGES ---------------------------------------\nDesignerMove.exportPages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    var argsep = window.CommonParams.get('arg_separator');\n\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'export',\n        'selected_page': window.selectedPage\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            var $form = $(data.message);\n            if (! window.designerTablesEnabled) {\n                $form.append('<input type=\"hidden\" name=\"offline_export\" value=\"true\">');\n            }\n            $.each(DesignerMove.getUrlPos(true).substring(1).split(argsep), function () {\n                var pair = this.split('=');\n                var input = $('<input type=\"hidden\">');\n                input.attr('name', pair[0]);\n                input.attr('value', pair[1]);\n                $form.append(input);\n            });\n            var $formatDropDown = $form.find('#plugins');\n            $formatDropDown.on('change', function () {\n                var format = $formatDropDown.val();\n                $form.find('.format_specific_options').hide();\n                $form.find('#' + format + '_options').show();\n            }).trigger('change');\n\n            var modal = DesignerMove.displayModal($form, window.Messages.strExportRelationalSchema, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                $('#id_export_pages').trigger('submit');\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\nDesignerMove.loadPage = function (page) {\n    if (window.designerTablesEnabled) {\n        var paramPage = '';\n        var argsep = window.CommonParams.get('arg_separator');\n        if (page !== null) {\n            paramPage = argsep + 'page=' + page;\n        }\n        $('<a href=\"index.php?route=/database/designer&server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + paramPage + '\"></a>')\n            .appendTo($('#page_content'))\n            .trigger('click');\n    } else {\n        if (page === null) {\n            DesignerPage.showTablesInLandingPage(window.db);\n        } else if (page > -1) {\n            DesignerPage.loadHtmlForPage(page);\n        } else if (page === -1) {\n            DesignerPage.showNewPageTables(true);\n        }\n    }\n    DesignerMove.markSaved();\n};\n\nDesignerMove.grid = function () {\n    var valueSent = '';\n    if (!onGrid) {\n        onGrid = 1;\n        valueSent = 'on';\n        document.getElementById('grid_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('grid_button').className = 'M_butt';\n        onGrid = 0;\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('snap_to_grid', valueSent);\n};\n\nDesignerMove.angularDirect = function () {\n    var valueSent = '';\n    if (onAngularDirect) {\n        onAngularDirect = 0;\n        valueSent = 'angular';\n        document.getElementById('angular_direct_button').className = 'M_butt_Selected_down';\n    } else {\n        onAngularDirect = 1;\n        valueSent = 'direct';\n        document.getElementById('angular_direct_button').className = 'M_butt';\n    }\n    DesignerMove.saveValueInConfig('angular_direct', valueSent);\n    DesignerMove.reload();\n};\n\nDesignerMove.saveValueInConfig = function (indexSent, valueSent) {\n    $.post('index.php?route=/database/designer',\n        {\n            'operation': 'save_setting_value',\n            'index': indexSent,\n            'ajax_request': true,\n            'server': window.server,\n            'value': valueSent\n        },\n        function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n};\n\n// ++++++++++++++++++++++++++++++ RELATION ++++++++++++++++++++++++++++++++++++++\nDesignerMove.startRelation = function () {\n    if (onDisplayField) {\n        return;\n    }\n\n    if (!onRelation) {\n        document.getElementById('foreign_relation').style.display = '';\n        onRelation = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strSelectReferencedKey;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('rel_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('rel_button').className = 'M_butt';\n        clickField = 0;\n        onRelation = 0;\n    }\n};\n\n// table field\nDesignerMove.clickField = function (db, T, f, pk) {\n    var pkLocal = parseInt(pk);\n    var argsep = window.CommonParams.get('arg_separator');\n    if (onRelation) {\n        if (!clickField) {\n            // .style.display=='none'        .style.display = 'none'\n            if (!pkLocal) {\n                alert(window.Messages.strPleaseSelectPrimaryOrUniqueKey);\n                return;// 0;\n            }// PK\n            if (window.jTabs[db + '.' + T] !== 1) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            clickField = 1;\n            linkRelation = 'DB1=' + db + argsep + 'T1=' + T + argsep + 'F1=' + f;\n            document.getElementById('designer_hint').innerHTML = window.Messages.strSelectForeignKey;\n        } else {\n            DesignerMove.startRelation(); // hidden hint...\n            if (window.jTabs[db + '.' + T] !== 1 || !pkLocal) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            var left = globX - (document.getElementById('layer_new_relation').offsetWidth >> 1);\n            document.getElementById('layer_new_relation').style.left = left + 'px';\n            var top = globY - document.getElementById('layer_new_relation').offsetHeight;\n            document.getElementById('layer_new_relation').style.top  = top + 'px';\n            document.getElementById('layer_new_relation').style.display = 'block';\n            linkRelation += argsep + 'DB2=' + db + argsep + 'T2=' + T + argsep + 'F2=' + f;\n        }\n    }\n\n    if (onDisplayField) {\n        var fieldNameToSend = decodeURIComponent(f);\n        var newDisplayFieldClass = 'tab_field';\n        var oldTabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n        // if is display field\n        if (window.displayField[T] === f) {// The display field is already the one defined, user wants to remove it\n            newDisplayFieldClass = 'tab_field';\n            delete window.displayField[T];\n            if (oldTabField) {// Clear the style\n                // Set display field class on old item\n                oldTabField.className = 'tab_field';\n            }\n            fieldNameToSend = '';\n        } else {\n            newDisplayFieldClass = 'tab_field_3';\n            if (window.displayField[T]) { // Had a previous one, clear it\n                if (oldTabField) {\n                    // Set display field class on old item\n                    oldTabField.className = 'tab_field';\n                }\n                delete window.displayField[T];\n            }\n            window.displayField[T] = f;\n\n            var tabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n            if (tabField) {\n                // Set new display field class\n                tabField.className = newDisplayFieldClass;\n            }\n        }\n        onDisplayField = 0;\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer',\n            {\n                'operation': 'setDisplayField',\n                'ajax_request': true,\n                'server': window.server,\n                'db': db,\n                'table': T,\n                'field': fieldNameToSend\n            },\n            function (data) {\n                if (data.success === false) {\n                    Functions.ajaxShowMessage(data.error, false);\n                } else {\n                    Functions.ajaxRemoveMessage($msgbox);\n                    Functions.ajaxShowMessage(window.Messages.strModificationSaved);\n                }\n            });\n    }\n};\n\nDesignerMove.newRelation = function () {\n    document.getElementById('layer_new_relation').style.display = 'none';\n    var argsep = window.CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db + argsep + 'db2=p';\n    linkRelation += argsep + 'on_delete=' + document.getElementById('on_delete').value + argsep + 'on_update=' + document.getElementById('on_update').value;\n    linkRelation += argsep + 'operation=addNewRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\n// -------------------------- create tables -------------------------------------\nDesignerMove.startTableNew = function () {\n    window.CommonParams.set('table', '');\n    window.CommonActions.refreshMain('index.php?route=/table/create');\n};\n\nDesignerMove.startTabUpd = function (db, table) {\n    window.CommonParams.set('db', db);\n    window.CommonParams.set('table', table);\n    window.CommonActions.refreshMain('index.php?route=/table/structure');\n};\n\n// --------------------------- hide tables --------------------------------------\n// max/min all tables\nDesignerMove.smallTabAll = function (idThis) {\n    var icon = idThis.children[0];\n    var valueSent = '';\n\n    if (icon.alt === 'v') {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() === 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = '>';\n        icon.src = icon.dataset.right;\n        valueSent = 'v';\n    } else {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() !== 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n        valueSent = '>';\n    }\n    DesignerMove.saveValueInConfig('small_big_all', valueSent);\n    $('#key_SB_all').toggleClass('M_butt_Selected_down');\n    $('#key_SB_all').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\n// invert max/min all tables\nDesignerMove.smallTabInvert = function () {\n    for (var key in window.jTabs) {\n        DesignerMove.smallTab(key, 0);\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.relationLinesInvert = function () {\n    showRelationLines = ! showRelationLines;\n    DesignerMove.saveValueInConfig('relation_lines', showRelationLines);\n    $('#relLineInvert').toggleClass('M_butt_Selected_down');\n    $('#relLineInvert').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\nDesignerMove.smallTabRefresh = function () {\n    for (var key in window.jTabs) {\n        if (document.getElementById('id_hide_tbody_' + key).innerHTML !== 'v') {\n            DesignerMove.smallTab(key, 0);\n        }\n    }\n};\n\nDesignerMove.smallTab = function (t, reload) {\n    var id      = document.getElementById('id_tbody_' + t);\n    var idThis = document.getElementById('id_hide_tbody_' + t);\n    if (idThis.innerHTML === 'v') {\n        // ---CROSS\n        id.style.display = 'none';\n        idThis.innerHTML = '>';\n    } else {\n        id.style.display = '';\n        idThis.innerHTML = 'v';\n    }\n    if (reload) {\n        DesignerMove.reload();\n    }\n};\n\nDesignerMove.selectTab = function (t) {\n    var idZag = document.getElementById('id_zag_' + t);\n    if (idZag.className !== 'tab_zag_3') {\n        document.getElementById('id_zag_' + t).className = 'tab_zag_2';\n    } else {\n        document.getElementById('id_zag_' + t).className = 'tab_zag';\n    }\n    // ----------\n    var idT = document.getElementById(t);\n    window.scrollTo(parseInt(idT.style.left, 10) - 300, parseInt(idT.style.top, 10) - 300);\n    setTimeout(\n        function () {\n            document.getElementById('id_zag_' + t).className = 'tab_zag';\n        },\n        800\n    );\n};\n\nDesignerMove.canvasClick = function (id, event) {\n    var n = 0;\n    var selected = 0;\n    var a = [];\n    var Key0;\n    var Key1;\n    var Key2;\n    var Key3;\n    var Key;\n    var x1;\n    var x2;\n    var K;\n    var key;\n    var key2;\n    var key3;\n    // eslint-disable-next-line compat/compat\n    var localX = isIe ? event.clientX + document.body.scrollLeft : event.pageX;\n    // eslint-disable-next-line compat/compat\n    var localY = isIe ? event.clientY + document.body.scrollTop : event.pageY;\n    localX -= $('#osn_tab').offset().left;\n    localY -= $('#osn_tab').offset().top;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            for (key2 in window.contr[K][key]) {\n                for (key3 in window.contr[K][key][key2]) {\n                    if (! document.getElementById('check_vis_' + key2).checked ||\n                        ! document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        continue; // if hide\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;// document.getElementById(key2+\".\"+key3).offsetLeft;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;// +document.getElementById(contr[K][key2][key3][0]+\".\"+contr[K][key2][key3][1]).offsetLeft\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft    = 1;\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop + document.getElementById(key2 + '.' + key3).offsetTop + heightField;\n                    var y2 = document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                                     document.getElementById(window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]).offsetTop + heightField;\n\n                    if (!selected && localX > x1 - 10 && localX < x1 + 10 && localY > y1 - 7 && localY < y1 + 7) {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab, 'rgba(255,0,0,1)'\n                        );\n\n                        selected = 1;\n                        Key0 = window.contr[K][key][key2][key3][0];\n                        Key1 = window.contr[K][key][key2][key3][1];\n                        Key2 = key2;\n                        Key3 = key3;\n                        Key = K;\n                    } else {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab,\n                            window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                        );\n                    }\n                }\n            }\n        }\n    }\n    if (selected) {\n        // select relations\n        var left = globX - (document.getElementById('layer_upd_relation').offsetWidth >> 1);\n        document.getElementById('layer_upd_relation').style.left = left + 'px';\n        var top = globY - document.getElementById('layer_upd_relation').offsetHeight - 10;\n        document.getElementById('layer_upd_relation').style.top = top + 'px';\n        document.getElementById('layer_upd_relation').style.display = 'block';\n        var argsep = window.CommonParams.get('arg_separator');\n        linkRelation = 'T1=' + Key0 + argsep + 'F1=' + Key1 + argsep + 'T2=' + Key2 + argsep + 'F2=' + Key3 + argsep + 'K=' + Key;\n    }\n};\n\nDesignerMove.updRelation = function () {\n    document.getElementById('layer_upd_relation').style.display = 'none';\n    var argsep = window.CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db;\n    linkRelation += argsep + 'operation=removeRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\nDesignerMove.visibleTab = function (id, tN) {\n    if (id.checked) {\n        document.getElementById(tN).style.display = 'block';\n    } else {\n        document.getElementById(tN).style.display = 'none';\n    }\n    DesignerMove.reload();\n    DesignerMove.markUnsaved();\n};\n\n// max/min all tables\nDesignerMove.hideTabAll = function (idThis) {\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (idThis.alt === 'v') {\n                E.elements[i].checked = true;\n                document.getElementById(E.elements[i].value).style.display = '';\n            } else {\n                E.elements[i].checked = false;\n                document.getElementById(E.elements[i].value).style.display = 'none';\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.inArrayK = function (x, m) {\n    var b = 0;\n    for (var u in m) {\n        if (x === u) {\n            b = 1;\n            break;\n        }\n    }\n    return b;\n};\n\nDesignerMove.noHaveConstr = function (idThis) {\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    a[key2] = a[window.contr[K][key][key2][key3][0]] = 1; // exist constr\n                }\n            }\n        }\n    }\n\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (!DesignerMove.inArrayK(E.elements[i].value, a)) {\n                if (idThis.alt === 'v') {\n                    E.elements[i].checked = true;\n                    document.getElementById(E.elements[i].value).style.display = '';\n                } else {\n                    E.elements[i].checked = false;\n                    document.getElementById(E.elements[i].value).style.display = 'none';\n                }\n            }\n        }\n    }\n};\n\nDesignerMove.generalScroll = function () {\n    // if (timeoutId)\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(\n        function () {\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.left = document.body.scrollLeft + 'px';\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.top  = document.body.scrollTop + 'px';\n        },\n        200\n    );\n};\n\n// max/min all tables\nDesignerMove.showLeftMenu = function (idThis) {\n    var icon = idThis.children[0];\n    $('#key_Show_left_menu').toggleClass('M_butt_Selected_down');\n    if (icon.alt === 'v') {\n        document.getElementById('layer_menu').style.top = '0px';\n        document.getElementById('layer_menu').style.display = 'block';\n        icon.alt = '>';\n        icon.src = icon.dataset.up;\n        if (isIe) {\n            DesignerMove.generalScroll();\n        }\n    } else {\n        document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n        document.getElementById('layer_menu').style.display = 'none';\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n    }\n};\n\nDesignerMove.sideMenuRight = function (idThis) {\n    $('#side_menu').toggleClass('right');\n    $('#layer_menu').toggleClass('float-start');\n    var moveMenuIcon = $(idThis.getElementsByTagName('img')[0]);\n    var resizeIcon = $('#layer_menu_sizer > img')\n        .toggleClass('float-start')\n        .toggleClass('float-end');\n\n    var srcResizeIcon = resizeIcon.attr('src');\n    resizeIcon.attr('src', resizeIcon.attr('data-right'));\n    resizeIcon.attr('data-right', srcResizeIcon);\n\n    var srcMoveIcon = moveMenuIcon.attr('src');\n    moveMenuIcon.attr('src', moveMenuIcon.attr('data-right'));\n    moveMenuIcon.attr('data-right', srcMoveIcon);\n\n    menuMoved = !menuMoved;\n    DesignerMove.saveValueInConfig('side_menu', $('#side_menu').hasClass('right'));\n    $('#key_Left_Right').toggleClass('M_butt_Selected_down');\n    $('#key_Left_Right').toggleClass('M_butt');\n};\n\nDesignerMove.showText = function () {\n    $('#side_menu').find('.hidable').show();\n};\n\nDesignerMove.hideText = function () {\n    if (!alwaysShowText) {\n        $('#side_menu').find('.hidable').hide();\n    }\n};\n\nDesignerMove.pinText = function () {\n    alwaysShowText = !alwaysShowText;\n    $('#pin_Text').toggleClass('M_butt_Selected_down');\n    $('#pin_Text').toggleClass('M_butt');\n    DesignerMove.saveValueInConfig('pin_text', alwaysShowText);\n};\n\nDesignerMove.startDisplayField = function () {\n    if (onRelation) {\n        return;\n    }\n    if (!onDisplayField) {\n        onDisplayField = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strChangeDisplay;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('display_field_button').className = 'M_butt_Selected_down';// '#FFEE99';gray #AAAAAA\n\n        if (isIe) { // correct for IE\n            document.getElementById('display_field_button').className = 'M_butt_Selected_down_IE';\n        }\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n        onDisplayField = 0;\n    }\n};\n\nvar TargetColors = [];\n\nDesignerMove.getColorByTarget = function (target) {\n    var color = '';  // \"rgba(0,100,150,1)\";\n\n    for (var targetColor in TargetColors) {\n        if (TargetColors[targetColor][0] === target) {\n            color = TargetColors[targetColor][1];\n            break;\n        }\n    }\n\n    if (color.length === 0) {\n        var i = TargetColors.length + 1;\n        var d = i % 6;\n        var j = (i - d) / 6;\n        j = j % 4;\n        j++;\n        var colorCase = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1],\n            [1, 1, 0],\n            [1, 0, 1],\n            [0, 1, 1]\n        ];\n        var a = colorCase[d][0];\n        var b = colorCase[d][1];\n        var c = colorCase[d][2];\n        var e = (1 - (j - 1) / 6);\n\n        var r = Math.round(a * 200 * e);\n        var g = Math.round(b * 200 * e);\n        b = Math.round(c * 200 * e);\n        color = 'rgba(' + r + ',' + g + ',' + b + ',1)';\n\n        TargetColors.push([target, color]);\n    }\n\n    return color;\n};\n\nDesignerMove.clickOption = function (dbName, tableName, columnName, tableDbNameUrl, optionColNameString) {\n    var designerOptions = document.getElementById('designer_optionse');\n    var left = globX - (designerOptions.offsetWidth >> 1);\n    designerOptions.style.left = left + 'px';\n    // var top = Glob_Y - designerOptions.offsetHeight - 10;\n    designerOptions.style.top  = (screen.height / 4) + 'px';\n    designerOptions.style.display = 'block';\n    document.getElementById('ok_add_object_db_and_table_name_url').value = tableDbNameUrl;\n    document.getElementById('ok_add_object_db_name').value = dbName;\n    document.getElementById('ok_add_object_table_name').value = tableName;\n    document.getElementById('ok_add_object_col_name').value = columnName;\n    document.getElementById('option_col_name').innerHTML = optionColNameString;\n};\n\nDesignerMove.closeOption = function () {\n    document.getElementById('designer_optionse').style.display = 'none';\n    document.getElementById('rel_opt').value = '--';\n    document.getElementById('Query').value = '';\n    document.getElementById('new_name').value = '';\n    document.getElementById('operator').value = '---';\n    document.getElementById('groupby').checked = false;\n    document.getElementById('h_rel_opt').value = '--';\n    document.getElementById('h_operator').value = '---';\n    document.getElementById('having').value = '';\n    document.getElementById('orderby').value = '---';\n};\n\nDesignerMove.selectAll = function (tableName, dbName, idSelectAll) {\n    var parentIsChecked = $('#' + idSelectAll).is(':checked');\n    var checkboxAll = $('#container-form input[id_check_all=\\'' + idSelectAll + '\\']:checkbox');\n\n    checkboxAll.each(function () {\n        // already checked and then check parent\n        if (parentIsChecked === true && this.checked) {\n            // was checked, removing column from selected fields\n            // trigger unchecked event\n            this.click();\n        }\n        this.checked = parentIsChecked;\n        this.disabled = parentIsChecked;\n    });\n    if (parentIsChecked) {\n        selectField.push('`' + tableName + '`.*');\n        window.fromArray.push(tableName);\n    } else {\n        var i;\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === ('`' + tableName + '`.*')) {\n                selectField.splice(i, 1);\n            }\n        }\n        var k;\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.tableOnOver = function (idThis, val, buil) {\n    var builLocal = parseInt(buil);\n    if (!val) {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag_2';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag_2';\n        }\n    } else {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag';\n        }\n    }\n};\n\n/**\n * This function stores selected column information in selectField[]\n * In case column is checked it add else it deletes\n *\n * @param {string} tableName\n * @param {string} colName\n * @param {string} checkboxId\n */\nDesignerMove.storeColumn = function (tableName, colName, checkboxId) {\n    var i;\n    var k;\n    var selectKeyField = '`' + tableName + '`.`' + colName + '`';\n    if (document.getElementById(checkboxId).checked === true) {\n        selectField.push(selectKeyField);\n        window.fromArray.push(tableName);\n    } else {\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === selectKeyField) {\n                selectField.splice(i, 1);\n                break;\n            }\n        }\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n};\n\n/**\n * This function builds object and adds them to historyArray\n * first it does a few checks on each object, then makes an object(where,rename,groupby,aggregate,orderby)\n * then a new history object is made and finally all these history objects are added to historyArray[]\n *\n * @param {string} dbName\n * @param {string} tableName\n * @param {string} colName\n * @param {string} dbTableNameUrl\n */\nDesignerMove.addObject = function (dbName, tableName, colName, dbTableNameUrl) {\n    var p;\n    var whereObj;\n    var rel = document.getElementById('rel_opt');\n    var sum = 0;\n    var init = historyArray.length;\n    if (rel.value !== '--') {\n        if (document.getElementById('Query').value === '') {\n            Functions.ajaxShowMessage(Functions.sprintf(window.Messages.strQueryEmpty));\n            return;\n        }\n        p = document.getElementById('Query');\n        whereObj = new DesignerHistory.Where(rel.value, p.value);// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Where'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('new_name').value !== '') {\n        var renameObj = new DesignerHistory.Rename(document.getElementById('new_name').value);// make Rename object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, renameObj, tableName, window.hTabs[dbTableNameUrl], 'Rename'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('operator').value !== '---') {\n        var aggregateObj = new DesignerHistory.Aggregate(document.getElementById('operator').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, aggregateObj, tableName, window.hTabs[dbTableNameUrl], 'Aggregate'));\n        sum = sum + 1;\n        // make aggregate operator\n    }\n    if (document.getElementById('groupby').checked === true) {\n        historyArray.push(new DesignerHistory.HistoryObj(colName, 'GroupBy', tableName, window.hTabs[dbTableNameUrl], 'GroupBy'));\n        sum = sum + 1;\n        // make groupby\n    }\n    if (document.getElementById('h_rel_opt').value !== '--') {\n        if (document.getElementById('having').value === '') {\n            return;\n        }\n        whereObj = new DesignerHistory.Having(\n            document.getElementById('h_rel_opt').value,\n            document.getElementById('having').value,\n            document.getElementById('h_operator').value\n        );// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Having'));\n        sum = sum + 1;\n        // make having\n    }\n    if (document.getElementById('orderby').value !== '---') {\n        var orderByObj = new DesignerHistory.OrderBy(document.getElementById('orderby').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, orderByObj, tableName, window.hTabs[dbTableNameUrl], 'OrderBy'));\n        sum = sum + 1;\n        // make orderby\n    }\n    Functions.ajaxShowMessage(Functions.sprintf(window.Messages.strObjectsCreated, sum));\n    // output sum new objects created\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(init, historyArray.length);\n    DesignerMove.closeOption();\n    $('#ab').accordion('refresh');\n};\n\nDesignerMove.enablePageContentEvents = function () {\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousemove');\n    $('#page_content').on('mousedown', function (e) {\n        DesignerMove.mouseDown(e);\n    });\n    $('#page_content').on('mouseup', function (e) {\n        DesignerMove.mouseUp(e);\n    });\n    $('#page_content').on('mousemove', function (e) {\n        DesignerMove.mouseMove(e);\n    });\n};\n\n/**\n * This function enables the events on table items.\n * It helps to enable them on page loading and when a table is added on the fly.\n * @param {number} index\n * @param {object} element\n */\nDesignerMove.enableTableEvents = function (index, element) {\n    $(element).on('click', '.select_all_1', function () {\n        DesignerMove.selectAll($(this).attr('table_name'), $(this).attr('db_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab,.small_tab2', function () {\n        DesignerMove.smallTab($(this).attr('table_name'), 1);\n    });\n    $(element).on('click', '.small_tab_pref_1', function () {\n        DesignerMove.startTabUpd($(this).attr('db_url'), $(this).attr('table_name_url'));\n    });\n    $(element).on('click', '.select_all_store_col', function () {\n        DesignerMove.storeColumn($(this).attr('table_name'), $(this).attr('col_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab_pref_click_opt', function () {\n        DesignerMove.clickOption(\n            $(this).attr('db_name'),\n            $(this).attr('table_name'),\n            $(this).attr('col_name'),\n            $(this).attr('db_table_name_url'),\n            $(this).attr('option_col_name_modal')\n        );\n    });\n    $(element).on('click', '.tab_field_2,.tab_field_3,.tab_field', function () {\n        var params = ($(this).attr('click_field_param')).split(',');\n        DesignerMove.clickField(params[3], params[0], params[1], params[2]);\n    });\n\n    $(element).find('.tab_zag_noquery').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_noquery').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_query').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, 1);\n    });\n    $(element).find('.tab_zag_query').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, 1);\n    });\n\n    DesignerMove.enablePageContentEvents();\n};\n\nwindow.AJAX.registerTeardown('designer/move.js', function () {\n    $('#side_menu').off('mouseenter mouseleave');\n    $('#key_Show_left_menu').off('click');\n    $('#toggleFullscreen').off('click');\n    $('#newPage').off('click');\n    $('#editPage').off('click');\n    $('#savePos').off('click');\n    $('#SaveAs').off('click');\n    $('#delPages').off('click');\n    $('#StartTableNew').off('click');\n    $('#rel_button').off('click');\n    $('#StartTableNew').off('click');\n    $('#display_field_button').off('click');\n    $('#reloadPage').off('click');\n    $('#angular_direct_button').off('click');\n    $('#grid_button').off('click');\n    $('#key_SB_all').off('click');\n    $('#SmallTabInvert').off('click');\n    $('#relLineInvert').off('click');\n    $('#exportPages').off('click');\n    $('#query_builder').off('click');\n    $('#key_Left_Right').off('click');\n    $('#pin_Text').off('click');\n    $('#canvas').off('click');\n    $('#key_HS_all').off('click');\n    $('#key_HS').off('click');\n    $('.scroll_tab_struct').off('click');\n    $('.scroll_tab_checkbox').off('click');\n    $('#id_scroll_tab').find('tr').off('click', '.designer_Tabs2,.designer_Tabs');\n    $('.designer_tab').off('click', '.select_all_1');\n    $('.designer_tab').off('click', '.small_tab,.small_tab2');\n    $('.designer_tab').off('click', '.small_tab_pref_1');\n    $('.tab_zag_noquery').off('mouseover');\n    $('.tab_zag_noquery').off('mouseout');\n    $('.tab_zag_query').off('mouseover');\n    $('.tab_zag_query').off('mouseout');\n    $('.designer_tab').off('click','.tab_field_2,.tab_field_3,.tab_field');\n    $('.designer_tab').off('click', '.select_all_store_col');\n    $('.designer_tab').off('click', '.small_tab_pref_click_opt');\n    $('#del_button').off('click');\n    $('#cancel_button').off('click');\n    $('#ok_add_object').off('click');\n    $('#cancel_close_option').off('click');\n    $('#ok_new_rel_panel').off('click');\n    $('#cancel_new_rel_panel').off('click');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mousemove');\n});\n\nwindow.AJAX.registerOnload('designer/move.js', function () {\n    $('#key_Show_left_menu').on('click', function () {\n        DesignerMove.showLeftMenu(this);\n        return false;\n    });\n    $('#toggleFullscreen').on('click', function () {\n        DesignerMove.toggleFullscreen();\n        return false;\n    });\n    $('#addOtherDbTables').on('click', function () {\n        DesignerMove.addOtherDbTables();\n        return false;\n    });\n    $('#newPage').on('click', function () {\n        DesignerMove.new();\n        return false;\n    });\n    $('#editPage').on('click', function () {\n        DesignerMove.editPages();\n        return false;\n    });\n    $('#savePos').on('click', function () {\n        DesignerMove.save3();\n        return false;\n    });\n    $('#SaveAs').on('click', function () {\n        DesignerMove.saveAs();\n        $(document).on('ajaxStop', function () {\n            $('#selected_value').on('click', function () {\n                $('#savePageNewRadio').prop('checked', true);\n            });\n        });\n        return false;\n    });\n    $('#delPages').on('click', function () {\n        DesignerMove.deletePages();\n        return false;\n    });\n    $('#StartTableNew').on('click', function () {\n        DesignerMove.startTableNew();\n        return false;\n    });\n    $('#rel_button').on('click', function () {\n        DesignerMove.startRelation();\n        return false;\n    });\n    $('#display_field_button').on('click', function () {\n        DesignerMove.startDisplayField();\n        return false;\n    });\n    $('#reloadPage').on('click', function () {\n        DesignerMove.loadPage(window.selectedPage);\n    });\n    $('#angular_direct_button').on('click', function () {\n        DesignerMove.angularDirect();\n        return false;\n    });\n    $('#grid_button').on('click', function () {\n        DesignerMove.grid();\n        return false;\n    });\n    $('#key_SB_all').on('click', function () {\n        DesignerMove.smallTabAll(this);\n        return false;\n    });\n    $('#SmallTabInvert').on('click', function () {\n        DesignerMove.smallTabInvert();\n        return false;\n    });\n    $('#relLineInvert').on('click', function () {\n        DesignerMove.relationLinesInvert();\n        return false;\n    });\n    $('#exportPages').on('click', function () {\n        DesignerMove.exportPages();\n        return false;\n    });\n    $('#query_builder').on('click', function () {\n        DesignerHistory.buildQuery('SQL Query on Database', 0);\n    });\n    $('#key_Left_Right').on('click', function () {\n        DesignerMove.sideMenuRight(this);\n        return false;\n    });\n    $('#side_menu').on('mouseenter', function () {\n        DesignerMove.showText();\n        return false;\n    });\n    $('#side_menu').on('mouseleave', function () {\n        DesignerMove.hideText();\n        return false;\n    });\n    $('#pin_Text').on('click', function () {\n        DesignerMove.pinText(this);\n        return false;\n    });\n    $('#canvas').on('click', function (event) {\n        DesignerMove.canvasClick(this, event);\n    });\n    $('#key_HS_all').on('click', function () {\n        DesignerMove.hideTabAll(this);\n        return false;\n    });\n    $('#key_HS').on('click', function () {\n        DesignerMove.noHaveConstr(this);\n        return false;\n    });\n\n    $('.designer_tab').each(DesignerMove.enableTableEvents);\n    $('.designer_tab').each(DesignerMove.addTableToTablesList);\n\n    $('input#del_button').on('click', function () {\n        DesignerMove.updRelation();\n    });\n    $('input#cancel_button').on('click', function () {\n        document.getElementById('layer_upd_relation').style.display = 'none';\n        DesignerMove.reload();\n    });\n    $('input#ok_add_object').on('click', function () {\n        DesignerMove.addObject(\n            $('#ok_add_object_db_name').val(),\n            $('#ok_add_object_table_name').val(),\n            $('#ok_add_object_col_name').val(),\n            $('#ok_add_object_db_and_table_name_url').val()\n        );\n    });\n    $('input#cancel_close_option').on('click', function () {\n        DesignerMove.closeOption();\n    });\n    $('input#ok_new_rel_panel').on('click', function () {\n        DesignerMove.newRelation();\n    });\n    $('input#cancel_new_rel_panel').on('click', function () {\n        document.getElementById('layer_new_relation').style.display = 'none';\n    });\n    DesignerMove.enablePageContentEvents();\n});\n"],"names":["$","DesignerMove","window","change","showRelationLines","alwaysShowText","AJAX","registerTeardown","document","off","show","registerOnload","$content","$img","find","$span","siblings","css","on","fullscreenElement","removeClass","attr","data","text","valueSent","saveValueInConfig","hide","markSaved","markUnsaved","mainDirection","directionEffect","curClick","smS","smAdd","sLeft","sRight","onRelation","onGrid","onDisplayField","onAngularDirect","clickField","linkRelation","canvasWidth","canvasHeight","osnTabWidth","osnTabHeight","heightField","globX","globY","timeoutId","layerMenuCurClick","fromArray","menuMoved","gridSize","isIe","all","opera","onscroll","generalScroll","onselectstart","mouseDown","e","clientX","body","scrollLeft","pageX","clientY","scrollTop","pageY","target","tagName","parentNode","className","id","getElementById","style","display","zIndex","mouseMove","preventDefault","newDx","newDy","deltaX","deltaY","$curClick","curX","parseFloat","curY","newX","newY","parseInt","$layerMenu","newWidth","width","left","top","mouseUp","reload","canvasPos","height","osnTabPos","setDefaultValuesFromSavedState","angularDirect","grid","$relLineInvert","relationLinesInvert","showText","$keySbAll","trigger","toggleClass","$keyLeftRight","main","smallTabRefresh","resizeOsnTab","maxX","maxY","key","jTabs","kX","offsetWidth","kY","offsetHeight","drawLine0","x1","x2","y1","y2","osnTab","colorTarget","line0","offsetLeft","offsetTop","getColorByTarget","n","a","K","key2","key3","clear","contr","checked","x1Left","x1Right","x2Left","x2Right","Math","abs","i","rowOffsetTop","tabHideButton","innerHTML","fromColumn","toColumn","line","colorLine","canvas","ctx","getContext","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","circle","rect","line2","line3","x1Local","x2Local","xS","x","y","r","w","color","arc","PI","clearRect","h","fillStyle","fillRect","toggleFullscreen","pageContent","addClass","screen","requestFullscreen","exitFullscreen","addTableToTablesList","index","tableDom","db","table","dbEncoded","tableEncoded","tableIsChecked","checkboxStatus","Messages","strHide","strShow","$newTableLine","strStructure","themeImagePath","html","first","append","startTabUpd","selectTab","currentvalue","visibleTab","val","$tablesCounter","displayModal","form","heading","type","modal","addOtherDbTables","$selectDb","strNone","$selectTable","post","CommonParams","get","message","each","innerText","$form","strAddTables","$table","encodeURIComponent","length","Functions","ajaxShowMessage","sprintf","strTableAlreadyExists","undefined","$newTableDom","remove","enableTableEvents","dbName","sqlQuery","rows","new","promptToSaveCurrentPage","loadPage","save","url","value","action","getUrlPos","forceString","designerTablesEnabled","poststr","argsep","coords","tbCoords","DesignerObjects","TableCoordinate","push","save2","callback","server","selectedPage","$msgbox","strProcessingRequest","success","error","ajaxRemoveMessage","strModificationSaved","name","trim","DesignerPage","saveToSelectedPage","submitSaveDialogAndClose","strEnterValidPageName","prepareForAjaxRequest","serialize","saveToNewPage","page","pgNr","pageDescr","save3","strPageName","strSavePage","editPages","createPageList","options","strOpenPage","selected","strSelectPage","deletePages","strDeletePage","$messageBox","deletingCurrentPage","strSuccessfulPageDelete","deletePage","saveAs","strSavePageAs","selectedValue","$selectedPage","choice","selectedPageId","strLeavingPage","exportPages","substring","split","pair","input","$formatDropDown","format","strExportRelationalSchema","paramPage","appendTo","showTablesInLandingPage","loadHtmlForPage","showNewPageTables","indexSent","startRelation","strSelectReferencedKey","T","f","pk","pkLocal","alert","strPleaseSelectPrimaryOrUniqueKey","strSelectForeignKey","fieldNameToSend","decodeURIComponent","newDisplayFieldClass","oldTabField","displayField","tabField","newRelation","startTableNew","set","CommonActions","refreshMain","smallTabAll","idThis","icon","children","alt","element","smallTab","src","dataset","right","down","smallTabInvert","t","idZag","idT","scrollTo","setTimeout","canvasClick","event","Key0","Key1","Key2","Key3","Key","localX","localY","offset","updRelation","tN","hideTabAll","E","EelementsLength","elements","startsWith","inArrayK","m","b","u","noHaveConstr","clearTimeout","showLeftMenu","up","sideMenuRight","moveMenuIcon","getElementsByTagName","resizeIcon","srcResizeIcon","srcMoveIcon","hasClass","hideText","pinText","startDisplayField","strChangeDisplay","TargetColors","targetColor","d","j","colorCase","c","round","g","clickOption","tableName","columnName","tableDbNameUrl","optionColNameString","designerOptions","closeOption","selectAll","idSelectAll","parentIsChecked","is","checkboxAll","click","disabled","selectField","splice","k","tableOnOver","buil","builLocal","storeColumn","colName","checkboxId","selectKeyField","addObject","dbTableNameUrl","p","whereObj","rel","sum","init","historyArray","strQueryEmpty","DesignerHistory","Where","HistoryObj","hTabs","renameObj","Rename","aggregateObj","Aggregate","Having","orderByObj","OrderBy","strObjectsCreated","existingDiv","accordion","enablePageContentEvents","params","prop","buildQuery"],"sourceRoot":""}