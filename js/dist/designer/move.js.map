{"version":3,"file":"designer/move.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/designer/move.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport { CommonActions, CommonParams } from '../modules/common.js';\n\n/**\n * @package PhpMyAdmin-Designer\n */\n\n/* global DesignerObjects */ // js/designer/objects.js\n/* global DesignerHistory, historyArray, selectField */ // js/designer/history.js\n/* global DesignerPage */ // js/designer/page.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerMove = {};\nwindow.DesignerMove = DesignerMove;\n\nvar change = 0; // variable to track any change in designer layout.\nvar showRelationLines = true;\nvar alwaysShowText = false;\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $(document).off('fullscreenchange');\n    $('#selflink').show();\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    var $content = $('#page_content');\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n\n    $content.css({ 'margin-left': '3px' });\n    $(document).on('fullscreenchange', function () {\n        if (! document.fullscreenElement) {\n            $content.removeClass('content_fullscreen')\n                .css({ 'width': 'auto', 'height': 'auto' });\n            $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n            $img.attr('src', $img.data('enter'))\n                .attr('title', $span.data('enter'));\n            $span.text($span.data('enter'));\n\n            // Saving the fullscreen state in config when\n            // designer exists fullscreen mode via ESC key\n\n            var valueSent = 'off';\n            DesignerMove.saveValueInConfig('full_screen', valueSent);\n        }\n    });\n\n    $('#selflink').hide();\n});\n\nDesignerMove.markSaved = function () {\n    change = 0;\n    $('#saved_state').text('');\n};\n\nDesignerMove.markUnsaved = function () {\n    change = 1;\n    $('#saved_state').text('*');\n};\n\nvar mainDirection = $('html').attr('dir') === 'rtl' ? 'right' : 'left';\n// Will be used to multiply the offsetLeft by -1 if the direction is rtl.\nvar directionEffect = mainDirection === 'right' ? -1 : 1;\nvar curClick = null;\nvar smS           = 0;\nvar smAdd         = 10;\nvar sLeft         = 0;\nvar sRight        = 0;\nvar onRelation    = 0;\nvar onGrid        = 0;\nvar onDisplayField = 0;\n// relation_style: 0 - angular 1 - direct\nvar onAngularDirect = 1;\nvar clickField    = 0;\nvar linkRelation  = '';\nvar canvasWidth   = 0;\nvar canvasHeight  = 0;\nvar osnTabWidth  = 0;\nvar osnTabHeight = 0;\nvar heightField   = 7;\nvar globX;\nvar globY;\nvar timeoutId;\nvar layerMenuCurClick = 0;\nwindow.fromArray = [];\nvar menuMoved = false;\nvar gridSize = 10;\n\n// ------------------------------------------------------------------------------\n\nvar isIe = document.all && !window.opera;\n\nif (isIe) {\n    window.onscroll = DesignerMove.generalScroll;\n    document.onselectstart = function () {\n        return false;\n    };\n}\n\nDesignerMove.mouseDown = function (e) {\n    // eslint-disable-next-line compat/compat\n    globX = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    globY = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    if (e.target.tagName === 'SPAN') {\n        curClick = e.target.parentNode.parentNode.parentNode.parentNode;\n    } else if (e.target.className === 'tab_zag_2') {\n        curClick = e.target.parentNode.parentNode.parentNode;\n    } else if (e.target.id === 'layer_menu_sizer_btn') {\n        layerMenuCurClick = 1;\n    } else if (e.target.className === 'M_butt') {\n        return false;\n    }\n\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'none';\n        curClick.style.zIndex = 2;\n    }\n};\n\nDesignerMove.mouseMove = function (e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    // eslint-disable-next-line compat/compat\n    var newDx = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    var newDy = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    var deltaX = globX - newDx;\n    var deltaY = globY - newDy;\n\n    globX = newDx;\n    globY = newDy;\n\n    if (curClick !== null) {\n        DesignerMove.markUnsaved();\n\n        var $curClick = $(curClick);\n\n        var curX = parseFloat($curClick.attr('data-' + mainDirection) || $curClick.css(mainDirection));\n        var curY = parseFloat($curClick.attr('data-top') || $curClick.css('top'));\n\n        var newX = curX - directionEffect * deltaX;\n        var newY = curY - deltaY;\n\n        $curClick.attr('data-' + mainDirection, newX);\n        $curClick.attr('data-top', newY);\n\n        if (onGrid) {\n            newX = parseInt(newX / gridSize) * gridSize;\n            newY = parseInt(newY / gridSize) * gridSize;\n        }\n\n        if (newX < 0) {\n            newX = 0;\n        } else if (newY < 0) {\n            newY = 0;\n        }\n        $curClick.css(mainDirection, newX + 'px');\n        $curClick.css('top', newY + 'px');\n    } else if (layerMenuCurClick) {\n        if (menuMoved) {\n            deltaX = -deltaX;\n        }\n        var $layerMenu = $('#layer_menu');\n        var newWidth = $layerMenu.width() + directionEffect * deltaX;\n        if (newWidth < 150) {\n            newWidth = 150;\n        }\n        $layerMenu.width(newWidth);\n    }\n\n    if (onRelation || onDisplayField) {\n        document.getElementById('designer_hint').style.left = (globX + 20) + 'px';\n        document.getElementById('designer_hint').style.top  = (globY + 20) + 'px';\n    }\n};\n\nDesignerMove.mouseUp = function () {\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'inline-block';\n        DesignerMove.reload();\n        curClick.style.zIndex = 1;\n        curClick = null;\n    }\n    layerMenuCurClick = 0;\n};\n\n// ------------------------------------------------------------------------------\n\nDesignerMove.canvasPos = function () {\n    canvasWidth  = document.getElementById('canvas').width  = osnTabWidth  - 3;\n    canvasHeight = document.getElementById('canvas').height = osnTabHeight - 3;\n\n    if (isIe) {\n        document.getElementById('canvas').style.width  = ((osnTabWidth  - 3) ? (osnTabWidth  - 3) : 0) + 'px';\n        document.getElementById('canvas').style.height = ((osnTabHeight - 3) ? (osnTabHeight - 3) : 0) + 'px';\n    }\n};\n\nDesignerMove.osnTabPos = function () {\n    osnTabWidth  = parseInt(document.getElementById('osn_tab').style.width, 10);\n    osnTabHeight = parseInt(document.getElementById('osn_tab').style.height, 10);\n};\n\nDesignerMove.setDefaultValuesFromSavedState = function () {\n    if ($('#angular_direct_button').attr('class') === 'M_butt') {\n        onAngularDirect = 0;\n    } else {\n        onAngularDirect = 1;\n    }\n    DesignerMove.angularDirect();\n\n    if ($('#grid_button').attr('class') === 'M_butt') {\n        onGrid = 1;\n    } else {\n        onGrid = 0;\n    }\n    DesignerMove.grid();\n\n    var $relLineInvert = $('#relLineInvert');\n    if ($relLineInvert.attr('class') === 'M_butt') {\n        showRelationLines = false;\n        $relLineInvert.attr('class', 'M_butt');\n    } else {\n        showRelationLines = true;\n        $relLineInvert.attr('class', 'M_butt_Selected_down');\n    }\n    DesignerMove.relationLinesInvert();\n\n    if ($('#pin_Text').attr('class') === 'M_butt_Selected_down') {\n        alwaysShowText = true;\n        DesignerMove.showText();\n    } else {\n        alwaysShowText = false;\n    }\n\n    var $keySbAll = $('#key_SB_all');\n    if ($keySbAll.attr('class') === 'M_butt_Selected_down') {\n        $keySbAll.trigger('click');\n        $keySbAll.toggleClass('M_butt_Selected_down');\n        $keySbAll.toggleClass('M_butt');\n    }\n\n    var $keyLeftRight = $('#key_Left_Right');\n    if ($keyLeftRight.attr('class') === 'M_butt_Selected_down') {\n        $keyLeftRight.trigger('click');\n    }\n};\n\nDesignerMove.main = function () {\n    // ---CROSS\n\n    document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n    DesignerMove.osnTabPos();\n    DesignerMove.canvasPos();\n    DesignerMove.smallTabRefresh();\n    DesignerMove.reload();\n    DesignerMove.setDefaultValuesFromSavedState();\n    if (isIe) {\n        DesignerMove.generalScroll();\n    }\n};\n\nDesignerMove.resizeOsnTab = function () {\n    var maxX = 0;\n    var maxY = 0;\n    for (var key in window.jTabs) {\n        var kX = parseInt(document.getElementById(key).style[mainDirection], 10) + document.getElementById(key).offsetWidth;\n        var kY = parseInt(document.getElementById(key).style.top, 10) + document.getElementById(key).offsetHeight;\n        maxX = maxX < kX ? kX : maxX;\n        maxY = maxY < kY ? kY : maxY;\n    }\n\n    osnTabWidth  = maxX + 50;\n    osnTabHeight = maxY + 50;\n    DesignerMove.canvasPos();\n};\n\n/**\n * Draw a colored line\n *\n * @param {number} x1\n * @param {number} x2\n * @param {number} y1\n * @param {number} y2\n * @param {HTMLElement} osnTab\n * @param {string} colorTarget\n * @return {void}\n */\nDesignerMove.drawLine0 = function (x1, x2, y1, y2, osnTab, colorTarget) {\n    DesignerMove.line0(\n        x1 + directionEffect * osnTab.offsetLeft,\n        y1 - osnTab.offsetTop,\n        x2 + directionEffect * osnTab.offsetLeft,\n        y2 - osnTab.offsetTop,\n        DesignerMove.getColorByTarget(colorTarget)\n    );\n};\n\n/**\n * refreshes display, must be called after state changes\n */\nDesignerMove.reload = function () {\n    DesignerMove.resizeOsnTab();\n    var n;\n    var x1;\n    var x2;\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    if (!document.getElementById('check_vis_' + key2).checked ||\n                        !document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        // if hide\n                        continue;\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft = 1;\n                    }\n\n                    var rowOffsetTop = 0;\n                    var tabHideButton = document.getElementById('id_hide_tbody_' + key2);\n\n                    if (tabHideButton.innerHTML === 'v') {\n                        var fromColumn = document.getElementById(key2 + '.' + key3);\n                        if (fromColumn) {\n                            rowOffsetTop = fromColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n\n                    rowOffsetTop = 0;\n                    tabHideButton = document.getElementById('id_hide_tbody_' + window.contr[K][key][key2][key3][0]);\n                    if (tabHideButton.innerHTML === 'v') {\n                        var toColumn = document.getElementById(window.contr[K][key][key2][key3][0] +\n                            '.' + window.contr[K][key][key2][key3][1]);\n                        if (toColumn) {\n                            rowOffsetTop = toColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y2 =\n                        document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n                    DesignerMove.drawLine0(\n                        x1, x2, y1, y2, osnTab, window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                    );\n                }\n            }\n        }\n    }\n};\n\n/**\n * draws a line from x1:y1 to x2:y2 with color\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line = function (x1, y1, x2, y2, colorLine) {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.strokeStyle = colorLine;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n};\n\n/**\n * draws a relation/constraint line, whether angular or not\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line0 = function (x1, y1, x2, y2, colorLine) {\n    if (! showRelationLines) {\n        return;\n    }\n    DesignerMove.circle(x1, y1, 3, 3, colorLine);\n    DesignerMove.rect(x2 - 1, y2 - 2, 4, 4, colorLine);\n\n    if (onAngularDirect) {\n        DesignerMove.line2(x1, y1, x2, y2, colorLine);\n    } else {\n        DesignerMove.line3(x1, y1, x2, y2, colorLine);\n    }\n};\n\n/**\n * draws a angular relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line2 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        x1Local += smAdd;\n        x2Local += smAdd;\n    } else if (sLeft) {\n        x1Local -= smAdd;\n        x2Local -= smAdd;\n    } else if (x1 < x2) {\n        x1Local += smAdd;\n        x2Local -= smAdd;\n    } else {\n        x1Local -= smAdd;\n        x2Local += smAdd;\n    }\n\n    DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n    DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n    DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n};\n\n/**\n * draws a relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line3 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        if (x1 < x2) {\n            x1Local += x2 - x1 + smAdd;\n            x2Local += smAdd;\n        } else {\n            x2Local += x1 - x2 + smAdd;\n            x1Local += smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n    if (sLeft) {\n        if (x1 < x2) {\n            x2Local -= x2 - x1 + smAdd;\n            x1Local -= smAdd;\n        } else {\n            x1Local -= x1 - x2 + smAdd;\n            x2Local -= smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n\n    var xS = (x1 + x2) / 2;\n    DesignerMove.line(x1, y1, xS, y1, colorLine);\n    DesignerMove.line(xS, y2, x2, y2, colorLine);\n    DesignerMove.line(xS, y1, xS, y2, colorLine);\n};\n\nDesignerMove.circle = function (x, y, r, w, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.lineWidth = w;\n    ctx.strokeStyle = color;\n    ctx.arc(x, y, r, 0, 2 * Math.PI, true);\n    ctx.stroke();\n};\n\nDesignerMove.clear = function () {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n};\n\nDesignerMove.rect = function (x1, y1, w, h, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.fillStyle = color;\n    ctx.fillRect(x1, y1, w, h);\n};\n\n// --------------------------- FULLSCREEN -------------------------------------\nDesignerMove.toggleFullscreen = function () {\n    var valueSent = '';\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n    var $content = $('#page_content');\n    const pageContent = document.getElementById('page_content');\n\n    if (! document.fullscreenElement) {\n        $img.attr('src', $img.data('exit'))\n            .attr('title', $span.data('exit'));\n        $span.text($span.data('exit'));\n        $content\n            .addClass('content_fullscreen')\n            .css({ 'width': screen.width - 5, 'height': screen.height - 5 });\n\n        $('#osn_tab').css({ 'width': screen.width + 'px', 'height': screen.height });\n        valueSent = 'on';\n        pageContent.requestFullscreen();\n    } else {\n        $img.attr('src', $img.data('enter'))\n            .attr('title', $span.data('enter'));\n        $span.text($span.data('enter'));\n        $content.removeClass('content_fullscreen')\n            .css({ 'width': 'auto', 'height': 'auto' });\n        $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n        document.exitFullscreen();\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('full_screen', valueSent);\n};\n\nDesignerMove.addTableToTablesList = function (index, tableDom) {\n    var db = $(tableDom).find('.small_tab_pref').attr('db');\n    var table = $(tableDom).find('.small_tab_pref').attr('table_name');\n    var dbEncoded = $(tableDom).find('.small_tab_pref').attr('db_url');\n    var tableEncoded = $(tableDom).find('.small_tab_pref').attr('table_name_url');\n    var tableIsChecked = $(tableDom).css('display') === 'block' ? 'checked' : '';\n    var checkboxStatus = (tableIsChecked === 'checked') ? window.Messages.strHide : window.Messages.strShow;\n    var $newTableLine = $('<tr>' +\n        '    <td title=\"' + window.Messages.strStructure + '\"' +\n        '        width=\"1px\"' +\n        '        class=\"L_butt2_1\">' +\n        '        <img alt=\"\"' +\n        '            db=\"' + dbEncoded + '\"' +\n        '            table_name=\"' + tableEncoded + '\"' +\n        '            class=\"scroll_tab_struct\"' +\n        '            src=\"' + themeImagePath + 'designer/exec.png\"/>' +\n        '    </td>' +\n        '    <td width=\"1px\">' +\n        '        <input class=\"scroll_tab_checkbox\"' +\n        '            title=\"' + checkboxStatus + '\"' +\n        '            id=\"check_vis_' + dbEncoded + '.' + tableEncoded + '\"' +\n        '            style=\"margin:0;\"' +\n        '            type=\"checkbox\"' +\n        '            value=\"' + dbEncoded + '.' + tableEncoded + '\"' + tableIsChecked +\n        '            />' +\n        '    </td>' +\n        '    <td class=\"designer_Tabs\"' +\n        '        designer_url_table_name=\"' + dbEncoded + '.' + tableEncoded + '\">' + $('<div/>').text(db + '.' + table).html() + '</td>' +\n        '</tr>');\n    $('#id_scroll_tab table').first().append($newTableLine);\n    $($newTableLine).find('.scroll_tab_struct').on('click', function () {\n        DesignerMove.startTabUpd(db, table);\n    });\n    $($newTableLine).on('click', '.designer_Tabs2,.designer_Tabs', function () {\n        DesignerMove.selectTab($(this).attr('designer_url_table_name'));\n    });\n    $($newTableLine).find('.scroll_tab_checkbox').on('click', function () {\n        $(this).attr('title', function (i, currentvalue) {\n            return currentvalue === window.Messages.strHide ? window.Messages.strShow : window.Messages.strHide;\n        });\n        DesignerMove.visibleTab(this,$(this).val());\n    });\n    var $tablesCounter = $('#tables_counter');\n    $tablesCounter.text(parseInt($tablesCounter.text(), 10) + 1);\n};\n\n/**\n * This function shows modal with Go buttons where required in designer\n * @param {object} form\n * @param {string} heading\n * @param {string} type\n *\n * @return {object} modal;\n */\nDesignerMove.displayModal = function (form, heading, type) {\n    var modal = $(type);\n    modal.modal('show');\n    modal.find('.modal-body').first().html(form);\n    $(type + 'Label').first().html(heading);\n    return modal;\n};\n\nDesignerMove.addOtherDbTables = function () {\n    var $selectDb = $('<select id=\"add_table_from\"></select>');\n    $selectDb.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    var $selectTable = $('<select id=\"add_table\"></select>');\n    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    $.post('index.php?route=/sql', {\n        'ajax_request' : true,\n        'sql_query' : 'SHOW databases;',\n        'server': CommonParams.get('server')\n    }, function (data) {\n        $(data.message).find('table.table_results.data.ajax').find('td.data').each(function () {\n            var val = $(this)[0].innerText;\n            $selectDb.append($('<option></option>').val(val).text(val));\n        });\n    });\n\n    var $form = $('<form action=\"\" class=\"ajax\"></form>')\n        .append($selectDb).append($selectTable);\n    var modal = DesignerMove.displayModal($form, window.Messages.strAddTables, '#designerGoModal');\n    $('#designerModalGoButton').on('click', function () {\n        var db = $('#add_table_from').val();\n        var table = $('#add_table').val();\n\n        // Check if table already imported or not.\n        var $table = $('[id=\"' + encodeURIComponent(db) + '.' + encodeURIComponent(table) + '\"]');\n        if ($table.length !== 0) {\n            Functions.ajaxShowMessage(\n                window.sprintf(window.Messages.strTableAlreadyExists, db + '.' + table),\n                undefined,\n                'error'\n            );\n            return;\n        }\n\n        $.post('index.php?route=/database/designer', {\n            'ajax_request' : true,\n            'dialog' : 'add_table',\n            'db' : db,\n            'table' : table,\n            'server': CommonParams.get('server')\n        }, function (data) {\n            var $newTableDom = $(data.message);\n            $newTableDom.find('a').first().remove();\n\n            var dbEncoded = $($newTableDom).find('.small_tab_pref').attr('db_url');\n            var tableEncoded = $($newTableDom).find('.small_tab_pref').attr('table_name_url');\n\n            if (typeof dbEncoded === 'string' && typeof tableEncoded === 'string') { // Do not try to add if attr not found !\n                $('#container-form').append($newTableDom);\n                DesignerMove.enableTableEvents(null, $newTableDom);\n                DesignerMove.addTableToTablesList(null, $newTableDom);\n                window.jTabs[dbEncoded + '.' + tableEncoded] = 1;\n                DesignerMove.markUnsaved();\n            }\n        });\n\n        $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n        modal.modal('hide');\n    });\n    $('#add_table_from').on('change', function () {\n        if ($(this).val()) {\n            var dbName = $(this).val();\n            var sqlQuery = 'SHOW tables;';\n            $.post('index.php?route=/sql', {\n                'ajax_request' : true,\n                'sql_query': sqlQuery,\n                'db' : dbName,\n                'server': CommonParams.get('server')\n            }, function (data) {\n                $selectTable.html('');\n                var rows = $(data.message).find('table.table_results.data.ajax').find('td.data');\n                if (rows.length === 0) {\n                    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n                }\n                rows.each(function () {\n                    var val = $(this)[0].innerText;\n                    $selectTable.append($('<option></option>').val(val).text(val));\n                });\n            });\n        }\n    });\n};\n\n// ------------------------------ NEW ------------------------------------------\nDesignerMove.new = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        DesignerMove.loadPage(-1);\n    });\n};\n\n// ------------------------------ SAVE ------------------------------------------\n// (del?) no for pdf\nDesignerMove.save = function (url) {\n    for (var key in window.jTabs) {\n        document.getElementById('t_x_' + key + '_').value = parseInt(document.getElementById(key).style.left, 10);\n        document.getElementById('t_y_' + key + '_').value = parseInt(document.getElementById(key).style.top, 10);\n        document.getElementById('t_v_' + key + '_').value = document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1;\n        document.getElementById('t_h_' + key + '_').value = document.getElementById('check_vis_' + key).checked ? 1 : 0;\n    }\n    document.getElementById('container-form').action = url;\n    $('#container-form').trigger('submit');\n};\n\nDesignerMove.getUrlPos = function (forceString) {\n    var key;\n    if (window.designerTablesEnabled || forceString) {\n        var poststr = '';\n        var argsep = CommonParams.get('arg_separator');\n        var i = 1;\n        for (key in window.jTabs) {\n            poststr += argsep + 't_x[' + i + ']=' + parseInt(document.getElementById(key).style.left, 10);\n            poststr += argsep + 't_y[' + i + ']=' + parseInt(document.getElementById(key).style.top, 10);\n            poststr += argsep + 't_v[' + i + ']=' + (document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1);\n            poststr += argsep + 't_h[' + i + ']=' + (document.getElementById('check_vis_' + key).checked ? 1 : 0);\n            poststr += argsep + 't_db[' + i + ']=' + $(document.getElementById(key)).attr('db_url');\n            poststr += argsep + 't_tbl[' + i + ']=' + $(document.getElementById(key)).attr('table_name_url');\n            i++;\n        }\n        return poststr;\n    } else {\n        var coords = [];\n        for (key in window.jTabs) {\n            if (document.getElementById('check_vis_' + key).checked) {\n                var x = parseInt(document.getElementById(key).style.left, 10);\n                var y = parseInt(document.getElementById(key).style.top, 10);\n                var tbCoords = new DesignerObjects.TableCoordinate(\n                    $(document.getElementById(key)).attr('db_url'),\n                    $(document.getElementById(key)).attr('table_name_url'),\n                    -1, x, y);\n                coords.push(tbCoords);\n            }\n        }\n        return coords;\n    }\n};\n\nDesignerMove.save2 = function (callback) {\n    if (window.designerTablesEnabled) {\n        var argsep = CommonParams.get('arg_separator');\n        var poststr = 'operation=savePage' + argsep + 'save_page=same' + argsep + 'ajax_request=true';\n        poststr += argsep + 'server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + argsep + 'selected_page=' + window.selectedPage;\n        poststr += DesignerMove.getUrlPos();\n\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer', poststr, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                Functions.ajaxShowMessage(window.Messages.strModificationSaved);\n                DesignerMove.markSaved();\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        var name = $('#page_name').html().trim();\n        DesignerPage.saveToSelectedPage(window.db, window.selectedPage, name, DesignerMove.getUrlPos(), function () {\n            DesignerMove.markSaved();\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.submitSaveDialogAndClose = function (callback, modal) {\n    var $form = $('#save_page');\n    var name = $form.find('input[name=\"selected_value\"]').val().trim();\n    if (name === '') {\n        Functions.ajaxShowMessage(window.Messages.strEnterValidPageName, false);\n        return;\n    }\n    modal.modal('hide');\n\n    if (window.designerTablesEnabled) {\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n        $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                DesignerMove.markSaved();\n                if (data.id) {\n                    window.selectedPage = data.id;\n                }\n                $('#page_name').text(name);\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n            DesignerMove.markSaved();\n            if (page.pgNr) {\n                window.selectedPage = page.pgNr;\n            }\n            $('#page_name').text(page.pageDescr);\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.save3 = function (callback) {\n    if (window.selectedPage !== -1) {\n        DesignerMove.save2(callback);\n    } else {\n        var $form = $('<form action=\"index.php?route=/database/designer\" method=\"post\" name=\"save_page\" id=\"save_page\" class=\"ajax\"></form>')\n            .append('<input type=\"hidden\" name=\"server\" value=\"' + window.server + '\">')\n            .append($('<input type=\"hidden\" name=\"db\" />').val(window.db))\n            .append('<input type=\"hidden\" name=\"operation\" value=\"savePage\">')\n            .append('<input type=\"hidden\" name=\"save_page\" value=\"new\">')\n            .append('<label for=\"selected_value\">' + window.Messages.strPageName +\n                '</label>:<input type=\"text\" name=\"selected_value\">');\n        var modal = DesignerMove.displayModal($form, window.Messages.strSavePage, '#designerGoModal');\n        $form.on('submit', function (e) {\n            e.preventDefault();\n            DesignerMove.submitSaveDialogAndClose(callback, modal);\n        });\n        $('#designerModalGoButton').on('click', function () {\n            var $form = $('#save_page');\n            $form.trigger('submit');\n\n            $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n            modal.modal('hide');\n        });\n    }\n};\n\n// ------------------------------ EDIT PAGES ------------------------------------------\nDesignerMove.editPages = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        var $msgbox = Functions.ajaxShowMessage();\n        $.post('index.php?route=/database/designer', {\n            'ajax_request': true,\n            'server': window.server,\n            'db': window.db,\n            'dialog': 'edit'\n        }, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n\n                if (! window.designerTablesEnabled) {\n                    DesignerPage.createPageList(window.db, function (options) {\n                        $('#selected_page').append(options);\n                    });\n                }\n                var modal = DesignerMove.displayModal(data.message, window.Messages.strOpenPage, '#designerGoModal');\n                $('#designerModalGoButton').on('click', function () {\n                    var $form = $('#edit_delete_pages');\n                    var selected = $form.find('select[name=\"selected_page\"]').val();\n                    if (selected === '0') {\n                        Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n\n                    $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                    modal.modal('hide');\n                    DesignerMove.loadPage(selected);\n                });\n            }\n        }); // end $.post()\n    });\n};\n\n// -----------------------------  DELETE PAGES ---------------------------------------\nDesignerMove.deletePages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'delete'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strDeletePage, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form = $('#edit_delete_pages');\n                var selected = $form.find('select[name=\"selected_page\"]').val();\n                if (selected === '0') {\n                    Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                    return;\n                }\n\n                var $messageBox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n                var deletingCurrentPage = parseInt(selected) === window.selectedPage;\n                Functions.prepareForAjaxRequest($form);\n\n                if (window.designerTablesEnabled) {\n                    $.post($form.attr('action'), $form.serialize(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    }); // end $.post()\n                } else {\n                    DesignerPage.deletePage(selected, function (success) {\n                        if (! success) {\n                            Functions.ajaxShowMessage('Error', false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    });\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\n// ------------------------------ SAVE AS PAGES ---------------------------------------\nDesignerMove.saveAs = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'save_as'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strSavePageAs, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form           = $('#save_as_pages');\n                var selectedValue  = $form.find('input[name=\"selected_value\"]').val().trim();\n                var $selectedPage  = $form.find('select[name=\"selected_page\"]');\n                var choice          = $form.find('input[name=\"save_page\"]:checked').val();\n                var name            = '';\n\n                if (choice === 'same') {\n                    if ($selectedPage.val() === '0') {\n                        Functions.ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n                    name = $selectedPage.find('option:selected').text();\n                } else if (choice === 'new') {\n                    if (selectedValue === '') {\n                        Functions.ajaxShowMessage(window.Messages.strEnterValidPageName, 2000);\n                        return;\n                    }\n                    name = selectedValue;\n                }\n\n                var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n                if (window.designerTablesEnabled) {\n                    Functions.prepareForAjaxRequest($form);\n                    $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (data.id) {\n                                window.selectedPage = data.id;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        }\n                    }); // end $.post()\n                } else {\n                    if (choice === 'same') {\n                        var selectedPageId = $selectedPage.find('option:selected').val();\n                        DesignerPage.saveToSelectedPage(window.db, selectedPageId, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    } else if (choice === 'new') {\n                        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    }\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n            // select current page by default\n            if (window.selectedPage !== -1) {\n                $('select[name=\"selected_page\"]').val(window.selectedPage);\n            }\n        }\n    }); // end $.post()\n};\n\nDesignerMove.promptToSaveCurrentPage = function (callback) {\n    if (change === 1 || window.selectedPage === -1) {\n        var modal = DesignerMove.displayModal('<div>' + window.Messages.strLeavingPage + '</div>',\n            window.Messages.strSavePage, '#designerPromptModal');\n        $('#designerModalYesButton').on('click', function () {\n            modal.modal('hide');\n            DesignerMove.save3(callback);\n        });\n        $('#designerModalNoButton').on('click', function () {\n            modal.modal('hide');\n            callback();\n        });\n    } else {\n        callback();\n    }\n};\n\n// ------------------------------ EXPORT PAGES ---------------------------------------\nDesignerMove.exportPages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    var argsep = CommonParams.get('arg_separator');\n\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'export',\n        'selected_page': window.selectedPage\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            var $form = $(data.message);\n            if (! window.designerTablesEnabled) {\n                $form.append('<input type=\"hidden\" name=\"offline_export\" value=\"true\">');\n            }\n            $.each(DesignerMove.getUrlPos(true).substring(1).split(argsep), function () {\n                var pair = this.split('=');\n                var input = $('<input type=\"hidden\">');\n                input.attr('name', pair[0]);\n                input.attr('value', pair[1]);\n                $form.append(input);\n            });\n            var $formatDropDown = $form.find('#plugins');\n            $formatDropDown.on('change', function () {\n                var format = $formatDropDown.val();\n                $form.find('.format_specific_options').hide();\n                $form.find('#' + format + '_options').show();\n            }).trigger('change');\n\n            var modal = DesignerMove.displayModal($form, window.Messages.strExportRelationalSchema, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                $('#id_export_pages').trigger('submit');\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\nDesignerMove.loadPage = function (page) {\n    if (window.designerTablesEnabled) {\n        var paramPage = '';\n        var argsep = CommonParams.get('arg_separator');\n        if (page !== null) {\n            paramPage = argsep + 'page=' + page;\n        }\n        $('<a href=\"index.php?route=/database/designer&server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + paramPage + '\"></a>')\n            .appendTo($('#page_content'))\n            .trigger('click');\n    } else {\n        if (page === null) {\n            DesignerPage.showTablesInLandingPage(window.db);\n        } else if (page > -1) {\n            DesignerPage.loadHtmlForPage(page);\n        } else if (page === -1) {\n            DesignerPage.showNewPageTables(true);\n        }\n    }\n    DesignerMove.markSaved();\n};\n\nDesignerMove.grid = function () {\n    var valueSent = '';\n    if (!onGrid) {\n        onGrid = 1;\n        valueSent = 'on';\n        document.getElementById('grid_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('grid_button').className = 'M_butt';\n        onGrid = 0;\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('snap_to_grid', valueSent);\n};\n\nDesignerMove.angularDirect = function () {\n    var valueSent = '';\n    if (onAngularDirect) {\n        onAngularDirect = 0;\n        valueSent = 'angular';\n        document.getElementById('angular_direct_button').className = 'M_butt_Selected_down';\n    } else {\n        onAngularDirect = 1;\n        valueSent = 'direct';\n        document.getElementById('angular_direct_button').className = 'M_butt';\n    }\n    DesignerMove.saveValueInConfig('angular_direct', valueSent);\n    DesignerMove.reload();\n};\n\nDesignerMove.saveValueInConfig = function (indexSent, valueSent) {\n    $.post('index.php?route=/database/designer',\n        {\n            'operation': 'save_setting_value',\n            'index': indexSent,\n            'ajax_request': true,\n            'server': window.server,\n            'value': valueSent\n        },\n        function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n};\n\n// ++++++++++++++++++++++++++++++ RELATION ++++++++++++++++++++++++++++++++++++++\nDesignerMove.startRelation = function () {\n    if (onDisplayField) {\n        return;\n    }\n\n    if (!onRelation) {\n        document.getElementById('foreign_relation').style.display = '';\n        onRelation = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strSelectReferencedKey;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('rel_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('rel_button').className = 'M_butt';\n        clickField = 0;\n        onRelation = 0;\n    }\n};\n\n// table field\nDesignerMove.clickField = function (db, T, f, pk) {\n    var pkLocal = parseInt(pk);\n    var argsep = CommonParams.get('arg_separator');\n    if (onRelation) {\n        if (!clickField) {\n            // .style.display=='none'        .style.display = 'none'\n            if (!pkLocal) {\n                alert(window.Messages.strPleaseSelectPrimaryOrUniqueKey);\n                return;// 0;\n            }// PK\n            if (window.jTabs[db + '.' + T] !== 1) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            clickField = 1;\n            linkRelation = 'DB1=' + db + argsep + 'T1=' + T + argsep + 'F1=' + f;\n            document.getElementById('designer_hint').innerHTML = window.Messages.strSelectForeignKey;\n        } else {\n            DesignerMove.startRelation(); // hidden hint...\n            if (window.jTabs[db + '.' + T] !== 1 || !pkLocal) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            var left = globX - (document.getElementById('layer_new_relation').offsetWidth >> 1);\n            document.getElementById('layer_new_relation').style.left = left + 'px';\n            var top = globY - document.getElementById('layer_new_relation').offsetHeight;\n            document.getElementById('layer_new_relation').style.top  = top + 'px';\n            document.getElementById('layer_new_relation').style.display = 'block';\n            linkRelation += argsep + 'DB2=' + db + argsep + 'T2=' + T + argsep + 'F2=' + f;\n        }\n    }\n\n    if (onDisplayField) {\n        var fieldNameToSend = decodeURIComponent(f);\n        var newDisplayFieldClass = 'tab_field';\n        var oldTabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n        // if is display field\n        if (window.displayField[T] === f) {// The display field is already the one defined, user wants to remove it\n            newDisplayFieldClass = 'tab_field';\n            delete window.displayField[T];\n            if (oldTabField) {// Clear the style\n                // Set display field class on old item\n                oldTabField.className = 'tab_field';\n            }\n            fieldNameToSend = '';\n        } else {\n            newDisplayFieldClass = 'tab_field_3';\n            if (window.displayField[T]) { // Had a previous one, clear it\n                if (oldTabField) {\n                    // Set display field class on old item\n                    oldTabField.className = 'tab_field';\n                }\n                delete window.displayField[T];\n            }\n            window.displayField[T] = f;\n\n            var tabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n            if (tabField) {\n                // Set new display field class\n                tabField.className = newDisplayFieldClass;\n            }\n        }\n        onDisplayField = 0;\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n\n        var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer',\n            {\n                'operation': 'setDisplayField',\n                'ajax_request': true,\n                'server': window.server,\n                'db': db,\n                'table': T,\n                'field': fieldNameToSend\n            },\n            function (data) {\n                if (data.success === false) {\n                    Functions.ajaxShowMessage(data.error, false);\n                } else {\n                    Functions.ajaxRemoveMessage($msgbox);\n                    Functions.ajaxShowMessage(window.Messages.strModificationSaved);\n                }\n            });\n    }\n};\n\nDesignerMove.newRelation = function () {\n    document.getElementById('layer_new_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db + argsep + 'db2=p';\n    linkRelation += argsep + 'on_delete=' + document.getElementById('on_delete').value + argsep + 'on_update=' + document.getElementById('on_update').value;\n    linkRelation += argsep + 'operation=addNewRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\n// -------------------------- create tables -------------------------------------\nDesignerMove.startTableNew = function () {\n    CommonParams.set('table', '');\n    CommonActions.refreshMain('index.php?route=/table/create');\n};\n\nDesignerMove.startTabUpd = function (db, table) {\n    CommonParams.set('db', db);\n    CommonParams.set('table', table);\n    CommonActions.refreshMain('index.php?route=/table/structure');\n};\n\n// --------------------------- hide tables --------------------------------------\n// max/min all tables\nDesignerMove.smallTabAll = function (idThis) {\n    var icon = idThis.children[0];\n    var valueSent = '';\n\n    if (icon.alt === 'v') {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() === 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = '>';\n        icon.src = icon.dataset.right;\n        valueSent = 'v';\n    } else {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() !== 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n        valueSent = '>';\n    }\n    DesignerMove.saveValueInConfig('small_big_all', valueSent);\n    $('#key_SB_all').toggleClass('M_butt_Selected_down');\n    $('#key_SB_all').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\n// invert max/min all tables\nDesignerMove.smallTabInvert = function () {\n    for (var key in window.jTabs) {\n        DesignerMove.smallTab(key, 0);\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.relationLinesInvert = function () {\n    showRelationLines = ! showRelationLines;\n    DesignerMove.saveValueInConfig('relation_lines', showRelationLines);\n    $('#relLineInvert').toggleClass('M_butt_Selected_down');\n    $('#relLineInvert').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\nDesignerMove.smallTabRefresh = function () {\n    for (var key in window.jTabs) {\n        if (document.getElementById('id_hide_tbody_' + key).innerHTML !== 'v') {\n            DesignerMove.smallTab(key, 0);\n        }\n    }\n};\n\nDesignerMove.smallTab = function (t, reload) {\n    var id      = document.getElementById('id_tbody_' + t);\n    var idThis = document.getElementById('id_hide_tbody_' + t);\n    if (idThis.innerHTML === 'v') {\n        // ---CROSS\n        id.style.display = 'none';\n        idThis.innerHTML = '>';\n    } else {\n        id.style.display = '';\n        idThis.innerHTML = 'v';\n    }\n    if (reload) {\n        DesignerMove.reload();\n    }\n};\n\nDesignerMove.selectTab = function (t) {\n    var idZag = document.getElementById('id_zag_' + t);\n    if (idZag.className !== 'tab_zag_3') {\n        document.getElementById('id_zag_' + t).className = 'tab_zag_2';\n    } else {\n        document.getElementById('id_zag_' + t).className = 'tab_zag';\n    }\n    // ----------\n    var idT = document.getElementById(t);\n    window.scrollTo(parseInt(idT.style.left, 10) - 300, parseInt(idT.style.top, 10) - 300);\n    setTimeout(\n        function () {\n            document.getElementById('id_zag_' + t).className = 'tab_zag';\n        },\n        800\n    );\n};\n\nDesignerMove.canvasClick = function (id, event) {\n    var n = 0;\n    var selected = 0;\n    var a = [];\n    var Key0;\n    var Key1;\n    var Key2;\n    var Key3;\n    var Key;\n    var x1;\n    var x2;\n    var K;\n    var key;\n    var key2;\n    var key3;\n    // eslint-disable-next-line compat/compat\n    var localX = isIe ? event.clientX + document.body.scrollLeft : event.pageX;\n    // eslint-disable-next-line compat/compat\n    var localY = isIe ? event.clientY + document.body.scrollTop : event.pageY;\n    localX -= $('#osn_tab').offset().left;\n    localY -= $('#osn_tab').offset().top;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            for (key2 in window.contr[K][key]) {\n                for (key3 in window.contr[K][key][key2]) {\n                    if (! document.getElementById('check_vis_' + key2).checked ||\n                        ! document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        continue; // if hide\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;// document.getElementById(key2+\".\"+key3).offsetLeft;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;// +document.getElementById(contr[K][key2][key3][0]+\".\"+contr[K][key2][key3][1]).offsetLeft\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft    = 1;\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop + document.getElementById(key2 + '.' + key3).offsetTop + heightField;\n                    var y2 = document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                                     document.getElementById(window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]).offsetTop + heightField;\n\n                    if (!selected && localX > x1 - 10 && localX < x1 + 10 && localY > y1 - 7 && localY < y1 + 7) {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab, 'rgba(255,0,0,1)'\n                        );\n\n                        selected = 1;\n                        Key0 = window.contr[K][key][key2][key3][0];\n                        Key1 = window.contr[K][key][key2][key3][1];\n                        Key2 = key2;\n                        Key3 = key3;\n                        Key = K;\n                    } else {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab,\n                            window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                        );\n                    }\n                }\n            }\n        }\n    }\n    if (selected) {\n        // select relations\n        var left = globX - (document.getElementById('layer_upd_relation').offsetWidth >> 1);\n        document.getElementById('layer_upd_relation').style.left = left + 'px';\n        var top = globY - document.getElementById('layer_upd_relation').offsetHeight - 10;\n        document.getElementById('layer_upd_relation').style.top = top + 'px';\n        document.getElementById('layer_upd_relation').style.display = 'block';\n        var argsep = CommonParams.get('arg_separator');\n        linkRelation = 'T1=' + Key0 + argsep + 'F1=' + Key1 + argsep + 'T2=' + Key2 + argsep + 'F2=' + Key3 + argsep + 'K=' + Key;\n    }\n};\n\nDesignerMove.updRelation = function () {\n    document.getElementById('layer_upd_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db;\n    linkRelation += argsep + 'operation=removeRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\nDesignerMove.visibleTab = function (id, tN) {\n    if (id.checked) {\n        document.getElementById(tN).style.display = 'block';\n    } else {\n        document.getElementById(tN).style.display = 'none';\n    }\n    DesignerMove.reload();\n    DesignerMove.markUnsaved();\n};\n\n// max/min all tables\nDesignerMove.hideTabAll = function (idThis) {\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (idThis.alt === 'v') {\n                E.elements[i].checked = true;\n                document.getElementById(E.elements[i].value).style.display = '';\n            } else {\n                E.elements[i].checked = false;\n                document.getElementById(E.elements[i].value).style.display = 'none';\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.inArrayK = function (x, m) {\n    var b = 0;\n    for (var u in m) {\n        if (x === u) {\n            b = 1;\n            break;\n        }\n    }\n    return b;\n};\n\nDesignerMove.noHaveConstr = function (idThis) {\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    a[key2] = a[window.contr[K][key][key2][key3][0]] = 1; // exist constr\n                }\n            }\n        }\n    }\n\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (!DesignerMove.inArrayK(E.elements[i].value, a)) {\n                if (idThis.alt === 'v') {\n                    E.elements[i].checked = true;\n                    document.getElementById(E.elements[i].value).style.display = '';\n                } else {\n                    E.elements[i].checked = false;\n                    document.getElementById(E.elements[i].value).style.display = 'none';\n                }\n            }\n        }\n    }\n};\n\nDesignerMove.generalScroll = function () {\n    // if (timeoutId)\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(\n        function () {\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.left = document.body.scrollLeft + 'px';\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.top  = document.body.scrollTop + 'px';\n        },\n        200\n    );\n};\n\n// max/min all tables\nDesignerMove.showLeftMenu = function (idThis) {\n    var icon = idThis.children[0];\n    $('#key_Show_left_menu').toggleClass('M_butt_Selected_down');\n    if (icon.alt === 'v') {\n        document.getElementById('layer_menu').style.top = '0px';\n        document.getElementById('layer_menu').style.display = 'block';\n        icon.alt = '>';\n        icon.src = icon.dataset.up;\n        if (isIe) {\n            DesignerMove.generalScroll();\n        }\n    } else {\n        document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n        document.getElementById('layer_menu').style.display = 'none';\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n    }\n};\n\nDesignerMove.sideMenuRight = function (idThis) {\n    $('#side_menu').toggleClass('right');\n    $('#layer_menu').toggleClass('float-start');\n    var moveMenuIcon = $(idThis.getElementsByTagName('img')[0]);\n    var resizeIcon = $('#layer_menu_sizer > img')\n        .toggleClass('float-start')\n        .toggleClass('float-end');\n\n    var srcResizeIcon = resizeIcon.attr('src');\n    resizeIcon.attr('src', resizeIcon.attr('data-right'));\n    resizeIcon.attr('data-right', srcResizeIcon);\n\n    var srcMoveIcon = moveMenuIcon.attr('src');\n    moveMenuIcon.attr('src', moveMenuIcon.attr('data-right'));\n    moveMenuIcon.attr('data-right', srcMoveIcon);\n\n    menuMoved = !menuMoved;\n    DesignerMove.saveValueInConfig('side_menu', $('#side_menu').hasClass('right'));\n    $('#key_Left_Right').toggleClass('M_butt_Selected_down');\n    $('#key_Left_Right').toggleClass('M_butt');\n};\n\nDesignerMove.showText = function () {\n    $('#side_menu').find('.hidable').show();\n};\n\nDesignerMove.hideText = function () {\n    if (!alwaysShowText) {\n        $('#side_menu').find('.hidable').hide();\n    }\n};\n\nDesignerMove.pinText = function () {\n    alwaysShowText = !alwaysShowText;\n    $('#pin_Text').toggleClass('M_butt_Selected_down');\n    $('#pin_Text').toggleClass('M_butt');\n    DesignerMove.saveValueInConfig('pin_text', alwaysShowText);\n};\n\nDesignerMove.startDisplayField = function () {\n    if (onRelation) {\n        return;\n    }\n    if (!onDisplayField) {\n        onDisplayField = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strChangeDisplay;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('display_field_button').className = 'M_butt_Selected_down';// '#FFEE99';gray #AAAAAA\n\n        if (isIe) { // correct for IE\n            document.getElementById('display_field_button').className = 'M_butt_Selected_down_IE';\n        }\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n        onDisplayField = 0;\n    }\n};\n\nvar TargetColors = [];\n\nDesignerMove.getColorByTarget = function (target) {\n    var color = '';  // \"rgba(0,100,150,1)\";\n\n    for (var targetColor in TargetColors) {\n        if (TargetColors[targetColor][0] === target) {\n            color = TargetColors[targetColor][1];\n            break;\n        }\n    }\n\n    if (color.length === 0) {\n        var i = TargetColors.length + 1;\n        var d = i % 6;\n        var j = (i - d) / 6;\n        j = j % 4;\n        j++;\n        var colorCase = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1],\n            [1, 1, 0],\n            [1, 0, 1],\n            [0, 1, 1]\n        ];\n        var a = colorCase[d][0];\n        var b = colorCase[d][1];\n        var c = colorCase[d][2];\n        var e = (1 - (j - 1) / 6);\n\n        var r = Math.round(a * 200 * e);\n        var g = Math.round(b * 200 * e);\n        b = Math.round(c * 200 * e);\n        color = 'rgba(' + r + ',' + g + ',' + b + ',1)';\n\n        TargetColors.push([target, color]);\n    }\n\n    return color;\n};\n\nDesignerMove.clickOption = function (dbName, tableName, columnName, tableDbNameUrl, optionColNameString) {\n    var designerOptions = document.getElementById('designer_optionse');\n    var left = globX - (designerOptions.offsetWidth >> 1);\n    designerOptions.style.left = left + 'px';\n    // var top = Glob_Y - designerOptions.offsetHeight - 10;\n    designerOptions.style.top  = (screen.height / 4) + 'px';\n    designerOptions.style.display = 'block';\n    document.getElementById('ok_add_object_db_and_table_name_url').value = tableDbNameUrl;\n    document.getElementById('ok_add_object_db_name').value = dbName;\n    document.getElementById('ok_add_object_table_name').value = tableName;\n    document.getElementById('ok_add_object_col_name').value = columnName;\n    document.getElementById('option_col_name').innerHTML = optionColNameString;\n};\n\nDesignerMove.closeOption = function () {\n    document.getElementById('designer_optionse').style.display = 'none';\n    document.getElementById('rel_opt').value = '--';\n    document.getElementById('Query').value = '';\n    document.getElementById('new_name').value = '';\n    document.getElementById('operator').value = '---';\n    document.getElementById('groupby').checked = false;\n    document.getElementById('h_rel_opt').value = '--';\n    document.getElementById('h_operator').value = '---';\n    document.getElementById('having').value = '';\n    document.getElementById('orderby').value = '---';\n};\n\nDesignerMove.selectAll = function (tableName, dbName, idSelectAll) {\n    var parentIsChecked = $('#' + idSelectAll).is(':checked');\n    var checkboxAll = $('#container-form input[id_check_all=\\'' + idSelectAll + '\\']:checkbox');\n\n    checkboxAll.each(function () {\n        // already checked and then check parent\n        if (parentIsChecked === true && this.checked) {\n            // was checked, removing column from selected fields\n            // trigger unchecked event\n            this.click();\n        }\n        this.checked = parentIsChecked;\n        this.disabled = parentIsChecked;\n    });\n    if (parentIsChecked) {\n        selectField.push('`' + tableName + '`.*');\n        window.fromArray.push(tableName);\n    } else {\n        var i;\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === ('`' + tableName + '`.*')) {\n                selectField.splice(i, 1);\n            }\n        }\n        var k;\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.tableOnOver = function (idThis, val, buil) {\n    var builLocal = parseInt(buil);\n    if (!val) {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag_2';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag_2';\n        }\n    } else {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag';\n        }\n    }\n};\n\n/**\n * This function stores selected column information in selectField[]\n * In case column is checked it add else it deletes\n *\n * @param {string} tableName\n * @param {string} colName\n * @param {string} checkboxId\n */\nDesignerMove.storeColumn = function (tableName, colName, checkboxId) {\n    var i;\n    var k;\n    var selectKeyField = '`' + tableName + '`.`' + colName + '`';\n    if (document.getElementById(checkboxId).checked === true) {\n        selectField.push(selectKeyField);\n        window.fromArray.push(tableName);\n    } else {\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === selectKeyField) {\n                selectField.splice(i, 1);\n                break;\n            }\n        }\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n};\n\n/**\n * This function builds object and adds them to historyArray\n * first it does a few checks on each object, then makes an object(where,rename,groupby,aggregate,orderby)\n * then a new history object is made and finally all these history objects are added to historyArray[]\n *\n * @param {string} dbName\n * @param {string} tableName\n * @param {string} colName\n * @param {string} dbTableNameUrl\n */\nDesignerMove.addObject = function (dbName, tableName, colName, dbTableNameUrl) {\n    var p;\n    var whereObj;\n    var rel = document.getElementById('rel_opt');\n    var sum = 0;\n    var init = historyArray.length;\n    if (rel.value !== '--') {\n        if (document.getElementById('Query').value === '') {\n            Functions.ajaxShowMessage(window.sprintf(window.Messages.strQueryEmpty));\n            return;\n        }\n        p = document.getElementById('Query');\n        whereObj = new DesignerHistory.Where(rel.value, p.value);// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Where'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('new_name').value !== '') {\n        var renameObj = new DesignerHistory.Rename(document.getElementById('new_name').value);// make Rename object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, renameObj, tableName, window.hTabs[dbTableNameUrl], 'Rename'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('operator').value !== '---') {\n        var aggregateObj = new DesignerHistory.Aggregate(document.getElementById('operator').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, aggregateObj, tableName, window.hTabs[dbTableNameUrl], 'Aggregate'));\n        sum = sum + 1;\n        // make aggregate operator\n    }\n    if (document.getElementById('groupby').checked === true) {\n        historyArray.push(new DesignerHistory.HistoryObj(colName, 'GroupBy', tableName, window.hTabs[dbTableNameUrl], 'GroupBy'));\n        sum = sum + 1;\n        // make groupby\n    }\n    if (document.getElementById('h_rel_opt').value !== '--') {\n        if (document.getElementById('having').value === '') {\n            return;\n        }\n        whereObj = new DesignerHistory.Having(\n            document.getElementById('h_rel_opt').value,\n            document.getElementById('having').value,\n            document.getElementById('h_operator').value\n        );// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Having'));\n        sum = sum + 1;\n        // make having\n    }\n    if (document.getElementById('orderby').value !== '---') {\n        var orderByObj = new DesignerHistory.OrderBy(document.getElementById('orderby').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, orderByObj, tableName, window.hTabs[dbTableNameUrl], 'OrderBy'));\n        sum = sum + 1;\n        // make orderby\n    }\n    Functions.ajaxShowMessage(window.sprintf(window.Messages.strObjectsCreated, sum));\n    // output sum new objects created\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(init, historyArray.length);\n    DesignerMove.closeOption();\n    $('#ab').accordion('refresh');\n};\n\nDesignerMove.enablePageContentEvents = function () {\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousemove');\n    $('#page_content').on('mousedown', function (e) {\n        DesignerMove.mouseDown(e);\n    });\n    $('#page_content').on('mouseup', function (e) {\n        DesignerMove.mouseUp(e);\n    });\n    $('#page_content').on('mousemove', function (e) {\n        DesignerMove.mouseMove(e);\n    });\n};\n\n/**\n * This function enables the events on table items.\n * It helps to enable them on page loading and when a table is added on the fly.\n * @param {number} index\n * @param {object} element\n */\nDesignerMove.enableTableEvents = function (index, element) {\n    $(element).on('click', '.select_all_1', function () {\n        DesignerMove.selectAll($(this).attr('table_name'), $(this).attr('db_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab,.small_tab2', function () {\n        DesignerMove.smallTab($(this).attr('table_name'), 1);\n    });\n    $(element).on('click', '.small_tab_pref_1', function () {\n        DesignerMove.startTabUpd($(this).attr('db_url'), $(this).attr('table_name_url'));\n    });\n    $(element).on('click', '.select_all_store_col', function () {\n        DesignerMove.storeColumn($(this).attr('table_name'), $(this).attr('col_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab_pref_click_opt', function () {\n        DesignerMove.clickOption(\n            $(this).attr('db_name'),\n            $(this).attr('table_name'),\n            $(this).attr('col_name'),\n            $(this).attr('db_table_name_url'),\n            $(this).attr('option_col_name_modal')\n        );\n    });\n    $(element).on('click', '.tab_field_2,.tab_field_3,.tab_field', function () {\n        var params = ($(this).attr('click_field_param')).split(',');\n        DesignerMove.clickField(params[3], params[0], params[1], params[2]);\n    });\n\n    $(element).find('.tab_zag_noquery').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_noquery').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_query').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, 1);\n    });\n    $(element).find('.tab_zag_query').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, 1);\n    });\n\n    DesignerMove.enablePageContentEvents();\n};\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $('#side_menu').off('mouseenter mouseleave');\n    $('#key_Show_left_menu').off('click');\n    $('#toggleFullscreen').off('click');\n    $('#newPage').off('click');\n    $('#editPage').off('click');\n    $('#savePos').off('click');\n    $('#SaveAs').off('click');\n    $('#delPages').off('click');\n    $('#StartTableNew').off('click');\n    $('#rel_button').off('click');\n    $('#StartTableNew').off('click');\n    $('#display_field_button').off('click');\n    $('#reloadPage').off('click');\n    $('#angular_direct_button').off('click');\n    $('#grid_button').off('click');\n    $('#key_SB_all').off('click');\n    $('#SmallTabInvert').off('click');\n    $('#relLineInvert').off('click');\n    $('#exportPages').off('click');\n    $('#query_builder').off('click');\n    $('#key_Left_Right').off('click');\n    $('#pin_Text').off('click');\n    $('#canvas').off('click');\n    $('#key_HS_all').off('click');\n    $('#key_HS').off('click');\n    $('.scroll_tab_struct').off('click');\n    $('.scroll_tab_checkbox').off('click');\n    $('#id_scroll_tab').find('tr').off('click', '.designer_Tabs2,.designer_Tabs');\n    $('.designer_tab').off('click', '.select_all_1');\n    $('.designer_tab').off('click', '.small_tab,.small_tab2');\n    $('.designer_tab').off('click', '.small_tab_pref_1');\n    $('.tab_zag_noquery').off('mouseover');\n    $('.tab_zag_noquery').off('mouseout');\n    $('.tab_zag_query').off('mouseover');\n    $('.tab_zag_query').off('mouseout');\n    $('.designer_tab').off('click','.tab_field_2,.tab_field_3,.tab_field');\n    $('.designer_tab').off('click', '.select_all_store_col');\n    $('.designer_tab').off('click', '.small_tab_pref_click_opt');\n    $('#del_button').off('click');\n    $('#cancel_button').off('click');\n    $('#ok_add_object').off('click');\n    $('#cancel_close_option').off('click');\n    $('#ok_new_rel_panel').off('click');\n    $('#cancel_new_rel_panel').off('click');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mousemove');\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    $('#key_Show_left_menu').on('click', function () {\n        DesignerMove.showLeftMenu(this);\n        return false;\n    });\n    $('#toggleFullscreen').on('click', function () {\n        DesignerMove.toggleFullscreen();\n        return false;\n    });\n    $('#addOtherDbTables').on('click', function () {\n        DesignerMove.addOtherDbTables();\n        return false;\n    });\n    $('#newPage').on('click', function () {\n        DesignerMove.new();\n        return false;\n    });\n    $('#editPage').on('click', function () {\n        DesignerMove.editPages();\n        return false;\n    });\n    $('#savePos').on('click', function () {\n        DesignerMove.save3();\n        return false;\n    });\n    $('#SaveAs').on('click', function () {\n        DesignerMove.saveAs();\n        $(document).on('ajaxStop', function () {\n            $('#selected_value').on('click', function () {\n                $('#savePageNewRadio').prop('checked', true);\n            });\n        });\n        return false;\n    });\n    $('#delPages').on('click', function () {\n        DesignerMove.deletePages();\n        return false;\n    });\n    $('#StartTableNew').on('click', function () {\n        DesignerMove.startTableNew();\n        return false;\n    });\n    $('#rel_button').on('click', function () {\n        DesignerMove.startRelation();\n        return false;\n    });\n    $('#display_field_button').on('click', function () {\n        DesignerMove.startDisplayField();\n        return false;\n    });\n    $('#reloadPage').on('click', function () {\n        DesignerMove.loadPage(window.selectedPage);\n    });\n    $('#angular_direct_button').on('click', function () {\n        DesignerMove.angularDirect();\n        return false;\n    });\n    $('#grid_button').on('click', function () {\n        DesignerMove.grid();\n        return false;\n    });\n    $('#key_SB_all').on('click', function () {\n        DesignerMove.smallTabAll(this);\n        return false;\n    });\n    $('#SmallTabInvert').on('click', function () {\n        DesignerMove.smallTabInvert();\n        return false;\n    });\n    $('#relLineInvert').on('click', function () {\n        DesignerMove.relationLinesInvert();\n        return false;\n    });\n    $('#exportPages').on('click', function () {\n        DesignerMove.exportPages();\n        return false;\n    });\n    $('#query_builder').on('click', function () {\n        DesignerHistory.buildQuery('SQL Query on Database', 0);\n    });\n    $('#key_Left_Right').on('click', function () {\n        DesignerMove.sideMenuRight(this);\n        return false;\n    });\n    $('#side_menu').on('mouseenter', function () {\n        DesignerMove.showText();\n        return false;\n    });\n    $('#side_menu').on('mouseleave', function () {\n        DesignerMove.hideText();\n        return false;\n    });\n    $('#pin_Text').on('click', function () {\n        DesignerMove.pinText(this);\n        return false;\n    });\n    $('#canvas').on('click', function (event) {\n        DesignerMove.canvasClick(this, event);\n    });\n    $('#key_HS_all').on('click', function () {\n        DesignerMove.hideTabAll(this);\n        return false;\n    });\n    $('#key_HS').on('click', function () {\n        DesignerMove.noHaveConstr(this);\n        return false;\n    });\n\n    $('.designer_tab').each(DesignerMove.enableTableEvents);\n    $('.designer_tab').each(DesignerMove.addTableToTablesList);\n\n    $('input#del_button').on('click', function () {\n        DesignerMove.updRelation();\n    });\n    $('input#cancel_button').on('click', function () {\n        document.getElementById('layer_upd_relation').style.display = 'none';\n        DesignerMove.reload();\n    });\n    $('input#ok_add_object').on('click', function () {\n        DesignerMove.addObject(\n            $('#ok_add_object_db_name').val(),\n            $('#ok_add_object_table_name').val(),\n            $('#ok_add_object_col_name').val(),\n            $('#ok_add_object_db_and_table_name_url').val()\n        );\n    });\n    $('input#cancel_close_option').on('click', function () {\n        DesignerMove.closeOption();\n    });\n    $('input#ok_new_rel_panel').on('click', function () {\n        DesignerMove.newRelation();\n    });\n    $('input#cancel_new_rel_panel').on('click', function () {\n        document.getElementById('layer_new_relation').style.display = 'none';\n    });\n    DesignerMove.enablePageContentEvents();\n});\n"],"names":["$","AJAX","Functions","CommonActions","CommonParams","DesignerMove","window","change","showRelationLines","alwaysShowText","registerTeardown","document","off","show","registerOnload","$content","$img","find","$span","siblings","css","on","fullscreenElement","removeClass","attr","data","text","valueSent","saveValueInConfig","hide","markSaved","markUnsaved","mainDirection","directionEffect","curClick","smS","smAdd","sLeft","sRight","onRelation","onGrid","onDisplayField","onAngularDirect","clickField","linkRelation","canvasWidth","canvasHeight","osnTabWidth","osnTabHeight","heightField","globX","globY","timeoutId","layerMenuCurClick","fromArray","menuMoved","gridSize","isIe","all","opera","onscroll","generalScroll","onselectstart","mouseDown","e","clientX","body","scrollLeft","pageX","clientY","scrollTop","pageY","target","tagName","parentNode","className","id","getElementById","style","display","zIndex","mouseMove","preventDefault","newDx","newDy","deltaX","deltaY","$curClick","curX","parseFloat","curY","newX","newY","parseInt","$layerMenu","newWidth","width","left","top","mouseUp","reload","canvasPos","height","osnTabPos","setDefaultValuesFromSavedState","angularDirect","grid","$relLineInvert","relationLinesInvert","showText","$keySbAll","trigger","toggleClass","$keyLeftRight","main","smallTabRefresh","resizeOsnTab","maxX","maxY","key","jTabs","kX","offsetWidth","kY","offsetHeight","drawLine0","x1","x2","y1","y2","osnTab","colorTarget","line0","offsetLeft","offsetTop","getColorByTarget","n","a","K","key2","key3","clear","contr","checked","x1Left","x1Right","x2Left","x2Right","Math","abs","i","rowOffsetTop","tabHideButton","innerHTML","fromColumn","toColumn","line","colorLine","canvas","ctx","getContext","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","circle","rect","line2","line3","x1Local","x2Local","xS","x","y","r","w","color","arc","PI","clearRect","h","fillStyle","fillRect","toggleFullscreen","pageContent","addClass","screen","requestFullscreen","exitFullscreen","addTableToTablesList","index","tableDom","db","table","dbEncoded","tableEncoded","tableIsChecked","checkboxStatus","Messages","strHide","strShow","$newTableLine","strStructure","themeImagePath","html","first","append","startTabUpd","selectTab","currentvalue","visibleTab","val","$tablesCounter","displayModal","form","heading","type","modal","addOtherDbTables","$selectDb","strNone","$selectTable","post","get","message","each","innerText","$form","strAddTables","$table","encodeURIComponent","length","ajaxShowMessage","sprintf","strTableAlreadyExists","undefined","$newTableDom","remove","enableTableEvents","dbName","sqlQuery","rows","new","promptToSaveCurrentPage","loadPage","save","url","value","action","getUrlPos","forceString","designerTablesEnabled","poststr","argsep","coords","tbCoords","DesignerObjects","TableCoordinate","push","save2","callback","server","selectedPage","$msgbox","strProcessingRequest","success","error","ajaxRemoveMessage","strModificationSaved","name","trim","DesignerPage","saveToSelectedPage","submitSaveDialogAndClose","strEnterValidPageName","prepareForAjaxRequest","serialize","saveToNewPage","page","pgNr","pageDescr","save3","strPageName","strSavePage","editPages","createPageList","options","strOpenPage","selected","strSelectPage","deletePages","strDeletePage","$messageBox","deletingCurrentPage","strSuccessfulPageDelete","deletePage","saveAs","strSavePageAs","selectedValue","$selectedPage","choice","selectedPageId","strLeavingPage","exportPages","substring","split","pair","input","$formatDropDown","format","strExportRelationalSchema","paramPage","appendTo","showTablesInLandingPage","loadHtmlForPage","showNewPageTables","indexSent","startRelation","strSelectReferencedKey","T","f","pk","pkLocal","alert","strPleaseSelectPrimaryOrUniqueKey","strSelectForeignKey","fieldNameToSend","decodeURIComponent","newDisplayFieldClass","oldTabField","displayField","tabField","newRelation","startTableNew","set","refreshMain","smallTabAll","idThis","icon","children","alt","element","smallTab","src","dataset","right","down","smallTabInvert","t","idZag","idT","scrollTo","setTimeout","canvasClick","event","Key0","Key1","Key2","Key3","Key","localX","localY","offset","updRelation","tN","hideTabAll","E","EelementsLength","elements","startsWith","inArrayK","m","b","u","noHaveConstr","clearTimeout","showLeftMenu","up","sideMenuRight","moveMenuIcon","getElementsByTagName","resizeIcon","srcResizeIcon","srcMoveIcon","hasClass","hideText","pinText","startDisplayField","strChangeDisplay","TargetColors","targetColor","d","j","colorCase","c","round","g","clickOption","tableName","columnName","tableDbNameUrl","optionColNameString","designerOptions","closeOption","selectAll","idSelectAll","parentIsChecked","is","checkboxAll","click","disabled","selectField","splice","k","tableOnOver","buil","builLocal","storeColumn","colName","checkboxId","selectKeyField","addObject","dbTableNameUrl","p","whereObj","rel","sum","init","historyArray","strQueryEmpty","DesignerHistory","Where","HistoryObj","hTabs","renameObj","Rename","aggregateObj","Aggregate","Having","orderByObj","OrderBy","strObjectsCreated","existingDiv","accordion","enablePageContentEvents","params","prop","buildQuery"],"sourceRoot":""}