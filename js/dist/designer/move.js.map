{"version":3,"file":"designer/move.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/designer/move.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport { CommonParams } from '../modules/common.js';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.js';\nimport refreshMainContent from '../modules/functions/refreshMainContent.js';\nimport { Navigation } from '../modules/navigation.js';\n\n/**\n * @package PhpMyAdmin-Designer\n */\n\n/* global DesignerObjects */ // js/designer/objects.js\n/* global DesignerHistory, historyArray, selectField */ // js/designer/history.js\n/* global DesignerPage */ // js/designer/page.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerMove = {};\nwindow.DesignerMove = DesignerMove;\n\nvar change = 0; // variable to track any change in designer layout.\nvar showRelationLines = true;\nvar alwaysShowText = false;\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $(document).off('fullscreenchange');\n    $('#selflink').show();\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    var $content = $('#page_content');\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n\n    $content.css({ 'margin-left': '3px' });\n    $(document).on('fullscreenchange', function () {\n        if (! document.fullscreenElement) {\n            $content.removeClass('content_fullscreen')\n                .css({ 'width': 'auto', 'height': 'auto' });\n            $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n            $img.attr('src', $img.data('enter'))\n                .attr('title', $span.data('enter'));\n            $span.text($span.data('enter'));\n\n            // Saving the fullscreen state in config when\n            // designer exists fullscreen mode via ESC key\n\n            var valueSent = 'off';\n            DesignerMove.saveValueInConfig('full_screen', valueSent);\n        }\n    });\n\n    $('#selflink').hide();\n});\n\nDesignerMove.markSaved = function () {\n    change = 0;\n    $('#saved_state').text('');\n};\n\nDesignerMove.markUnsaved = function () {\n    change = 1;\n    $('#saved_state').text('*');\n};\n\nvar mainDirection = $('html').attr('dir') === 'rtl' ? 'right' : 'left';\n// Will be used to multiply the offsetLeft by -1 if the direction is rtl.\nvar directionEffect = mainDirection === 'right' ? -1 : 1;\nvar curClick = null;\nvar smS = 0;\nvar smAdd = 10;\nvar sLeft = 0;\nvar sRight = 0;\nvar onRelation = 0;\nvar onGrid = 0;\nvar onDisplayField = 0;\n// relation_style: 0 - angular 1 - direct\nvar onAngularDirect = 1;\nvar clickField = 0;\nvar linkRelation = '';\nvar canvasWidth = 0;\nvar canvasHeight = 0;\nvar osnTabWidth = 0;\nvar osnTabHeight = 0;\nvar heightField = 7;\nvar globX;\nvar globY;\nvar timeoutId;\nvar layerMenuCurClick = 0;\nwindow.fromArray = [];\nvar menuMoved = false;\nvar gridSize = 10;\n\n// ------------------------------------------------------------------------------\n\nvar isIe = document.all && ! window.opera;\n\nif (isIe) {\n    window.onscroll = DesignerMove.generalScroll;\n    document.onselectstart = function () {\n        return false;\n    };\n}\n\nDesignerMove.mouseDown = function (e) {\n    // eslint-disable-next-line compat/compat\n    globX = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    globY = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    if (e.target.tagName === 'SPAN') {\n        curClick = e.target.parentNode.parentNode.parentNode.parentNode;\n    } else if (e.target.className === 'tab_zag_2') {\n        curClick = e.target.parentNode.parentNode.parentNode;\n    } else if (e.target.id === 'layer_menu_sizer_btn') {\n        layerMenuCurClick = 1;\n    } else if (e.target.className === 'M_butt') {\n        return false;\n    }\n\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'none';\n        curClick.style.zIndex = 2;\n    }\n};\n\nDesignerMove.mouseMove = function (e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    // eslint-disable-next-line compat/compat\n    var newDx = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    var newDy = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    var deltaX = globX - newDx;\n    var deltaY = globY - newDy;\n\n    globX = newDx;\n    globY = newDy;\n\n    if (curClick !== null) {\n        DesignerMove.markUnsaved();\n\n        var $curClick = $(curClick);\n\n        var curX = parseFloat($curClick.attr('data-' + mainDirection) || $curClick.css(mainDirection));\n        var curY = parseFloat($curClick.attr('data-top') || $curClick.css('top'));\n\n        var newX = curX - directionEffect * deltaX;\n        var newY = curY - deltaY;\n\n        $curClick.attr('data-' + mainDirection, newX);\n        $curClick.attr('data-top', newY);\n\n        if (onGrid) {\n            newX = parseInt(newX / gridSize) * gridSize;\n            newY = parseInt(newY / gridSize) * gridSize;\n        }\n\n        if (newX < 0) {\n            newX = 0;\n        } else if (newY < 0) {\n            newY = 0;\n        }\n        $curClick.css(mainDirection, newX + 'px');\n        $curClick.css('top', newY + 'px');\n    } else if (layerMenuCurClick) {\n        if (menuMoved) {\n            deltaX = -deltaX;\n        }\n        var $layerMenu = $('#layer_menu');\n        var newWidth = $layerMenu.width() + directionEffect * deltaX;\n        if (newWidth < 150) {\n            newWidth = 150;\n        }\n        $layerMenu.width(newWidth);\n    }\n\n    if (onRelation || onDisplayField) {\n        document.getElementById('designer_hint').style.left = (globX + 20) + 'px';\n        document.getElementById('designer_hint').style.top = (globY + 20) + 'px';\n    }\n};\n\nDesignerMove.mouseUp = function () {\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'inline-block';\n        DesignerMove.reload();\n        curClick.style.zIndex = 1;\n        curClick = null;\n    }\n    layerMenuCurClick = 0;\n};\n\n// ------------------------------------------------------------------------------\n\nDesignerMove.canvasPos = function () {\n    canvasWidth = document.getElementById('canvas').width = osnTabWidth - 3;\n    canvasHeight = document.getElementById('canvas').height = osnTabHeight - 3;\n\n    if (isIe) {\n        document.getElementById('canvas').style.width = ((osnTabWidth - 3) ? (osnTabWidth - 3) : 0) + 'px';\n        document.getElementById('canvas').style.height = ((osnTabHeight - 3) ? (osnTabHeight - 3) : 0) + 'px';\n    }\n};\n\nDesignerMove.osnTabPos = function () {\n    osnTabWidth = parseInt(document.getElementById('osn_tab').style.width, 10);\n    osnTabHeight = parseInt(document.getElementById('osn_tab').style.height, 10);\n};\n\nDesignerMove.setDefaultValuesFromSavedState = function () {\n    if ($('#angular_direct_button').attr('class') === 'M_butt') {\n        onAngularDirect = 0;\n    } else {\n        onAngularDirect = 1;\n    }\n    DesignerMove.angularDirect();\n\n    if ($('#grid_button').attr('class') === 'M_butt') {\n        onGrid = 1;\n    } else {\n        onGrid = 0;\n    }\n    DesignerMove.grid();\n\n    var $relLineInvert = $('#relLineInvert');\n    if ($relLineInvert.attr('class') === 'M_butt') {\n        showRelationLines = false;\n        $relLineInvert.attr('class', 'M_butt');\n    } else {\n        showRelationLines = true;\n        $relLineInvert.attr('class', 'M_butt_Selected_down');\n    }\n    DesignerMove.relationLinesInvert();\n\n    if ($('#pin_Text').attr('class') === 'M_butt_Selected_down') {\n        alwaysShowText = true;\n        DesignerMove.showText();\n    } else {\n        alwaysShowText = false;\n    }\n\n    var $keySbAll = $('#key_SB_all');\n    if ($keySbAll.attr('class') === 'M_butt_Selected_down') {\n        $keySbAll.trigger('click');\n        $keySbAll.toggleClass('M_butt_Selected_down');\n        $keySbAll.toggleClass('M_butt');\n    }\n\n    var $keyLeftRight = $('#key_Left_Right');\n    if ($keyLeftRight.attr('class') === 'M_butt_Selected_down') {\n        $keyLeftRight.trigger('click');\n    }\n};\n\nDesignerMove.main = function () {\n    // ---CROSS\n\n    document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n    DesignerMove.osnTabPos();\n    DesignerMove.canvasPos();\n    DesignerMove.smallTabRefresh();\n    DesignerMove.reload();\n    DesignerMove.setDefaultValuesFromSavedState();\n    if (isIe) {\n        DesignerMove.generalScroll();\n    }\n};\n\nDesignerMove.resizeOsnTab = function () {\n    var maxX = 0;\n    var maxY = 0;\n    for (var key in window.jTabs) {\n        var kX = parseInt(document.getElementById(key).style[mainDirection], 10) + document.getElementById(key).offsetWidth;\n        var kY = parseInt(document.getElementById(key).style.top, 10) + document.getElementById(key).offsetHeight;\n        maxX = maxX < kX ? kX : maxX;\n        maxY = maxY < kY ? kY : maxY;\n    }\n\n    osnTabWidth = maxX + 50;\n    osnTabHeight = maxY + 50;\n    DesignerMove.canvasPos();\n};\n\n/**\n * Draw a colored line\n *\n * @param {number} x1\n * @param {number} x2\n * @param {number} y1\n * @param {number} y2\n * @param {HTMLElement} osnTab\n * @param {string} colorTarget\n * @return {void}\n */\nDesignerMove.drawLine0 = function (x1, x2, y1, y2, osnTab, colorTarget) {\n    DesignerMove.line0(\n        x1 + directionEffect * osnTab.offsetLeft,\n        y1 - osnTab.offsetTop,\n        x2 + directionEffect * osnTab.offsetLeft,\n        y2 - osnTab.offsetTop,\n        DesignerMove.getColorByTarget(colorTarget)\n    );\n};\n\n/**\n * refreshes display, must be called after state changes\n */\nDesignerMove.reload = function () {\n    DesignerMove.resizeOsnTab();\n    var n;\n    var x1;\n    var x2;\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    if (! document.getElementById('check_vis_' + key2).checked ||\n                        ! document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        // if hide\n                        continue;\n                    }\n                    var x1Left = document.getElementById(key2).offsetLeft + 1;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft = 1;\n                    }\n\n                    var rowOffsetTop = 0;\n                    var tabHideButton = document.getElementById('id_hide_tbody_' + key2);\n\n                    if (tabHideButton.innerHTML === 'v') {\n                        var fromColumn = document.getElementById(key2 + '.' + key3);\n                        if (fromColumn) {\n                            rowOffsetTop = fromColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n\n                    rowOffsetTop = 0;\n                    tabHideButton = document.getElementById('id_hide_tbody_' + window.contr[K][key][key2][key3][0]);\n                    if (tabHideButton.innerHTML === 'v') {\n                        var toColumn = document.getElementById(window.contr[K][key][key2][key3][0] +\n                            '.' + window.contr[K][key][key2][key3][1]);\n                        if (toColumn) {\n                            rowOffsetTop = toColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y2 =\n                        document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n                    DesignerMove.drawLine0(\n                        x1, x2, y1, y2, osnTab, window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                    );\n                }\n            }\n        }\n    }\n};\n\n/**\n * draws a line from x1:y1 to x2:y2 with color\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line = function (x1, y1, x2, y2, colorLine) {\n    var canvas = document.getElementById('canvas');\n    var ctx = canvas.getContext('2d');\n    ctx.strokeStyle = colorLine;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n};\n\n/**\n * draws a relation/constraint line, whether angular or not\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line0 = function (x1, y1, x2, y2, colorLine) {\n    if (! showRelationLines) {\n        return;\n    }\n    DesignerMove.circle(x1, y1, 3, 3, colorLine);\n    DesignerMove.rect(x2 - 1, y2 - 2, 4, 4, colorLine);\n\n    if (onAngularDirect) {\n        DesignerMove.line2(x1, y1, x2, y2, colorLine);\n    } else {\n        DesignerMove.line3(x1, y1, x2, y2, colorLine);\n    }\n};\n\n/**\n * draws a angular relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line2 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        x1Local += smAdd;\n        x2Local += smAdd;\n    } else if (sLeft) {\n        x1Local -= smAdd;\n        x2Local -= smAdd;\n    } else if (x1 < x2) {\n        x1Local += smAdd;\n        x2Local -= smAdd;\n    } else {\n        x1Local -= smAdd;\n        x2Local += smAdd;\n    }\n\n    DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n    DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n    DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n};\n\n/**\n * draws a relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line3 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        if (x1 < x2) {\n            x1Local += x2 - x1 + smAdd;\n            x2Local += smAdd;\n        } else {\n            x2Local += x1 - x2 + smAdd;\n            x1Local += smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n    if (sLeft) {\n        if (x1 < x2) {\n            x2Local -= x2 - x1 + smAdd;\n            x1Local -= smAdd;\n        } else {\n            x1Local -= x1 - x2 + smAdd;\n            x2Local -= smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n\n    var xS = (x1 + x2) / 2;\n    DesignerMove.line(x1, y1, xS, y1, colorLine);\n    DesignerMove.line(xS, y2, x2, y2, colorLine);\n    DesignerMove.line(xS, y1, xS, y2, colorLine);\n};\n\nDesignerMove.circle = function (x, y, r, w, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.lineWidth = w;\n    ctx.strokeStyle = color;\n    ctx.arc(x, y, r, 0, 2 * Math.PI, true);\n    ctx.stroke();\n};\n\nDesignerMove.clear = function () {\n    var canvas = document.getElementById('canvas');\n    var ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n};\n\nDesignerMove.rect = function (x1, y1, w, h, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.fillStyle = color;\n    ctx.fillRect(x1, y1, w, h);\n};\n\n// --------------------------- FULLSCREEN -------------------------------------\nDesignerMove.toggleFullscreen = function () {\n    var valueSent = '';\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n    var $content = $('#page_content');\n    const pageContent = document.getElementById('page_content');\n\n    if (! document.fullscreenElement) {\n        $img.attr('src', $img.data('exit'))\n            .attr('title', $span.data('exit'));\n        $span.text($span.data('exit'));\n        $content\n            .addClass('content_fullscreen')\n            .css({ 'width': screen.width - 5, 'height': screen.height - 5 });\n\n        $('#osn_tab').css({ 'width': screen.width + 'px', 'height': screen.height });\n        valueSent = 'on';\n        pageContent.requestFullscreen();\n    } else {\n        $img.attr('src', $img.data('enter'))\n            .attr('title', $span.data('enter'));\n        $span.text($span.data('enter'));\n        $content.removeClass('content_fullscreen')\n            .css({ 'width': 'auto', 'height': 'auto' });\n        $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n        document.exitFullscreen();\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('full_screen', valueSent);\n};\n\nDesignerMove.addTableToTablesList = function (index, tableDom) {\n    var db = $(tableDom).find('.small_tab_pref').attr('db');\n    var table = $(tableDom).find('.small_tab_pref').attr('table_name');\n    var dbEncoded = $(tableDom).find('.small_tab_pref').attr('db_url');\n    var tableEncoded = $(tableDom).find('.small_tab_pref').attr('table_name_url');\n    var tableIsChecked = $(tableDom).css('display') === 'block' ? 'checked' : '';\n    var checkboxStatus = (tableIsChecked === 'checked') ? window.Messages.strHide : window.Messages.strShow;\n    var $newTableLine = $('<tr>' +\n        '    <td title=\"' + window.Messages.strStructure + '\"' +\n        '        width=\"1px\"' +\n        '        class=\"L_butt2_1\">' +\n        '        <img alt=\"\"' +\n        '            db=\"' + dbEncoded + '\"' +\n        '            table_name=\"' + tableEncoded + '\"' +\n        '            class=\"scroll_tab_struct\"' +\n        '            src=\"' + themeImagePath + 'designer/exec.png\"/>' +\n        '    </td>' +\n        '    <td width=\"1px\">' +\n        '        <input class=\"scroll_tab_checkbox\"' +\n        '            title=\"' + checkboxStatus + '\"' +\n        '            id=\"check_vis_' + dbEncoded + '.' + tableEncoded + '\"' +\n        '            style=\"margin:0;\"' +\n        '            type=\"checkbox\"' +\n        '            value=\"' + dbEncoded + '.' + tableEncoded + '\"' + tableIsChecked +\n        '            />' +\n        '    </td>' +\n        '    <td class=\"designer_Tabs\"' +\n        '        designer_url_table_name=\"' + dbEncoded + '.' + tableEncoded + '\">' + $('<div/>').text(db + '.' + table).html() + '</td>' +\n        '</tr>');\n    $('#id_scroll_tab table').first().append($newTableLine);\n    $($newTableLine).find('.scroll_tab_struct').on('click', function () {\n        DesignerMove.startTabUpd(db, table);\n    });\n    $($newTableLine).on('click', '.designer_Tabs2,.designer_Tabs', function () {\n        DesignerMove.selectTab($(this).attr('designer_url_table_name'));\n    });\n    $($newTableLine).find('.scroll_tab_checkbox').on('click', function () {\n        $(this).attr('title', function (i, currentvalue) {\n            return currentvalue === window.Messages.strHide ? window.Messages.strShow : window.Messages.strHide;\n        });\n        DesignerMove.visibleTab(this, $(this).val());\n    });\n    var $tablesCounter = $('#tables_counter');\n    $tablesCounter.text(parseInt($tablesCounter.text(), 10) + 1);\n};\n\n/**\n * This function shows modal with Go buttons where required in designer\n * @param {object} form\n * @param {string} heading\n * @param {string} type\n *\n * @return {object} modal;\n */\nDesignerMove.displayModal = function (form, heading, type) {\n    var modal = $(type);\n    modal.modal('show');\n    modal.find('.modal-body').first().html(form);\n    $(type + 'Label').first().html(heading);\n    return modal;\n};\n\nDesignerMove.addOtherDbTables = function () {\n    var $selectDb = $('<select id=\"add_table_from\"></select>');\n    $selectDb.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    var $selectTable = $('<select id=\"add_table\"></select>');\n    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n\n    $.post('index.php?route=/sql', {\n        'ajax_request': true,\n        'sql_query': 'SHOW databases;',\n        'server': CommonParams.get('server')\n    }, function (data) {\n        $(data.message).find('table.table_results.data.ajax').find('td.data').each(function () {\n            var val = $(this)[0].innerText;\n            $selectDb.append($('<option></option>').val(val).text(val));\n        });\n    });\n\n    var $form = $('<form action=\"\" class=\"ajax\"></form>')\n        .append($selectDb).append($selectTable);\n    var modal = DesignerMove.displayModal($form, window.Messages.strAddTables, '#designerGoModal');\n    $('#designerModalGoButton').on('click', function () {\n        var db = $('#add_table_from').val();\n        var table = $('#add_table').val();\n\n        // Check if table already imported or not.\n        var $table = $('[id=\"' + encodeURIComponent(db) + '.' + encodeURIComponent(table) + '\"]');\n        if ($table.length !== 0) {\n            ajaxShowMessage(\n                window.sprintf(window.Messages.strTableAlreadyExists, db + '.' + table),\n                undefined,\n                'error'\n            );\n            return;\n        }\n\n        $.post('index.php?route=/database/designer', {\n            'ajax_request': true,\n            'dialog': 'add_table',\n            'db': db,\n            'table': table,\n            'server': CommonParams.get('server')\n        }, function (data) {\n            var $newTableDom = $(data.message);\n            $newTableDom.find('a').first().remove();\n\n            var dbEncoded = $($newTableDom).find('.small_tab_pref').attr('db_url');\n            var tableEncoded = $($newTableDom).find('.small_tab_pref').attr('table_name_url');\n\n            if (typeof dbEncoded === 'string' && typeof tableEncoded === 'string') { // Do not try to add if attr not found !\n                $('#container-form').append($newTableDom);\n                DesignerMove.enableTableEvents(null, $newTableDom);\n                DesignerMove.addTableToTablesList(null, $newTableDom);\n                window.jTabs[dbEncoded + '.' + tableEncoded] = 1;\n                DesignerMove.markUnsaved();\n            }\n        });\n\n        $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n        modal.modal('hide');\n    });\n    $('#add_table_from').on('change', function () {\n        if ($(this).val()) {\n            var dbName = $(this).val();\n            var sqlQuery = 'SHOW tables;';\n            $.post('index.php?route=/sql', {\n                'ajax_request': true,\n                'sql_query': sqlQuery,\n                'db': dbName,\n                'server': CommonParams.get('server')\n            }, function (data) {\n                $selectTable.html('');\n                var rows = $(data.message).find('table.table_results.data.ajax').find('td.data');\n                if (rows.length === 0) {\n                    $selectTable.append('<option value=\"\">' + window.Messages.strNone + '</option>');\n                }\n                rows.each(function () {\n                    var val = $(this)[0].innerText;\n                    $selectTable.append($('<option></option>').val(val).text(val));\n                });\n            });\n        }\n    });\n};\n\n// ------------------------------ NEW ------------------------------------------\nDesignerMove.new = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        DesignerMove.loadPage(-1);\n    });\n};\n\n// ------------------------------ SAVE ------------------------------------------\n// (del?) no for pdf\nDesignerMove.save = function (url) {\n    for (var key in window.jTabs) {\n        document.getElementById('t_x_' + key + '_').value = parseInt(document.getElementById(key).style.left, 10);\n        document.getElementById('t_y_' + key + '_').value = parseInt(document.getElementById(key).style.top, 10);\n        document.getElementById('t_v_' + key + '_').value = document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1;\n        document.getElementById('t_h_' + key + '_').value = document.getElementById('check_vis_' + key).checked ? 1 : 0;\n    }\n    document.getElementById('container-form').action = url;\n    $('#container-form').trigger('submit');\n};\n\nDesignerMove.getUrlPos = function (forceString) {\n    var key;\n    if (window.designerTablesEnabled || forceString) {\n        var poststr = '';\n        var argsep = CommonParams.get('arg_separator');\n        var i = 1;\n        for (key in window.jTabs) {\n            poststr += argsep + 't_x[' + i + ']=' + parseInt(document.getElementById(key).style.left, 10);\n            poststr += argsep + 't_y[' + i + ']=' + parseInt(document.getElementById(key).style.top, 10);\n            poststr += argsep + 't_v[' + i + ']=' + (document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1);\n            poststr += argsep + 't_h[' + i + ']=' + (document.getElementById('check_vis_' + key).checked ? 1 : 0);\n            poststr += argsep + 't_db[' + i + ']=' + $(document.getElementById(key)).attr('db_url');\n            poststr += argsep + 't_tbl[' + i + ']=' + $(document.getElementById(key)).attr('table_name_url');\n            i++;\n        }\n        return poststr;\n    } else {\n        var coords = [];\n        for (key in window.jTabs) {\n            if (document.getElementById('check_vis_' + key).checked) {\n                var x = parseInt(document.getElementById(key).style.left, 10);\n                var y = parseInt(document.getElementById(key).style.top, 10);\n                var tbCoords = new DesignerObjects.TableCoordinate(\n                    $(document.getElementById(key)).attr('db_url'),\n                    $(document.getElementById(key)).attr('table_name_url'),\n                    -1, x, y);\n                coords.push(tbCoords);\n            }\n        }\n        return coords;\n    }\n};\n\nDesignerMove.save2 = function (callback) {\n    if (window.designerTablesEnabled) {\n        var argsep = CommonParams.get('arg_separator');\n        var poststr = 'operation=savePage' + argsep + 'save_page=same' + argsep + 'ajax_request=true';\n        poststr += argsep + 'server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + argsep + 'selected_page=' + window.selectedPage;\n        poststr += DesignerMove.getUrlPos();\n\n        var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer', poststr, function (data) {\n            if (data.success === false) {\n                ajaxShowMessage(data.error, false);\n            } else {\n                ajaxRemoveMessage($msgbox);\n                ajaxShowMessage(window.Messages.strModificationSaved);\n                DesignerMove.markSaved();\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        var name = $('#page_name').html().trim();\n        DesignerPage.saveToSelectedPage(window.db, window.selectedPage, name, DesignerMove.getUrlPos(), function () {\n            DesignerMove.markSaved();\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.submitSaveDialogAndClose = function (callback, modal) {\n    var $form = $('#save_page');\n    var name = $form.find('input[name=\"selected_value\"]').val().trim();\n    if (name === '') {\n        ajaxShowMessage(window.Messages.strEnterValidPageName, false);\n        return;\n    }\n    modal.modal('hide');\n\n    if (window.designerTablesEnabled) {\n        var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n        $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n            if (data.success === false) {\n                ajaxShowMessage(data.error, false);\n            } else {\n                ajaxRemoveMessage($msgbox);\n                DesignerMove.markSaved();\n                if (data.id) {\n                    window.selectedPage = data.id;\n                }\n                $('#page_name').text(name);\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n            DesignerMove.markSaved();\n            if (page.pgNr) {\n                window.selectedPage = page.pgNr;\n            }\n            $('#page_name').text(page.pageDescr);\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.save3 = function (callback) {\n    if (window.selectedPage !== -1) {\n        DesignerMove.save2(callback);\n    } else {\n        var $form = $('<form action=\"index.php?route=/database/designer\" method=\"post\" name=\"save_page\" id=\"save_page\" class=\"ajax\"></form>')\n            .append('<input type=\"hidden\" name=\"server\" value=\"' + window.server + '\">')\n            .append($('<input type=\"hidden\" name=\"db\" />').val(window.db))\n            .append('<input type=\"hidden\" name=\"operation\" value=\"savePage\">')\n            .append('<input type=\"hidden\" name=\"save_page\" value=\"new\">')\n            .append('<label for=\"selected_value\">' + window.Messages.strPageName +\n                '</label>:<input type=\"text\" name=\"selected_value\">');\n        var modal = DesignerMove.displayModal($form, window.Messages.strSavePage, '#designerGoModal');\n        $form.on('submit', function (e) {\n            e.preventDefault();\n            DesignerMove.submitSaveDialogAndClose(callback, modal);\n        });\n        $('#designerModalGoButton').on('click', function () {\n            var $form = $('#save_page');\n            $form.trigger('submit');\n\n            $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n            modal.modal('hide');\n        });\n    }\n};\n\n// ------------------------------ EDIT PAGES ------------------------------------------\nDesignerMove.editPages = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        var $msgbox = ajaxShowMessage();\n        $.post('index.php?route=/database/designer', {\n            'ajax_request': true,\n            'server': window.server,\n            'db': window.db,\n            'dialog': 'edit'\n        }, function (data) {\n            if (data.success === false) {\n                ajaxShowMessage(data.error, false);\n            } else {\n                ajaxRemoveMessage($msgbox);\n\n                if (! window.designerTablesEnabled) {\n                    DesignerPage.createPageList(window.db, function (options) {\n                        $('#selected_page').append(options);\n                    });\n                }\n                var modal = DesignerMove.displayModal(data.message, window.Messages.strOpenPage, '#designerGoModal');\n                $('#designerModalGoButton').on('click', function () {\n                    var $form = $('#edit_delete_pages');\n                    var selected = $form.find('select[name=\"selected_page\"]').val();\n                    if (selected === '0') {\n                        ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n\n                    $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                    modal.modal('hide');\n                    DesignerMove.loadPage(selected);\n                });\n            }\n        }); // end $.post()\n    });\n};\n\n// -----------------------------  DELETE PAGES ---------------------------------------\nDesignerMove.deletePages = function () {\n    var $msgbox = ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'delete'\n    }, function (data) {\n        if (data.success === false) {\n            ajaxShowMessage(data.error, false);\n        } else {\n            ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strDeletePage, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form = $('#edit_delete_pages');\n                var selected = $form.find('select[name=\"selected_page\"]').val();\n                if (selected === '0') {\n                    ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                    return;\n                }\n\n                var $messageBox = ajaxShowMessage(window.Messages.strProcessingRequest);\n                var deletingCurrentPage = parseInt(selected) === window.selectedPage;\n                Functions.prepareForAjaxRequest($form);\n\n                if (window.designerTablesEnabled) {\n                    $.post($form.attr('action'), $form.serialize(), function (data) {\n                        if (data.success === false) {\n                            ajaxShowMessage(data.error, false);\n                        } else {\n                            ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    }); // end $.post()\n                } else {\n                    DesignerPage.deletePage(selected, function (success) {\n                        if (! success) {\n                            ajaxShowMessage('Error', false);\n                        } else {\n                            ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                ajaxShowMessage(window.Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    });\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\n// ------------------------------ SAVE AS PAGES ---------------------------------------\nDesignerMove.saveAs = function () {\n    var $msgbox = ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'save_as'\n    }, function (data) {\n        if (data.success === false) {\n            ajaxShowMessage(data.error, false);\n        } else {\n            ajaxRemoveMessage($msgbox);\n\n            if (! window.designerTablesEnabled) {\n                DesignerPage.createPageList(window.db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, window.Messages.strSavePageAs, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form = $('#save_as_pages');\n                var selectedValue = $form.find('input[name=\"selected_value\"]').val().trim();\n                var $selectedPage = $form.find('select[name=\"selected_page\"]');\n                var choice = $form.find('input[name=\"save_page\"]:checked').val();\n                var name = '';\n\n                if (choice === 'same') {\n                    if ($selectedPage.val() === '0') {\n                        ajaxShowMessage(window.Messages.strSelectPage, 2000);\n                        return;\n                    }\n                    name = $selectedPage.find('option:selected').text();\n                } else if (choice === 'new') {\n                    if (selectedValue === '') {\n                        ajaxShowMessage(window.Messages.strEnterValidPageName, 2000);\n                        return;\n                    }\n                    name = selectedValue;\n                }\n\n                var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n                if (window.designerTablesEnabled) {\n                    Functions.prepareForAjaxRequest($form);\n                    $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n                        if (data.success === false) {\n                            ajaxShowMessage(data.error, false);\n                        } else {\n                            ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (data.id) {\n                                window.selectedPage = data.id;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        }\n                    }); // end $.post()\n                } else {\n                    if (choice === 'same') {\n                        var selectedPageId = $selectedPage.find('option:selected').val();\n                        DesignerPage.saveToSelectedPage(window.db, selectedPageId, name, DesignerMove.getUrlPos(), function (page) {\n                            ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    } else if (choice === 'new') {\n                        DesignerPage.saveToNewPage(window.db, name, DesignerMove.getUrlPos(), function (page) {\n                            ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                window.selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(window.selectedPage);\n                        });\n                    }\n                }\n\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n            // select current page by default\n            if (window.selectedPage !== -1) {\n                $('select[name=\"selected_page\"]').val(window.selectedPage);\n            }\n        }\n    }); // end $.post()\n};\n\nDesignerMove.promptToSaveCurrentPage = function (callback) {\n    if (change === 1 || window.selectedPage === -1) {\n        var modal = DesignerMove.displayModal('<div>' + window.Messages.strLeavingPage + '</div>',\n            window.Messages.strSavePage, '#designerPromptModal');\n        $('#designerModalYesButton').on('click', function () {\n            modal.modal('hide');\n            DesignerMove.save3(callback);\n        });\n        $('#designerModalNoButton').on('click', function () {\n            modal.modal('hide');\n            callback();\n        });\n    } else {\n        callback();\n    }\n};\n\n// ------------------------------ EXPORT PAGES ---------------------------------------\nDesignerMove.exportPages = function () {\n    var $msgbox = ajaxShowMessage();\n    var argsep = CommonParams.get('arg_separator');\n\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': window.server,\n        'db': window.db,\n        'dialog': 'export',\n        'selected_page': window.selectedPage\n    }, function (data) {\n        if (data.success === false) {\n            ajaxShowMessage(data.error, false);\n        } else {\n            ajaxRemoveMessage($msgbox);\n\n            var $form = $(data.message);\n            if (! window.designerTablesEnabled) {\n                $form.append('<input type=\"hidden\" name=\"offline_export\" value=\"true\">');\n            }\n            $.each(DesignerMove.getUrlPos(true).substring(1).split(argsep), function () {\n                var pair = this.split('=');\n                var input = $('<input type=\"hidden\">');\n                input.attr('name', pair[0]);\n                input.attr('value', pair[1]);\n                $form.append(input);\n            });\n            var $formatDropDown = $form.find('#plugins');\n            $formatDropDown.on('change', function () {\n                var format = $formatDropDown.val();\n                $form.find('.format_specific_options').hide();\n                $form.find('#' + format + '_options').show();\n            }).trigger('change');\n\n            var modal = DesignerMove.displayModal($form, window.Messages.strExportRelationalSchema, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                $('#id_export_pages').trigger('submit');\n                $('#designerModalGoButton').off('click');// Unregister the event for other modals to not call this one\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\nDesignerMove.loadPage = function (page) {\n    if (window.designerTablesEnabled) {\n        var paramPage = '';\n        var argsep = CommonParams.get('arg_separator');\n        if (page !== null) {\n            paramPage = argsep + 'page=' + page;\n        }\n        $('<a href=\"index.php?route=/database/designer&server=' + window.server + argsep + 'db=' + encodeURIComponent(window.db) + paramPage + '\"></a>')\n            .appendTo($('#page_content'))\n            .trigger('click');\n    } else {\n        if (page === null) {\n            DesignerPage.showTablesInLandingPage(window.db);\n        } else if (page > -1) {\n            DesignerPage.loadHtmlForPage(page);\n        } else if (page === -1) {\n            DesignerPage.showNewPageTables(true);\n        }\n    }\n    DesignerMove.markSaved();\n};\n\nDesignerMove.grid = function () {\n    var valueSent = '';\n    if (! onGrid) {\n        onGrid = 1;\n        valueSent = 'on';\n        document.getElementById('grid_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('grid_button').className = 'M_butt';\n        onGrid = 0;\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('snap_to_grid', valueSent);\n};\n\nDesignerMove.angularDirect = function () {\n    var valueSent = '';\n    if (onAngularDirect) {\n        onAngularDirect = 0;\n        valueSent = 'angular';\n        document.getElementById('angular_direct_button').className = 'M_butt_Selected_down';\n    } else {\n        onAngularDirect = 1;\n        valueSent = 'direct';\n        document.getElementById('angular_direct_button').className = 'M_butt';\n    }\n    DesignerMove.saveValueInConfig('angular_direct', valueSent);\n    DesignerMove.reload();\n};\n\nDesignerMove.saveValueInConfig = function (indexSent, valueSent) {\n    $.post('index.php?route=/database/designer',\n        {\n            'operation': 'save_setting_value',\n            'index': indexSent,\n            'ajax_request': true,\n            'server': window.server,\n            'value': valueSent\n        },\n        function (data) {\n            if (data.success === false) {\n                ajaxShowMessage(data.error, false);\n            }\n        });\n};\n\n// ++++++++++++++++++++++++++++++ RELATION ++++++++++++++++++++++++++++++++++++++\nDesignerMove.startRelation = function () {\n    if (onDisplayField) {\n        return;\n    }\n\n    if (! onRelation) {\n        document.getElementById('foreign_relation').style.display = '';\n        onRelation = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strSelectReferencedKey;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('rel_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('rel_button').className = 'M_butt';\n        clickField = 0;\n        onRelation = 0;\n    }\n};\n\n// table field\nDesignerMove.clickField = function (db, T, f, pk) {\n    var pkLocal = parseInt(pk);\n    var argsep = CommonParams.get('arg_separator');\n    if (onRelation) {\n        if (! clickField) {\n            // .style.display=='none'        .style.display = 'none'\n            if (! pkLocal) {\n                alert(window.Messages.strPleaseSelectPrimaryOrUniqueKey);\n                return;// 0;\n            }// PK\n            if (window.jTabs[db + '.' + T] !== 1) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            clickField = 1;\n            linkRelation = 'DB1=' + db + argsep + 'T1=' + T + argsep + 'F1=' + f;\n            document.getElementById('designer_hint').innerHTML = window.Messages.strSelectForeignKey;\n        } else {\n            DesignerMove.startRelation(); // hidden hint...\n            if (window.jTabs[db + '.' + T] !== 1 || ! pkLocal) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            var left = globX - (document.getElementById('layer_new_relation').offsetWidth >> 1);\n            document.getElementById('layer_new_relation').style.left = left + 'px';\n            var top = globY - document.getElementById('layer_new_relation').offsetHeight;\n            document.getElementById('layer_new_relation').style.top = top + 'px';\n            document.getElementById('layer_new_relation').style.display = 'block';\n            linkRelation += argsep + 'DB2=' + db + argsep + 'T2=' + T + argsep + 'F2=' + f;\n        }\n    }\n\n    if (onDisplayField) {\n        var fieldNameToSend = decodeURIComponent(f);\n        var newDisplayFieldClass = 'tab_field';\n        var oldTabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n        // if is display field\n        if (window.displayField[T] === f) {// The display field is already the one defined, user wants to remove it\n            newDisplayFieldClass = 'tab_field';\n            delete window.displayField[T];\n            if (oldTabField) {// Clear the style\n                // Set display field class on old item\n                oldTabField.className = 'tab_field';\n            }\n            fieldNameToSend = '';\n        } else {\n            newDisplayFieldClass = 'tab_field_3';\n            if (window.displayField[T]) { // Had a previous one, clear it\n                if (oldTabField) {\n                    // Set display field class on old item\n                    oldTabField.className = 'tab_field';\n                }\n                delete window.displayField[T];\n            }\n            window.displayField[T] = f;\n\n            var tabField = document.getElementById('id_tr_' + T + '.' + window.displayField[T]);\n            if (tabField) {\n                // Set new display field class\n                tabField.className = newDisplayFieldClass;\n            }\n        }\n        onDisplayField = 0;\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n\n        var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer',\n            {\n                'operation': 'setDisplayField',\n                'ajax_request': true,\n                'server': window.server,\n                'db': db,\n                'table': T,\n                'field': fieldNameToSend\n            },\n            function (data) {\n                if (data.success === false) {\n                    ajaxShowMessage(data.error, false);\n                } else {\n                    ajaxRemoveMessage($msgbox);\n                    ajaxShowMessage(window.Messages.strModificationSaved);\n                }\n            });\n    }\n};\n\nDesignerMove.newRelation = function () {\n    document.getElementById('layer_new_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db + argsep + 'db2=p';\n    linkRelation += argsep + 'on_delete=' + document.getElementById('on_delete').value + argsep + 'on_update=' + document.getElementById('on_update').value;\n    linkRelation += argsep + 'operation=addNewRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            ajaxShowMessage(data.error, false);\n        } else {\n            ajaxRemoveMessage($msgbox);\n            ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\n// -------------------------- create tables -------------------------------------\nDesignerMove.startTableNew = function () {\n    Navigation.update(CommonParams.set('table', ''));\n    refreshMainContent('index.php?route=/table/create');\n};\n\nDesignerMove.startTabUpd = function (db, table) {\n    Navigation.update(CommonParams.set('db', db));\n    Navigation.update(CommonParams.set('table', table));\n    refreshMainContent('index.php?route=/table/structure');\n};\n\n// --------------------------- hide tables --------------------------------------\n// max/min all tables\nDesignerMove.smallTabAll = function (idThis) {\n    var icon = idThis.children[0];\n    var valueSent = '';\n\n    if (icon.alt === 'v') {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() === 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = '>';\n        icon.src = icon.dataset.right;\n        valueSent = 'v';\n    } else {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() !== 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n        valueSent = '>';\n    }\n    DesignerMove.saveValueInConfig('small_big_all', valueSent);\n    $('#key_SB_all').toggleClass('M_butt_Selected_down');\n    $('#key_SB_all').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\n// invert max/min all tables\nDesignerMove.smallTabInvert = function () {\n    for (var key in window.jTabs) {\n        DesignerMove.smallTab(key, 0);\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.relationLinesInvert = function () {\n    showRelationLines = ! showRelationLines;\n    DesignerMove.saveValueInConfig('relation_lines', showRelationLines);\n    $('#relLineInvert').toggleClass('M_butt_Selected_down');\n    $('#relLineInvert').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\nDesignerMove.smallTabRefresh = function () {\n    for (var key in window.jTabs) {\n        if (document.getElementById('id_hide_tbody_' + key).innerHTML !== 'v') {\n            DesignerMove.smallTab(key, 0);\n        }\n    }\n};\n\nDesignerMove.smallTab = function (t, reload) {\n    var id = document.getElementById('id_tbody_' + t);\n    var idThis = document.getElementById('id_hide_tbody_' + t);\n    if (idThis.innerHTML === 'v') {\n        // ---CROSS\n        id.style.display = 'none';\n        idThis.innerHTML = '>';\n    } else {\n        id.style.display = '';\n        idThis.innerHTML = 'v';\n    }\n    if (reload) {\n        DesignerMove.reload();\n    }\n};\n\nDesignerMove.selectTab = function (t) {\n    var idZag = document.getElementById('id_zag_' + t);\n    if (idZag.className !== 'tab_zag_3') {\n        document.getElementById('id_zag_' + t).className = 'tab_zag_2';\n    } else {\n        document.getElementById('id_zag_' + t).className = 'tab_zag';\n    }\n    // ----------\n    var idT = document.getElementById(t);\n    window.scrollTo(parseInt(idT.style.left, 10) - 300, parseInt(idT.style.top, 10) - 300);\n    setTimeout(\n        function () {\n            document.getElementById('id_zag_' + t).className = 'tab_zag';\n        },\n        800\n    );\n};\n\nDesignerMove.canvasClick = function (id, event) {\n    var n = 0;\n    var selected = 0;\n    var a = [];\n    var Key0;\n    var Key1;\n    var Key2;\n    var Key3;\n    var Key;\n    var x1;\n    var x2;\n    var K;\n    var key;\n    var key2;\n    var key3;\n    // eslint-disable-next-line compat/compat\n    var localX = isIe ? event.clientX + document.body.scrollLeft : event.pageX;\n    // eslint-disable-next-line compat/compat\n    var localY = isIe ? event.clientY + document.body.scrollTop : event.pageY;\n    localX -= $('#osn_tab').offset().left;\n    localY -= $('#osn_tab').offset().top;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            for (key2 in window.contr[K][key]) {\n                for (key3 in window.contr[K][key][key2]) {\n                    if (! document.getElementById('check_vis_' + key2).checked ||\n                        ! document.getElementById('check_vis_' + window.contr[K][key][key2][key3][0]).checked) {\n                        continue; // if hide\n                    }\n                    var x1Left = document.getElementById(key2).offsetLeft + 1;// document.getElementById(key2+\".\"+key3).offsetLeft;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left = document.getElementById(window.contr[K][key][key2][key3][0]).offsetLeft;// +document.getElementById(contr[K][key2][key3][0]+\".\"+contr[K][key2][key3][1]).offsetLeft\n                    var x2Right = x2Left + document.getElementById(window.contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft = 1;\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop + document.getElementById(key2 + '.' + key3).offsetTop + heightField;\n                    var y2 = document.getElementById(window.contr[K][key][key2][key3][0]).offsetTop +\n                        document.getElementById(window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]).offsetTop + heightField;\n\n                    if (! selected && localX > x1 - 10 && localX < x1 + 10 && localY > y1 - 7 && localY < y1 + 7) {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab, 'rgba(255,0,0,1)'\n                        );\n\n                        selected = 1;\n                        Key0 = window.contr[K][key][key2][key3][0];\n                        Key1 = window.contr[K][key][key2][key3][1];\n                        Key2 = key2;\n                        Key3 = key3;\n                        Key = K;\n                    } else {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab,\n                            window.contr[K][key][key2][key3][0] + '.' + window.contr[K][key][key2][key3][1]\n                        );\n                    }\n                }\n            }\n        }\n    }\n    if (selected) {\n        // select relations\n        var left = globX - (document.getElementById('layer_upd_relation').offsetWidth >> 1);\n        document.getElementById('layer_upd_relation').style.left = left + 'px';\n        var top = globY - document.getElementById('layer_upd_relation').offsetHeight - 10;\n        document.getElementById('layer_upd_relation').style.top = top + 'px';\n        document.getElementById('layer_upd_relation').style.display = 'block';\n        var argsep = CommonParams.get('arg_separator');\n        linkRelation = 'T1=' + Key0 + argsep + 'F1=' + Key1 + argsep + 'T2=' + Key2 + argsep + 'F2=' + Key3 + argsep + 'K=' + Key;\n    }\n};\n\nDesignerMove.updRelation = function () {\n    document.getElementById('layer_upd_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + window.server + argsep + 'db=' + window.db;\n    linkRelation += argsep + 'operation=removeRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = ajaxShowMessage(window.Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            ajaxShowMessage(data.error, false);\n        } else {\n            ajaxRemoveMessage($msgbox);\n            ajaxShowMessage(data.message);\n            DesignerMove.loadPage(window.selectedPage);\n        }\n    }); // end $.post()\n};\n\nDesignerMove.visibleTab = function (id, tN) {\n    if (id.checked) {\n        document.getElementById(tN).style.display = 'block';\n    } else {\n        document.getElementById(tN).style.display = 'none';\n    }\n    DesignerMove.reload();\n    DesignerMove.markUnsaved();\n};\n\n// max/min all tables\nDesignerMove.hideTabAll = function (idThis) {\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (idThis.alt === 'v') {\n                E.elements[i].checked = true;\n                document.getElementById(E.elements[i].value).style.display = '';\n            } else {\n                E.elements[i].checked = false;\n                document.getElementById(E.elements[i].value).style.display = 'none';\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.inArrayK = function (x, m) {\n    var b = 0;\n    for (var u in m) {\n        if (x === u) {\n            b = 1;\n            break;\n        }\n    }\n    return b;\n};\n\nDesignerMove.noHaveConstr = function (idThis) {\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    for (K in window.contr) {\n        for (key in window.contr[K]) {\n            // contr name\n            for (key2 in window.contr[K][key]) {\n                // table name\n                for (key3 in window.contr[K][key][key2]) {\n                    // field name\n                    a[key2] = a[window.contr[K][key][key2][key3][0]] = 1; // exist constr\n                }\n            }\n        }\n    }\n\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (! DesignerMove.inArrayK(E.elements[i].value, a)) {\n                if (idThis.alt === 'v') {\n                    E.elements[i].checked = true;\n                    document.getElementById(E.elements[i].value).style.display = '';\n                } else {\n                    E.elements[i].checked = false;\n                    document.getElementById(E.elements[i].value).style.display = 'none';\n                }\n            }\n        }\n    }\n};\n\nDesignerMove.generalScroll = function () {\n    // if (timeoutId)\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(\n        function () {\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.left = document.body.scrollLeft + 'px';\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.top = document.body.scrollTop + 'px';\n        },\n        200\n    );\n};\n\n// max/min all tables\nDesignerMove.showLeftMenu = function (idThis) {\n    var icon = idThis.children[0];\n    $('#key_Show_left_menu').toggleClass('M_butt_Selected_down');\n    if (icon.alt === 'v') {\n        document.getElementById('layer_menu').style.top = '0px';\n        document.getElementById('layer_menu').style.display = 'block';\n        icon.alt = '>';\n        icon.src = icon.dataset.up;\n        if (isIe) {\n            DesignerMove.generalScroll();\n        }\n    } else {\n        document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n        document.getElementById('layer_menu').style.display = 'none';\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n    }\n};\n\nDesignerMove.sideMenuRight = function (idThis) {\n    $('#side_menu').toggleClass('right');\n    $('#layer_menu').toggleClass('float-start');\n    var moveMenuIcon = $(idThis.getElementsByTagName('img')[0]);\n    var resizeIcon = $('#layer_menu_sizer > img')\n        .toggleClass('float-start')\n        .toggleClass('float-end');\n\n    var srcResizeIcon = resizeIcon.attr('src');\n    resizeIcon.attr('src', resizeIcon.attr('data-right'));\n    resizeIcon.attr('data-right', srcResizeIcon);\n\n    var srcMoveIcon = moveMenuIcon.attr('src');\n    moveMenuIcon.attr('src', moveMenuIcon.attr('data-right'));\n    moveMenuIcon.attr('data-right', srcMoveIcon);\n\n    menuMoved = ! menuMoved;\n    DesignerMove.saveValueInConfig('side_menu', $('#side_menu').hasClass('right'));\n    $('#key_Left_Right').toggleClass('M_butt_Selected_down');\n    $('#key_Left_Right').toggleClass('M_butt');\n};\n\nDesignerMove.showText = function () {\n    $('#side_menu').find('.hidable').show();\n};\n\nDesignerMove.hideText = function () {\n    if (! alwaysShowText) {\n        $('#side_menu').find('.hidable').hide();\n    }\n};\n\nDesignerMove.pinText = function () {\n    alwaysShowText = ! alwaysShowText;\n    $('#pin_Text').toggleClass('M_butt_Selected_down');\n    $('#pin_Text').toggleClass('M_butt');\n    DesignerMove.saveValueInConfig('pin_text', alwaysShowText);\n};\n\nDesignerMove.startDisplayField = function () {\n    if (onRelation) {\n        return;\n    }\n    if (! onDisplayField) {\n        onDisplayField = 1;\n        document.getElementById('designer_hint').innerHTML = window.Messages.strChangeDisplay;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('display_field_button').className = 'M_butt_Selected_down';// '#FFEE99';gray #AAAAAA\n\n        if (isIe) { // correct for IE\n            document.getElementById('display_field_button').className = 'M_butt_Selected_down_IE';\n        }\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n        onDisplayField = 0;\n    }\n};\n\nvar TargetColors = [];\n\nDesignerMove.getColorByTarget = function (target) {\n    var color = '';  // \"rgba(0,100,150,1)\";\n\n    for (var targetColor in TargetColors) {\n        if (TargetColors[targetColor][0] === target) {\n            color = TargetColors[targetColor][1];\n            break;\n        }\n    }\n\n    if (color.length === 0) {\n        var i = TargetColors.length + 1;\n        var d = i % 6;\n        var j = (i - d) / 6;\n        j = j % 4;\n        j++;\n        var colorCase = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1],\n            [1, 1, 0],\n            [1, 0, 1],\n            [0, 1, 1]\n        ];\n        var a = colorCase[d][0];\n        var b = colorCase[d][1];\n        var c = colorCase[d][2];\n        var e = (1 - (j - 1) / 6);\n\n        var r = Math.round(a * 200 * e);\n        var g = Math.round(b * 200 * e);\n        b = Math.round(c * 200 * e);\n        color = 'rgba(' + r + ',' + g + ',' + b + ',1)';\n\n        TargetColors.push([target, color]);\n    }\n\n    return color;\n};\n\nDesignerMove.clickOption = function (dbName, tableName, columnName, tableDbNameUrl, optionColNameString) {\n    var designerOptions = document.getElementById('designer_optionse');\n    var left = globX - (designerOptions.offsetWidth >> 1);\n    designerOptions.style.left = left + 'px';\n    // var top = Glob_Y - designerOptions.offsetHeight - 10;\n    designerOptions.style.top = (screen.height / 4) + 'px';\n    designerOptions.style.display = 'block';\n    document.getElementById('ok_add_object_db_and_table_name_url').value = tableDbNameUrl;\n    document.getElementById('ok_add_object_db_name').value = dbName;\n    document.getElementById('ok_add_object_table_name').value = tableName;\n    document.getElementById('ok_add_object_col_name').value = columnName;\n    document.getElementById('option_col_name').innerHTML = optionColNameString;\n};\n\nDesignerMove.closeOption = function () {\n    document.getElementById('designer_optionse').style.display = 'none';\n    document.getElementById('rel_opt').value = '--';\n    document.getElementById('Query').value = '';\n    document.getElementById('new_name').value = '';\n    document.getElementById('operator').value = '---';\n    document.getElementById('groupby').checked = false;\n    document.getElementById('h_rel_opt').value = '--';\n    document.getElementById('h_operator').value = '---';\n    document.getElementById('having').value = '';\n    document.getElementById('orderby').value = '---';\n};\n\nDesignerMove.selectAll = function (tableName, dbName, idSelectAll) {\n    var parentIsChecked = $('#' + idSelectAll).is(':checked');\n    var checkboxAll = $('#container-form input[id_check_all=\\'' + idSelectAll + '\\']:checkbox');\n\n    checkboxAll.each(function () {\n        // already checked and then check parent\n        if (parentIsChecked === true && this.checked) {\n            // was checked, removing column from selected fields\n            // trigger unchecked event\n            this.click();\n        }\n        this.checked = parentIsChecked;\n        this.disabled = parentIsChecked;\n    });\n    if (parentIsChecked) {\n        selectField.push('`' + tableName + '`.*');\n        window.fromArray.push(tableName);\n    } else {\n        var i;\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === ('`' + tableName + '`.*')) {\n                selectField.splice(i, 1);\n            }\n        }\n        var k;\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.tableOnOver = function (idThis, val, buil) {\n    var builLocal = parseInt(buil);\n    if (! val) {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag_2';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag_2';\n        }\n    } else {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag';\n        }\n    }\n};\n\n/**\n * This function stores selected column information in selectField[]\n * In case column is checked it add else it deletes\n *\n * @param {string} tableName\n * @param {string} colName\n * @param {string} checkboxId\n */\nDesignerMove.storeColumn = function (tableName, colName, checkboxId) {\n    var i;\n    var k;\n    var selectKeyField = '`' + tableName + '`.`' + colName + '`';\n    if (document.getElementById(checkboxId).checked === true) {\n        selectField.push(selectKeyField);\n        window.fromArray.push(tableName);\n    } else {\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === selectKeyField) {\n                selectField.splice(i, 1);\n                break;\n            }\n        }\n        for (k = 0; k < window.fromArray.length; k++) {\n            if (window.fromArray[k] === tableName) {\n                window.fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n};\n\n/**\n * This function builds object and adds them to historyArray\n * first it does a few checks on each object, then makes an object(where,rename,groupby,aggregate,orderby)\n * then a new history object is made and finally all these history objects are added to historyArray[]\n *\n * @param {string} dbName\n * @param {string} tableName\n * @param {string} colName\n * @param {string} dbTableNameUrl\n */\nDesignerMove.addObject = function (dbName, tableName, colName, dbTableNameUrl) {\n    var p;\n    var whereObj;\n    var rel = document.getElementById('rel_opt');\n    var sum = 0;\n    var init = historyArray.length;\n    if (rel.value !== '--') {\n        if (document.getElementById('Query').value === '') {\n            ajaxShowMessage(window.sprintf(window.Messages.strQueryEmpty));\n            return;\n        }\n        p = document.getElementById('Query');\n        whereObj = new DesignerHistory.Where(rel.value, p.value);// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Where'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('new_name').value !== '') {\n        var renameObj = new DesignerHistory.Rename(document.getElementById('new_name').value);// make Rename object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, renameObj, tableName, window.hTabs[dbTableNameUrl], 'Rename'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('operator').value !== '---') {\n        var aggregateObj = new DesignerHistory.Aggregate(document.getElementById('operator').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, aggregateObj, tableName, window.hTabs[dbTableNameUrl], 'Aggregate'));\n        sum = sum + 1;\n        // make aggregate operator\n    }\n    if (document.getElementById('groupby').checked === true) {\n        historyArray.push(new DesignerHistory.HistoryObj(colName, 'GroupBy', tableName, window.hTabs[dbTableNameUrl], 'GroupBy'));\n        sum = sum + 1;\n        // make groupby\n    }\n    if (document.getElementById('h_rel_opt').value !== '--') {\n        if (document.getElementById('having').value === '') {\n            return;\n        }\n        whereObj = new DesignerHistory.Having(\n            document.getElementById('h_rel_opt').value,\n            document.getElementById('having').value,\n            document.getElementById('h_operator').value\n        );// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, window.hTabs[dbTableNameUrl], 'Having'));\n        sum = sum + 1;\n        // make having\n    }\n    if (document.getElementById('orderby').value !== '---') {\n        var orderByObj = new DesignerHistory.OrderBy(document.getElementById('orderby').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, orderByObj, tableName, window.hTabs[dbTableNameUrl], 'OrderBy'));\n        sum = sum + 1;\n        // make orderby\n    }\n    ajaxShowMessage(window.sprintf(window.Messages.strObjectsCreated, sum));\n    // output sum new objects created\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(init, historyArray.length);\n    DesignerMove.closeOption();\n    $('#ab').accordion('refresh');\n};\n\nDesignerMove.enablePageContentEvents = function () {\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousemove');\n    $('#page_content').on('mousedown', function (e) {\n        DesignerMove.mouseDown(e);\n    });\n    $('#page_content').on('mouseup', function (e) {\n        DesignerMove.mouseUp(e);\n    });\n    $('#page_content').on('mousemove', function (e) {\n        DesignerMove.mouseMove(e);\n    });\n};\n\n/**\n * This function enables the events on table items.\n * It helps to enable them on page loading and when a table is added on the fly.\n * @param {number} index\n * @param {object} element\n */\nDesignerMove.enableTableEvents = function (index, element) {\n    $(element).on('click', '.select_all_1', function () {\n        DesignerMove.selectAll($(this).attr('table_name'), $(this).attr('db_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab,.small_tab2', function () {\n        DesignerMove.smallTab($(this).attr('table_name'), 1);\n    });\n    $(element).on('click', '.small_tab_pref_1', function () {\n        DesignerMove.startTabUpd($(this).attr('db_url'), $(this).attr('table_name_url'));\n    });\n    $(element).on('click', '.select_all_store_col', function () {\n        DesignerMove.storeColumn($(this).attr('table_name'), $(this).attr('col_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab_pref_click_opt', function () {\n        DesignerMove.clickOption(\n            $(this).attr('db_name'),\n            $(this).attr('table_name'),\n            $(this).attr('col_name'),\n            $(this).attr('db_table_name_url'),\n            $(this).attr('option_col_name_modal')\n        );\n    });\n    $(element).on('click', '.tab_field_2,.tab_field_3,.tab_field', function () {\n        var params = ($(this).attr('click_field_param')).split(',');\n        DesignerMove.clickField(params[3], params[0], params[1], params[2]);\n    });\n\n    $(element).find('.tab_zag_noquery').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'), 0, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_noquery').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'), 1, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_query').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'), 0, 1);\n    });\n    $(element).find('.tab_zag_query').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'), 1, 1);\n    });\n\n    DesignerMove.enablePageContentEvents();\n};\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $('#side_menu').off('mouseenter mouseleave');\n    $('#key_Show_left_menu').off('click');\n    $('#toggleFullscreen').off('click');\n    $('#newPage').off('click');\n    $('#editPage').off('click');\n    $('#savePos').off('click');\n    $('#SaveAs').off('click');\n    $('#delPages').off('click');\n    $('#StartTableNew').off('click');\n    $('#rel_button').off('click');\n    $('#StartTableNew').off('click');\n    $('#display_field_button').off('click');\n    $('#reloadPage').off('click');\n    $('#angular_direct_button').off('click');\n    $('#grid_button').off('click');\n    $('#key_SB_all').off('click');\n    $('#SmallTabInvert').off('click');\n    $('#relLineInvert').off('click');\n    $('#exportPages').off('click');\n    $('#query_builder').off('click');\n    $('#key_Left_Right').off('click');\n    $('#pin_Text').off('click');\n    $('#canvas').off('click');\n    $('#key_HS_all').off('click');\n    $('#key_HS').off('click');\n    $('.scroll_tab_struct').off('click');\n    $('.scroll_tab_checkbox').off('click');\n    $('#id_scroll_tab').find('tr').off('click', '.designer_Tabs2,.designer_Tabs');\n    $('.designer_tab').off('click', '.select_all_1');\n    $('.designer_tab').off('click', '.small_tab,.small_tab2');\n    $('.designer_tab').off('click', '.small_tab_pref_1');\n    $('.tab_zag_noquery').off('mouseover');\n    $('.tab_zag_noquery').off('mouseout');\n    $('.tab_zag_query').off('mouseover');\n    $('.tab_zag_query').off('mouseout');\n    $('.designer_tab').off('click', '.tab_field_2,.tab_field_3,.tab_field');\n    $('.designer_tab').off('click', '.select_all_store_col');\n    $('.designer_tab').off('click', '.small_tab_pref_click_opt');\n    $('#del_button').off('click');\n    $('#cancel_button').off('click');\n    $('#ok_add_object').off('click');\n    $('#cancel_close_option').off('click');\n    $('#ok_new_rel_panel').off('click');\n    $('#cancel_new_rel_panel').off('click');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mousemove');\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    $('#key_Show_left_menu').on('click', function () {\n        DesignerMove.showLeftMenu(this);\n        return false;\n    });\n    $('#toggleFullscreen').on('click', function () {\n        DesignerMove.toggleFullscreen();\n        return false;\n    });\n    $('#addOtherDbTables').on('click', function () {\n        DesignerMove.addOtherDbTables();\n        return false;\n    });\n    $('#newPage').on('click', function () {\n        DesignerMove.new();\n        return false;\n    });\n    $('#editPage').on('click', function () {\n        DesignerMove.editPages();\n        return false;\n    });\n    $('#savePos').on('click', function () {\n        DesignerMove.save3();\n        return false;\n    });\n    $('#SaveAs').on('click', function () {\n        DesignerMove.saveAs();\n        $(document).on('ajaxStop', function () {\n            $('#selected_value').on('click', function () {\n                $('#savePageNewRadio').prop('checked', true);\n            });\n        });\n        return false;\n    });\n    $('#delPages').on('click', function () {\n        DesignerMove.deletePages();\n        return false;\n    });\n    $('#StartTableNew').on('click', function () {\n        DesignerMove.startTableNew();\n        return false;\n    });\n    $('#rel_button').on('click', function () {\n        DesignerMove.startRelation();\n        return false;\n    });\n    $('#display_field_button').on('click', function () {\n        DesignerMove.startDisplayField();\n        return false;\n    });\n    $('#reloadPage').on('click', function () {\n        DesignerMove.loadPage(window.selectedPage);\n    });\n    $('#angular_direct_button').on('click', function () {\n        DesignerMove.angularDirect();\n        return false;\n    });\n    $('#grid_button').on('click', function () {\n        DesignerMove.grid();\n        return false;\n    });\n    $('#key_SB_all').on('click', function () {\n        DesignerMove.smallTabAll(this);\n        return false;\n    });\n    $('#SmallTabInvert').on('click', function () {\n        DesignerMove.smallTabInvert();\n        return false;\n    });\n    $('#relLineInvert').on('click', function () {\n        DesignerMove.relationLinesInvert();\n        return false;\n    });\n    $('#exportPages').on('click', function () {\n        DesignerMove.exportPages();\n        return false;\n    });\n    $('#query_builder').on('click', function () {\n        DesignerHistory.buildQuery('SQL Query on Database', 0);\n    });\n    $('#key_Left_Right').on('click', function () {\n        DesignerMove.sideMenuRight(this);\n        return false;\n    });\n    $('#side_menu').on('mouseenter', function () {\n        DesignerMove.showText();\n        return false;\n    });\n    $('#side_menu').on('mouseleave', function () {\n        DesignerMove.hideText();\n        return false;\n    });\n    $('#pin_Text').on('click', function () {\n        DesignerMove.pinText(this);\n        return false;\n    });\n    $('#canvas').on('click', function (event) {\n        DesignerMove.canvasClick(this, event);\n    });\n    $('#key_HS_all').on('click', function () {\n        DesignerMove.hideTabAll(this);\n        return false;\n    });\n    $('#key_HS').on('click', function () {\n        DesignerMove.noHaveConstr(this);\n        return false;\n    });\n\n    $('.designer_tab').each(DesignerMove.enableTableEvents);\n    $('.designer_tab').each(DesignerMove.addTableToTablesList);\n\n    $('input#del_button').on('click', function () {\n        DesignerMove.updRelation();\n    });\n    $('input#cancel_button').on('click', function () {\n        document.getElementById('layer_upd_relation').style.display = 'none';\n        DesignerMove.reload();\n    });\n    $('input#ok_add_object').on('click', function () {\n        DesignerMove.addObject(\n            $('#ok_add_object_db_name').val(),\n            $('#ok_add_object_table_name').val(),\n            $('#ok_add_object_col_name').val(),\n            $('#ok_add_object_db_and_table_name_url').val()\n        );\n    });\n    $('input#cancel_close_option').on('click', function () {\n        DesignerMove.closeOption();\n    });\n    $('input#ok_new_rel_panel').on('click', function () {\n        DesignerMove.newRelation();\n    });\n    $('input#cancel_new_rel_panel').on('click', function () {\n        document.getElementById('layer_new_relation').style.display = 'none';\n    });\n    DesignerMove.enablePageContentEvents();\n});\n"],"names":["$","AJAX","Functions","CommonParams","ajaxRemoveMessage","ajaxShowMessage","refreshMainContent","Navigation","DesignerMove","window","change","showRelationLines","alwaysShowText","registerTeardown","document","off","show","registerOnload","$content","$img","find","$span","siblings","css","on","fullscreenElement","removeClass","attr","data","text","valueSent","saveValueInConfig","hide","markSaved","markUnsaved","mainDirection","directionEffect","curClick","smS","smAdd","sLeft","sRight","onRelation","onGrid","onDisplayField","onAngularDirect","clickField","linkRelation","canvasWidth","canvasHeight","osnTabWidth","osnTabHeight","heightField","globX","globY","timeoutId","layerMenuCurClick","fromArray","menuMoved","gridSize","isIe","all","opera","onscroll","generalScroll","onselectstart","mouseDown","e","clientX","body","scrollLeft","pageX","clientY","scrollTop","pageY","target","tagName","parentNode","className","id","getElementById","style","display","zIndex","mouseMove","preventDefault","newDx","newDy","deltaX","deltaY","$curClick","curX","parseFloat","curY","newX","newY","parseInt","$layerMenu","newWidth","width","left","top","mouseUp","reload","canvasPos","height","osnTabPos","setDefaultValuesFromSavedState","angularDirect","grid","$relLineInvert","relationLinesInvert","showText","$keySbAll","trigger","toggleClass","$keyLeftRight","main","smallTabRefresh","resizeOsnTab","maxX","maxY","key","jTabs","kX","offsetWidth","kY","offsetHeight","drawLine0","x1","x2","y1","y2","osnTab","colorTarget","line0","offsetLeft","offsetTop","getColorByTarget","n","a","K","key2","key3","clear","contr","checked","x1Left","x1Right","x2Left","x2Right","Math","abs","i","rowOffsetTop","tabHideButton","innerHTML","fromColumn","toColumn","line","colorLine","canvas","ctx","getContext","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","circle","rect","line2","line3","x1Local","x2Local","xS","x","y","r","w","color","arc","PI","clearRect","h","fillStyle","fillRect","toggleFullscreen","pageContent","addClass","screen","requestFullscreen","exitFullscreen","addTableToTablesList","index","tableDom","db","table","dbEncoded","tableEncoded","tableIsChecked","checkboxStatus","Messages","strHide","strShow","$newTableLine","strStructure","themeImagePath","html","first","append","startTabUpd","selectTab","currentvalue","visibleTab","val","$tablesCounter","displayModal","form","heading","type","modal","addOtherDbTables","$selectDb","strNone","$selectTable","post","get","message","each","innerText","$form","strAddTables","$table","encodeURIComponent","length","sprintf","strTableAlreadyExists","undefined","$newTableDom","remove","enableTableEvents","dbName","sqlQuery","rows","new","promptToSaveCurrentPage","loadPage","save","url","value","action","getUrlPos","forceString","designerTablesEnabled","poststr","argsep","coords","tbCoords","DesignerObjects","TableCoordinate","push","save2","callback","server","selectedPage","$msgbox","strProcessingRequest","success","error","strModificationSaved","name","trim","DesignerPage","saveToSelectedPage","submitSaveDialogAndClose","strEnterValidPageName","prepareForAjaxRequest","serialize","saveToNewPage","page","pgNr","pageDescr","save3","strPageName","strSavePage","editPages","createPageList","options","strOpenPage","selected","strSelectPage","deletePages","strDeletePage","$messageBox","deletingCurrentPage","strSuccessfulPageDelete","deletePage","saveAs","strSavePageAs","selectedValue","$selectedPage","choice","selectedPageId","strLeavingPage","exportPages","substring","split","pair","input","$formatDropDown","format","strExportRelationalSchema","paramPage","appendTo","showTablesInLandingPage","loadHtmlForPage","showNewPageTables","indexSent","startRelation","strSelectReferencedKey","T","f","pk","pkLocal","alert","strPleaseSelectPrimaryOrUniqueKey","strSelectForeignKey","fieldNameToSend","decodeURIComponent","newDisplayFieldClass","oldTabField","displayField","tabField","newRelation","startTableNew","update","set","smallTabAll","idThis","icon","children","alt","element","smallTab","src","dataset","right","down","smallTabInvert","t","idZag","idT","scrollTo","setTimeout","canvasClick","event","Key0","Key1","Key2","Key3","Key","localX","localY","offset","updRelation","tN","hideTabAll","E","EelementsLength","elements","startsWith","inArrayK","m","b","u","noHaveConstr","clearTimeout","showLeftMenu","up","sideMenuRight","moveMenuIcon","getElementsByTagName","resizeIcon","srcResizeIcon","srcMoveIcon","hasClass","hideText","pinText","startDisplayField","strChangeDisplay","TargetColors","targetColor","d","j","colorCase","c","round","g","clickOption","tableName","columnName","tableDbNameUrl","optionColNameString","designerOptions","closeOption","selectAll","idSelectAll","parentIsChecked","is","checkboxAll","click","disabled","selectField","splice","k","tableOnOver","buil","builLocal","storeColumn","colName","checkboxId","selectKeyField","addObject","dbTableNameUrl","p","whereObj","rel","sum","init","historyArray","strQueryEmpty","DesignerHistory","Where","HistoryObj","hTabs","renameObj","Rename","aggregateObj","Aggregate","Having","orderByObj","OrderBy","strObjectsCreated","existingDiv","accordion","enablePageContentEvents","params","prop","buildQuery"],"sourceRoot":""}