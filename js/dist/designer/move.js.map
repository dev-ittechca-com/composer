{"version":3,"file":"designer/move.js","mappings":";AAAA;AACA;AACA;;AAEA;AAA6B;;AAC7B;AAAwD;;AACxD;AAAyG;;AACzG;AAA0B;;AAC1B;AAA4B;AAE5B,IAAIA,YAAY,GAAG,EAAnB;AAEA,IAAIC,MAAM,GAAG,CAAb,EAAgB;;AAChB,IAAIC,iBAAiB,GAAG,IAAxB;AACA,IAAIC,cAAc,GAAG,KAArB;AAEAC,IAAI,CAACC,gBAAL,CAAsB,kBAAtB,EAA0C,YAAY;AAClDC,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,GAAZ,CAAgB,kBAAhB;AACAF,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeG,IAAf;AACH,CAHD;AAKAL,IAAI,CAACM,cAAL,CAAoB,kBAApB,EAAwC,YAAY;AAChD,MAAIC,QAAQ,GAAGL,CAAC,CAAC,eAAD,CAAhB;AACA,MAAIM,IAAI,GAAGN,CAAC,CAAC,mBAAD,CAAD,CAAuBO,IAAvB,CAA4B,KAA5B,CAAX;AACA,MAAIC,KAAK,GAAGF,IAAI,CAACG,QAAL,CAAc,MAAd,CAAZ;AAEAJ,EAAAA,QAAQ,CAACK,GAAT,CAAa;AAAE,mBAAe;AAAjB,GAAb;AACAV,EAAAA,CAAC,CAACC,QAAD,CAAD,CAAYU,EAAZ,CAAe,kBAAf,EAAmC,YAAY;AAC3C,QAAI,CAAEV,QAAQ,CAACW,iBAAf,EAAkC;AAC9BP,MAAAA,QAAQ,CAACQ,WAAT,CAAqB,oBAArB,EACKH,GADL,CACS;AAAE,iBAAS,MAAX;AAAmB,kBAAU;AAA7B,OADT;AAEAV,MAAAA,CAAC,CAAC,UAAD,CAAD,CAAcU,GAAd,CAAkB;AAAE,iBAAS,MAAX;AAAmB,kBAAU;AAA7B,OAAlB;AACAJ,MAAAA,IAAI,CAACQ,IAAL,CAAU,KAAV,EAAiBR,IAAI,CAACS,IAAL,CAAU,OAAV,CAAjB,EACKD,IADL,CACU,OADV,EACmBN,KAAK,CAACO,IAAN,CAAW,OAAX,CADnB;AAEAP,MAAAA,KAAK,CAACQ,IAAN,CAAWR,KAAK,CAACO,IAAN,CAAW,OAAX,CAAX,EAN8B,CAQ9B;AACA;;AAEA,UAAIE,SAAS,GAAG,KAAhB;AACAvB,MAAAA,YAAY,CAACwB,iBAAb,CAA+B,aAA/B,EAA8CD,SAA9C;AACH;AACJ,GAfD;AAiBAjB,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAemB,IAAf;AACH,CAxBD;;AA0BAzB,YAAY,CAAC0B,SAAb,GAAyB,YAAY;AACjCzB,EAAAA,MAAM,GAAG,CAAT;AACAK,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBgB,IAAlB,CAAuB,EAAvB;AACH,CAHD;;AAKAtB,YAAY,CAAC2B,WAAb,GAA2B,YAAY;AACnC1B,EAAAA,MAAM,GAAG,CAAT;AACAK,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBgB,IAAlB,CAAuB,GAAvB;AACH,CAHD;;AAKA,IAAIM,aAAa,GAAGtB,CAAC,CAAC,MAAD,CAAD,CAAUc,IAAV,CAAe,KAAf,MAA0B,KAA1B,GAAkC,OAAlC,GAA4C,MAAhE,EACA;;AACA,IAAIS,eAAe,GAAGD,aAAa,KAAK,OAAlB,GAA4B,CAAC,CAA7B,GAAiC,CAAvD;AACA,IAAIE,QAAQ,GAAG,IAAf;AACA,IAAIC,GAAG,GAAa,CAApB;AACA,IAAIC,KAAK,GAAW,EAApB;AACA,IAAIC,KAAK,GAAW,CAApB;AACA,IAAIC,MAAM,GAAU,CAApB;AACA,IAAIC,UAAU,GAAM,CAApB;AACA,IAAIC,MAAM,GAAU,CAApB;AACA,IAAIC,cAAc,GAAG,CAArB,EACA;;AACA,IAAIC,eAAe,GAAG,CAAtB;AACA,IAAIC,UAAU,GAAM,CAApB;AACA,IAAIC,YAAY,GAAI,EAApB;AACA,IAAIC,WAAW,GAAK,CAApB;AACA,IAAIC,YAAY,GAAI,CAApB;AACA,IAAIC,WAAW,GAAI,CAAnB;AACA,IAAIC,YAAY,GAAG,CAAnB;AACA,IAAIC,WAAW,GAAK,CAApB;AACA,IAAIC,KAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,iBAAiB,GAAG,CAAxB;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,SAAS,GAAG,KAAhB;AACA,IAAIC,QAAQ,GAAG,EAAf,EAEA;;AAEA,IAAIC,IAAI,GAAG9C,QAAQ,CAAC+C,GAAT,IAAgB,CAACC,MAAM,CAACC,KAAnC;;AAEA,IAAIH,IAAJ,EAAU;AACNE,EAAAA,MAAM,CAACE,QAAP,GAAkBzD,YAAY,CAAC0D,aAA/B;;AACAnD,EAAAA,QAAQ,CAACoD,aAAT,GAAyB,YAAY;AACjC,WAAO,KAAP;AACH,GAFD;AAGH;;AAED3D,YAAY,CAAC4D,SAAb,GAAyB,UAAUC,CAAV,EAAa;AAClC;AACAf,EAAAA,KAAK,GAAGO,IAAI,GAAGQ,CAAC,CAACC,OAAF,GAAYvD,QAAQ,CAACwD,IAAT,CAAcC,UAA7B,GAA0CH,CAAC,CAACI,KAAxD,CAFkC,CAGlC;;AACAlB,EAAAA,KAAK,GAAGM,IAAI,GAAGQ,CAAC,CAACK,OAAF,GAAY3D,QAAQ,CAACwD,IAAT,CAAcI,SAA7B,GAAyCN,CAAC,CAACO,KAAvD;;AAEA,MAAIP,CAAC,CAACQ,MAAF,CAASC,OAAT,KAAqB,MAAzB,EAAiC;AAC7BxC,IAAAA,QAAQ,GAAG+B,CAAC,CAACQ,MAAF,CAASE,UAAT,CAAoBA,UAApB,CAA+BA,UAA/B,CAA0CA,UAArD;AACH,GAFD,MAEO,IAAIV,CAAC,CAACQ,MAAF,CAASG,SAAT,KAAuB,WAA3B,EAAwC;AAC3C1C,IAAAA,QAAQ,GAAG+B,CAAC,CAACQ,MAAF,CAASE,UAAT,CAAoBA,UAApB,CAA+BA,UAA1C;AACH,GAFM,MAEA,IAAIV,CAAC,CAACQ,MAAF,CAASI,EAAT,KAAgB,sBAApB,EAA4C;AAC/CxB,IAAAA,iBAAiB,GAAG,CAApB;AACH,GAFM,MAEA,IAAIY,CAAC,CAACQ,MAAF,CAASG,SAAT,KAAuB,QAA3B,EAAqC;AACxC,WAAO,KAAP;AACH;;AAED,MAAI1C,QAAQ,KAAK,IAAjB,EAAuB;AACnBvB,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAkD,MAAlD;AACA9C,IAAAA,QAAQ,CAAC6C,KAAT,CAAeE,MAAf,GAAwB,CAAxB;AACH;AACJ,CApBD;;AAsBA7E,YAAY,CAAC8E,SAAb,GAAyB,UAAUjB,CAAV,EAAa;AAClC,MAAIA,CAAC,CAACkB,cAAN,EAAsB;AAClBlB,IAAAA,CAAC,CAACkB,cAAF;AACH,GAHiC,CAKlC;;;AACA,MAAIC,KAAK,GAAG3B,IAAI,GAAGQ,CAAC,CAACC,OAAF,GAAYvD,QAAQ,CAACwD,IAAT,CAAcC,UAA7B,GAA0CH,CAAC,CAACI,KAA5D,CANkC,CAOlC;;AACA,MAAIgB,KAAK,GAAG5B,IAAI,GAAGQ,CAAC,CAACK,OAAF,GAAY3D,QAAQ,CAACwD,IAAT,CAAcI,SAA7B,GAAyCN,CAAC,CAACO,KAA3D;AAEA,MAAIc,MAAM,GAAGpC,KAAK,GAAGkC,KAArB;AACA,MAAIG,MAAM,GAAGpC,KAAK,GAAGkC,KAArB;AAEAnC,EAAAA,KAAK,GAAGkC,KAAR;AACAjC,EAAAA,KAAK,GAAGkC,KAAR;;AAEA,MAAInD,QAAQ,KAAK,IAAjB,EAAuB;AACnB9B,IAAAA,YAAY,CAAC2B,WAAb;AAEA,QAAIyD,SAAS,GAAG9E,CAAC,CAACwB,QAAD,CAAjB;AAEA,QAAIuD,IAAI,GAAGC,UAAU,CAACF,SAAS,CAAChE,IAAV,CAAe,UAAUQ,aAAzB,KAA2CwD,SAAS,CAACpE,GAAV,CAAcY,aAAd,CAA5C,CAArB;AACA,QAAI2D,IAAI,GAAGD,UAAU,CAACF,SAAS,CAAChE,IAAV,CAAe,UAAf,KAA8BgE,SAAS,CAACpE,GAAV,CAAc,KAAd,CAA/B,CAArB;AAEA,QAAIwE,IAAI,GAAGH,IAAI,GAAGxD,eAAe,GAAGqD,MAApC;AACA,QAAIO,IAAI,GAAGF,IAAI,GAAGJ,MAAlB;AAEAC,IAAAA,SAAS,CAAChE,IAAV,CAAe,UAAUQ,aAAzB,EAAwC4D,IAAxC;AACAJ,IAAAA,SAAS,CAAChE,IAAV,CAAe,UAAf,EAA2BqE,IAA3B;;AAEA,QAAIrD,MAAJ,EAAY;AACRoD,MAAAA,IAAI,GAAGE,QAAQ,CAACF,IAAI,GAAGpC,QAAR,CAAR,GAA4BA,QAAnC;AACAqC,MAAAA,IAAI,GAAGC,QAAQ,CAACD,IAAI,GAAGrC,QAAR,CAAR,GAA4BA,QAAnC;AACH;;AAED,QAAIoC,IAAI,GAAG,CAAX,EAAc;AACVA,MAAAA,IAAI,GAAG,CAAP;AACH,KAFD,MAEO,IAAIC,IAAI,GAAG,CAAX,EAAc;AACjBA,MAAAA,IAAI,GAAG,CAAP;AACH;;AACDL,IAAAA,SAAS,CAACpE,GAAV,CAAcY,aAAd,EAA6B4D,IAAI,GAAG,IAApC;AACAJ,IAAAA,SAAS,CAACpE,GAAV,CAAc,KAAd,EAAqByE,IAAI,GAAG,IAA5B;AACH,GA1BD,MA0BO,IAAIxC,iBAAJ,EAAuB;AAC1B,QAAIE,SAAJ,EAAe;AACX+B,MAAAA,MAAM,GAAG,CAACA,MAAV;AACH;;AACD,QAAIS,UAAU,GAAGrF,CAAC,CAAC,aAAD,CAAlB;AACA,QAAIsF,QAAQ,GAAGD,UAAU,CAACE,KAAX,KAAqBhE,eAAe,GAAGqD,MAAtD;;AACA,QAAIU,QAAQ,GAAG,GAAf,EAAoB;AAChBA,MAAAA,QAAQ,GAAG,GAAX;AACH;;AACDD,IAAAA,UAAU,CAACE,KAAX,CAAiBD,QAAjB;AACH;;AAED,MAAIzD,UAAU,IAAIE,cAAlB,EAAkC;AAC9B9B,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CmB,IAA/C,GAAuDhD,KAAK,GAAG,EAAT,GAAe,IAArE;AACAvC,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CoB,GAA/C,GAAuDhD,KAAK,GAAG,EAAT,GAAe,IAArE;AACH;AACJ,CA1DD;;AA4DA/C,YAAY,CAACgG,OAAb,GAAuB,YAAY;AAC/B,MAAIlE,QAAQ,KAAK,IAAjB,EAAuB;AACnBvB,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAkD,cAAlD;AACA5E,IAAAA,YAAY,CAACiG,MAAb;AACAnE,IAAAA,QAAQ,CAAC6C,KAAT,CAAeE,MAAf,GAAwB,CAAxB;AACA/C,IAAAA,QAAQ,GAAG,IAAX;AACH;;AACDmB,EAAAA,iBAAiB,GAAG,CAApB;AACH,CARD,EAUA;;;AAEAjD,YAAY,CAACkG,SAAb,GAAyB,YAAY;AACjCzD,EAAAA,WAAW,GAAIlC,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCmB,KAAlC,GAA2ClD,WAAW,GAAI,CAAzE;AACAD,EAAAA,YAAY,GAAGnC,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCyB,MAAlC,GAA2CvD,YAAY,GAAG,CAAzE;;AAEA,MAAIS,IAAJ,EAAU;AACN9C,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCkB,KAAxC,GAAiD,CAAElD,WAAW,GAAI,CAAhB,GAAsBA,WAAW,GAAI,CAArC,GAA0C,CAA3C,IAAgD,IAAjG;AACApC,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCwB,MAAxC,GAAiD,CAAEvD,YAAY,GAAG,CAAhB,GAAsBA,YAAY,GAAG,CAArC,GAA0C,CAA3C,IAAgD,IAAjG;AACH;AACJ,CARD;;AAUA5C,YAAY,CAACoG,SAAb,GAAyB,YAAY;AACjCzD,EAAAA,WAAW,GAAI+C,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCkB,KAA1C,EAAiD,EAAjD,CAAvB;AACAjD,EAAAA,YAAY,GAAG8C,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCwB,MAA1C,EAAkD,EAAlD,CAAvB;AACH,CAHD;;AAKAnG,YAAY,CAACqG,8BAAb,GAA8C,YAAY;AACtD,MAAI/F,CAAC,CAAC,wBAAD,CAAD,CAA4Bc,IAA5B,CAAiC,OAAjC,MAA8C,QAAlD,EAA4D;AACxDkB,IAAAA,eAAe,GAAG,CAAlB;AACH,GAFD,MAEO;AACHA,IAAAA,eAAe,GAAG,CAAlB;AACH;;AACDtC,EAAAA,YAAY,CAACsG,aAAb;;AAEA,MAAIhG,CAAC,CAAC,cAAD,CAAD,CAAkBc,IAAlB,CAAuB,OAAvB,MAAoC,QAAxC,EAAkD;AAC9CgB,IAAAA,MAAM,GAAG,CAAT;AACH,GAFD,MAEO;AACHA,IAAAA,MAAM,GAAG,CAAT;AACH;;AACDpC,EAAAA,YAAY,CAACuG,IAAb;AAEA,MAAIC,cAAc,GAAGlG,CAAC,CAAC,gBAAD,CAAtB;;AACA,MAAIkG,cAAc,CAACpF,IAAf,CAAoB,OAApB,MAAiC,QAArC,EAA+C;AAC3ClB,IAAAA,iBAAiB,GAAG,KAApB;AACAsG,IAAAA,cAAc,CAACpF,IAAf,CAAoB,OAApB,EAA6B,QAA7B;AACH,GAHD,MAGO;AACHlB,IAAAA,iBAAiB,GAAG,IAApB;AACAsG,IAAAA,cAAc,CAACpF,IAAf,CAAoB,OAApB,EAA6B,sBAA7B;AACH;;AACDpB,EAAAA,YAAY,CAACyG,mBAAb;;AAEA,MAAInG,CAAC,CAAC,WAAD,CAAD,CAAec,IAAf,CAAoB,OAApB,MAAiC,sBAArC,EAA6D;AACzDjB,IAAAA,cAAc,GAAG,IAAjB;AACAH,IAAAA,YAAY,CAAC0G,QAAb;AACH,GAHD,MAGO;AACHvG,IAAAA,cAAc,GAAG,KAAjB;AACH;;AAED,MAAIwG,SAAS,GAAGrG,CAAC,CAAC,aAAD,CAAjB;;AACA,MAAIqG,SAAS,CAACvF,IAAV,CAAe,OAAf,MAA4B,sBAAhC,EAAwD;AACpDuF,IAAAA,SAAS,CAACC,OAAV,CAAkB,OAAlB;AACAD,IAAAA,SAAS,CAACE,WAAV,CAAsB,sBAAtB;AACAF,IAAAA,SAAS,CAACE,WAAV,CAAsB,QAAtB;AACH;;AAED,MAAIC,aAAa,GAAGxG,CAAC,CAAC,iBAAD,CAArB;;AACA,MAAIwG,aAAa,CAAC1F,IAAd,CAAmB,OAAnB,MAAgC,sBAApC,EAA4D;AACxD0F,IAAAA,aAAa,CAACF,OAAd,CAAsB,OAAtB;AACH;AACJ,CA3CD;;AA6CA5G,YAAY,CAAC+G,IAAb,GAAoB,YAAY;AAC5B;AAEAxG,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CoB,GAA5C,GAAkD,CAAC,IAAD,GAAQ,IAA1D,CAH4B,CAGoC;;AAChE/F,EAAAA,YAAY,CAACoG,SAAb;AACApG,EAAAA,YAAY,CAACkG,SAAb;AACAlG,EAAAA,YAAY,CAACgH,eAAb;AACAhH,EAAAA,YAAY,CAACiG,MAAb;AACAjG,EAAAA,YAAY,CAACqG,8BAAb;;AACA,MAAIhD,IAAJ,EAAU;AACNrD,IAAAA,YAAY,CAAC0D,aAAb;AACH;AACJ,CAZD;;AAcA1D,YAAY,CAACiH,YAAb,GAA4B,YAAY;AACpC,MAAIC,IAAI,GAAG,CAAX;AACA,MAAIC,IAAI,GAAG,CAAX;;AACA,OAAK,IAAIC,GAAT,IAAgBC,KAAhB,EAAuB;AACnB,QAAIC,EAAE,GAAG5B,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmC/C,aAAnC,CAAD,EAAoD,EAApD,CAAR,GAAkErB,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BG,WAAxG;AACA,QAAIC,EAAE,GAAG9B,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCoB,GAApC,EAAyC,EAAzC,CAAR,GAAuDxF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BK,YAA7F;AACAP,IAAAA,IAAI,GAAGA,IAAI,GAAGI,EAAP,GAAYA,EAAZ,GAAiBJ,IAAxB;AACAC,IAAAA,IAAI,GAAGA,IAAI,GAAGK,EAAP,GAAYA,EAAZ,GAAiBL,IAAxB;AACH;;AAEDxE,EAAAA,WAAW,GAAIuE,IAAI,GAAG,EAAtB;AACAtE,EAAAA,YAAY,GAAGuE,IAAI,GAAG,EAAtB;AACAnH,EAAAA,YAAY,CAACkG,SAAb;AACH,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAlG,YAAY,CAAC0H,SAAb,GAAyB,UAAUC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,MAA1B,EAAkCC,WAAlC,EAA+C;AACpEhI,EAAAA,YAAY,CAACiI,KAAb,CACIN,EAAE,GAAG9F,eAAe,GAAGkG,MAAM,CAACG,UADlC,EAEIL,EAAE,GAAGE,MAAM,CAACI,SAFhB,EAGIP,EAAE,GAAG/F,eAAe,GAAGkG,MAAM,CAACG,UAHlC,EAIIJ,EAAE,GAAGC,MAAM,CAACI,SAJhB,EAKInI,YAAY,CAACoI,gBAAb,CAA8BJ,WAA9B,CALJ;AAOH,CARD;AAUA;AACA;AACA;;;AACAhI,YAAY,CAACiG,MAAb,GAAsB,YAAY;AAC9BjG,EAAAA,YAAY,CAACiH,YAAb;AACA,MAAIoB,CAAJ;AACA,MAAIV,EAAJ;AACA,MAAIC,EAAJ;AACA,MAAIU,CAAC,GAAG,EAAR;AACA,MAAIC,CAAJ;AACA,MAAInB,GAAJ;AACA,MAAIoB,IAAJ;AACA,MAAIC,IAAJ;AACAzI,EAAAA,YAAY,CAAC0I,KAAb;AACA,MAAIX,MAAM,GAAGxH,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,CAAb;;AACA,OAAK6D,CAAL,IAAUI,KAAV,EAAiB;AACb,SAAKvB,GAAL,IAAYuB,KAAK,CAACJ,CAAD,CAAjB,EAAsB;AAClB;AACA,WAAKC,IAAL,IAAaG,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,CAAb,EAA4B;AACxB;AACA,aAAKqB,IAAL,IAAaE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,CAAb,EAAkC;AAC9B;AACA,cAAI,CAACjI,QAAQ,CAACmE,cAAT,CAAwB,eAAe8D,IAAvC,EAA6CI,OAA9C,IACA,CAACrI,QAAQ,CAACmE,cAAT,CAAwB,eAAeiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAvC,EAAqEG,OAD1E,EACmF;AAC/E;AACA;AACH;;AACD,cAAIC,MAAM,GAAItI,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BN,UAA9B,GAA2C,CAAzD;AACA,cAAIY,OAAO,GAAGD,MAAM,GAAGtI,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BjB,WAArD;AACA,cAAIwB,MAAM,GAAIxI,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDP,UAApE;AACA,cAAIc,OAAO,GAAGD,MAAM,GAAGxI,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDlB,WAA7E;AACAe,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASL,MAAM,GAAGE,MAAlB,CAAP;AACAT,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASL,MAAM,GAAGG,OAAlB,CAAP;AACAV,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASJ,OAAO,GAAGC,MAAnB,CAAP;AACAT,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASJ,OAAO,GAAGE,OAAnB,CAAP;AACAX,UAAAA,CAAC,GAAGpG,KAAK,GAAGC,MAAM,GAAG,CAArB;;AACA,eAAK,IAAIiH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAIb,CAAC,CAACD,CAAD,CAAD,GAAOC,CAAC,CAACa,CAAD,CAAZ,EAAiB;AACbd,cAAAA,CAAC,GAAGc,CAAJ;AACH;AACJ;;AACD,cAAId,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGkB,MAAM,GAAG9G,GAAd;AACA6F,YAAAA,EAAE,GAAGoB,OAAO,GAAGjH,GAAf;;AACA,gBAAI4F,EAAE,GAAGC,EAAT,EAAa;AACTS,cAAAA,CAAC,GAAG,CAAJ;AACH;AACJ;;AACD,cAAIA,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGmB,OAAO,GAAG/G,GAAf;AACA6F,YAAAA,EAAE,GAAGmB,MAAM,GAAGhH,GAAd;;AACA,gBAAI4F,EAAE,GAAGC,EAAT,EAAa;AACTS,cAAAA,CAAC,GAAG,CAAJ;AACH;AACJ;;AACD,cAAIA,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGmB,OAAO,GAAG/G,GAAf;AACA6F,YAAAA,EAAE,GAAGoB,OAAO,GAAGjH,GAAf;AACAG,YAAAA,MAAM,GAAG,CAAT;AACH;;AACD,cAAImG,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGkB,MAAM,GAAG9G,GAAd;AACA6F,YAAAA,EAAE,GAAGmB,MAAM,GAAGhH,GAAd;AACAE,YAAAA,KAAK,GAAG,CAAR;AACH;;AAED,cAAImH,YAAY,GAAG,CAAnB;AACA,cAAIC,aAAa,GAAG9I,QAAQ,CAACmE,cAAT,CAAwB,mBAAmB8D,IAA3C,CAApB;;AAEA,cAAIa,aAAa,CAACC,SAAd,KAA4B,GAAhC,EAAqC;AACjC,gBAAIC,UAAU,GAAGhJ,QAAQ,CAACmE,cAAT,CAAwB8D,IAAI,GAAG,GAAP,GAAaC,IAArC,CAAjB;;AACA,gBAAIc,UAAJ,EAAgB;AACZH,cAAAA,YAAY,GAAGG,UAAU,CAACpB,SAA1B;AACH,aAFD,MAEO;AACH;AACH;AACJ;;AAED,cAAIN,EAAE,GAAGtH,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BL,SAA9B,GACLiB,YADK,GAELvG,WAFJ;AAKAuG,UAAAA,YAAY,GAAG,CAAf;AACAC,UAAAA,aAAa,GAAG9I,QAAQ,CAACmE,cAAT,CAAwB,mBAAmBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAA3C,CAAhB;;AACA,cAAIY,aAAa,CAACC,SAAd,KAA4B,GAAhC,EAAqC;AACjC,gBAAIE,QAAQ,GAAGjJ,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,IACnC,GADmC,GAC7BE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CADK,CAAf;;AAEA,gBAAIe,QAAJ,EAAc;AACVJ,cAAAA,YAAY,GAAGI,QAAQ,CAACrB,SAAxB;AACH,aAFD,MAEO;AACH;AACH;AACJ;;AAED,cAAIL,EAAE,GACFvH,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDN,SAAtD,GACAiB,YADA,GAEAvG,WAHJ;AAKA7C,UAAAA,YAAY,CAAC0H,SAAb,CACIC,EADJ,EACQC,EADR,EACYC,EADZ,EACgBC,EADhB,EACoBC,MADpB,EAC4BY,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,IAA+B,GAA/B,GAAqCE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CADjE;AAGH;AACJ;AACJ;AACJ;AACJ,CAxGD;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAzI,YAAY,CAACyJ,IAAb,GAAoB,UAAU9B,EAAV,EAAcE,EAAd,EAAkBD,EAAlB,EAAsBE,EAAtB,EAA0B4B,SAA1B,EAAqC;AACrD,MAAIC,MAAM,GAAGpJ,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,CAAb;AACA,MAAIkF,GAAG,GAAMD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAb;AACAD,EAAAA,GAAG,CAACE,WAAJ,GAAkBJ,SAAlB;AACAE,EAAAA,GAAG,CAACG,SAAJ,GAAgB,CAAhB;AACAH,EAAAA,GAAG,CAACI,SAAJ;AACAJ,EAAAA,GAAG,CAACK,MAAJ,CAAWtC,EAAX,EAAeE,EAAf;AACA+B,EAAAA,GAAG,CAACM,MAAJ,CAAWtC,EAAX,EAAeE,EAAf;AACA8B,EAAAA,GAAG,CAACO,MAAJ;AACH,CATD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAnK,YAAY,CAACiI,KAAb,GAAqB,UAAUN,EAAV,EAAcE,EAAd,EAAkBD,EAAlB,EAAsBE,EAAtB,EAA0B4B,SAA1B,EAAqC;AACtD,MAAI,CAAExJ,iBAAN,EAAyB;AACrB;AACH;;AACDF,EAAAA,YAAY,CAACoK,MAAb,CAAoBzC,EAApB,EAAwBE,EAAxB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC6B,SAAlC;AACA1J,EAAAA,YAAY,CAACqK,IAAb,CAAkBzC,EAAE,GAAG,CAAvB,EAA0BE,EAAE,GAAG,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC4B,SAAxC;;AAEA,MAAIpH,eAAJ,EAAqB;AACjBtC,IAAAA,YAAY,CAACsK,KAAb,CAAmB3C,EAAnB,EAAuBE,EAAvB,EAA2BD,EAA3B,EAA+BE,EAA/B,EAAmC4B,SAAnC;AACH,GAFD,MAEO;AACH1J,IAAAA,YAAY,CAACuK,KAAb,CAAmB5C,EAAnB,EAAuBE,EAAvB,EAA2BD,EAA3B,EAA+BE,EAA/B,EAAmC4B,SAAnC;AACH;AACJ,CAZD;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA1J,YAAY,CAACsK,KAAb,GAAqB,UAAU3C,EAAV,EAAcE,EAAd,EAAkBD,EAAlB,EAAsBE,EAAtB,EAA0B4B,SAA1B,EAAqC;AACtD,MAAIc,OAAO,GAAG7C,EAAd;AACA,MAAI8C,OAAO,GAAG7C,EAAd;;AAEA,MAAI1F,MAAJ,EAAY;AACRsI,IAAAA,OAAO,IAAIxI,KAAX;AACAyI,IAAAA,OAAO,IAAIzI,KAAX;AACH,GAHD,MAGO,IAAIC,KAAJ,EAAW;AACduI,IAAAA,OAAO,IAAIxI,KAAX;AACAyI,IAAAA,OAAO,IAAIzI,KAAX;AACH,GAHM,MAGA,IAAI2F,EAAE,GAAGC,EAAT,EAAa;AAChB4C,IAAAA,OAAO,IAAIxI,KAAX;AACAyI,IAAAA,OAAO,IAAIzI,KAAX;AACH,GAHM,MAGA;AACHwI,IAAAA,OAAO,IAAIxI,KAAX;AACAyI,IAAAA,OAAO,IAAIzI,KAAX;AACH;;AAEDhC,EAAAA,YAAY,CAACyJ,IAAb,CAAkB9B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC6B,SAAvC;AACA1J,EAAAA,YAAY,CAACyJ,IAAb,CAAkB7B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC4B,SAAvC;AACA1J,EAAAA,YAAY,CAACyJ,IAAb,CAAkBe,OAAlB,EAA2B3C,EAA3B,EAA+B4C,OAA/B,EAAwC3C,EAAxC,EAA4C4B,SAA5C;AACH,CArBD;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA1J,YAAY,CAACuK,KAAb,GAAqB,UAAU5C,EAAV,EAAcE,EAAd,EAAkBD,EAAlB,EAAsBE,EAAtB,EAA0B4B,SAA1B,EAAqC;AACtD,MAAIc,OAAO,GAAG7C,EAAd;AACA,MAAI8C,OAAO,GAAG7C,EAAd;;AAEA,MAAI1F,MAAJ,EAAY;AACR,QAAIyF,EAAE,GAAGC,EAAT,EAAa;AACT4C,MAAAA,OAAO,IAAI5C,EAAE,GAAGD,EAAL,GAAU3F,KAArB;AACAyI,MAAAA,OAAO,IAAIzI,KAAX;AACH,KAHD,MAGO;AACHyI,MAAAA,OAAO,IAAI9C,EAAE,GAAGC,EAAL,GAAU5F,KAArB;AACAwI,MAAAA,OAAO,IAAIxI,KAAX;AACH;;AAEDhC,IAAAA,YAAY,CAACyJ,IAAb,CAAkB9B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC6B,SAAvC;AACA1J,IAAAA,YAAY,CAACyJ,IAAb,CAAkB7B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC4B,SAAvC;AACA1J,IAAAA,YAAY,CAACyJ,IAAb,CAAkBe,OAAlB,EAA2B3C,EAA3B,EAA+B4C,OAA/B,EAAwC3C,EAAxC,EAA4C4B,SAA5C;AACA;AACH;;AACD,MAAIzH,KAAJ,EAAW;AACP,QAAI0F,EAAE,GAAGC,EAAT,EAAa;AACT6C,MAAAA,OAAO,IAAI7C,EAAE,GAAGD,EAAL,GAAU3F,KAArB;AACAwI,MAAAA,OAAO,IAAIxI,KAAX;AACH,KAHD,MAGO;AACHwI,MAAAA,OAAO,IAAI7C,EAAE,GAAGC,EAAL,GAAU5F,KAArB;AACAyI,MAAAA,OAAO,IAAIzI,KAAX;AACH;;AAEDhC,IAAAA,YAAY,CAACyJ,IAAb,CAAkB9B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC6B,SAAvC;AACA1J,IAAAA,YAAY,CAACyJ,IAAb,CAAkB7B,EAAlB,EAAsBE,EAAtB,EAA0B2C,OAA1B,EAAmC3C,EAAnC,EAAuC4B,SAAvC;AACA1J,IAAAA,YAAY,CAACyJ,IAAb,CAAkBe,OAAlB,EAA2B3C,EAA3B,EAA+B4C,OAA/B,EAAwC3C,EAAxC,EAA4C4B,SAA5C;AACA;AACH;;AAED,MAAIgB,EAAE,GAAG,CAAC/C,EAAE,GAAGC,EAAN,IAAY,CAArB;AACA5H,EAAAA,YAAY,CAACyJ,IAAb,CAAkB9B,EAAlB,EAAsBE,EAAtB,EAA0B6C,EAA1B,EAA8B7C,EAA9B,EAAkC6B,SAAlC;AACA1J,EAAAA,YAAY,CAACyJ,IAAb,CAAkBiB,EAAlB,EAAsB5C,EAAtB,EAA0BF,EAA1B,EAA8BE,EAA9B,EAAkC4B,SAAlC;AACA1J,EAAAA,YAAY,CAACyJ,IAAb,CAAkBiB,EAAlB,EAAsB7C,EAAtB,EAA0B6C,EAA1B,EAA8B5C,EAA9B,EAAkC4B,SAAlC;AACH,CArCD;;AAuCA1J,YAAY,CAACoK,MAAb,GAAsB,UAAUO,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,KAAtB,EAA6B;AAC/C,MAAInB,GAAG,GAAGrJ,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCmF,UAAlC,CAA6C,IAA7C,CAAV;AACAD,EAAAA,GAAG,CAACI,SAAJ;AACAJ,EAAAA,GAAG,CAACK,MAAJ,CAAWU,CAAX,EAAcC,CAAd;AACAhB,EAAAA,GAAG,CAACG,SAAJ,GAAgBe,CAAhB;AACAlB,EAAAA,GAAG,CAACE,WAAJ,GAAkBiB,KAAlB;AACAnB,EAAAA,GAAG,CAACoB,GAAJ,CAAQL,CAAR,EAAWC,CAAX,EAAcC,CAAd,EAAiB,CAAjB,EAAoB,IAAI5B,IAAI,CAACgC,EAA7B,EAAiC,IAAjC;AACArB,EAAAA,GAAG,CAACO,MAAJ;AACH,CARD;;AAUAnK,YAAY,CAAC0I,KAAb,GAAqB,YAAY;AAC7B,MAAIiB,MAAM,GAAGpJ,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,CAAb;AACA,MAAIkF,GAAG,GAAMD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAb;AACAD,EAAAA,GAAG,CAACsB,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBzI,WAApB,EAAiCC,YAAjC;AACH,CAJD;;AAMA1C,YAAY,CAACqK,IAAb,GAAoB,UAAU1C,EAAV,EAAcE,EAAd,EAAkBiD,CAAlB,EAAqBK,CAArB,EAAwBJ,KAAxB,EAA+B;AAC/C,MAAInB,GAAG,GAAGrJ,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkCmF,UAAlC,CAA6C,IAA7C,CAAV;AACAD,EAAAA,GAAG,CAACwB,SAAJ,GAAgBL,KAAhB;AACAnB,EAAAA,GAAG,CAACyB,QAAJ,CAAa1D,EAAb,EAAiBE,EAAjB,EAAqBiD,CAArB,EAAwBK,CAAxB;AACH,CAJD,EAMA;;;AACAnL,YAAY,CAACsL,gBAAb,GAAgC,YAAY;AACxC,MAAI/J,SAAS,GAAG,EAAhB;AACA,MAAIX,IAAI,GAAGN,CAAC,CAAC,mBAAD,CAAD,CAAuBO,IAAvB,CAA4B,KAA5B,CAAX;AACA,MAAIC,KAAK,GAAGF,IAAI,CAACG,QAAL,CAAc,MAAd,CAAZ;AACA,MAAIJ,QAAQ,GAAGL,CAAC,CAAC,eAAD,CAAhB;AACA,QAAMiL,WAAW,GAAGhL,QAAQ,CAACmE,cAAT,CAAwB,cAAxB,CAApB;;AAEA,MAAI,CAAEnE,QAAQ,CAACW,iBAAf,EAAkC;AAC9BN,IAAAA,IAAI,CAACQ,IAAL,CAAU,KAAV,EAAiBR,IAAI,CAACS,IAAL,CAAU,MAAV,CAAjB,EACKD,IADL,CACU,OADV,EACmBN,KAAK,CAACO,IAAN,CAAW,MAAX,CADnB;AAEAP,IAAAA,KAAK,CAACQ,IAAN,CAAWR,KAAK,CAACO,IAAN,CAAW,MAAX,CAAX;AACAV,IAAAA,QAAQ,CACH6K,QADL,CACc,oBADd,EAEKxK,GAFL,CAES;AAAE,eAASyK,MAAM,CAAC5F,KAAP,GAAe,CAA1B;AAA6B,gBAAU4F,MAAM,CAACtF,MAAP,GAAgB;AAAvD,KAFT;AAIA7F,IAAAA,CAAC,CAAC,UAAD,CAAD,CAAcU,GAAd,CAAkB;AAAE,eAASyK,MAAM,CAAC5F,KAAP,GAAe,IAA1B;AAAgC,gBAAU4F,MAAM,CAACtF;AAAjD,KAAlB;AACA5E,IAAAA,SAAS,GAAG,IAAZ;AACAgK,IAAAA,WAAW,CAACG,iBAAZ;AACH,GAXD,MAWO;AACH9K,IAAAA,IAAI,CAACQ,IAAL,CAAU,KAAV,EAAiBR,IAAI,CAACS,IAAL,CAAU,OAAV,CAAjB,EACKD,IADL,CACU,OADV,EACmBN,KAAK,CAACO,IAAN,CAAW,OAAX,CADnB;AAEAP,IAAAA,KAAK,CAACQ,IAAN,CAAWR,KAAK,CAACO,IAAN,CAAW,OAAX,CAAX;AACAV,IAAAA,QAAQ,CAACQ,WAAT,CAAqB,oBAArB,EACKH,GADL,CACS;AAAE,eAAS,MAAX;AAAmB,gBAAU;AAA7B,KADT;AAEAV,IAAAA,CAAC,CAAC,UAAD,CAAD,CAAcU,GAAd,CAAkB;AAAE,eAAS,MAAX;AAAmB,gBAAU;AAA7B,KAAlB;AACAT,IAAAA,QAAQ,CAACoL,cAAT;AACApK,IAAAA,SAAS,GAAG,KAAZ;AACH;;AACDvB,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,aAA/B,EAA8CD,SAA9C;AACH,CA7BD;;AA+BAvB,YAAY,CAAC4L,oBAAb,GAAoC,UAAUC,KAAV,EAAiBC,QAAjB,EAA2B;AAC3D,MAAIC,EAAE,GAAGzL,CAAC,CAACwL,QAAD,CAAD,CAAYjL,IAAZ,CAAiB,iBAAjB,EAAoCO,IAApC,CAAyC,IAAzC,CAAT;AACA,MAAI4K,KAAK,GAAG1L,CAAC,CAACwL,QAAD,CAAD,CAAYjL,IAAZ,CAAiB,iBAAjB,EAAoCO,IAApC,CAAyC,YAAzC,CAAZ;AACA,MAAI6K,SAAS,GAAG3L,CAAC,CAACwL,QAAD,CAAD,CAAYjL,IAAZ,CAAiB,iBAAjB,EAAoCO,IAApC,CAAyC,QAAzC,CAAhB;AACA,MAAI8K,YAAY,GAAG5L,CAAC,CAACwL,QAAD,CAAD,CAAYjL,IAAZ,CAAiB,iBAAjB,EAAoCO,IAApC,CAAyC,gBAAzC,CAAnB;AACA,MAAI+K,cAAc,GAAG7L,CAAC,CAACwL,QAAD,CAAD,CAAY9K,GAAZ,CAAgB,SAAhB,MAA+B,OAA/B,GAAyC,SAAzC,GAAqD,EAA1E;AACA,MAAIoL,cAAc,GAAID,cAAc,KAAK,SAApB,GAAiCE,QAAQ,CAACC,OAA1C,GAAoDD,QAAQ,CAACE,OAAlF;AACA,MAAIC,aAAa,GAAGlM,CAAC,CAAC,SAClB,iBADkB,GACE+L,QAAQ,CAACI,YADX,GAC0B,GAD1B,GAElB,qBAFkB,GAGlB,4BAHkB,GAIlB,qBAJkB,GAKlB,kBALkB,GAKGR,SALH,GAKe,GALf,GAMlB,0BANkB,GAMWC,YANX,GAM0B,GAN1B,GAOlB,uCAPkB,GAQlB,mBARkB,GAQIQ,cARJ,GAQqB,sBARrB,GASlB,WATkB,GAUlB,sBAVkB,GAWlB,4CAXkB,GAYlB,qBAZkB,GAYMN,cAZN,GAYuB,GAZvB,GAalB,4BAbkB,GAaaH,SAbb,GAayB,GAbzB,GAa+BC,YAb/B,GAa8C,GAb9C,GAclB,+BAdkB,GAelB,6BAfkB,GAgBlB,qBAhBkB,GAgBMD,SAhBN,GAgBkB,GAhBlB,GAgBwBC,YAhBxB,GAgBuC,GAhBvC,GAgB6CC,cAhB7C,GAiBlB,gBAjBkB,GAkBlB,WAlBkB,GAmBlB,+BAnBkB,GAoBlB,mCApBkB,GAoBoBF,SApBpB,GAoBgC,GApBhC,GAoBsCC,YApBtC,GAoBqD,IApBrD,GAoB4D5L,CAAC,CAAC,QAAD,CAAD,CAAYgB,IAAZ,CAAiByK,EAAE,GAAG,GAAL,GAAWC,KAA5B,EAAmCW,IAAnC,EApB5D,GAoBwG,OApBxG,GAqBlB,OArBiB,CAArB;AAsBArM,EAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BsM,KAA1B,GAAkCC,MAAlC,CAAyCL,aAAzC;AACAlM,EAAAA,CAAC,CAACkM,aAAD,CAAD,CAAiB3L,IAAjB,CAAsB,oBAAtB,EAA4CI,EAA5C,CAA+C,OAA/C,EAAwD,YAAY;AAChEjB,IAAAA,YAAY,CAAC8M,WAAb,CAAyBf,EAAzB,EAA6BC,KAA7B;AACH,GAFD;AAGA1L,EAAAA,CAAC,CAACkM,aAAD,CAAD,CAAiBvL,EAAjB,CAAoB,OAApB,EAA6B,gCAA7B,EAA+D,YAAY;AACvEjB,IAAAA,YAAY,CAAC+M,SAAb,CAAuBzM,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,yBAAb,CAAvB;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACkM,aAAD,CAAD,CAAiB3L,IAAjB,CAAsB,sBAAtB,EAA8CI,EAA9C,CAAiD,OAAjD,EAA0D,YAAY;AAClEX,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,OAAb,EAAsB,UAAU+H,CAAV,EAAa6D,YAAb,EAA2B;AAC7C,aAAOA,YAAY,KAAKX,QAAQ,CAACC,OAA1B,GAAoCD,QAAQ,CAACE,OAA7C,GAAuDF,QAAQ,CAACC,OAAvE;AACH,KAFD;AAGAtM,IAAAA,YAAY,CAACiN,UAAb,CAAwB,IAAxB,EAA6B3M,CAAC,CAAC,IAAD,CAAD,CAAQ4M,GAAR,EAA7B;AACH,GALD;AAMA,MAAIC,cAAc,GAAG7M,CAAC,CAAC,iBAAD,CAAtB;AACA6M,EAAAA,cAAc,CAAC7L,IAAf,CAAoBoE,QAAQ,CAACyH,cAAc,CAAC7L,IAAf,EAAD,EAAwB,EAAxB,CAAR,GAAsC,CAA1D;AACH,CA5CD;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAtB,YAAY,CAACoN,YAAb,GAA4B,UAAUC,IAAV,EAAgBC,OAAhB,EAAyBC,IAAzB,EAA+B;AACvD,MAAIC,KAAK,GAAGlN,CAAC,CAACiN,IAAD,CAAb;AACAC,EAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACAA,EAAAA,KAAK,CAAC3M,IAAN,CAAW,aAAX,EAA0B+L,KAA1B,GAAkCD,IAAlC,CAAuCU,IAAvC;AACA/M,EAAAA,CAAC,CAACiN,IAAI,GAAG,OAAR,CAAD,CAAkBX,KAAlB,GAA0BD,IAA1B,CAA+BW,OAA/B;AACA,SAAOE,KAAP;AACH,CAND;;AAQAxN,YAAY,CAACyN,gBAAb,GAAgC,YAAY;AACxC,MAAIC,SAAS,GAAGpN,CAAC,CAAC,uCAAD,CAAjB;AACAoN,EAAAA,SAAS,CAACb,MAAV,CAAiB,sBAAsBR,QAAQ,CAACsB,OAA/B,GAAyC,WAA1D;AAEA,MAAIC,YAAY,GAAGtN,CAAC,CAAC,kCAAD,CAApB;AACAsN,EAAAA,YAAY,CAACf,MAAb,CAAoB,sBAAsBR,QAAQ,CAACsB,OAA/B,GAAyC,WAA7D;AAEArN,EAAAA,CAAC,CAACuN,IAAF,CAAO,sBAAP,EAA+B;AAC3B,oBAAiB,IADU;AAE3B,iBAAc,iBAFa;AAG3B,cAAUC,YAAY,CAACC,GAAb,CAAiB,QAAjB;AAHiB,GAA/B,EAIG,UAAU1M,IAAV,EAAgB;AACff,IAAAA,CAAC,CAACe,IAAI,CAAC2M,OAAN,CAAD,CAAgBnN,IAAhB,CAAqB,+BAArB,EAAsDA,IAAtD,CAA2D,SAA3D,EAAsEoN,IAAtE,CAA2E,YAAY;AACnF,UAAIf,GAAG,GAAG5M,CAAC,CAAC,IAAD,CAAD,CAAQ,CAAR,EAAW4N,SAArB;AACAR,MAAAA,SAAS,CAACb,MAAV,CAAiBvM,CAAC,CAAC,mBAAD,CAAD,CAAuB4M,GAAvB,CAA2BA,GAA3B,EAAgC5L,IAAhC,CAAqC4L,GAArC,CAAjB;AACH,KAHD;AAIH,GATD;AAWA,MAAIiB,KAAK,GAAG7N,CAAC,CAAC,sCAAD,CAAD,CACPuM,MADO,CACAa,SADA,EACWb,MADX,CACkBe,YADlB,CAAZ;AAEA,MAAIJ,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0Be,KAA1B,EAAiC9B,QAAQ,CAAC+B,YAA1C,EAAwD,kBAAxD,CAAZ;AACA9N,EAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,QAAI8K,EAAE,GAAGzL,CAAC,CAAC,iBAAD,CAAD,CAAqB4M,GAArB,EAAT;AACA,QAAIlB,KAAK,GAAG1L,CAAC,CAAC,YAAD,CAAD,CAAgB4M,GAAhB,EAAZ,CAFgD,CAIhD;;AACA,QAAImB,MAAM,GAAG/N,CAAC,CAAC,UAAUgO,kBAAkB,CAACvC,EAAD,CAA5B,GAAmC,GAAnC,GAAyCuC,kBAAkB,CAACtC,KAAD,CAA3D,GAAqE,IAAtE,CAAd;;AACA,QAAIqC,MAAM,CAACE,MAAP,KAAkB,CAAtB,EAAyB;AACrBC,MAAAA,SAAS,CAACC,eAAV,CACID,SAAS,CAACE,OAAV,CAAkBrC,QAAQ,CAACsC,qBAA3B,EAAkD5C,EAAE,GAAG,GAAL,GAAWC,KAA7D,CADJ,EAEI4C,SAFJ,EAGI,OAHJ;AAKA;AACH;;AAEDtO,IAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6C;AACzC,sBAAiB,IADwB;AAEzC,gBAAW,WAF8B;AAGzC,YAAO9B,EAHkC;AAIzC,eAAUC,KAJ+B;AAKzC,gBAAU8B,YAAY,CAACC,GAAb,CAAiB,QAAjB;AAL+B,KAA7C,EAMG,UAAU1M,IAAV,EAAgB;AACf,UAAIwN,YAAY,GAAGvO,CAAC,CAACe,IAAI,CAAC2M,OAAN,CAApB;AACAa,MAAAA,YAAY,CAAChO,IAAb,CAAkB,GAAlB,EAAuB+L,KAAvB,GAA+BkC,MAA/B;AAEA,UAAI7C,SAAS,GAAG3L,CAAC,CAACuO,YAAD,CAAD,CAAgBhO,IAAhB,CAAqB,iBAArB,EAAwCO,IAAxC,CAA6C,QAA7C,CAAhB;AACA,UAAI8K,YAAY,GAAG5L,CAAC,CAACuO,YAAD,CAAD,CAAgBhO,IAAhB,CAAqB,iBAArB,EAAwCO,IAAxC,CAA6C,gBAA7C,CAAnB;;AAEA,UAAI,OAAO6K,SAAP,KAAqB,QAArB,IAAiC,OAAOC,YAAP,KAAwB,QAA7D,EAAuE;AAAE;AACrE5L,QAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBuM,MAArB,CAA4BgC,YAA5B;AACA7O,QAAAA,YAAY,CAAC+O,iBAAb,CAA+B,IAA/B,EAAqCF,YAArC;AACA7O,QAAAA,YAAY,CAAC4L,oBAAb,CAAkC,IAAlC,EAAwCiD,YAAxC;AACAxH,QAAAA,KAAK,CAAC4E,SAAS,GAAG,GAAZ,GAAkBC,YAAnB,CAAL,GAAwC,CAAxC;AACAlM,QAAAA,YAAY,CAAC2B,WAAb;AACH;AACJ,KApBD;AAqBA6L,IAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACH,GArCD;AAsCAlN,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBW,EAArB,CAAwB,QAAxB,EAAkC,YAAY;AAC1C,QAAIX,CAAC,CAAC,IAAD,CAAD,CAAQ4M,GAAR,EAAJ,EAAmB;AACf,UAAI8B,MAAM,GAAG1O,CAAC,CAAC,IAAD,CAAD,CAAQ4M,GAAR,EAAb;AACA,UAAI+B,QAAQ,GAAG,cAAf;AACA3O,MAAAA,CAAC,CAACuN,IAAF,CAAO,sBAAP,EAA+B;AAC3B,wBAAiB,IADU;AAE3B,qBAAaoB,QAFc;AAG3B,cAAOD,MAHoB;AAI3B,kBAAUlB,YAAY,CAACC,GAAb,CAAiB,QAAjB;AAJiB,OAA/B,EAKG,UAAU1M,IAAV,EAAgB;AACfuM,QAAAA,YAAY,CAACjB,IAAb,CAAkB,EAAlB;AACA,YAAIuC,IAAI,GAAG5O,CAAC,CAACe,IAAI,CAAC2M,OAAN,CAAD,CAAgBnN,IAAhB,CAAqB,+BAArB,EAAsDA,IAAtD,CAA2D,SAA3D,CAAX;;AACA,YAAIqO,IAAI,CAACX,MAAL,KAAgB,CAApB,EAAuB;AACnBX,UAAAA,YAAY,CAACf,MAAb,CAAoB,sBAAsBR,QAAQ,CAACsB,OAA/B,GAAyC,WAA7D;AACH;;AACDuB,QAAAA,IAAI,CAACjB,IAAL,CAAU,YAAY;AAClB,cAAIf,GAAG,GAAG5M,CAAC,CAAC,IAAD,CAAD,CAAQ,CAAR,EAAW4N,SAArB;AACAN,UAAAA,YAAY,CAACf,MAAb,CAAoBvM,CAAC,CAAC,mBAAD,CAAD,CAAuB4M,GAAvB,CAA2BA,GAA3B,EAAgC5L,IAAhC,CAAqC4L,GAArC,CAApB;AACH,SAHD;AAIH,OAfD;AAgBH;AACJ,GArBD;AAsBH,CAjFD,EAmFA;;;AACAlN,YAAY,CAACmP,GAAb,GAAmB,YAAY;AAC3BnP,EAAAA,YAAY,CAACoP,uBAAb,CAAqC,YAAY;AAC7CpP,IAAAA,YAAY,CAACqP,QAAb,CAAsB,CAAC,CAAvB;AACH,GAFD;AAGH,CAJD,EAMA;AACA;;;AACArP,YAAY,CAACsP,IAAb,GAAoB,UAAUC,GAAV,EAAe;AAC/B,OAAK,IAAInI,GAAT,IAAgBC,KAAhB,EAAuB;AACnB9G,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAS0C,GAAT,GAAe,GAAvC,EAA4CoI,KAA5C,GAAoD9J,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCmB,IAApC,EAA0C,EAA1C,CAA5D;AACAvF,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAS0C,GAAT,GAAe,GAAvC,EAA4CoI,KAA5C,GAAoD9J,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCoB,GAApC,EAAyC,EAAzC,CAA5D;AACAxF,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAS0C,GAAT,GAAe,GAAvC,EAA4CoI,KAA5C,GAAoDjP,QAAQ,CAACmE,cAAT,CAAwB,cAAc0C,GAAtC,EAA2CzC,KAA3C,CAAiDC,OAAjD,KAA6D,MAA7D,GAAsE,CAAtE,GAA0E,CAA9H;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAS0C,GAAT,GAAe,GAAvC,EAA4CoI,KAA5C,GAAoDjP,QAAQ,CAACmE,cAAT,CAAwB,eAAe0C,GAAvC,EAA4CwB,OAA5C,GAAsD,CAAtD,GAA0D,CAA9G;AACH;;AACDrI,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,gBAAxB,EAA0C+K,MAA1C,GAAmDF,GAAnD;AACAjP,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBsG,OAArB,CAA6B,QAA7B;AACH,CATD;;AAWA5G,YAAY,CAAC0P,SAAb,GAAyB,UAAUC,WAAV,EAAuB;AAC5C,MAAIvI,GAAJ;;AACA,MAAIwI,qBAAqB,IAAID,WAA7B,EAA0C;AACtC,QAAIE,OAAO,GAAG,EAAd;AACA,QAAIC,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AACA,QAAI5E,CAAC,GAAG,CAAR;;AACA,SAAK/B,GAAL,IAAYC,KAAZ,EAAmB;AACfwI,MAAAA,OAAO,IAAIC,MAAM,GAAG,MAAT,GAAkB3G,CAAlB,GAAsB,IAAtB,GAA6BzD,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCmB,IAApC,EAA0C,EAA1C,CAAhD;AACA+J,MAAAA,OAAO,IAAIC,MAAM,GAAG,MAAT,GAAkB3G,CAAlB,GAAsB,IAAtB,GAA6BzD,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCoB,GAApC,EAAyC,EAAzC,CAAhD;AACA8J,MAAAA,OAAO,IAAIC,MAAM,GAAG,MAAT,GAAkB3G,CAAlB,GAAsB,IAAtB,IAA8B5I,QAAQ,CAACmE,cAAT,CAAwB,cAAc0C,GAAtC,EAA2CzC,KAA3C,CAAiDC,OAAjD,KAA6D,MAA7D,GAAsE,CAAtE,GAA0E,CAAxG,CAAX;AACAiL,MAAAA,OAAO,IAAIC,MAAM,GAAG,MAAT,GAAkB3G,CAAlB,GAAsB,IAAtB,IAA8B5I,QAAQ,CAACmE,cAAT,CAAwB,eAAe0C,GAAvC,EAA4CwB,OAA5C,GAAsD,CAAtD,GAA0D,CAAxF,CAAX;AACAiH,MAAAA,OAAO,IAAIC,MAAM,GAAG,OAAT,GAAmB3G,CAAnB,GAAuB,IAAvB,GAA8B7I,CAAC,CAACC,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,CAAD,CAAD,CAAgChG,IAAhC,CAAqC,QAArC,CAAzC;AACAyO,MAAAA,OAAO,IAAIC,MAAM,GAAG,QAAT,GAAoB3G,CAApB,GAAwB,IAAxB,GAA+B7I,CAAC,CAACC,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,CAAD,CAAD,CAAgChG,IAAhC,CAAqC,gBAArC,CAA1C;AACA+H,MAAAA,CAAC;AACJ;;AACD,WAAO0G,OAAP;AACH,GAdD,MAcO;AACH,QAAIE,MAAM,GAAG,EAAb;;AACA,SAAK3I,GAAL,IAAYC,KAAZ,EAAmB;AACf,UAAI9G,QAAQ,CAACmE,cAAT,CAAwB,eAAe0C,GAAvC,EAA4CwB,OAAhD,EAAyD;AACrD,YAAI+B,CAAC,GAAGjF,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCmB,IAApC,EAA0C,EAA1C,CAAhB;AACA,YAAI8E,CAAC,GAAGlF,QAAQ,CAACnF,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,EAA6BzC,KAA7B,CAAmCoB,GAApC,EAAyC,EAAzC,CAAhB;AACA,YAAIiK,QAAQ,GAAG,IAAIC,eAAe,CAACC,eAApB,CACX5P,CAAC,CAACC,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,CAAD,CAAD,CAAgChG,IAAhC,CAAqC,QAArC,CADW,EAEXd,CAAC,CAACC,QAAQ,CAACmE,cAAT,CAAwB0C,GAAxB,CAAD,CAAD,CAAgChG,IAAhC,CAAqC,gBAArC,CAFW,EAGX,CAAC,CAHU,EAGPuJ,CAHO,EAGJC,CAHI,CAAf;AAIAmF,QAAAA,MAAM,CAACI,IAAP,CAAYH,QAAZ;AACH;AACJ;;AACD,WAAOD,MAAP;AACH;AACJ,CA/BD;;AAiCA/P,YAAY,CAACoQ,KAAb,GAAqB,UAAUC,QAAV,EAAoB;AACrC,MAAIT,qBAAJ,EAA2B;AACvB,QAAIE,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AACA,QAAI8B,OAAO,GAAG,uBAAuBC,MAAvB,GAAgC,gBAAhC,GAAmDA,MAAnD,GAA4D,mBAA1E;AACAD,IAAAA,OAAO,IAAIC,MAAM,GAAG,SAAT,GAAqBQ,MAArB,GAA8BR,MAA9B,GAAuC,KAAvC,GAA+CxB,kBAAkB,CAACvC,EAAD,CAAjE,GAAwE+D,MAAxE,GAAiF,gBAAjF,GAAoGS,YAA/G;AACAV,IAAAA,OAAO,IAAI7P,YAAY,CAAC0P,SAAb,EAAX;AAEA,QAAIc,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;AACAnQ,IAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6CgC,OAA7C,EAAsD,UAAUxO,IAAV,EAAgB;AAClE,UAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,QAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,OAFD,MAEO;AACHnC,QAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAhC,QAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACwE,oBAAnC;AACA7Q,QAAAA,YAAY,CAAC0B,SAAb;;AACA,YAAI,OAAO2O,QAAP,KAAoB,WAAxB,EAAqC;AACjCA,UAAAA,QAAQ;AACX;AACJ;AACJ,KAXD;AAYH,GAnBD,MAmBO;AACH,QAAIS,IAAI,GAAGxQ,CAAC,CAAC,YAAD,CAAD,CAAgBqM,IAAhB,GAAuBoE,IAAvB,EAAX;AACAC,IAAAA,YAAY,CAACC,kBAAb,CAAgClF,EAAhC,EAAoCwE,YAApC,EAAkDO,IAAlD,EAAwD9Q,YAAY,CAAC0P,SAAb,EAAxD,EAAkF,YAAY;AAC1F1P,MAAAA,YAAY,CAAC0B,SAAb;;AACA,UAAI,OAAO2O,QAAP,KAAoB,WAAxB,EAAqC;AACjCA,QAAAA,QAAQ;AACX;AACJ,KALD;AAMH;AACJ,CA7BD;;AA+BArQ,YAAY,CAACkR,wBAAb,GAAwC,UAAUb,QAAV,EAAoB7C,KAApB,EAA2B;AAC/D,MAAIW,KAAK,GAAG7N,CAAC,CAAC,YAAD,CAAb;AACA,MAAIwQ,IAAI,GAAG3C,KAAK,CAACtN,IAAN,CAAW,8BAAX,EAA2CqM,GAA3C,GAAiD6D,IAAjD,EAAX;;AACA,MAAID,IAAI,KAAK,EAAb,EAAiB;AACbtC,IAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAAC8E,qBAAnC,EAA0D,KAA1D;AACA;AACH;;AACD3D,EAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;;AAEA,MAAIoC,qBAAJ,EAA2B;AACvB,QAAIY,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;AACAjC,IAAAA,SAAS,CAAC4C,qBAAV,CAAgCjD,KAAhC;AACA7N,IAAAA,CAAC,CAACuN,IAAF,CAAOM,KAAK,CAAC/M,IAAN,CAAW,QAAX,CAAP,EAA6B+M,KAAK,CAACkD,SAAN,KAAoBrR,YAAY,CAAC0P,SAAb,EAAjD,EAA2E,UAAUrO,IAAV,EAAgB;AACvF,UAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,QAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,OAFD,MAEO;AACHnC,QAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAxQ,QAAAA,YAAY,CAAC0B,SAAb;;AACA,YAAIL,IAAI,CAACoD,EAAT,EAAa;AACT8L,UAAAA,YAAY,GAAGlP,IAAI,CAACoD,EAApB;AACH;;AACDnE,QAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBgB,IAAhB,CAAqBwP,IAArB;;AACA,YAAI,OAAOT,QAAP,KAAoB,WAAxB,EAAqC;AACjCA,UAAAA,QAAQ;AACX;AACJ;AACJ,KAdD;AAeH,GAlBD,MAkBO;AACHW,IAAAA,YAAY,CAACM,aAAb,CAA2BvF,EAA3B,EAA+B+E,IAA/B,EAAqC9Q,YAAY,CAAC0P,SAAb,EAArC,EAA+D,UAAU6B,IAAV,EAAgB;AAC3EvR,MAAAA,YAAY,CAAC0B,SAAb;;AACA,UAAI6P,IAAI,CAACC,IAAT,EAAe;AACXjB,QAAAA,YAAY,GAAGgB,IAAI,CAACC,IAApB;AACH;;AACDlR,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBgB,IAAhB,CAAqBiQ,IAAI,CAACE,SAA1B;;AACA,UAAI,OAAOpB,QAAP,KAAoB,WAAxB,EAAqC;AACjCA,QAAAA,QAAQ;AACX;AACJ,KATD;AAUH;AACJ,CAvCD;;AAyCArQ,YAAY,CAAC0R,KAAb,GAAqB,UAAUrB,QAAV,EAAoB;AACrC,MAAIE,YAAY,KAAK,CAAC,CAAtB,EAAyB;AACrBvQ,IAAAA,YAAY,CAACoQ,KAAb,CAAmBC,QAAnB;AACH,GAFD,MAEO;AACH,QAAIlC,KAAK,GAAG7N,CAAC,CAAC,sHAAD,CAAD,CACPuM,MADO,CACA,+CAA+CyD,MAA/C,GAAwD,IADxD,EAEPzD,MAFO,CAEAvM,CAAC,CAAC,mCAAD,CAAD,CAAuC4M,GAAvC,CAA2CnB,EAA3C,CAFA,EAGPc,MAHO,CAGA,yDAHA,EAIPA,MAJO,CAIA,oDAJA,EAKPA,MALO,CAKA,iCAAiCR,QAAQ,CAACsF,WAA1C,GACJ,oDANI,CAAZ;AAOA,QAAInE,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0Be,KAA1B,EAAiC9B,QAAQ,CAACuF,WAA1C,EAAuD,kBAAvD,CAAZ;AACAzD,IAAAA,KAAK,CAAClN,EAAN,CAAS,QAAT,EAAmB,UAAU4C,CAAV,EAAa;AAC5BA,MAAAA,CAAC,CAACkB,cAAF;AACA/E,MAAAA,YAAY,CAACkR,wBAAb,CAAsCb,QAAtC,EAAgD7C,KAAhD;AACH,KAHD;AAIAlN,IAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,UAAIkN,KAAK,GAAG7N,CAAC,CAAC,YAAD,CAAb;AACA6N,MAAAA,KAAK,CAACvH,OAAN,CAAc,QAAd;AACA4G,MAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACH,KAJD;AAKH;AACJ,CAtBD,EAwBA;;;AACAxN,YAAY,CAAC6R,SAAb,GAAyB,YAAY;AACjC7R,EAAAA,YAAY,CAACoP,uBAAb,CAAqC,YAAY;AAC7C,QAAIoB,OAAO,GAAGhC,SAAS,CAACC,eAAV,EAAd;AACAnO,IAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6C;AACzC,sBAAgB,IADyB;AAEzC,gBAAUyC,MAF+B;AAGzC,YAAMvE,EAHmC;AAIzC,gBAAU;AAJ+B,KAA7C,EAKG,UAAU1K,IAAV,EAAgB;AACf,UAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,QAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,OAFD,MAEO;AACHnC,QAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;;AAEA,YAAI,CAAEZ,qBAAN,EAA6B;AACzBoB,UAAAA,YAAY,CAACc,cAAb,CAA4B/F,EAA5B,EAAgC,UAAUgG,OAAV,EAAmB;AAC/CzR,YAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBuM,MAApB,CAA2BkF,OAA3B;AACH,WAFD;AAGH;;AACD,YAAIvE,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0B/L,IAAI,CAAC2M,OAA/B,EAAwC3B,QAAQ,CAAC2F,WAAjD,EAA8D,kBAA9D,CAAZ;AACA1R,QAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,cAAIkN,KAAK,GAAG7N,CAAC,CAAC,oBAAD,CAAb;AACA,cAAI2R,QAAQ,GAAG9D,KAAK,CAACtN,IAAN,CAAW,8BAAX,EAA2CqM,GAA3C,EAAf;;AACA,cAAI+E,QAAQ,KAAK,GAAjB,EAAsB;AAClBzD,YAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAAC6F,aAAnC,EAAkD,IAAlD;AACA;AACH;;AACD1E,UAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACAxN,UAAAA,YAAY,CAACqP,QAAb,CAAsB4C,QAAtB;AACH,SATD;AAUH;AACJ,KA5BD,EAF6C,CA8BzC;AACP,GA/BD;AAgCH,CAjCD,EAmCA;;;AACAjS,YAAY,CAACmS,WAAb,GAA2B,YAAY;AACnC,MAAI3B,OAAO,GAAGhC,SAAS,CAACC,eAAV,EAAd;AACAnO,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6C;AACzC,oBAAgB,IADyB;AAEzC,cAAUyC,MAF+B;AAGzC,UAAMvE,EAHmC;AAIzC,cAAU;AAJ+B,GAA7C,EAKG,UAAU1K,IAAV,EAAgB;AACf,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,KAFD,MAEO;AACHnC,MAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;;AAEA,UAAI,CAAEZ,qBAAN,EAA6B;AACzBoB,QAAAA,YAAY,CAACc,cAAb,CAA4B/F,EAA5B,EAAgC,UAAUgG,OAAV,EAAmB;AAC/CzR,UAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBuM,MAApB,CAA2BkF,OAA3B;AACH,SAFD;AAGH;;AAED,UAAIvE,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0B/L,IAAI,CAAC2M,OAA/B,EAAwC3B,QAAQ,CAAC+F,aAAjD,EAAgE,kBAAhE,CAAZ;AACA9R,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIkN,KAAK,GAAG7N,CAAC,CAAC,oBAAD,CAAb;AACA,YAAI2R,QAAQ,GAAG9D,KAAK,CAACtN,IAAN,CAAW,8BAAX,EAA2CqM,GAA3C,EAAf;;AACA,YAAI+E,QAAQ,KAAK,GAAjB,EAAsB;AAClBzD,UAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAAC6F,aAAnC,EAAkD,IAAlD;AACA;AACH;;AAED,YAAIG,WAAW,GAAG7D,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAlB;AACA,YAAI6B,mBAAmB,GAAG5M,QAAQ,CAACuM,QAAD,CAAR,KAAuB1B,YAAjD;AACA/B,QAAAA,SAAS,CAAC4C,qBAAV,CAAgCjD,KAAhC;;AAEA,YAAIyB,qBAAJ,EAA2B;AACvBtP,UAAAA,CAAC,CAACuN,IAAF,CAAOM,KAAK,CAAC/M,IAAN,CAAW,QAAX,CAAP,EAA6B+M,KAAK,CAACkD,SAAN,EAA7B,EAAgD,UAAUhQ,IAAV,EAAgB;AAC5D,gBAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,cAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,aAFD,MAEO;AACHnC,cAAAA,SAAS,CAACoC,iBAAV,CAA4ByB,WAA5B;;AACA,kBAAIC,mBAAJ,EAAyB;AACrBtS,gBAAAA,YAAY,CAACqP,QAAb,CAAsB,IAAtB;AACH,eAFD,MAEO;AACHb,gBAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACkG,uBAAnC;AACH;AACJ;AACJ,WAXD,EADuB,CAYnB;AACP,SAbD,MAaO;AACHvB,UAAAA,YAAY,CAACwB,UAAb,CAAwBP,QAAxB,EAAkC,UAAUvB,OAAV,EAAmB;AACjD,gBAAI,CAAEA,OAAN,EAAe;AACXlC,cAAAA,SAAS,CAACC,eAAV,CAA0B,OAA1B,EAAmC,KAAnC;AACH,aAFD,MAEO;AACHD,cAAAA,SAAS,CAACoC,iBAAV,CAA4ByB,WAA5B;;AACA,kBAAIC,mBAAJ,EAAyB;AACrBtS,gBAAAA,YAAY,CAACqP,QAAb,CAAsB,IAAtB;AACH,eAFD,MAEO;AACHb,gBAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACkG,uBAAnC;AACH;AACJ;AACJ,WAXD;AAYH;;AACD/E,QAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACH,OAxCD;AAyCH;AACJ,GA5DD,EAFmC,CA8D/B;AACP,CA/DD,EAiEA;;;AACAxN,YAAY,CAACyS,MAAb,GAAsB,YAAY;AAC9B,MAAIjC,OAAO,GAAGhC,SAAS,CAACC,eAAV,EAAd;AACAnO,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6C;AACzC,oBAAgB,IADyB;AAEzC,cAAUyC,MAF+B;AAGzC,UAAMvE,EAHmC;AAIzC,cAAU;AAJ+B,GAA7C,EAKG,UAAU1K,IAAV,EAAgB;AACf,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,KAFD,MAEO;AACHnC,MAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;;AAEA,UAAI,CAAEZ,qBAAN,EAA6B;AACzBoB,QAAAA,YAAY,CAACc,cAAb,CAA4B/F,EAA5B,EAAgC,UAAUgG,OAAV,EAAmB;AAC/CzR,UAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBuM,MAApB,CAA2BkF,OAA3B;AACH,SAFD;AAGH;;AAED,UAAIvE,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0B/L,IAAI,CAAC2M,OAA/B,EAAwC3B,QAAQ,CAACqG,aAAjD,EAAgE,kBAAhE,CAAZ;AACApS,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIkN,KAAK,GAAa7N,CAAC,CAAC,gBAAD,CAAvB;AACA,YAAIqS,aAAa,GAAIxE,KAAK,CAACtN,IAAN,CAAW,8BAAX,EAA2CqM,GAA3C,GAAiD6D,IAAjD,EAArB;AACA,YAAI6B,aAAa,GAAIzE,KAAK,CAACtN,IAAN,CAAW,8BAAX,CAArB;AACA,YAAIgS,MAAM,GAAY1E,KAAK,CAACtN,IAAN,CAAW,iCAAX,EAA8CqM,GAA9C,EAAtB;AACA,YAAI4D,IAAI,GAAc,EAAtB;;AAEA,YAAI+B,MAAM,KAAK,MAAf,EAAuB;AACnB,cAAID,aAAa,CAAC1F,GAAd,OAAwB,GAA5B,EAAiC;AAC7BsB,YAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAAC6F,aAAnC,EAAkD,IAAlD;AACA;AACH;;AACDpB,UAAAA,IAAI,GAAG8B,aAAa,CAAC/R,IAAd,CAAmB,iBAAnB,EAAsCS,IAAtC,EAAP;AACH,SAND,MAMO,IAAIuR,MAAM,KAAK,KAAf,EAAsB;AACzB,cAAIF,aAAa,KAAK,EAAtB,EAA0B;AACtBnE,YAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAAC8E,qBAAnC,EAA0D,IAA1D;AACA;AACH;;AACDL,UAAAA,IAAI,GAAG6B,aAAP;AACH;;AAED,YAAInC,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;;AACA,YAAIb,qBAAJ,EAA2B;AACvBpB,UAAAA,SAAS,CAAC4C,qBAAV,CAAgCjD,KAAhC;AACA7N,UAAAA,CAAC,CAACuN,IAAF,CAAOM,KAAK,CAAC/M,IAAN,CAAW,QAAX,CAAP,EAA6B+M,KAAK,CAACkD,SAAN,KAAoBrR,YAAY,CAAC0P,SAAb,EAAjD,EAA2E,UAAUrO,IAAV,EAAgB;AACvF,gBAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,cAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,aAFD,MAEO;AACHnC,cAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAxQ,cAAAA,YAAY,CAAC0B,SAAb;;AACA,kBAAIL,IAAI,CAACoD,EAAT,EAAa;AACT8L,gBAAAA,YAAY,GAAGlP,IAAI,CAACoD,EAApB;AACH;;AACDzE,cAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH;AACJ,WAXD,EAFuB,CAanB;AACP,SAdD,MAcO;AACH,cAAIsC,MAAM,KAAK,MAAf,EAAuB;AACnB,gBAAIC,cAAc,GAAGF,aAAa,CAAC/R,IAAd,CAAmB,iBAAnB,EAAsCqM,GAAtC,EAArB;AACA8D,YAAAA,YAAY,CAACC,kBAAb,CAAgClF,EAAhC,EAAoC+G,cAApC,EAAoDhC,IAApD,EAA0D9Q,YAAY,CAAC0P,SAAb,EAA1D,EAAoF,UAAU6B,IAAV,EAAgB;AAChG/C,cAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAxQ,cAAAA,YAAY,CAAC0B,SAAb;;AACA,kBAAI6P,IAAI,CAACC,IAAT,EAAe;AACXjB,gBAAAA,YAAY,GAAGgB,IAAI,CAACC,IAApB;AACH;;AACDxR,cAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH,aAPD;AAQH,WAVD,MAUO,IAAIsC,MAAM,KAAK,KAAf,EAAsB;AACzB7B,YAAAA,YAAY,CAACM,aAAb,CAA2BvF,EAA3B,EAA+B+E,IAA/B,EAAqC9Q,YAAY,CAAC0P,SAAb,EAArC,EAA+D,UAAU6B,IAAV,EAAgB;AAC3E/C,cAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAxQ,cAAAA,YAAY,CAAC0B,SAAb;;AACA,kBAAI6P,IAAI,CAACC,IAAT,EAAe;AACXjB,gBAAAA,YAAY,GAAGgB,IAAI,CAACC,IAApB;AACH;;AACDxR,cAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH,aAPD;AAQH;AACJ;;AAED/C,QAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACH,OA5DD,EAVG,CAuEH;;AACA,UAAI+C,YAAY,KAAK,CAAC,CAAtB,EAAyB;AACrBjQ,QAAAA,CAAC,CAAC,8BAAD,CAAD,CAAkC4M,GAAlC,CAAsCqD,YAAtC;AACH;AACJ;AACJ,GApFD,EAF8B,CAsF1B;AACP,CAvFD;;AAyFAvQ,YAAY,CAACoP,uBAAb,GAAuC,UAAUiB,QAAV,EAAoB;AACvD,MAAIpQ,MAAM,KAAK,CAAX,IAAgBsQ,YAAY,KAAK,CAAC,CAAtC,EAAyC;AACrC,QAAI/C,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0B,UAAUf,QAAQ,CAAC0G,cAAnB,GAAoC,QAA9D,EACR1G,QAAQ,CAACuF,WADD,EACc,sBADd,CAAZ;AAEAtR,IAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BW,EAA7B,CAAgC,OAAhC,EAAyC,YAAY;AACjDuM,MAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACAxN,MAAAA,YAAY,CAAC0R,KAAb,CAAmBrB,QAAnB;AACH,KAHD;AAIA/P,IAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChDuM,MAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACA6C,MAAAA,QAAQ;AACX,KAHD;AAIH,GAXD,MAWO;AACHA,IAAAA,QAAQ;AACX;AACJ,CAfD,EAiBA;;;AACArQ,YAAY,CAACgT,WAAb,GAA2B,YAAY;AACnC,MAAIxC,OAAO,GAAGhC,SAAS,CAACC,eAAV,EAAd;AACA,MAAIqB,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AAEAzN,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6C;AACzC,oBAAgB,IADyB;AAEzC,cAAUyC,MAF+B;AAGzC,UAAMvE,EAHmC;AAIzC,cAAU,QAJ+B;AAKzC,qBAAiBwE;AALwB,GAA7C,EAMG,UAAUlP,IAAV,EAAgB;AACf,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,KAFD,MAEO;AACHnC,MAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AAEA,UAAIrC,KAAK,GAAG7N,CAAC,CAACe,IAAI,CAAC2M,OAAN,CAAb;;AACA,UAAI,CAAC4B,qBAAL,EAA4B;AACxBzB,QAAAA,KAAK,CAACtB,MAAN,CAAa,0DAAb;AACH;;AACDvM,MAAAA,CAAC,CAAC2N,IAAF,CAAOjO,YAAY,CAAC0P,SAAb,CAAuB,IAAvB,EAA6BuD,SAA7B,CAAuC,CAAvC,EAA0CC,KAA1C,CAAgDpD,MAAhD,CAAP,EAAgE,YAAY;AACxE,YAAIqD,IAAI,GAAG,KAAKD,KAAL,CAAW,GAAX,CAAX;AACA,YAAIE,KAAK,GAAG9S,CAAC,CAAC,uBAAD,CAAb;AACA8S,QAAAA,KAAK,CAAChS,IAAN,CAAW,MAAX,EAAmB+R,IAAI,CAAC,CAAD,CAAvB;AACAC,QAAAA,KAAK,CAAChS,IAAN,CAAW,OAAX,EAAoB+R,IAAI,CAAC,CAAD,CAAxB;AACAhF,QAAAA,KAAK,CAACtB,MAAN,CAAauG,KAAb;AACH,OAND;AAOA,UAAIC,eAAe,GAAGlF,KAAK,CAACtN,IAAN,CAAW,UAAX,CAAtB;AACAwS,MAAAA,eAAe,CAACpS,EAAhB,CAAmB,QAAnB,EAA6B,YAAY;AACrC,YAAIqS,MAAM,GAAGD,eAAe,CAACnG,GAAhB,EAAb;AACAiB,QAAAA,KAAK,CAACtN,IAAN,CAAW,0BAAX,EAAuCY,IAAvC;AACA0M,QAAAA,KAAK,CAACtN,IAAN,CAAW,MAAMyS,MAAN,GAAe,UAA1B,EAAsC7S,IAAtC;AACH,OAJD,EAIGmG,OAJH,CAIW,QAJX;AAMA,UAAI4G,KAAK,GAAGxN,YAAY,CAACoN,YAAb,CAA0Be,KAA1B,EAAiC9B,QAAQ,CAACkH,yBAA1C,EAAqE,kBAArE,CAAZ;AACAjT,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChDX,QAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBsG,OAAtB,CAA8B,QAA9B;AACA4G,QAAAA,KAAK,CAACA,KAAN,CAAY,MAAZ;AACH,OAHD;AAIH;AACJ,GApCD,EAJmC,CAwC/B;AACP,CAzCD;;AA2CAxN,YAAY,CAACqP,QAAb,GAAwB,UAAUkC,IAAV,EAAgB;AACpC,MAAI3B,qBAAJ,EAA2B;AACvB,QAAI4D,SAAS,GAAG,EAAhB;AACA,QAAI1D,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;;AACA,QAAIwD,IAAI,KAAK,IAAb,EAAmB;AACfiC,MAAAA,SAAS,GAAG1D,MAAM,GAAG,OAAT,GAAmByB,IAA/B;AACH;;AACDjR,IAAAA,CAAC,CAAC,wDAAwDgQ,MAAxD,GAAiER,MAAjE,GAA0E,KAA1E,GAAkFxB,kBAAkB,CAACvC,EAAD,CAApG,GAA2GyH,SAA3G,GAAuH,QAAxH,CAAD,CACKC,QADL,CACcnT,CAAC,CAAC,eAAD,CADf,EAEKsG,OAFL,CAEa,OAFb;AAGH,GATD,MASO;AACH,QAAI2K,IAAI,KAAK,IAAb,EAAmB;AACfP,MAAAA,YAAY,CAAC0C,uBAAb,CAAqC3H,EAArC;AACH,KAFD,MAEO,IAAIwF,IAAI,GAAG,CAAC,CAAZ,EAAe;AAClBP,MAAAA,YAAY,CAAC2C,eAAb,CAA6BpC,IAA7B;AACH,KAFM,MAEA,IAAIA,IAAI,KAAK,CAAC,CAAd,EAAiB;AACpBP,MAAAA,YAAY,CAAC4C,iBAAb,CAA+B,IAA/B;AACH;AACJ;;AACD5T,EAAAA,YAAY,CAAC0B,SAAb;AACH,CApBD;;AAsBA1B,YAAY,CAACuG,IAAb,GAAoB,YAAY;AAC5B,MAAIhF,SAAS,GAAG,EAAhB;;AACA,MAAI,CAACa,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAG,CAAT;AACAb,IAAAA,SAAS,GAAG,IAAZ;AACAhB,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,aAAxB,EAAuCF,SAAvC,GAAmD,sBAAnD;AACH,GAJD,MAIO;AACHjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,aAAxB,EAAuCF,SAAvC,GAAmD,QAAnD;AACApC,IAAAA,MAAM,GAAG,CAAT;AACAb,IAAAA,SAAS,GAAG,KAAZ;AACH;;AACDvB,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,cAA/B,EAA+CD,SAA/C;AACH,CAZD;;AAcAvB,YAAY,CAACsG,aAAb,GAA6B,YAAY;AACrC,MAAI/E,SAAS,GAAG,EAAhB;;AACA,MAAIe,eAAJ,EAAqB;AACjBA,IAAAA,eAAe,GAAG,CAAlB;AACAf,IAAAA,SAAS,GAAG,SAAZ;AACAhB,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,uBAAxB,EAAiDF,SAAjD,GAA6D,sBAA7D;AACH,GAJD,MAIO;AACHlC,IAAAA,eAAe,GAAG,CAAlB;AACAf,IAAAA,SAAS,GAAG,QAAZ;AACAhB,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,uBAAxB,EAAiDF,SAAjD,GAA6D,QAA7D;AACH;;AACDxE,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,gBAA/B,EAAiDD,SAAjD;AACAvB,EAAAA,YAAY,CAACiG,MAAb;AACH,CAbD;;AAeAjG,YAAY,CAACwB,iBAAb,GAAiC,UAAUqS,SAAV,EAAqBtS,SAArB,EAAgC;AAC7DjB,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EACI;AACI,iBAAa,oBADjB;AAEI,aAASgG,SAFb;AAGI,oBAAgB,IAHpB;AAII,cAAUvD,MAJd;AAKI,aAAS/O;AALb,GADJ,EAQI,UAAUF,IAAV,EAAgB;AACZ,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH;AACJ,GAZL;AAaH,CAdD,EAgBA;;;AACA3Q,YAAY,CAAC8T,aAAb,GAA6B,YAAY;AACrC,MAAIzR,cAAJ,EAAoB;AAChB;AACH;;AAED,MAAI,CAACF,UAAL,EAAiB;AACb5B,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDC,OAAlD,GAA4D,EAA5D;AACAzC,IAAAA,UAAU,GAAG,CAAb;AACA5B,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD+C,QAAQ,CAAC0H,sBAA9D;AACAxT,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCF,SAAtC,GAAkD,sBAAlD;AACH,GAND,MAMO;AACHjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD,EAArD;AACA/I,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCF,SAAtC,GAAkD,QAAlD;AACAjC,IAAAA,UAAU,GAAG,CAAb;AACAJ,IAAAA,UAAU,GAAG,CAAb;AACH;AACJ,CAlBD,EAoBA;;;AACAnC,YAAY,CAACuC,UAAb,GAA0B,UAAUwJ,EAAV,EAAciI,CAAd,EAAiBC,CAAjB,EAAoBC,EAApB,EAAwB;AAC9C,MAAIC,OAAO,GAAGzO,QAAQ,CAACwO,EAAD,CAAtB;AACA,MAAIpE,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;;AACA,MAAI5L,UAAJ,EAAgB;AACZ,QAAI,CAACI,UAAL,EAAiB;AACb;AACA,UAAI,CAAC4R,OAAL,EAAc;AACVC,QAAAA,KAAK,CAAC/H,QAAQ,CAACgI,iCAAV,CAAL;AACA,eAFU,CAEH;AACV,OALY,CAKZ;;;AACD,UAAIhN,KAAK,CAAC0E,EAAE,GAAG,GAAL,GAAWiI,CAAZ,CAAL,KAAwB,CAA5B,EAA+B;AAC3BzT,QAAAA,QAAQ,CAACmE,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDC,OAAlD,GAA4D,MAA5D;AACH;;AACDrC,MAAAA,UAAU,GAAG,CAAb;AACAC,MAAAA,YAAY,GAAG,SAASuJ,EAAT,GAAc+D,MAAd,GAAuB,KAAvB,GAA+BkE,CAA/B,GAAmClE,MAAnC,GAA4C,KAA5C,GAAoDmE,CAAnE;AACA1T,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD+C,QAAQ,CAACiI,mBAA9D;AACH,KAZD,MAYO;AACHtU,MAAAA,YAAY,CAAC8T,aAAb,GADG,CAC2B;;AAC9B,UAAIzM,KAAK,CAAC0E,EAAE,GAAG,GAAL,GAAWiI,CAAZ,CAAL,KAAwB,CAAxB,IAA6B,CAACG,OAAlC,EAA2C;AACvC5T,QAAAA,QAAQ,CAACmE,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDC,OAAlD,GAA4D,MAA5D;AACH;;AACD,UAAIkB,IAAI,GAAGhD,KAAK,IAAIvC,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8C6C,WAA9C,IAA6D,CAAjE,CAAhB;AACAhH,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDmB,IAApD,GAA2DA,IAAI,GAAG,IAAlE;AACA,UAAIC,GAAG,GAAGhD,KAAK,GAAGxC,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8C+C,YAAhE;AACAlH,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDoB,GAApD,GAA2DA,GAAG,GAAG,IAAjE;AACAxF,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,OAA9D;AACApC,MAAAA,YAAY,IAAIsN,MAAM,GAAG,MAAT,GAAkB/D,EAAlB,GAAuB+D,MAAvB,GAAgC,KAAhC,GAAwCkE,CAAxC,GAA4ClE,MAA5C,GAAqD,KAArD,GAA6DmE,CAA7E;AACH;AACJ;;AAED,MAAI5R,cAAJ,EAAoB;AAChB,QAAIkS,eAAe,GAAGC,kBAAkB,CAACP,CAAD,CAAxC;AACA,QAAIQ,oBAAoB,GAAG,WAA3B;AACA,QAAIC,WAAW,GAAGnU,QAAQ,CAACmE,cAAT,CAAwB,WAAWsP,CAAX,GAAe,GAAf,GAAqBW,YAAY,CAACX,CAAD,CAAzD,CAAlB,CAHgB,CAIhB;;AACA,QAAIW,YAAY,CAACX,CAAD,CAAZ,KAAoBC,CAAxB,EAA2B;AAAC;AACxBQ,MAAAA,oBAAoB,GAAG,WAAvB;AACA,aAAOE,YAAY,CAACX,CAAD,CAAnB;;AACA,UAAIU,WAAJ,EAAiB;AAAC;AACd;AACAA,QAAAA,WAAW,CAAClQ,SAAZ,GAAwB,WAAxB;AACH;;AACD+P,MAAAA,eAAe,GAAG,EAAlB;AACH,KARD,MAQO;AACHE,MAAAA,oBAAoB,GAAG,aAAvB;;AACA,UAAIE,YAAY,CAACX,CAAD,CAAhB,EAAqB;AAAE;AACnB,YAAIU,WAAJ,EAAiB;AACb;AACAA,UAAAA,WAAW,CAAClQ,SAAZ,GAAwB,WAAxB;AACH;;AACD,eAAOmQ,YAAY,CAACX,CAAD,CAAnB;AACH;;AACDW,MAAAA,YAAY,CAACX,CAAD,CAAZ,GAAkBC,CAAlB;AAEA,UAAIW,QAAQ,GAAGrU,QAAQ,CAACmE,cAAT,CAAwB,WAAWsP,CAAX,GAAe,GAAf,GAAqBW,YAAY,CAACX,CAAD,CAAzD,CAAf;;AACA,UAAIY,QAAJ,EAAc;AACV;AACAA,QAAAA,QAAQ,CAACpQ,SAAT,GAAqBiQ,oBAArB;AACH;AACJ;;AACDpS,IAAAA,cAAc,GAAG,CAAjB;AACA9B,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD,EAArD;AACA/I,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,sBAAxB,EAAgDF,SAAhD,GAA4D,QAA5D;AAEA,QAAIgM,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;AACAnQ,IAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EACI;AACI,mBAAa,iBADjB;AAEI,sBAAgB,IAFpB;AAGI,gBAAUyC,MAHd;AAII,YAAMvE,EAJV;AAKI,eAASiI,CALb;AAMI,eAASO;AANb,KADJ,EASI,UAAUlT,IAAV,EAAgB;AACZ,UAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,QAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,OAFD,MAEO;AACHnC,QAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAhC,QAAAA,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACwE,oBAAnC;AACH;AACJ,KAhBL;AAiBH;AACJ,CApFD;;AAsFA7Q,YAAY,CAAC6U,WAAb,GAA2B,YAAY;AACnCtU,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACA,MAAIkL,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AACAvL,EAAAA,YAAY,IAAIsN,MAAM,GAAG,SAAT,GAAqBQ,MAArB,GAA8BR,MAA9B,GAAuC,KAAvC,GAA+C/D,EAA/C,GAAoD+D,MAApD,GAA6D,OAA7E;AACAtN,EAAAA,YAAY,IAAIsN,MAAM,GAAG,YAAT,GAAwBvP,QAAQ,CAACmE,cAAT,CAAwB,WAAxB,EAAqC8K,KAA7D,GAAqEM,MAArE,GAA8E,YAA9E,GAA6FvP,QAAQ,CAACmE,cAAT,CAAwB,WAAxB,EAAqC8K,KAAlJ;AACAhN,EAAAA,YAAY,IAAIsN,MAAM,GAAG,0BAAT,GAAsCA,MAAtC,GAA+C,mBAA/D;AAEA,MAAIU,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;AACAnQ,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6CrL,YAA7C,EAA2D,UAAUnB,IAAV,EAAgB;AACvE,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,KAFD,MAEO;AACHnC,MAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAhC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAAC2M,OAA/B;AACAhO,MAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH;AACJ,GARD,EARmC,CAgB/B;AACP,CAjBD,EAmBA;;;AACAvQ,YAAY,CAAC8U,aAAb,GAA6B,YAAY;AACrChH,EAAAA,YAAY,CAACiH,GAAb,CAAiB,OAAjB,EAA0B,EAA1B;AACAC,EAAAA,aAAa,CAACC,WAAd,CAA0B,+BAA1B;AACH,CAHD;;AAKAjV,YAAY,CAAC8M,WAAb,GAA2B,UAAUf,EAAV,EAAcC,KAAd,EAAqB;AAC5C8B,EAAAA,YAAY,CAACiH,GAAb,CAAiB,IAAjB,EAAuBhJ,EAAvB;AACA+B,EAAAA,YAAY,CAACiH,GAAb,CAAiB,OAAjB,EAA0B/I,KAA1B;AACAgJ,EAAAA,aAAa,CAACC,WAAd,CAA0B,kCAA1B;AACH,CAJD,EAMA;AACA;;;AACAjV,YAAY,CAACkV,WAAb,GAA2B,UAAUC,MAAV,EAAkB;AACzC,MAAIC,IAAI,GAAGD,MAAM,CAACE,QAAP,CAAgB,CAAhB,CAAX;AACA,MAAI9T,SAAS,GAAG,EAAhB;;AAEA,MAAI6T,IAAI,CAACE,GAAL,KAAa,GAAjB,EAAsB;AAClBhV,IAAAA,CAAC,CAAC,sCAAD,CAAD,CAA0C2N,IAA1C,CAA+C,UAAUpC,KAAV,EAAiB0J,OAAjB,EAA0B;AACrE,UAAIjV,CAAC,CAACiV,OAAD,CAAD,CAAWjU,IAAX,OAAsB,GAA1B,EAA+B;AAC3BtB,QAAAA,YAAY,CAACwV,QAAb,CAAsBlV,CAAC,CAACiV,OAAD,CAAD,CAAWnU,IAAX,CAAgB,YAAhB,CAAtB,EAAqD,CAArD;AACH;AACJ,KAJD;AAKAgU,IAAAA,IAAI,CAACE,GAAL,GAAW,GAAX;AACAF,IAAAA,IAAI,CAACK,GAAL,GAAWL,IAAI,CAACM,OAAL,CAAaC,KAAxB;AACApU,IAAAA,SAAS,GAAG,GAAZ;AACH,GATD,MASO;AACHjB,IAAAA,CAAC,CAAC,sCAAD,CAAD,CAA0C2N,IAA1C,CAA+C,UAAUpC,KAAV,EAAiB0J,OAAjB,EAA0B;AACrE,UAAIjV,CAAC,CAACiV,OAAD,CAAD,CAAWjU,IAAX,OAAsB,GAA1B,EAA+B;AAC3BtB,QAAAA,YAAY,CAACwV,QAAb,CAAsBlV,CAAC,CAACiV,OAAD,CAAD,CAAWnU,IAAX,CAAgB,YAAhB,CAAtB,EAAqD,CAArD;AACH;AACJ,KAJD;AAKAgU,IAAAA,IAAI,CAACE,GAAL,GAAW,GAAX;AACAF,IAAAA,IAAI,CAACK,GAAL,GAAWL,IAAI,CAACM,OAAL,CAAaE,IAAxB;AACArU,IAAAA,SAAS,GAAG,GAAZ;AACH;;AACDvB,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,eAA/B,EAAgDD,SAAhD;AACAjB,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBuG,WAAjB,CAA6B,sBAA7B;AACAvG,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBuG,WAAjB,CAA6B,QAA7B;AACA7G,EAAAA,YAAY,CAACiG,MAAb;AACH,CA3BD,EA6BA;;;AACAjG,YAAY,CAAC6V,cAAb,GAA8B,YAAY;AACtC,OAAK,IAAIzO,GAAT,IAAgBC,KAAhB,EAAuB;AACnBrH,IAAAA,YAAY,CAACwV,QAAb,CAAsBpO,GAAtB,EAA2B,CAA3B;AACH;;AACDpH,EAAAA,YAAY,CAACiG,MAAb;AACH,CALD;;AAOAjG,YAAY,CAACyG,mBAAb,GAAmC,YAAY;AAC3CvG,EAAAA,iBAAiB,GAAG,CAAEA,iBAAtB;AACAF,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,gBAA/B,EAAiDtB,iBAAjD;AACAI,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBuG,WAApB,CAAgC,sBAAhC;AACAvG,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBuG,WAApB,CAAgC,QAAhC;AACA7G,EAAAA,YAAY,CAACiG,MAAb;AACH,CAND;;AAQAjG,YAAY,CAACgH,eAAb,GAA+B,YAAY;AACvC,OAAK,IAAII,GAAT,IAAgBC,KAAhB,EAAuB;AACnB,QAAI9G,QAAQ,CAACmE,cAAT,CAAwB,mBAAmB0C,GAA3C,EAAgDkC,SAAhD,KAA8D,GAAlE,EAAuE;AACnEtJ,MAAAA,YAAY,CAACwV,QAAb,CAAsBpO,GAAtB,EAA2B,CAA3B;AACH;AACJ;AACJ,CAND;;AAQApH,YAAY,CAACwV,QAAb,GAAwB,UAAUM,CAAV,EAAa7P,MAAb,EAAqB;AACzC,MAAIxB,EAAE,GAAQlE,QAAQ,CAACmE,cAAT,CAAwB,cAAcoR,CAAtC,CAAd;AACA,MAAIX,MAAM,GAAG5U,QAAQ,CAACmE,cAAT,CAAwB,mBAAmBoR,CAA3C,CAAb;;AACA,MAAIX,MAAM,CAAC7L,SAAP,KAAqB,GAAzB,EAA8B;AAC1B;AACA7E,IAAAA,EAAE,CAACE,KAAH,CAASC,OAAT,GAAmB,MAAnB;AACAuQ,IAAAA,MAAM,CAAC7L,SAAP,GAAmB,GAAnB;AACH,GAJD,MAIO;AACH7E,IAAAA,EAAE,CAACE,KAAH,CAASC,OAAT,GAAmB,EAAnB;AACAuQ,IAAAA,MAAM,CAAC7L,SAAP,GAAmB,GAAnB;AACH;;AACD,MAAIrD,MAAJ,EAAY;AACRjG,IAAAA,YAAY,CAACiG,MAAb;AACH;AACJ,CAdD;;AAgBAjG,YAAY,CAAC+M,SAAb,GAAyB,UAAU+I,CAAV,EAAa;AAClC,MAAIC,KAAK,GAAGxV,QAAQ,CAACmE,cAAT,CAAwB,YAAYoR,CAApC,CAAZ;;AACA,MAAIC,KAAK,CAACvR,SAAN,KAAoB,WAAxB,EAAqC;AACjCjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYoR,CAApC,EAAuCtR,SAAvC,GAAmD,WAAnD;AACH,GAFD,MAEO;AACHjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYoR,CAApC,EAAuCtR,SAAvC,GAAmD,SAAnD;AACH,GANiC,CAOlC;;;AACA,MAAIwR,GAAG,GAAGzV,QAAQ,CAACmE,cAAT,CAAwBoR,CAAxB,CAAV;AACAvS,EAAAA,MAAM,CAAC0S,QAAP,CAAgBvQ,QAAQ,CAACsQ,GAAG,CAACrR,KAAJ,CAAUmB,IAAX,EAAiB,EAAjB,CAAR,GAA+B,GAA/C,EAAoDJ,QAAQ,CAACsQ,GAAG,CAACrR,KAAJ,CAAUoB,GAAX,EAAgB,EAAhB,CAAR,GAA8B,GAAlF;AACAmQ,EAAAA,UAAU,CACN,YAAY;AACR3V,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYoR,CAApC,EAAuCtR,SAAvC,GAAmD,SAAnD;AACH,GAHK,EAIN,GAJM,CAAV;AAMH,CAhBD;;AAkBAxE,YAAY,CAACmW,WAAb,GAA2B,UAAU1R,EAAV,EAAc2R,KAAd,EAAqB;AAC5C,MAAI/N,CAAC,GAAG,CAAR;AACA,MAAI4J,QAAQ,GAAG,CAAf;AACA,MAAI3J,CAAC,GAAG,EAAR;AACA,MAAI+N,IAAJ;AACA,MAAIC,IAAJ;AACA,MAAIC,IAAJ;AACA,MAAIC,IAAJ;AACA,MAAIC,GAAJ;AACA,MAAI9O,EAAJ;AACA,MAAIC,EAAJ;AACA,MAAIW,CAAJ;AACA,MAAInB,GAAJ;AACA,MAAIoB,IAAJ;AACA,MAAIC,IAAJ,CAd4C,CAe5C;;AACA,MAAIiO,MAAM,GAAGrT,IAAI,GAAG+S,KAAK,CAACtS,OAAN,GAAgBvD,QAAQ,CAACwD,IAAT,CAAcC,UAAjC,GAA8CoS,KAAK,CAACnS,KAArE,CAhB4C,CAiB5C;;AACA,MAAI0S,MAAM,GAAGtT,IAAI,GAAG+S,KAAK,CAAClS,OAAN,GAAgB3D,QAAQ,CAACwD,IAAT,CAAcI,SAAjC,GAA6CiS,KAAK,CAAChS,KAApE;AACAsS,EAAAA,MAAM,IAAIpW,CAAC,CAAC,UAAD,CAAD,CAAcsW,MAAd,GAAuB9Q,IAAjC;AACA6Q,EAAAA,MAAM,IAAIrW,CAAC,CAAC,UAAD,CAAD,CAAcsW,MAAd,GAAuB7Q,GAAjC;AACA/F,EAAAA,YAAY,CAAC0I,KAAb;AACA,MAAIX,MAAM,GAAGxH,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,CAAb;;AACA,OAAK6D,CAAL,IAAUI,KAAV,EAAiB;AACb,SAAKvB,GAAL,IAAYuB,KAAK,CAACJ,CAAD,CAAjB,EAAsB;AAClB,WAAKC,IAAL,IAAaG,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,CAAb,EAA4B;AACxB,aAAKqB,IAAL,IAAaE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,CAAb,EAAkC;AAC9B,cAAI,CAAEjI,QAAQ,CAACmE,cAAT,CAAwB,eAAe8D,IAAvC,EAA6CI,OAA/C,IACA,CAAErI,QAAQ,CAACmE,cAAT,CAAwB,eAAeiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAvC,EAAqEG,OAD3E,EACoF;AAChF,qBADgF,CACtE;AACb;;AACD,cAAIC,MAAM,GAAItI,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BN,UAA9B,GAA2C,CAAzD,CAL8B,CAK6B;;AAC3D,cAAIY,OAAO,GAAGD,MAAM,GAAGtI,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BjB,WAArD;AACA,cAAIwB,MAAM,GAAIxI,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDP,UAApE,CAP8B,CAOiD;;AAC/E,cAAIc,OAAO,GAAGD,MAAM,GAAGxI,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDlB,WAA7E;AACAe,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASL,MAAM,GAAGE,MAAlB,CAAP;AACAT,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASL,MAAM,GAAGG,OAAlB,CAAP;AACAV,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASJ,OAAO,GAAGC,MAAnB,CAAP;AACAT,UAAAA,CAAC,CAAC,CAAD,CAAD,GAAOW,IAAI,CAACC,GAAL,CAASJ,OAAO,GAAGE,OAAnB,CAAP;AACAX,UAAAA,CAAC,GAAGpG,KAAK,GAAGC,MAAM,GAAG,CAArB;;AACA,eAAK,IAAIiH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,gBAAIb,CAAC,CAACD,CAAD,CAAD,GAAOC,CAAC,CAACa,CAAD,CAAZ,EAAiB;AACbd,cAAAA,CAAC,GAAGc,CAAJ;AACH;AACJ;;AACD,cAAId,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGkB,MAAM,GAAG9G,GAAd;AACA6F,YAAAA,EAAE,GAAGoB,OAAO,GAAGjH,GAAf;;AACA,gBAAI4F,EAAE,GAAGC,EAAT,EAAa;AACTS,cAAAA,CAAC,GAAG,CAAJ;AACH;AACJ;;AACD,cAAIA,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGmB,OAAO,GAAG/G,GAAf;AACA6F,YAAAA,EAAE,GAAGmB,MAAM,GAAGhH,GAAd;;AACA,gBAAI4F,EAAE,GAAGC,EAAT,EAAa;AACTS,cAAAA,CAAC,GAAG,CAAJ;AACH;AACJ;;AACD,cAAIA,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGmB,OAAO,GAAG/G,GAAf;AACA6F,YAAAA,EAAE,GAAGoB,OAAO,GAAGjH,GAAf;AACAG,YAAAA,MAAM,GAAG,CAAT;AACH;;AACD,cAAImG,CAAC,KAAK,CAAV,EAAa;AACTV,YAAAA,EAAE,GAAGkB,MAAM,GAAG9G,GAAd;AACA6F,YAAAA,EAAE,GAAGmB,MAAM,GAAGhH,GAAd;AACAE,YAAAA,KAAK,GAAM,CAAX;AACH;;AAED,cAAI4F,EAAE,GAAGtH,QAAQ,CAACmE,cAAT,CAAwB8D,IAAxB,EAA8BL,SAA9B,GAA0C5H,QAAQ,CAACmE,cAAT,CAAwB8D,IAAI,GAAG,GAAP,GAAaC,IAArC,EAA2CN,SAArF,GAAiGtF,WAA1G;AACA,cAAIiF,EAAE,GAAGvH,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAxB,EAAsDN,SAAtD,GACQ5H,QAAQ,CAACmE,cAAT,CAAwBiE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,IAA+B,GAA/B,GAAqCE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAA7D,EAA2FN,SADnG,GAC+GtF,WADxH;;AAGA,cAAI,CAACoP,QAAD,IAAayE,MAAM,GAAG/O,EAAE,GAAG,EAA3B,IAAiC+O,MAAM,GAAG/O,EAAE,GAAG,EAA/C,IAAqDgP,MAAM,GAAG9O,EAAE,GAAG,CAAnE,IAAwE8O,MAAM,GAAG9O,EAAE,GAAG,CAA1F,EAA6F;AACzF7H,YAAAA,YAAY,CAAC0H,SAAb,CACIC,EADJ,EACQC,EADR,EACYC,EADZ,EACgBC,EADhB,EACoBC,MADpB,EAC4B,iBAD5B;AAIAkK,YAAAA,QAAQ,GAAG,CAAX;AACAoE,YAAAA,IAAI,GAAG1N,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAP;AACA6N,YAAAA,IAAI,GAAG3N,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAP;AACA8N,YAAAA,IAAI,GAAG/N,IAAP;AACAgO,YAAAA,IAAI,GAAG/N,IAAP;AACAgO,YAAAA,GAAG,GAAGlO,CAAN;AACH,WAXD,MAWO;AACHvI,YAAAA,YAAY,CAAC0H,SAAb,CACIC,EADJ,EACQC,EADR,EACYC,EADZ,EACgBC,EADhB,EACoBC,MADpB,EAEIY,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,IAA+B,GAA/B,GAAqCE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAFzC;AAIH;AACJ;AACJ;AACJ;AACJ;;AACD,MAAIwJ,QAAJ,EAAc;AACV;AACA,QAAInM,IAAI,GAAGhD,KAAK,IAAIvC,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8C6C,WAA9C,IAA6D,CAAjE,CAAhB;AACAhH,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDmB,IAApD,GAA2DA,IAAI,GAAG,IAAlE;AACA,QAAIC,GAAG,GAAGhD,KAAK,GAAGxC,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8C+C,YAAtD,GAAqE,EAA/E;AACAlH,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDoB,GAApD,GAA0DA,GAAG,GAAG,IAAhE;AACAxF,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,OAA9D;AACA,QAAIkL,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AACAvL,IAAAA,YAAY,GAAG,QAAQ6T,IAAR,GAAevG,MAAf,GAAwB,KAAxB,GAAgCwG,IAAhC,GAAuCxG,MAAvC,GAAgD,KAAhD,GAAwDyG,IAAxD,GAA+DzG,MAA/D,GAAwE,KAAxE,GAAgF0G,IAAhF,GAAuF1G,MAAvF,GAAgG,IAAhG,GAAuG2G,GAAtH;AACH;AACJ,CAzGD;;AA2GAzW,YAAY,CAAC6W,WAAb,GAA2B,YAAY;AACnCtW,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACA,MAAIkL,MAAM,GAAGhC,YAAY,CAACC,GAAb,CAAiB,eAAjB,CAAb;AACAvL,EAAAA,YAAY,IAAIsN,MAAM,GAAG,SAAT,GAAqBQ,MAArB,GAA8BR,MAA9B,GAAuC,KAAvC,GAA+C/D,EAA/D;AACAvJ,EAAAA,YAAY,IAAIsN,MAAM,GAAG,0BAAT,GAAsCA,MAAtC,GAA+C,mBAA/D;AAEA,MAAIU,OAAO,GAAGhC,SAAS,CAACC,eAAV,CAA0BpC,QAAQ,CAACoE,oBAAnC,CAAd;AACAnQ,EAAAA,CAAC,CAACuN,IAAF,CAAO,oCAAP,EAA6CrL,YAA7C,EAA2D,UAAUnB,IAAV,EAAgB;AACvE,QAAIA,IAAI,CAACqP,OAAL,KAAiB,KAArB,EAA4B;AACxBlC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAACsP,KAA/B,EAAsC,KAAtC;AACH,KAFD,MAEO;AACHnC,MAAAA,SAAS,CAACoC,iBAAV,CAA4BJ,OAA5B;AACAhC,MAAAA,SAAS,CAACC,eAAV,CAA0BpN,IAAI,CAAC2M,OAA/B;AACAhO,MAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH;AACJ,GARD,EAPmC,CAe/B;AACP,CAhBD;;AAkBAvQ,YAAY,CAACiN,UAAb,GAA0B,UAAUxI,EAAV,EAAcqS,EAAd,EAAkB;AACxC,MAAIrS,EAAE,CAACmE,OAAP,EAAgB;AACZrI,IAAAA,QAAQ,CAACmE,cAAT,CAAwBoS,EAAxB,EAA4BnS,KAA5B,CAAkCC,OAAlC,GAA4C,OAA5C;AACH,GAFD,MAEO;AACHrE,IAAAA,QAAQ,CAACmE,cAAT,CAAwBoS,EAAxB,EAA4BnS,KAA5B,CAAkCC,OAAlC,GAA4C,MAA5C;AACH;;AACD5E,EAAAA,YAAY,CAACiG,MAAb;AACAjG,EAAAA,YAAY,CAAC2B,WAAb;AACH,CARD,EAUA;;;AACA3B,YAAY,CAAC+W,UAAb,GAA0B,UAAU5B,MAAV,EAAkB;AACxC,MAAIA,MAAM,CAACG,GAAP,KAAe,GAAnB,EAAwB;AACpBH,IAAAA,MAAM,CAACG,GAAP,GAAa,GAAb;AACAH,IAAAA,MAAM,CAACM,GAAP,GAAaN,MAAM,CAACO,OAAP,CAAeC,KAA5B;AACH,GAHD,MAGO;AACHR,IAAAA,MAAM,CAACG,GAAP,GAAa,GAAb;AACAH,IAAAA,MAAM,CAACM,GAAP,GAAaN,MAAM,CAACO,OAAP,CAAeE,IAA5B;AACH;;AACD,MAAIoB,CAAC,GAAGzW,QAAQ,CAACmE,cAAT,CAAwB,gBAAxB,CAAR;AACA,MAAIuS,eAAe,GAAGD,CAAC,CAACE,QAAF,CAAW3I,MAAjC;;AACA,OAAK,IAAIpF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8N,eAApB,EAAqC9N,CAAC,EAAtC,EAA0C;AACtC,QAAI6N,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcoE,IAAd,KAAuB,UAAvB,IAAqCyJ,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAc1E,EAAd,CAAiB0S,UAAjB,CAA4B,YAA5B,CAAzC,EAAoF;AAChF,UAAIhC,MAAM,CAACG,GAAP,KAAe,GAAnB,EAAwB;AACpB0B,QAAAA,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcP,OAAd,GAAwB,IAAxB;AACArI,QAAAA,QAAQ,CAACmE,cAAT,CAAwBsS,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcqG,KAAtC,EAA6C7K,KAA7C,CAAmDC,OAAnD,GAA6D,EAA7D;AACH,OAHD,MAGO;AACHoS,QAAAA,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcP,OAAd,GAAwB,KAAxB;AACArI,QAAAA,QAAQ,CAACmE,cAAT,CAAwBsS,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcqG,KAAtC,EAA6C7K,KAA7C,CAAmDC,OAAnD,GAA6D,MAA7D;AACH;AACJ;AACJ;;AACD5E,EAAAA,YAAY,CAACiG,MAAb;AACH,CAtBD;;AAwBAjG,YAAY,CAACoX,QAAb,GAAwB,UAAUzM,CAAV,EAAa0M,CAAb,EAAgB;AACpC,MAAIC,CAAC,GAAG,CAAR;;AACA,OAAK,IAAIC,CAAT,IAAcF,CAAd,EAAiB;AACb,QAAI1M,CAAC,KAAK4M,CAAV,EAAa;AACTD,MAAAA,CAAC,GAAG,CAAJ;AACA;AACH;AACJ;;AACD,SAAOA,CAAP;AACH,CATD;;AAWAtX,YAAY,CAACwX,YAAb,GAA4B,UAAUrC,MAAV,EAAkB;AAC1C,MAAI7M,CAAC,GAAG,EAAR;AACA,MAAIC,CAAJ;AACA,MAAInB,GAAJ;AACA,MAAIoB,IAAJ;AACA,MAAIC,IAAJ;;AACA,OAAKF,CAAL,IAAUI,KAAV,EAAiB;AACb,SAAKvB,GAAL,IAAYuB,KAAK,CAACJ,CAAD,CAAjB,EAAsB;AAClB;AACA,WAAKC,IAAL,IAAaG,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,CAAb,EAA4B;AACxB;AACA,aAAKqB,IAAL,IAAaE,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,CAAb,EAAkC;AAC9B;AACAF,UAAAA,CAAC,CAACE,IAAD,CAAD,GAAUF,CAAC,CAACK,KAAK,CAACJ,CAAD,CAAL,CAASnB,GAAT,EAAcoB,IAAd,EAAoBC,IAApB,EAA0B,CAA1B,CAAD,CAAD,GAAkC,CAA5C,CAF8B,CAEiB;AAClD;AACJ;AACJ;AACJ;;AAED,MAAI0M,MAAM,CAACG,GAAP,KAAe,GAAnB,EAAwB;AACpBH,IAAAA,MAAM,CAACG,GAAP,GAAa,GAAb;AACAH,IAAAA,MAAM,CAACM,GAAP,GAAaN,MAAM,CAACO,OAAP,CAAeC,KAA5B;AACH,GAHD,MAGO;AACHR,IAAAA,MAAM,CAACG,GAAP,GAAa,GAAb;AACAH,IAAAA,MAAM,CAACM,GAAP,GAAaN,MAAM,CAACO,OAAP,CAAeE,IAA5B;AACH;;AACD,MAAIoB,CAAC,GAAGzW,QAAQ,CAACmE,cAAT,CAAwB,gBAAxB,CAAR;AACA,MAAIuS,eAAe,GAAGD,CAAC,CAACE,QAAF,CAAW3I,MAAjC;;AACA,OAAK,IAAIpF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8N,eAApB,EAAqC9N,CAAC,EAAtC,EAA0C;AACtC,QAAI6N,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcoE,IAAd,KAAuB,UAAvB,IAAqCyJ,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAc1E,EAAd,CAAiB0S,UAAjB,CAA4B,YAA5B,CAAzC,EAAoF;AAChF,UAAI,CAACnX,YAAY,CAACoX,QAAb,CAAsBJ,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcqG,KAApC,EAA2ClH,CAA3C,CAAL,EAAoD;AAChD,YAAI6M,MAAM,CAACG,GAAP,KAAe,GAAnB,EAAwB;AACpB0B,UAAAA,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcP,OAAd,GAAwB,IAAxB;AACArI,UAAAA,QAAQ,CAACmE,cAAT,CAAwBsS,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcqG,KAAtC,EAA6C7K,KAA7C,CAAmDC,OAAnD,GAA6D,EAA7D;AACH,SAHD,MAGO;AACHoS,UAAAA,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcP,OAAd,GAAwB,KAAxB;AACArI,UAAAA,QAAQ,CAACmE,cAAT,CAAwBsS,CAAC,CAACE,QAAF,CAAW/N,CAAX,EAAcqG,KAAtC,EAA6C7K,KAA7C,CAAmDC,OAAnD,GAA6D,MAA7D;AACH;AACJ;AACJ;AACJ;AACJ,CAzCD;;AA2CA5E,YAAY,CAAC0D,aAAb,GAA6B,YAAY;AACrC;AACA+T,EAAAA,YAAY,CAACzU,SAAD,CAAZ;AACAA,EAAAA,SAAS,GAAGkT,UAAU,CAClB,YAAY;AACR;AACA3V,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CmB,IAA1C,GAAiDvF,QAAQ,CAACwD,IAAT,CAAcC,UAAd,GAA2B,IAA5E,CAFQ,CAGR;;AACAzD,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CoB,GAA1C,GAAiDxF,QAAQ,CAACwD,IAAT,CAAcI,SAAd,GAA0B,IAA3E;AACH,GANiB,EAOlB,GAPkB,CAAtB;AASH,CAZD,EAcA;;;AACAnE,YAAY,CAAC0X,YAAb,GAA4B,UAAUvC,MAAV,EAAkB;AAC1C,MAAIC,IAAI,GAAGD,MAAM,CAACE,QAAP,CAAgB,CAAhB,CAAX;AACA/U,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBuG,WAAzB,CAAqC,sBAArC;;AACA,MAAIuO,IAAI,CAACE,GAAL,KAAa,GAAjB,EAAsB;AAClB/U,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CoB,GAA5C,GAAkD,KAAlD;AACAxF,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,OAAtD;AACAwQ,IAAAA,IAAI,CAACE,GAAL,GAAW,GAAX;AACAF,IAAAA,IAAI,CAACK,GAAL,GAAWL,IAAI,CAACM,OAAL,CAAaiC,EAAxB;;AACA,QAAItU,IAAJ,EAAU;AACNrD,MAAAA,YAAY,CAAC0D,aAAb;AACH;AACJ,GARD,MAQO;AACHnD,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CoB,GAA5C,GAAkD,CAAC,IAAD,GAAQ,IAA1D,CADG,CAC6D;;AAChExF,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACAwQ,IAAAA,IAAI,CAACE,GAAL,GAAW,GAAX;AACAF,IAAAA,IAAI,CAACK,GAAL,GAAWL,IAAI,CAACM,OAAL,CAAaE,IAAxB;AACH;AACJ,CAjBD;;AAmBA5V,YAAY,CAAC4X,aAAb,GAA6B,UAAUzC,MAAV,EAAkB;AAC3C7U,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBuG,WAAhB,CAA4B,OAA5B;AACAvG,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBuG,WAAjB,CAA6B,aAA7B;AACA,MAAIgR,YAAY,GAAGvX,CAAC,CAAC6U,MAAM,CAAC2C,oBAAP,CAA4B,KAA5B,EAAmC,CAAnC,CAAD,CAApB;AACA,MAAIC,UAAU,GAAGzX,CAAC,CAAC,yBAAD,CAAD,CACZuG,WADY,CACA,aADA,EAEZA,WAFY,CAEA,WAFA,CAAjB;AAIA,MAAImR,aAAa,GAAGD,UAAU,CAAC3W,IAAX,CAAgB,KAAhB,CAApB;AACA2W,EAAAA,UAAU,CAAC3W,IAAX,CAAgB,KAAhB,EAAuB2W,UAAU,CAAC3W,IAAX,CAAgB,YAAhB,CAAvB;AACA2W,EAAAA,UAAU,CAAC3W,IAAX,CAAgB,YAAhB,EAA8B4W,aAA9B;AAEA,MAAIC,WAAW,GAAGJ,YAAY,CAACzW,IAAb,CAAkB,KAAlB,CAAlB;AACAyW,EAAAA,YAAY,CAACzW,IAAb,CAAkB,KAAlB,EAAyByW,YAAY,CAACzW,IAAb,CAAkB,YAAlB,CAAzB;AACAyW,EAAAA,YAAY,CAACzW,IAAb,CAAkB,YAAlB,EAAgC6W,WAAhC;AAEA9U,EAAAA,SAAS,GAAG,CAACA,SAAb;AACAnD,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,WAA/B,EAA4ClB,CAAC,CAAC,YAAD,CAAD,CAAgB4X,QAAhB,CAAyB,OAAzB,CAA5C;AACA5X,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBuG,WAArB,CAAiC,sBAAjC;AACAvG,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBuG,WAArB,CAAiC,QAAjC;AACH,CApBD;;AAsBA7G,YAAY,CAAC0G,QAAb,GAAwB,YAAY;AAChCpG,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBO,IAAhB,CAAqB,UAArB,EAAiCJ,IAAjC;AACH,CAFD;;AAIAT,YAAY,CAACmY,QAAb,GAAwB,YAAY;AAChC,MAAI,CAAChY,cAAL,EAAqB;AACjBG,IAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBO,IAAhB,CAAqB,UAArB,EAAiCY,IAAjC;AACH;AACJ,CAJD;;AAMAzB,YAAY,CAACoY,OAAb,GAAuB,YAAY;AAC/BjY,EAAAA,cAAc,GAAG,CAACA,cAAlB;AACAG,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeuG,WAAf,CAA2B,sBAA3B;AACAvG,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeuG,WAAf,CAA2B,QAA3B;AACA7G,EAAAA,YAAY,CAACwB,iBAAb,CAA+B,UAA/B,EAA2CrB,cAA3C;AACH,CALD;;AAOAH,YAAY,CAACqY,iBAAb,GAAiC,YAAY;AACzC,MAAIlW,UAAJ,EAAgB;AACZ;AACH;;AACD,MAAI,CAACE,cAAL,EAAqB;AACjBA,IAAAA,cAAc,GAAG,CAAjB;AACA9B,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD+C,QAAQ,CAACiM,gBAA9D;AACA/X,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,sBAAxB,EAAgDF,SAAhD,GAA4D,sBAA5D,CAJiB,CAIkE;;AAEnF,QAAInB,IAAJ,EAAU;AAAE;AACR9C,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,sBAAxB,EAAgDF,SAAhD,GAA4D,yBAA5D;AACH;AACJ,GATD,MASO;AACHjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyC4E,SAAzC,GAAqD,EAArD;AACA/I,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACArE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,sBAAxB,EAAgDF,SAAhD,GAA4D,QAA5D;AACAnC,IAAAA,cAAc,GAAG,CAAjB;AACH;AACJ,CAnBD;;AAqBA,IAAIkW,YAAY,GAAG,EAAnB;;AAEAvY,YAAY,CAACoI,gBAAb,GAAgC,UAAU/D,MAAV,EAAkB;AAC9C,MAAI0G,KAAK,GAAG,EAAZ,CAD8C,CAC7B;;AAEjB,OAAK,IAAIyN,WAAT,IAAwBD,YAAxB,EAAsC;AAClC,QAAIA,YAAY,CAACC,WAAD,CAAZ,CAA0B,CAA1B,MAAiCnU,MAArC,EAA6C;AACzC0G,MAAAA,KAAK,GAAGwN,YAAY,CAACC,WAAD,CAAZ,CAA0B,CAA1B,CAAR;AACA;AACH;AACJ;;AAED,MAAIzN,KAAK,CAACwD,MAAN,KAAiB,CAArB,EAAwB;AACpB,QAAIpF,CAAC,GAAGoP,YAAY,CAAChK,MAAb,GAAsB,CAA9B;AACA,QAAIkK,CAAC,GAAGtP,CAAC,GAAG,CAAZ;AACA,QAAIuP,CAAC,GAAG,CAACvP,CAAC,GAAGsP,CAAL,IAAU,CAAlB;AACAC,IAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;AACAA,IAAAA,CAAC;AACD,QAAIC,SAAS,GAAG,CACZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADY,EAEZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFY,EAGZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHY,EAIZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAJY,EAKZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CALY,EAMZ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CANY,CAAhB;AAQA,QAAIrQ,CAAC,GAAGqQ,SAAS,CAACF,CAAD,CAAT,CAAa,CAAb,CAAR;AACA,QAAInB,CAAC,GAAGqB,SAAS,CAACF,CAAD,CAAT,CAAa,CAAb,CAAR;AACA,QAAIG,CAAC,GAAGD,SAAS,CAACF,CAAD,CAAT,CAAa,CAAb,CAAR;AACA,QAAI5U,CAAC,GAAI,IAAI,CAAC6U,CAAC,GAAG,CAAL,IAAU,CAAvB;AAEA,QAAI7N,CAAC,GAAG5B,IAAI,CAAC4P,KAAL,CAAWvQ,CAAC,GAAG,GAAJ,GAAUzE,CAArB,CAAR;AACA,QAAIiV,CAAC,GAAG7P,IAAI,CAAC4P,KAAL,CAAWvB,CAAC,GAAG,GAAJ,GAAUzT,CAArB,CAAR;AACAyT,IAAAA,CAAC,GAAGrO,IAAI,CAAC4P,KAAL,CAAWD,CAAC,GAAG,GAAJ,GAAU/U,CAArB,CAAJ;AACAkH,IAAAA,KAAK,GAAG,UAAUF,CAAV,GAAc,GAAd,GAAoBiO,CAApB,GAAwB,GAAxB,GAA8BxB,CAA9B,GAAkC,KAA1C;AAEAiB,IAAAA,YAAY,CAACpI,IAAb,CAAkB,CAAC9L,MAAD,EAAS0G,KAAT,CAAlB;AACH;;AAED,SAAOA,KAAP;AACH,CAtCD;;AAwCA/K,YAAY,CAAC+Y,WAAb,GAA2B,UAAU/J,MAAV,EAAkBgK,SAAlB,EAA6BC,UAA7B,EAAyCC,cAAzC,EAAyDC,mBAAzD,EAA8E;AACrG,MAAIC,eAAe,GAAG7Y,QAAQ,CAACmE,cAAT,CAAwB,mBAAxB,CAAtB;AACA,MAAIoB,IAAI,GAAGhD,KAAK,IAAIsW,eAAe,CAAC7R,WAAhB,IAA+B,CAAnC,CAAhB;AACA6R,EAAAA,eAAe,CAACzU,KAAhB,CAAsBmB,IAAtB,GAA6BA,IAAI,GAAG,IAApC,CAHqG,CAIrG;;AACAsT,EAAAA,eAAe,CAACzU,KAAhB,CAAsBoB,GAAtB,GAA8B0F,MAAM,CAACtF,MAAP,GAAgB,CAAjB,GAAsB,IAAnD;AACAiT,EAAAA,eAAe,CAACzU,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;AACArE,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,qCAAxB,EAA+D8K,KAA/D,GAAuE0J,cAAvE;AACA3Y,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,uBAAxB,EAAiD8K,KAAjD,GAAyDR,MAAzD;AACAzO,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,0BAAxB,EAAoD8K,KAApD,GAA4DwJ,SAA5D;AACAzY,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,wBAAxB,EAAkD8K,KAAlD,GAA0DyJ,UAA1D;AACA1Y,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,iBAAxB,EAA2C4E,SAA3C,GAAuD6P,mBAAvD;AACH,CAZD;;AAcAnZ,YAAY,CAACqZ,WAAb,GAA2B,YAAY;AACnC9Y,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,mBAAxB,EAA6CC,KAA7C,CAAmDC,OAAnD,GAA6D,MAA7D;AACArE,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmC8K,KAAnC,GAA2C,IAA3C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,OAAxB,EAAiC8K,KAAjC,GAAyC,EAAzC;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAApC,GAA4C,EAA5C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAApC,GAA4C,KAA5C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmCkE,OAAnC,GAA6C,KAA7C;AACArI,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,WAAxB,EAAqC8K,KAArC,GAA6C,IAA7C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsC8K,KAAtC,GAA8C,KAA9C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkC8K,KAAlC,GAA0C,EAA1C;AACAjP,EAAAA,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmC8K,KAAnC,GAA2C,KAA3C;AACH,CAXD;;AAaAxP,YAAY,CAACsZ,SAAb,GAAyB,UAAUN,SAAV,EAAqBhK,MAArB,EAA6BuK,WAA7B,EAA0C;AAC/D,MAAIC,eAAe,GAAGlZ,CAAC,CAAC,MAAMiZ,WAAP,CAAD,CAAqBE,EAArB,CAAwB,UAAxB,CAAtB;AACA,MAAIC,WAAW,GAAGpZ,CAAC,CAAC,0CAA0CiZ,WAA1C,GAAwD,cAAzD,CAAnB;AAEAG,EAAAA,WAAW,CAACzL,IAAZ,CAAiB,YAAY;AACzB;AACA,QAAIuL,eAAe,KAAK,IAApB,IAA4B,KAAK5Q,OAArC,EAA8C;AAC1C;AACA;AACA,WAAK+Q,KAAL;AACH;;AACD,SAAK/Q,OAAL,GAAe4Q,eAAf;AACA,SAAKI,QAAL,GAAgBJ,eAAhB;AACH,GATD;;AAUA,MAAIA,eAAJ,EAAqB;AACjBK,IAAAA,WAAW,CAAC1J,IAAZ,CAAiB,MAAM6I,SAAN,GAAkB,KAAnC;AACA9V,IAAAA,SAAS,CAACiN,IAAV,CAAe6I,SAAf;AACH,GAHD,MAGO;AACH,QAAI7P,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0Q,WAAW,CAACtL,MAA5B,EAAoCpF,CAAC,EAArC,EAAyC;AACrC,UAAI0Q,WAAW,CAAC1Q,CAAD,CAAX,KAAoB,MAAM6P,SAAN,GAAkB,KAA1C,EAAkD;AAC9Ca,QAAAA,WAAW,CAACC,MAAZ,CAAmB3Q,CAAnB,EAAsB,CAAtB;AACH;AACJ;;AACD,QAAI4Q,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG7W,SAAS,CAACqL,MAA1B,EAAkCwL,CAAC,EAAnC,EAAuC;AACnC,UAAI7W,SAAS,CAAC6W,CAAD,CAAT,KAAiBf,SAArB,EAAgC;AAC5B9V,QAAAA,SAAS,CAAC4W,MAAV,CAAiBC,CAAjB,EAAoB,CAApB;AACA;AACH;AACJ;AACJ;;AACD/Z,EAAAA,YAAY,CAACiG,MAAb;AACH,CAjCD;;AAmCAjG,YAAY,CAACga,WAAb,GAA2B,UAAU7E,MAAV,EAAkBjI,GAAlB,EAAuB+M,IAAvB,EAA6B;AACpD,MAAIC,SAAS,GAAGxU,QAAQ,CAACuU,IAAD,CAAxB;;AACA,MAAI,CAAC/M,GAAL,EAAU;AACN3M,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYyQ,MAApC,EAA4C3Q,SAA5C,GAAwD,WAAxD;;AACA,QAAI0V,SAAJ,EAAe;AACX3Z,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYyQ,MAAZ,GAAqB,IAA7C,EAAmD3Q,SAAnD,GAA+D,WAA/D;AACH;AACJ,GALD,MAKO;AACHjE,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYyQ,MAApC,EAA4C3Q,SAA5C,GAAwD,SAAxD;;AACA,QAAI0V,SAAJ,EAAe;AACX3Z,MAAAA,QAAQ,CAACmE,cAAT,CAAwB,YAAYyQ,MAAZ,GAAqB,IAA7C,EAAmD3Q,SAAnD,GAA+D,SAA/D;AACH;AACJ;AACJ,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAxE,YAAY,CAACma,WAAb,GAA2B,UAAUnB,SAAV,EAAqBoB,OAArB,EAA8BC,UAA9B,EAA0C;AACjE,MAAIlR,CAAJ;AACA,MAAI4Q,CAAJ;AACA,MAAIO,cAAc,GAAG,MAAMtB,SAAN,GAAkB,KAAlB,GAA0BoB,OAA1B,GAAoC,GAAzD;;AACA,MAAI7Z,QAAQ,CAACmE,cAAT,CAAwB2V,UAAxB,EAAoCzR,OAApC,KAAgD,IAApD,EAA0D;AACtDiR,IAAAA,WAAW,CAAC1J,IAAZ,CAAiBmK,cAAjB;AACApX,IAAAA,SAAS,CAACiN,IAAV,CAAe6I,SAAf;AACH,GAHD,MAGO;AACH,SAAK7P,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0Q,WAAW,CAACtL,MAA5B,EAAoCpF,CAAC,EAArC,EAAyC;AACrC,UAAI0Q,WAAW,CAAC1Q,CAAD,CAAX,KAAmBmR,cAAvB,EAAuC;AACnCT,QAAAA,WAAW,CAACC,MAAZ,CAAmB3Q,CAAnB,EAAsB,CAAtB;AACA;AACH;AACJ;;AACD,SAAK4Q,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG7W,SAAS,CAACqL,MAA1B,EAAkCwL,CAAC,EAAnC,EAAuC;AACnC,UAAI7W,SAAS,CAAC6W,CAAD,CAAT,KAAiBf,SAArB,EAAgC;AAC5B9V,QAAAA,SAAS,CAAC4W,MAAV,CAAiBC,CAAjB,EAAoB,CAApB;AACA;AACH;AACJ;AACJ;AACJ,CArBD;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA/Z,YAAY,CAACua,SAAb,GAAyB,UAAUvL,MAAV,EAAkBgK,SAAlB,EAA6BoB,OAA7B,EAAsCI,cAAtC,EAAsD;AAC3E,MAAIC,CAAJ;AACA,MAAIC,QAAJ;AACA,MAAIC,GAAG,GAAGpa,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,CAAV;AACA,MAAIkW,GAAG,GAAG,CAAV;AACA,MAAIC,IAAI,GAAGC,YAAY,CAACvM,MAAxB;;AACA,MAAIoM,GAAG,CAACnL,KAAJ,KAAc,IAAlB,EAAwB;AACpB,QAAIjP,QAAQ,CAACmE,cAAT,CAAwB,OAAxB,EAAiC8K,KAAjC,KAA2C,EAA/C,EAAmD;AAC/ChB,MAAAA,SAAS,CAACC,eAAV,CAA0BD,SAAS,CAACE,OAAV,CAAkBrC,QAAQ,CAAC0O,aAA3B,CAA1B;AACA;AACH;;AACDN,IAAAA,CAAC,GAAGla,QAAQ,CAACmE,cAAT,CAAwB,OAAxB,CAAJ;AACAgW,IAAAA,QAAQ,GAAG,IAAIM,eAAe,CAACC,KAApB,CAA0BN,GAAG,CAACnL,KAA9B,EAAqCiL,CAAC,CAACjL,KAAvC,CAAX,CANoB,CAMqC;;AACzDsL,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwCM,QAAxC,EAAkD1B,SAAlD,EAA6DmC,KAAK,CAACX,cAAD,CAAlE,EAAoF,OAApF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ;AACH;;AACD,MAAIra,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAApC,KAA8C,EAAlD,EAAsD;AAClD,QAAI4L,SAAS,GAAG,IAAIJ,eAAe,CAACK,MAApB,CAA2B9a,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAA/D,CAAhB,CADkD,CACoC;;AACtFsL,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwCgB,SAAxC,EAAmDpC,SAAnD,EAA8DmC,KAAK,CAACX,cAAD,CAAnE,EAAqF,QAArF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ;AACH;;AACD,MAAIra,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAApC,KAA8C,KAAlD,EAAyD;AACrD,QAAI8L,YAAY,GAAG,IAAIN,eAAe,CAACO,SAApB,CAA8Bhb,QAAQ,CAACmE,cAAT,CAAwB,UAAxB,EAAoC8K,KAAlE,CAAnB;AACAsL,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwCkB,YAAxC,EAAsDtC,SAAtD,EAAiEmC,KAAK,CAACX,cAAD,CAAtE,EAAwF,WAAxF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ,CAHqD,CAIrD;AACH;;AACD,MAAIra,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmCkE,OAAnC,KAA+C,IAAnD,EAAyD;AACrDkS,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwC,SAAxC,EAAmDpB,SAAnD,EAA8DmC,KAAK,CAACX,cAAD,CAAnE,EAAqF,SAArF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ,CAFqD,CAGrD;AACH;;AACD,MAAIra,QAAQ,CAACmE,cAAT,CAAwB,WAAxB,EAAqC8K,KAArC,KAA+C,IAAnD,EAAyD;AACrD,QAAIjP,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkC8K,KAAlC,KAA4C,EAAhD,EAAoD;AAChD;AACH;;AACDkL,IAAAA,QAAQ,GAAG,IAAIM,eAAe,CAACQ,MAApB,CACPjb,QAAQ,CAACmE,cAAT,CAAwB,WAAxB,EAAqC8K,KAD9B,EAEPjP,QAAQ,CAACmE,cAAT,CAAwB,QAAxB,EAAkC8K,KAF3B,EAGPjP,QAAQ,CAACmE,cAAT,CAAwB,YAAxB,EAAsC8K,KAH/B,CAAX,CAJqD,CAQnD;;AACFsL,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwCM,QAAxC,EAAkD1B,SAAlD,EAA6DmC,KAAK,CAACX,cAAD,CAAlE,EAAoF,QAApF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ,CAVqD,CAWrD;AACH;;AACD,MAAIra,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmC8K,KAAnC,KAA6C,KAAjD,EAAwD;AACpD,QAAIiM,UAAU,GAAG,IAAIT,eAAe,CAACU,OAApB,CAA4Bnb,QAAQ,CAACmE,cAAT,CAAwB,SAAxB,EAAmC8K,KAA/D,CAAjB;AACAsL,IAAAA,YAAY,CAAC3K,IAAb,CAAkB,IAAI6K,eAAe,CAACE,UAApB,CAA+Bd,OAA/B,EAAwCqB,UAAxC,EAAoDzC,SAApD,EAA+DmC,KAAK,CAACX,cAAD,CAApE,EAAsF,SAAtF,CAAlB;AACAI,IAAAA,GAAG,GAAGA,GAAG,GAAG,CAAZ,CAHoD,CAIpD;AACH;;AACDpM,EAAAA,SAAS,CAACC,eAAV,CAA0BD,SAAS,CAACE,OAAV,CAAkBrC,QAAQ,CAACsP,iBAA3B,EAA8Cf,GAA9C,CAA1B,EAnD2E,CAoD3E;;AACA,MAAIgB,WAAW,GAAGrb,QAAQ,CAACmE,cAAT,CAAwB,IAAxB,CAAlB;AACAkX,EAAAA,WAAW,CAACtS,SAAZ,GAAwB0R,eAAe,CAACpW,OAAhB,CAAwBiW,IAAxB,EAA8BC,YAAY,CAACvM,MAA3C,CAAxB;AACAvO,EAAAA,YAAY,CAACqZ,WAAb;AACA/Y,EAAAA,CAAC,CAAC,KAAD,CAAD,CAASub,SAAT,CAAmB,SAAnB;AACH,CAzDD;;AA2DA7b,YAAY,CAAC8b,uBAAb,GAAuC,YAAY;AAC/Cxb,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,WAAvB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,SAAvB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,WAAvB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBW,EAAnB,CAAsB,WAAtB,EAAmC,UAAU4C,CAAV,EAAa;AAC5C7D,IAAAA,YAAY,CAAC4D,SAAb,CAAuBC,CAAvB;AACH,GAFD;AAGAvD,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBW,EAAnB,CAAsB,SAAtB,EAAiC,UAAU4C,CAAV,EAAa;AAC1C7D,IAAAA,YAAY,CAACgG,OAAb,CAAqBnC,CAArB;AACH,GAFD;AAGAvD,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBW,EAAnB,CAAsB,WAAtB,EAAmC,UAAU4C,CAAV,EAAa;AAC5C7D,IAAAA,YAAY,CAAC8E,SAAb,CAAuBjB,CAAvB;AACH,GAFD;AAGH,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;;;AACA7D,YAAY,CAAC+O,iBAAb,GAAiC,UAAUlD,KAAV,EAAiB0J,OAAjB,EAA0B;AACvDjV,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,eAAvB,EAAwC,YAAY;AAChDjB,IAAAA,YAAY,CAACsZ,SAAb,CAAuBhZ,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAvB,EAAmDd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,SAAb,CAAnD,EAA4Ed,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,IAAb,CAA5E;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,wBAAvB,EAAiD,YAAY;AACzDjB,IAAAA,YAAY,CAACwV,QAAb,CAAsBlV,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAtB,EAAkD,CAAlD;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,mBAAvB,EAA4C,YAAY;AACpDjB,IAAAA,YAAY,CAAC8M,WAAb,CAAyBxM,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,QAAb,CAAzB,EAAiDd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,gBAAb,CAAjD;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,uBAAvB,EAAgD,YAAY;AACxDjB,IAAAA,YAAY,CAACma,WAAb,CAAyB7Z,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAzB,EAAqDd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,UAAb,CAArD,EAA+Ed,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,IAAb,CAA/E;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,2BAAvB,EAAoD,YAAY;AAC5DjB,IAAAA,YAAY,CAAC+Y,WAAb,CACIzY,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,SAAb,CADJ,EAEId,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAFJ,EAGId,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,UAAb,CAHJ,EAIId,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,mBAAb,CAJJ,EAKId,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,uBAAb,CALJ;AAOH,GARD;AASAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAWtU,EAAX,CAAc,OAAd,EAAuB,sCAAvB,EAA+D,YAAY;AACvE,QAAI8a,MAAM,GAAIzb,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,mBAAb,CAAD,CAAoC8R,KAApC,CAA0C,GAA1C,CAAb;AACAlT,IAAAA,YAAY,CAACuC,UAAb,CAAwBwZ,MAAM,CAAC,CAAD,CAA9B,EAAmCA,MAAM,CAAC,CAAD,CAAzC,EAA8CA,MAAM,CAAC,CAAD,CAApD,EAAyDA,MAAM,CAAC,CAAD,CAA/D;AACH,GAHD;AAKAzb,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAW1U,IAAX,CAAgB,kBAAhB,EAAoCI,EAApC,CAAuC,WAAvC,EAAoD,YAAY;AAC5DjB,IAAAA,YAAY,CAACga,WAAb,CAAyB1Z,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAzB,EAAoD,CAApD,EAAuDd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,WAAb,CAAvD;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAW1U,IAAX,CAAgB,kBAAhB,EAAoCI,EAApC,CAAuC,UAAvC,EAAmD,YAAY;AAC3DjB,IAAAA,YAAY,CAACga,WAAb,CAAyB1Z,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAzB,EAAoD,CAApD,EAAuDd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,WAAb,CAAvD;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAW1U,IAAX,CAAgB,gBAAhB,EAAkCI,EAAlC,CAAqC,WAArC,EAAkD,YAAY;AAC1DjB,IAAAA,YAAY,CAACga,WAAb,CAAyB1Z,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAzB,EAAoD,CAApD,EAAuD,CAAvD;AACH,GAFD;AAGAd,EAAAA,CAAC,CAACiV,OAAD,CAAD,CAAW1U,IAAX,CAAgB,gBAAhB,EAAkCI,EAAlC,CAAqC,UAArC,EAAiD,YAAY;AACzDjB,IAAAA,YAAY,CAACga,WAAb,CAAyB1Z,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,YAAb,CAAzB,EAAoD,CAApD,EAAuD,CAAvD;AACH,GAFD;AAIApB,EAAAA,YAAY,CAAC8b,uBAAb;AACH,CAzCD;;AA2CA1b,IAAI,CAACC,gBAAL,CAAsB,kBAAtB,EAA0C,YAAY;AAClDC,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBE,GAAhB,CAAoB,uBAApB;AACAF,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBE,GAAzB,CAA6B,OAA7B;AACAF,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBE,GAAvB,CAA2B,OAA3B;AACAF,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcE,GAAd,CAAkB,OAAlB;AACAF,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeE,GAAf,CAAmB,OAAnB;AACAF,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcE,GAAd,CAAkB,OAAlB;AACAF,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaE,GAAb,CAAiB,OAAjB;AACAF,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeE,GAAf,CAAmB,OAAnB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBE,GAAjB,CAAqB,OAArB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BE,GAA3B,CAA+B,OAA/B;AACAF,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBE,GAAjB,CAAqB,OAArB;AACAF,EAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BE,GAA5B,CAAgC,OAAhC;AACAF,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBE,GAAlB,CAAsB,OAAtB;AACAF,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBE,GAAjB,CAAqB,OAArB;AACAF,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBE,GAArB,CAAyB,OAAzB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBE,GAAlB,CAAsB,OAAtB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBE,GAArB,CAAyB,OAAzB;AACAF,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeE,GAAf,CAAmB,OAAnB;AACAF,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaE,GAAb,CAAiB,OAAjB;AACAF,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBE,GAAjB,CAAqB,OAArB;AACAF,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaE,GAAb,CAAiB,OAAjB;AACAF,EAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBE,GAAxB,CAA4B,OAA5B;AACAF,EAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BE,GAA1B,CAA8B,OAA9B;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBO,IAApB,CAAyB,IAAzB,EAA+BL,GAA/B,CAAmC,OAAnC,EAA4C,gCAA5C;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAAgC,eAAhC;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAAgC,wBAAhC;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAAgC,mBAAhC;AACAF,EAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBE,GAAtB,CAA0B,WAA1B;AACAF,EAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBE,GAAtB,CAA0B,UAA1B;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,WAAxB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,UAAxB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAA+B,sCAA/B;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAAgC,uBAAhC;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,OAAvB,EAAgC,2BAAhC;AACAF,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBE,GAAjB,CAAqB,OAArB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBE,GAApB,CAAwB,OAAxB;AACAF,EAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BE,GAA1B,CAA8B,OAA9B;AACAF,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBE,GAAvB,CAA2B,OAA3B;AACAF,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BE,GAA3B,CAA+B,OAA/B;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,SAAvB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,WAAvB;AACAF,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBE,GAAnB,CAAuB,WAAvB;AACH,CAhDD;AAkDAJ,IAAI,CAACM,cAAL,CAAoB,kBAApB,EAAwC,YAAY;AAChDJ,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7CjB,IAAAA,YAAY,CAAC0X,YAAb,CAA0B,IAA1B;AACA,WAAO,KAAP;AACH,GAHD;AAIApX,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBW,EAAvB,CAA0B,OAA1B,EAAmC,YAAY;AAC3CjB,IAAAA,YAAY,CAACsL,gBAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAhL,EAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBW,EAAvB,CAA0B,OAA1B,EAAmC,YAAY;AAC3CjB,IAAAA,YAAY,CAACyN,gBAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAnN,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcW,EAAd,CAAiB,OAAjB,EAA0B,YAAY;AAClCjB,IAAAA,YAAY,CAACmP,GAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIA7O,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeW,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCjB,IAAAA,YAAY,CAAC6R,SAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAvR,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcW,EAAd,CAAiB,OAAjB,EAA0B,YAAY;AAClCjB,IAAAA,YAAY,CAAC0R,KAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIApR,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaW,EAAb,CAAgB,OAAhB,EAAyB,YAAY;AACjCjB,IAAAA,YAAY,CAACyS,MAAb;AACAnS,IAAAA,CAAC,CAACC,QAAD,CAAD,CAAYU,EAAZ,CAAe,UAAf,EAA2B,YAAY;AACnCX,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBW,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzCX,QAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuB0b,IAAvB,CAA4B,SAA5B,EAAuC,IAAvC;AACH,OAFD;AAGH,KAJD;AAKA,WAAO,KAAP;AACH,GARD;AASA1b,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeW,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCjB,IAAAA,YAAY,CAACmS,WAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIA7R,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxCjB,IAAAA,YAAY,CAAC8U,aAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAxU,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBW,EAAjB,CAAoB,OAApB,EAA6B,YAAY;AACrCjB,IAAAA,YAAY,CAAC8T,aAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAxT,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BW,EAA3B,CAA8B,OAA9B,EAAuC,YAAY;AAC/CjB,IAAAA,YAAY,CAACqY,iBAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIA/X,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBW,EAAjB,CAAoB,OAApB,EAA6B,YAAY;AACrCjB,IAAAA,YAAY,CAACqP,QAAb,CAAsBkB,YAAtB;AACH,GAFD;AAGAjQ,EAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChDjB,IAAAA,YAAY,CAACsG,aAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAhG,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBW,EAAlB,CAAqB,OAArB,EAA8B,YAAY;AACtCjB,IAAAA,YAAY,CAACuG,IAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAjG,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBW,EAAjB,CAAoB,OAApB,EAA6B,YAAY;AACrCjB,IAAAA,YAAY,CAACkV,WAAb,CAAyB,IAAzB;AACA,WAAO,KAAP;AACH,GAHD;AAIA5U,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBW,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzCjB,IAAAA,YAAY,CAAC6V,cAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAvV,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxCjB,IAAAA,YAAY,CAACyG,mBAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIAnG,EAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBW,EAAlB,CAAqB,OAArB,EAA8B,YAAY;AACtCjB,IAAAA,YAAY,CAACgT,WAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIA1S,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxC+Z,IAAAA,eAAe,CAACiB,UAAhB,CAA2B,uBAA3B,EAAoD,CAApD;AACH,GAFD;AAGA3b,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBW,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzCjB,IAAAA,YAAY,CAAC4X,aAAb,CAA2B,IAA3B;AACA,WAAO,KAAP;AACH,GAHD;AAIAtX,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBW,EAAhB,CAAmB,YAAnB,EAAiC,YAAY;AACzCjB,IAAAA,YAAY,CAAC0G,QAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIApG,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBW,EAAhB,CAAmB,YAAnB,EAAiC,YAAY;AACzCjB,IAAAA,YAAY,CAACmY,QAAb;AACA,WAAO,KAAP;AACH,GAHD;AAIA7X,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeW,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCjB,IAAAA,YAAY,CAACoY,OAAb,CAAqB,IAArB;AACA,WAAO,KAAP;AACH,GAHD;AAIA9X,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaW,EAAb,CAAgB,OAAhB,EAAyB,UAAUmV,KAAV,EAAiB;AACtCpW,IAAAA,YAAY,CAACmW,WAAb,CAAyB,IAAzB,EAA+BC,KAA/B;AACH,GAFD;AAGA9V,EAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBW,EAAjB,CAAoB,OAApB,EAA6B,YAAY;AACrCjB,IAAAA,YAAY,CAAC+W,UAAb,CAAwB,IAAxB;AACA,WAAO,KAAP;AACH,GAHD;AAIAzW,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaW,EAAb,CAAgB,OAAhB,EAAyB,YAAY;AACjCjB,IAAAA,YAAY,CAACwX,YAAb,CAA0B,IAA1B;AACA,WAAO,KAAP;AACH,GAHD;AAKAlX,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmB2N,IAAnB,CAAwBjO,YAAY,CAAC+O,iBAArC;AACAzO,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmB2N,IAAnB,CAAwBjO,YAAY,CAAC4L,oBAArC;AAEAtL,EAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBW,EAAtB,CAAyB,OAAzB,EAAkC,YAAY;AAC1CjB,IAAAA,YAAY,CAAC6W,WAAb;AACH,GAFD;AAGAvW,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7CV,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACA5E,IAAAA,YAAY,CAACiG,MAAb;AACH,GAHD;AAIA3F,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7CjB,IAAAA,YAAY,CAACua,SAAb,CACIja,CAAC,CAAC,wBAAD,CAAD,CAA4B4M,GAA5B,EADJ,EAEI5M,CAAC,CAAC,2BAAD,CAAD,CAA+B4M,GAA/B,EAFJ,EAGI5M,CAAC,CAAC,yBAAD,CAAD,CAA6B4M,GAA7B,EAHJ,EAII5M,CAAC,CAAC,sCAAD,CAAD,CAA0C4M,GAA1C,EAJJ;AAMH,GAPD;AAQA5M,EAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+BW,EAA/B,CAAkC,OAAlC,EAA2C,YAAY;AACnDjB,IAAAA,YAAY,CAACqZ,WAAb;AACH,GAFD;AAGA/Y,EAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BW,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChDjB,IAAAA,YAAY,CAAC6U,WAAb;AACH,GAFD;AAGAvU,EAAAA,CAAC,CAAC,4BAAD,CAAD,CAAgCW,EAAhC,CAAmC,OAAnC,EAA4C,YAAY;AACpDV,IAAAA,QAAQ,CAACmE,cAAT,CAAwB,oBAAxB,EAA8CC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACH,GAFD;AAGA5E,EAAAA,YAAY,CAAC8b,uBAAb;AACH,CAxID,E","sources":["webpack://phpmyadmin/./js/src/designer/move.js"],"sourcesContent":["/**\n * @package PhpMyAdmin-Designer\n */\n\n/* global DesignerObjects */ // js/designer/objects.js\n/* global DesignerHistory, historyArray, selectField */ // js/designer/history.js\n/* global contr, db, designerTablesEnabled, displayField, hTabs, jTabs, selectedPage:writable, server */ // js/designer/init.js\n/* global DesignerPage */ // js/designer/page.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar DesignerMove = {};\n\nvar change = 0; // variable to track any change in designer layout.\nvar showRelationLines = true;\nvar alwaysShowText = false;\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $(document).off('fullscreenchange');\n    $('#selflink').show();\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    var $content = $('#page_content');\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n\n    $content.css({ 'margin-left': '3px' });\n    $(document).on('fullscreenchange', function () {\n        if (! document.fullscreenElement) {\n            $content.removeClass('content_fullscreen')\n                .css({ 'width': 'auto', 'height': 'auto' });\n            $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n            $img.attr('src', $img.data('enter'))\n                .attr('title', $span.data('enter'));\n            $span.text($span.data('enter'));\n\n            // Saving the fullscreen state in config when\n            // designer exists fullscreen mode via ESC key\n\n            var valueSent = 'off';\n            DesignerMove.saveValueInConfig('full_screen', valueSent);\n        }\n    });\n\n    $('#selflink').hide();\n});\n\nDesignerMove.markSaved = function () {\n    change = 0;\n    $('#saved_state').text('');\n};\n\nDesignerMove.markUnsaved = function () {\n    change = 1;\n    $('#saved_state').text('*');\n};\n\nvar mainDirection = $('html').attr('dir') === 'rtl' ? 'right' : 'left';\n// Will be used to multiply the offsetLeft by -1 if the direction is rtl.\nvar directionEffect = mainDirection === 'right' ? -1 : 1;\nvar curClick = null;\nvar smS           = 0;\nvar smAdd         = 10;\nvar sLeft         = 0;\nvar sRight        = 0;\nvar onRelation    = 0;\nvar onGrid        = 0;\nvar onDisplayField = 0;\n// relation_style: 0 - angular 1 - direct\nvar onAngularDirect = 1;\nvar clickField    = 0;\nvar linkRelation  = '';\nvar canvasWidth   = 0;\nvar canvasHeight  = 0;\nvar osnTabWidth  = 0;\nvar osnTabHeight = 0;\nvar heightField   = 7;\nvar globX;\nvar globY;\nvar timeoutId;\nvar layerMenuCurClick = 0;\nvar fromArray = [];\nvar menuMoved = false;\nvar gridSize = 10;\n\n// ------------------------------------------------------------------------------\n\nvar isIe = document.all && !window.opera;\n\nif (isIe) {\n    window.onscroll = DesignerMove.generalScroll;\n    document.onselectstart = function () {\n        return false;\n    };\n}\n\nDesignerMove.mouseDown = function (e) {\n    // eslint-disable-next-line compat/compat\n    globX = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    globY = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    if (e.target.tagName === 'SPAN') {\n        curClick = e.target.parentNode.parentNode.parentNode.parentNode;\n    } else if (e.target.className === 'tab_zag_2') {\n        curClick = e.target.parentNode.parentNode.parentNode;\n    } else if (e.target.id === 'layer_menu_sizer_btn') {\n        layerMenuCurClick = 1;\n    } else if (e.target.className === 'M_butt') {\n        return false;\n    }\n\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'none';\n        curClick.style.zIndex = 2;\n    }\n};\n\nDesignerMove.mouseMove = function (e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    // eslint-disable-next-line compat/compat\n    var newDx = isIe ? e.clientX + document.body.scrollLeft : e.pageX;\n    // eslint-disable-next-line compat/compat\n    var newDy = isIe ? e.clientY + document.body.scrollTop : e.pageY;\n\n    var deltaX = globX - newDx;\n    var deltaY = globY - newDy;\n\n    globX = newDx;\n    globY = newDy;\n\n    if (curClick !== null) {\n        DesignerMove.markUnsaved();\n\n        var $curClick = $(curClick);\n\n        var curX = parseFloat($curClick.attr('data-' + mainDirection) || $curClick.css(mainDirection));\n        var curY = parseFloat($curClick.attr('data-top') || $curClick.css('top'));\n\n        var newX = curX - directionEffect * deltaX;\n        var newY = curY - deltaY;\n\n        $curClick.attr('data-' + mainDirection, newX);\n        $curClick.attr('data-top', newY);\n\n        if (onGrid) {\n            newX = parseInt(newX / gridSize) * gridSize;\n            newY = parseInt(newY / gridSize) * gridSize;\n        }\n\n        if (newX < 0) {\n            newX = 0;\n        } else if (newY < 0) {\n            newY = 0;\n        }\n        $curClick.css(mainDirection, newX + 'px');\n        $curClick.css('top', newY + 'px');\n    } else if (layerMenuCurClick) {\n        if (menuMoved) {\n            deltaX = -deltaX;\n        }\n        var $layerMenu = $('#layer_menu');\n        var newWidth = $layerMenu.width() + directionEffect * deltaX;\n        if (newWidth < 150) {\n            newWidth = 150;\n        }\n        $layerMenu.width(newWidth);\n    }\n\n    if (onRelation || onDisplayField) {\n        document.getElementById('designer_hint').style.left = (globX + 20) + 'px';\n        document.getElementById('designer_hint').style.top  = (globY + 20) + 'px';\n    }\n};\n\nDesignerMove.mouseUp = function () {\n    if (curClick !== null) {\n        document.getElementById('canvas').style.display = 'inline-block';\n        DesignerMove.reload();\n        curClick.style.zIndex = 1;\n        curClick = null;\n    }\n    layerMenuCurClick = 0;\n};\n\n// ------------------------------------------------------------------------------\n\nDesignerMove.canvasPos = function () {\n    canvasWidth  = document.getElementById('canvas').width  = osnTabWidth  - 3;\n    canvasHeight = document.getElementById('canvas').height = osnTabHeight - 3;\n\n    if (isIe) {\n        document.getElementById('canvas').style.width  = ((osnTabWidth  - 3) ? (osnTabWidth  - 3) : 0) + 'px';\n        document.getElementById('canvas').style.height = ((osnTabHeight - 3) ? (osnTabHeight - 3) : 0) + 'px';\n    }\n};\n\nDesignerMove.osnTabPos = function () {\n    osnTabWidth  = parseInt(document.getElementById('osn_tab').style.width, 10);\n    osnTabHeight = parseInt(document.getElementById('osn_tab').style.height, 10);\n};\n\nDesignerMove.setDefaultValuesFromSavedState = function () {\n    if ($('#angular_direct_button').attr('class') === 'M_butt') {\n        onAngularDirect = 0;\n    } else {\n        onAngularDirect = 1;\n    }\n    DesignerMove.angularDirect();\n\n    if ($('#grid_button').attr('class') === 'M_butt') {\n        onGrid = 1;\n    } else {\n        onGrid = 0;\n    }\n    DesignerMove.grid();\n\n    var $relLineInvert = $('#relLineInvert');\n    if ($relLineInvert.attr('class') === 'M_butt') {\n        showRelationLines = false;\n        $relLineInvert.attr('class', 'M_butt');\n    } else {\n        showRelationLines = true;\n        $relLineInvert.attr('class', 'M_butt_Selected_down');\n    }\n    DesignerMove.relationLinesInvert();\n\n    if ($('#pin_Text').attr('class') === 'M_butt_Selected_down') {\n        alwaysShowText = true;\n        DesignerMove.showText();\n    } else {\n        alwaysShowText = false;\n    }\n\n    var $keySbAll = $('#key_SB_all');\n    if ($keySbAll.attr('class') === 'M_butt_Selected_down') {\n        $keySbAll.trigger('click');\n        $keySbAll.toggleClass('M_butt_Selected_down');\n        $keySbAll.toggleClass('M_butt');\n    }\n\n    var $keyLeftRight = $('#key_Left_Right');\n    if ($keyLeftRight.attr('class') === 'M_butt_Selected_down') {\n        $keyLeftRight.trigger('click');\n    }\n};\n\nDesignerMove.main = function () {\n    // ---CROSS\n\n    document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n    DesignerMove.osnTabPos();\n    DesignerMove.canvasPos();\n    DesignerMove.smallTabRefresh();\n    DesignerMove.reload();\n    DesignerMove.setDefaultValuesFromSavedState();\n    if (isIe) {\n        DesignerMove.generalScroll();\n    }\n};\n\nDesignerMove.resizeOsnTab = function () {\n    var maxX = 0;\n    var maxY = 0;\n    for (var key in jTabs) {\n        var kX = parseInt(document.getElementById(key).style[mainDirection], 10) + document.getElementById(key).offsetWidth;\n        var kY = parseInt(document.getElementById(key).style.top, 10) + document.getElementById(key).offsetHeight;\n        maxX = maxX < kX ? kX : maxX;\n        maxY = maxY < kY ? kY : maxY;\n    }\n\n    osnTabWidth  = maxX + 50;\n    osnTabHeight = maxY + 50;\n    DesignerMove.canvasPos();\n};\n\n/**\n * Draw a colored line\n *\n * @param {number} x1\n * @param {number} x2\n * @param {number} y1\n * @param {number} y2\n * @param {HTMLElement} osnTab\n * @param {string} colorTarget\n * @return {void}\n */\nDesignerMove.drawLine0 = function (x1, x2, y1, y2, osnTab, colorTarget) {\n    DesignerMove.line0(\n        x1 + directionEffect * osnTab.offsetLeft,\n        y1 - osnTab.offsetTop,\n        x2 + directionEffect * osnTab.offsetLeft,\n        y2 - osnTab.offsetTop,\n        DesignerMove.getColorByTarget(colorTarget)\n    );\n};\n\n/**\n * refreshes display, must be called after state changes\n */\nDesignerMove.reload = function () {\n    DesignerMove.resizeOsnTab();\n    var n;\n    var x1;\n    var x2;\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in contr) {\n        for (key in contr[K]) {\n            // contr name\n            for (key2 in contr[K][key]) {\n                // table name\n                for (key3 in contr[K][key][key2]) {\n                    // field name\n                    if (!document.getElementById('check_vis_' + key2).checked ||\n                        !document.getElementById('check_vis_' + contr[K][key][key2][key3][0]).checked) {\n                        // if hide\n                        continue;\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(contr[K][key][key2][key3][0]).offsetLeft;\n                    var x2Right = x2Left + document.getElementById(contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft = 1;\n                    }\n\n                    var rowOffsetTop = 0;\n                    var tabHideButton = document.getElementById('id_hide_tbody_' + key2);\n\n                    if (tabHideButton.innerHTML === 'v') {\n                        var fromColumn = document.getElementById(key2 + '.' + key3);\n                        if (fromColumn) {\n                            rowOffsetTop = fromColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n\n                    rowOffsetTop = 0;\n                    tabHideButton = document.getElementById('id_hide_tbody_' + contr[K][key][key2][key3][0]);\n                    if (tabHideButton.innerHTML === 'v') {\n                        var toColumn = document.getElementById(contr[K][key][key2][key3][0] +\n                            '.' + contr[K][key][key2][key3][1]);\n                        if (toColumn) {\n                            rowOffsetTop = toColumn.offsetTop;\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    var y2 =\n                        document.getElementById(contr[K][key][key2][key3][0]).offsetTop +\n                        rowOffsetTop +\n                        heightField;\n\n                    DesignerMove.drawLine0(\n                        x1, x2, y1, y2, osnTab, contr[K][key][key2][key3][0] + '.' + contr[K][key][key2][key3][1]\n                    );\n                }\n            }\n        }\n    }\n};\n\n/**\n * draws a line from x1:y1 to x2:y2 with color\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line = function (x1, y1, x2, y2, colorLine) {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.strokeStyle = colorLine;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n};\n\n/**\n * draws a relation/constraint line, whether angular or not\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line0 = function (x1, y1, x2, y2, colorLine) {\n    if (! showRelationLines) {\n        return;\n    }\n    DesignerMove.circle(x1, y1, 3, 3, colorLine);\n    DesignerMove.rect(x2 - 1, y2 - 2, 4, 4, colorLine);\n\n    if (onAngularDirect) {\n        DesignerMove.line2(x1, y1, x2, y2, colorLine);\n    } else {\n        DesignerMove.line3(x1, y1, x2, y2, colorLine);\n    }\n};\n\n/**\n * draws a angular relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line2 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        x1Local += smAdd;\n        x2Local += smAdd;\n    } else if (sLeft) {\n        x1Local -= smAdd;\n        x2Local -= smAdd;\n    } else if (x1 < x2) {\n        x1Local += smAdd;\n        x2Local -= smAdd;\n    } else {\n        x1Local -= smAdd;\n        x2Local += smAdd;\n    }\n\n    DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n    DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n    DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n};\n\n/**\n * draws a relation/constraint line\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param colorLine\n */\nDesignerMove.line3 = function (x1, y1, x2, y2, colorLine) {\n    var x1Local = x1;\n    var x2Local = x2;\n\n    if (sRight) {\n        if (x1 < x2) {\n            x1Local += x2 - x1 + smAdd;\n            x2Local += smAdd;\n        } else {\n            x2Local += x1 - x2 + smAdd;\n            x1Local += smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n    if (sLeft) {\n        if (x1 < x2) {\n            x2Local -= x2 - x1 + smAdd;\n            x1Local -= smAdd;\n        } else {\n            x1Local -= x1 - x2 + smAdd;\n            x2Local -= smAdd;\n        }\n\n        DesignerMove.line(x1, y1, x1Local, y1, colorLine);\n        DesignerMove.line(x2, y2, x2Local, y2, colorLine);\n        DesignerMove.line(x1Local, y1, x2Local, y2, colorLine);\n        return;\n    }\n\n    var xS = (x1 + x2) / 2;\n    DesignerMove.line(x1, y1, xS, y1, colorLine);\n    DesignerMove.line(xS, y2, x2, y2, colorLine);\n    DesignerMove.line(xS, y1, xS, y2, colorLine);\n};\n\nDesignerMove.circle = function (x, y, r, w, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    ctx.lineWidth = w;\n    ctx.strokeStyle = color;\n    ctx.arc(x, y, r, 0, 2 * Math.PI, true);\n    ctx.stroke();\n};\n\nDesignerMove.clear = function () {\n    var canvas = document.getElementById('canvas');\n    var ctx    = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n};\n\nDesignerMove.rect = function (x1, y1, w, h, color) {\n    var ctx = document.getElementById('canvas').getContext('2d');\n    ctx.fillStyle = color;\n    ctx.fillRect(x1, y1, w, h);\n};\n\n// --------------------------- FULLSCREEN -------------------------------------\nDesignerMove.toggleFullscreen = function () {\n    var valueSent = '';\n    var $img = $('#toggleFullscreen').find('img');\n    var $span = $img.siblings('span');\n    var $content = $('#page_content');\n    const pageContent = document.getElementById('page_content');\n\n    if (! document.fullscreenElement) {\n        $img.attr('src', $img.data('exit'))\n            .attr('title', $span.data('exit'));\n        $span.text($span.data('exit'));\n        $content\n            .addClass('content_fullscreen')\n            .css({ 'width': screen.width - 5, 'height': screen.height - 5 });\n\n        $('#osn_tab').css({ 'width': screen.width + 'px', 'height': screen.height });\n        valueSent = 'on';\n        pageContent.requestFullscreen();\n    } else {\n        $img.attr('src', $img.data('enter'))\n            .attr('title', $span.data('enter'));\n        $span.text($span.data('enter'));\n        $content.removeClass('content_fullscreen')\n            .css({ 'width': 'auto', 'height': 'auto' });\n        $('#osn_tab').css({ 'width': 'auto', 'height': 'auto' });\n        document.exitFullscreen();\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('full_screen', valueSent);\n};\n\nDesignerMove.addTableToTablesList = function (index, tableDom) {\n    var db = $(tableDom).find('.small_tab_pref').attr('db');\n    var table = $(tableDom).find('.small_tab_pref').attr('table_name');\n    var dbEncoded = $(tableDom).find('.small_tab_pref').attr('db_url');\n    var tableEncoded = $(tableDom).find('.small_tab_pref').attr('table_name_url');\n    var tableIsChecked = $(tableDom).css('display') === 'block' ? 'checked' : '';\n    var checkboxStatus = (tableIsChecked === 'checked') ? Messages.strHide : Messages.strShow;\n    var $newTableLine = $('<tr>' +\n        '    <td title=\"' + Messages.strStructure + '\"' +\n        '        width=\"1px\"' +\n        '        class=\"L_butt2_1\">' +\n        '        <img alt=\"\"' +\n        '            db=\"' + dbEncoded + '\"' +\n        '            table_name=\"' + tableEncoded + '\"' +\n        '            class=\"scroll_tab_struct\"' +\n        '            src=\"' + themeImagePath + 'designer/exec.png\"/>' +\n        '    </td>' +\n        '    <td width=\"1px\">' +\n        '        <input class=\"scroll_tab_checkbox\"' +\n        '            title=\"' + checkboxStatus + '\"' +\n        '            id=\"check_vis_' + dbEncoded + '.' + tableEncoded + '\"' +\n        '            style=\"margin:0;\"' +\n        '            type=\"checkbox\"' +\n        '            value=\"' + dbEncoded + '.' + tableEncoded + '\"' + tableIsChecked +\n        '            />' +\n        '    </td>' +\n        '    <td class=\"designer_Tabs\"' +\n        '        designer_url_table_name=\"' + dbEncoded + '.' + tableEncoded + '\">' + $('<div/>').text(db + '.' + table).html() + '</td>' +\n        '</tr>');\n    $('#id_scroll_tab table').first().append($newTableLine);\n    $($newTableLine).find('.scroll_tab_struct').on('click', function () {\n        DesignerMove.startTabUpd(db, table);\n    });\n    $($newTableLine).on('click', '.designer_Tabs2,.designer_Tabs', function () {\n        DesignerMove.selectTab($(this).attr('designer_url_table_name'));\n    });\n    $($newTableLine).find('.scroll_tab_checkbox').on('click', function () {\n        $(this).attr('title', function (i, currentvalue) {\n            return currentvalue === Messages.strHide ? Messages.strShow : Messages.strHide;\n        });\n        DesignerMove.visibleTab(this,$(this).val());\n    });\n    var $tablesCounter = $('#tables_counter');\n    $tablesCounter.text(parseInt($tablesCounter.text(), 10) + 1);\n};\n\n/**\n * This function shows modal with Go buttons where required in designer\n * @param {object} form\n * @param {string} heading\n * @param {string} type\n *\n * @return {object} modal;\n */\nDesignerMove.displayModal = function (form, heading, type) {\n    var modal = $(type);\n    modal.modal('show');\n    modal.find('.modal-body').first().html(form);\n    $(type + 'Label').first().html(heading);\n    return modal;\n};\n\nDesignerMove.addOtherDbTables = function () {\n    var $selectDb = $('<select id=\"add_table_from\"></select>');\n    $selectDb.append('<option value=\"\">' + Messages.strNone + '</option>');\n\n    var $selectTable = $('<select id=\"add_table\"></select>');\n    $selectTable.append('<option value=\"\">' + Messages.strNone + '</option>');\n\n    $.post('index.php?route=/sql', {\n        'ajax_request' : true,\n        'sql_query' : 'SHOW databases;',\n        'server': CommonParams.get('server')\n    }, function (data) {\n        $(data.message).find('table.table_results.data.ajax').find('td.data').each(function () {\n            var val = $(this)[0].innerText;\n            $selectDb.append($('<option></option>').val(val).text(val));\n        });\n    });\n\n    var $form = $('<form action=\"\" class=\"ajax\"></form>')\n        .append($selectDb).append($selectTable);\n    var modal = DesignerMove.displayModal($form, Messages.strAddTables, '#designerGoModal');\n    $('#designerModalGoButton').on('click', function () {\n        var db = $('#add_table_from').val();\n        var table = $('#add_table').val();\n\n        // Check if table already imported or not.\n        var $table = $('[id=\"' + encodeURIComponent(db) + '.' + encodeURIComponent(table) + '\"]');\n        if ($table.length !== 0) {\n            Functions.ajaxShowMessage(\n                Functions.sprintf(Messages.strTableAlreadyExists, db + '.' + table),\n                undefined,\n                'error'\n            );\n            return;\n        }\n\n        $.post('index.php?route=/database/designer', {\n            'ajax_request' : true,\n            'dialog' : 'add_table',\n            'db' : db,\n            'table' : table,\n            'server': CommonParams.get('server')\n        }, function (data) {\n            var $newTableDom = $(data.message);\n            $newTableDom.find('a').first().remove();\n\n            var dbEncoded = $($newTableDom).find('.small_tab_pref').attr('db_url');\n            var tableEncoded = $($newTableDom).find('.small_tab_pref').attr('table_name_url');\n\n            if (typeof dbEncoded === 'string' && typeof tableEncoded === 'string') { // Do not try to add if attr not found !\n                $('#container-form').append($newTableDom);\n                DesignerMove.enableTableEvents(null, $newTableDom);\n                DesignerMove.addTableToTablesList(null, $newTableDom);\n                jTabs[dbEncoded + '.' + tableEncoded] = 1;\n                DesignerMove.markUnsaved();\n            }\n        });\n        modal.modal('hide');\n    });\n    $('#add_table_from').on('change', function () {\n        if ($(this).val()) {\n            var dbName = $(this).val();\n            var sqlQuery = 'SHOW tables;';\n            $.post('index.php?route=/sql', {\n                'ajax_request' : true,\n                'sql_query': sqlQuery,\n                'db' : dbName,\n                'server': CommonParams.get('server')\n            }, function (data) {\n                $selectTable.html('');\n                var rows = $(data.message).find('table.table_results.data.ajax').find('td.data');\n                if (rows.length === 0) {\n                    $selectTable.append('<option value=\"\">' + Messages.strNone + '</option>');\n                }\n                rows.each(function () {\n                    var val = $(this)[0].innerText;\n                    $selectTable.append($('<option></option>').val(val).text(val));\n                });\n            });\n        }\n    });\n};\n\n// ------------------------------ NEW ------------------------------------------\nDesignerMove.new = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        DesignerMove.loadPage(-1);\n    });\n};\n\n// ------------------------------ SAVE ------------------------------------------\n// (del?) no for pdf\nDesignerMove.save = function (url) {\n    for (var key in jTabs) {\n        document.getElementById('t_x_' + key + '_').value = parseInt(document.getElementById(key).style.left, 10);\n        document.getElementById('t_y_' + key + '_').value = parseInt(document.getElementById(key).style.top, 10);\n        document.getElementById('t_v_' + key + '_').value = document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1;\n        document.getElementById('t_h_' + key + '_').value = document.getElementById('check_vis_' + key).checked ? 1 : 0;\n    }\n    document.getElementById('container-form').action = url;\n    $('#container-form').trigger('submit');\n};\n\nDesignerMove.getUrlPos = function (forceString) {\n    var key;\n    if (designerTablesEnabled || forceString) {\n        var poststr = '';\n        var argsep = CommonParams.get('arg_separator');\n        var i = 1;\n        for (key in jTabs) {\n            poststr += argsep + 't_x[' + i + ']=' + parseInt(document.getElementById(key).style.left, 10);\n            poststr += argsep + 't_y[' + i + ']=' + parseInt(document.getElementById(key).style.top, 10);\n            poststr += argsep + 't_v[' + i + ']=' + (document.getElementById('id_tbody_' + key).style.display === 'none' ? 0 : 1);\n            poststr += argsep + 't_h[' + i + ']=' + (document.getElementById('check_vis_' + key).checked ? 1 : 0);\n            poststr += argsep + 't_db[' + i + ']=' + $(document.getElementById(key)).attr('db_url');\n            poststr += argsep + 't_tbl[' + i + ']=' + $(document.getElementById(key)).attr('table_name_url');\n            i++;\n        }\n        return poststr;\n    } else {\n        var coords = [];\n        for (key in jTabs) {\n            if (document.getElementById('check_vis_' + key).checked) {\n                var x = parseInt(document.getElementById(key).style.left, 10);\n                var y = parseInt(document.getElementById(key).style.top, 10);\n                var tbCoords = new DesignerObjects.TableCoordinate(\n                    $(document.getElementById(key)).attr('db_url'),\n                    $(document.getElementById(key)).attr('table_name_url'),\n                    -1, x, y);\n                coords.push(tbCoords);\n            }\n        }\n        return coords;\n    }\n};\n\nDesignerMove.save2 = function (callback) {\n    if (designerTablesEnabled) {\n        var argsep = CommonParams.get('arg_separator');\n        var poststr = 'operation=savePage' + argsep + 'save_page=same' + argsep + 'ajax_request=true';\n        poststr += argsep + 'server=' + server + argsep + 'db=' + encodeURIComponent(db) + argsep + 'selected_page=' + selectedPage;\n        poststr += DesignerMove.getUrlPos();\n\n        var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer', poststr, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                Functions.ajaxShowMessage(Messages.strModificationSaved);\n                DesignerMove.markSaved();\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        var name = $('#page_name').html().trim();\n        DesignerPage.saveToSelectedPage(db, selectedPage, name, DesignerMove.getUrlPos(), function () {\n            DesignerMove.markSaved();\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.submitSaveDialogAndClose = function (callback, modal) {\n    var $form = $('#save_page');\n    var name = $form.find('input[name=\"selected_value\"]').val().trim();\n    if (name === '') {\n        Functions.ajaxShowMessage(Messages.strEnterValidPageName, false);\n        return;\n    }\n    modal.modal('hide');\n\n    if (designerTablesEnabled) {\n        var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n        Functions.prepareForAjaxRequest($form);\n        $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n                DesignerMove.markSaved();\n                if (data.id) {\n                    selectedPage = data.id;\n                }\n                $('#page_name').text(name);\n                if (typeof callback !== 'undefined') {\n                    callback();\n                }\n            }\n        });\n    } else {\n        DesignerPage.saveToNewPage(db, name, DesignerMove.getUrlPos(), function (page) {\n            DesignerMove.markSaved();\n            if (page.pgNr) {\n                selectedPage = page.pgNr;\n            }\n            $('#page_name').text(page.pageDescr);\n            if (typeof callback !== 'undefined') {\n                callback();\n            }\n        });\n    }\n};\n\nDesignerMove.save3 = function (callback) {\n    if (selectedPage !== -1) {\n        DesignerMove.save2(callback);\n    } else {\n        var $form = $('<form action=\"index.php?route=/database/designer\" method=\"post\" name=\"save_page\" id=\"save_page\" class=\"ajax\"></form>')\n            .append('<input type=\"hidden\" name=\"server\" value=\"' + server + '\">')\n            .append($('<input type=\"hidden\" name=\"db\" />').val(db))\n            .append('<input type=\"hidden\" name=\"operation\" value=\"savePage\">')\n            .append('<input type=\"hidden\" name=\"save_page\" value=\"new\">')\n            .append('<label for=\"selected_value\">' + Messages.strPageName +\n                '</label>:<input type=\"text\" name=\"selected_value\">');\n        var modal = DesignerMove.displayModal($form, Messages.strSavePage, '#designerGoModal');\n        $form.on('submit', function (e) {\n            e.preventDefault();\n            DesignerMove.submitSaveDialogAndClose(callback, modal);\n        });\n        $('#designerModalGoButton').on('click', function () {\n            var $form = $('#save_page');\n            $form.trigger('submit');\n            modal.modal('hide');\n        });\n    }\n};\n\n// ------------------------------ EDIT PAGES ------------------------------------------\nDesignerMove.editPages = function () {\n    DesignerMove.promptToSaveCurrentPage(function () {\n        var $msgbox = Functions.ajaxShowMessage();\n        $.post('index.php?route=/database/designer', {\n            'ajax_request': true,\n            'server': server,\n            'db': db,\n            'dialog': 'edit'\n        }, function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            } else {\n                Functions.ajaxRemoveMessage($msgbox);\n\n                if (! designerTablesEnabled) {\n                    DesignerPage.createPageList(db, function (options) {\n                        $('#selected_page').append(options);\n                    });\n                }\n                var modal = DesignerMove.displayModal(data.message, Messages.strOpenPage, '#designerGoModal');\n                $('#designerModalGoButton').on('click', function () {\n                    var $form = $('#edit_delete_pages');\n                    var selected = $form.find('select[name=\"selected_page\"]').val();\n                    if (selected === '0') {\n                        Functions.ajaxShowMessage(Messages.strSelectPage, 2000);\n                        return;\n                    }\n                    modal.modal('hide');\n                    DesignerMove.loadPage(selected);\n                });\n            }\n        }); // end $.post()\n    });\n};\n\n// -----------------------------  DELETE PAGES ---------------------------------------\nDesignerMove.deletePages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': server,\n        'db': db,\n        'dialog': 'delete'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! designerTablesEnabled) {\n                DesignerPage.createPageList(db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, Messages.strDeletePage, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form = $('#edit_delete_pages');\n                var selected = $form.find('select[name=\"selected_page\"]').val();\n                if (selected === '0') {\n                    Functions.ajaxShowMessage(Messages.strSelectPage, 2000);\n                    return;\n                }\n\n                var $messageBox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n                var deletingCurrentPage = parseInt(selected) === selectedPage;\n                Functions.prepareForAjaxRequest($form);\n\n                if (designerTablesEnabled) {\n                    $.post($form.attr('action'), $form.serialize(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    }); // end $.post()\n                } else {\n                    DesignerPage.deletePage(selected, function (success) {\n                        if (! success) {\n                            Functions.ajaxShowMessage('Error', false);\n                        } else {\n                            Functions.ajaxRemoveMessage($messageBox);\n                            if (deletingCurrentPage) {\n                                DesignerMove.loadPage(null);\n                            } else {\n                                Functions.ajaxShowMessage(Messages.strSuccessfulPageDelete);\n                            }\n                        }\n                    });\n                }\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\n// ------------------------------ SAVE AS PAGES ---------------------------------------\nDesignerMove.saveAs = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': server,\n        'db': db,\n        'dialog': 'save_as'\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            if (! designerTablesEnabled) {\n                DesignerPage.createPageList(db, function (options) {\n                    $('#selected_page').append(options);\n                });\n            }\n\n            var modal = DesignerMove.displayModal(data.message, Messages.strSavePageAs, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                var $form           = $('#save_as_pages');\n                var selectedValue  = $form.find('input[name=\"selected_value\"]').val().trim();\n                var $selectedPage  = $form.find('select[name=\"selected_page\"]');\n                var choice          = $form.find('input[name=\"save_page\"]:checked').val();\n                var name            = '';\n\n                if (choice === 'same') {\n                    if ($selectedPage.val() === '0') {\n                        Functions.ajaxShowMessage(Messages.strSelectPage, 2000);\n                        return;\n                    }\n                    name = $selectedPage.find('option:selected').text();\n                } else if (choice === 'new') {\n                    if (selectedValue === '') {\n                        Functions.ajaxShowMessage(Messages.strEnterValidPageName, 2000);\n                        return;\n                    }\n                    name = selectedValue;\n                }\n\n                var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n                if (designerTablesEnabled) {\n                    Functions.prepareForAjaxRequest($form);\n                    $.post($form.attr('action'), $form.serialize() + DesignerMove.getUrlPos(), function (data) {\n                        if (data.success === false) {\n                            Functions.ajaxShowMessage(data.error, false);\n                        } else {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (data.id) {\n                                selectedPage = data.id;\n                            }\n                            DesignerMove.loadPage(selectedPage);\n                        }\n                    }); // end $.post()\n                } else {\n                    if (choice === 'same') {\n                        var selectedPageId = $selectedPage.find('option:selected').val();\n                        DesignerPage.saveToSelectedPage(db, selectedPageId, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(selectedPage);\n                        });\n                    } else if (choice === 'new') {\n                        DesignerPage.saveToNewPage(db, name, DesignerMove.getUrlPos(), function (page) {\n                            Functions.ajaxRemoveMessage($msgbox);\n                            DesignerMove.markSaved();\n                            if (page.pgNr) {\n                                selectedPage = page.pgNr;\n                            }\n                            DesignerMove.loadPage(selectedPage);\n                        });\n                    }\n                }\n\n                modal.modal('hide');\n            });\n            // select current page by default\n            if (selectedPage !== -1) {\n                $('select[name=\"selected_page\"]').val(selectedPage);\n            }\n        }\n    }); // end $.post()\n};\n\nDesignerMove.promptToSaveCurrentPage = function (callback) {\n    if (change === 1 || selectedPage === -1) {\n        var modal = DesignerMove.displayModal('<div>' + Messages.strLeavingPage + '</div>',\n            Messages.strSavePage, '#designerPromptModal');\n        $('#designerModalYesButton').on('click', function () {\n            modal.modal('hide');\n            DesignerMove.save3(callback);\n        });\n        $('#designerModalNoButton').on('click', function () {\n            modal.modal('hide');\n            callback();\n        });\n    } else {\n        callback();\n    }\n};\n\n// ------------------------------ EXPORT PAGES ---------------------------------------\nDesignerMove.exportPages = function () {\n    var $msgbox = Functions.ajaxShowMessage();\n    var argsep = CommonParams.get('arg_separator');\n\n    $.post('index.php?route=/database/designer', {\n        'ajax_request': true,\n        'server': server,\n        'db': db,\n        'dialog': 'export',\n        'selected_page': selectedPage\n    }, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n\n            var $form = $(data.message);\n            if (!designerTablesEnabled) {\n                $form.append('<input type=\"hidden\" name=\"offline_export\" value=\"true\">');\n            }\n            $.each(DesignerMove.getUrlPos(true).substring(1).split(argsep), function () {\n                var pair = this.split('=');\n                var input = $('<input type=\"hidden\">');\n                input.attr('name', pair[0]);\n                input.attr('value', pair[1]);\n                $form.append(input);\n            });\n            var $formatDropDown = $form.find('#plugins');\n            $formatDropDown.on('change', function () {\n                var format = $formatDropDown.val();\n                $form.find('.format_specific_options').hide();\n                $form.find('#' + format + '_options').show();\n            }).trigger('change');\n\n            var modal = DesignerMove.displayModal($form, Messages.strExportRelationalSchema, '#designerGoModal');\n            $('#designerModalGoButton').on('click', function () {\n                $('#id_export_pages').trigger('submit');\n                modal.modal('hide');\n            });\n        }\n    }); // end $.post()\n};\n\nDesignerMove.loadPage = function (page) {\n    if (designerTablesEnabled) {\n        var paramPage = '';\n        var argsep = CommonParams.get('arg_separator');\n        if (page !== null) {\n            paramPage = argsep + 'page=' + page;\n        }\n        $('<a href=\"index.php?route=/database/designer&server=' + server + argsep + 'db=' + encodeURIComponent(db) + paramPage + '\"></a>')\n            .appendTo($('#page_content'))\n            .trigger('click');\n    } else {\n        if (page === null) {\n            DesignerPage.showTablesInLandingPage(db);\n        } else if (page > -1) {\n            DesignerPage.loadHtmlForPage(page);\n        } else if (page === -1) {\n            DesignerPage.showNewPageTables(true);\n        }\n    }\n    DesignerMove.markSaved();\n};\n\nDesignerMove.grid = function () {\n    var valueSent = '';\n    if (!onGrid) {\n        onGrid = 1;\n        valueSent = 'on';\n        document.getElementById('grid_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('grid_button').className = 'M_butt';\n        onGrid = 0;\n        valueSent = 'off';\n    }\n    DesignerMove.saveValueInConfig('snap_to_grid', valueSent);\n};\n\nDesignerMove.angularDirect = function () {\n    var valueSent = '';\n    if (onAngularDirect) {\n        onAngularDirect = 0;\n        valueSent = 'angular';\n        document.getElementById('angular_direct_button').className = 'M_butt_Selected_down';\n    } else {\n        onAngularDirect = 1;\n        valueSent = 'direct';\n        document.getElementById('angular_direct_button').className = 'M_butt';\n    }\n    DesignerMove.saveValueInConfig('angular_direct', valueSent);\n    DesignerMove.reload();\n};\n\nDesignerMove.saveValueInConfig = function (indexSent, valueSent) {\n    $.post('index.php?route=/database/designer',\n        {\n            'operation': 'save_setting_value',\n            'index': indexSent,\n            'ajax_request': true,\n            'server': server,\n            'value': valueSent\n        },\n        function (data) {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n};\n\n// ++++++++++++++++++++++++++++++ RELATION ++++++++++++++++++++++++++++++++++++++\nDesignerMove.startRelation = function () {\n    if (onDisplayField) {\n        return;\n    }\n\n    if (!onRelation) {\n        document.getElementById('foreign_relation').style.display = '';\n        onRelation = 1;\n        document.getElementById('designer_hint').innerHTML = Messages.strSelectReferencedKey;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('rel_button').className = 'M_butt_Selected_down';\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('rel_button').className = 'M_butt';\n        clickField = 0;\n        onRelation = 0;\n    }\n};\n\n// table field\nDesignerMove.clickField = function (db, T, f, pk) {\n    var pkLocal = parseInt(pk);\n    var argsep = CommonParams.get('arg_separator');\n    if (onRelation) {\n        if (!clickField) {\n            // .style.display=='none'        .style.display = 'none'\n            if (!pkLocal) {\n                alert(Messages.strPleaseSelectPrimaryOrUniqueKey);\n                return;// 0;\n            }// PK\n            if (jTabs[db + '.' + T] !== 1) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            clickField = 1;\n            linkRelation = 'DB1=' + db + argsep + 'T1=' + T + argsep + 'F1=' + f;\n            document.getElementById('designer_hint').innerHTML = Messages.strSelectForeignKey;\n        } else {\n            DesignerMove.startRelation(); // hidden hint...\n            if (jTabs[db + '.' + T] !== 1 || !pkLocal) {\n                document.getElementById('foreign_relation').style.display = 'none';\n            }\n            var left = globX - (document.getElementById('layer_new_relation').offsetWidth >> 1);\n            document.getElementById('layer_new_relation').style.left = left + 'px';\n            var top = globY - document.getElementById('layer_new_relation').offsetHeight;\n            document.getElementById('layer_new_relation').style.top  = top + 'px';\n            document.getElementById('layer_new_relation').style.display = 'block';\n            linkRelation += argsep + 'DB2=' + db + argsep + 'T2=' + T + argsep + 'F2=' + f;\n        }\n    }\n\n    if (onDisplayField) {\n        var fieldNameToSend = decodeURIComponent(f);\n        var newDisplayFieldClass = 'tab_field';\n        var oldTabField = document.getElementById('id_tr_' + T + '.' + displayField[T]);\n        // if is display field\n        if (displayField[T] === f) {// The display field is already the one defined, user wants to remove it\n            newDisplayFieldClass = 'tab_field';\n            delete displayField[T];\n            if (oldTabField) {// Clear the style\n                // Set display field class on old item\n                oldTabField.className = 'tab_field';\n            }\n            fieldNameToSend = '';\n        } else {\n            newDisplayFieldClass = 'tab_field_3';\n            if (displayField[T]) { // Had a previous one, clear it\n                if (oldTabField) {\n                    // Set display field class on old item\n                    oldTabField.className = 'tab_field';\n                }\n                delete displayField[T];\n            }\n            displayField[T] = f;\n\n            var tabField = document.getElementById('id_tr_' + T + '.' + displayField[T]);\n            if (tabField) {\n                // Set new display field class\n                tabField.className = newDisplayFieldClass;\n            }\n        }\n        onDisplayField = 0;\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n\n        var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n        $.post('index.php?route=/database/designer',\n            {\n                'operation': 'setDisplayField',\n                'ajax_request': true,\n                'server': server,\n                'db': db,\n                'table': T,\n                'field': fieldNameToSend\n            },\n            function (data) {\n                if (data.success === false) {\n                    Functions.ajaxShowMessage(data.error, false);\n                } else {\n                    Functions.ajaxRemoveMessage($msgbox);\n                    Functions.ajaxShowMessage(Messages.strModificationSaved);\n                }\n            });\n    }\n};\n\nDesignerMove.newRelation = function () {\n    document.getElementById('layer_new_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + server + argsep + 'db=' + db + argsep + 'db2=p';\n    linkRelation += argsep + 'on_delete=' + document.getElementById('on_delete').value + argsep + 'on_update=' + document.getElementById('on_update').value;\n    linkRelation += argsep + 'operation=addNewRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(selectedPage);\n        }\n    }); // end $.post()\n};\n\n// -------------------------- create tables -------------------------------------\nDesignerMove.startTableNew = function () {\n    CommonParams.set('table', '');\n    CommonActions.refreshMain('index.php?route=/table/create');\n};\n\nDesignerMove.startTabUpd = function (db, table) {\n    CommonParams.set('db', db);\n    CommonParams.set('table', table);\n    CommonActions.refreshMain('index.php?route=/table/structure');\n};\n\n// --------------------------- hide tables --------------------------------------\n// max/min all tables\nDesignerMove.smallTabAll = function (idThis) {\n    var icon = idThis.children[0];\n    var valueSent = '';\n\n    if (icon.alt === 'v') {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() === 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = '>';\n        icon.src = icon.dataset.right;\n        valueSent = 'v';\n    } else {\n        $('.designer_tab .small_tab,.small_tab2').each(function (index, element) {\n            if ($(element).text() !== 'v') {\n                DesignerMove.smallTab($(element).attr('table_name'), 0);\n            }\n        });\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n        valueSent = '>';\n    }\n    DesignerMove.saveValueInConfig('small_big_all', valueSent);\n    $('#key_SB_all').toggleClass('M_butt_Selected_down');\n    $('#key_SB_all').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\n// invert max/min all tables\nDesignerMove.smallTabInvert = function () {\n    for (var key in jTabs) {\n        DesignerMove.smallTab(key, 0);\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.relationLinesInvert = function () {\n    showRelationLines = ! showRelationLines;\n    DesignerMove.saveValueInConfig('relation_lines', showRelationLines);\n    $('#relLineInvert').toggleClass('M_butt_Selected_down');\n    $('#relLineInvert').toggleClass('M_butt');\n    DesignerMove.reload();\n};\n\nDesignerMove.smallTabRefresh = function () {\n    for (var key in jTabs) {\n        if (document.getElementById('id_hide_tbody_' + key).innerHTML !== 'v') {\n            DesignerMove.smallTab(key, 0);\n        }\n    }\n};\n\nDesignerMove.smallTab = function (t, reload) {\n    var id      = document.getElementById('id_tbody_' + t);\n    var idThis = document.getElementById('id_hide_tbody_' + t);\n    if (idThis.innerHTML === 'v') {\n        // ---CROSS\n        id.style.display = 'none';\n        idThis.innerHTML = '>';\n    } else {\n        id.style.display = '';\n        idThis.innerHTML = 'v';\n    }\n    if (reload) {\n        DesignerMove.reload();\n    }\n};\n\nDesignerMove.selectTab = function (t) {\n    var idZag = document.getElementById('id_zag_' + t);\n    if (idZag.className !== 'tab_zag_3') {\n        document.getElementById('id_zag_' + t).className = 'tab_zag_2';\n    } else {\n        document.getElementById('id_zag_' + t).className = 'tab_zag';\n    }\n    // ----------\n    var idT = document.getElementById(t);\n    window.scrollTo(parseInt(idT.style.left, 10) - 300, parseInt(idT.style.top, 10) - 300);\n    setTimeout(\n        function () {\n            document.getElementById('id_zag_' + t).className = 'tab_zag';\n        },\n        800\n    );\n};\n\nDesignerMove.canvasClick = function (id, event) {\n    var n = 0;\n    var selected = 0;\n    var a = [];\n    var Key0;\n    var Key1;\n    var Key2;\n    var Key3;\n    var Key;\n    var x1;\n    var x2;\n    var K;\n    var key;\n    var key2;\n    var key3;\n    // eslint-disable-next-line compat/compat\n    var localX = isIe ? event.clientX + document.body.scrollLeft : event.pageX;\n    // eslint-disable-next-line compat/compat\n    var localY = isIe ? event.clientY + document.body.scrollTop : event.pageY;\n    localX -= $('#osn_tab').offset().left;\n    localY -= $('#osn_tab').offset().top;\n    DesignerMove.clear();\n    var osnTab = document.getElementById('osn_tab');\n    for (K in contr) {\n        for (key in contr[K]) {\n            for (key2 in contr[K][key]) {\n                for (key3 in contr[K][key][key2]) {\n                    if (! document.getElementById('check_vis_' + key2).checked ||\n                        ! document.getElementById('check_vis_' + contr[K][key][key2][key3][0]).checked) {\n                        continue; // if hide\n                    }\n                    var x1Left  = document.getElementById(key2).offsetLeft + 1;// document.getElementById(key2+\".\"+key3).offsetLeft;\n                    var x1Right = x1Left + document.getElementById(key2).offsetWidth;\n                    var x2Left  = document.getElementById(contr[K][key][key2][key3][0]).offsetLeft;// +document.getElementById(contr[K][key2][key3][0]+\".\"+contr[K][key2][key3][1]).offsetLeft\n                    var x2Right = x2Left + document.getElementById(contr[K][key][key2][key3][0]).offsetWidth;\n                    a[0] = Math.abs(x1Left - x2Left);\n                    a[1] = Math.abs(x1Left - x2Right);\n                    a[2] = Math.abs(x1Right - x2Left);\n                    a[3] = Math.abs(x1Right - x2Right);\n                    n = sLeft = sRight = 0;\n                    for (var i = 1; i < 4; i++) {\n                        if (a[n] > a[i]) {\n                            n = i;\n                        }\n                    }\n                    if (n === 1) {\n                        x1 = x1Left - smS;\n                        x2 = x2Right + smS;\n                        if (x1 < x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 2) {\n                        x1 = x1Right + smS;\n                        x2 = x2Left - smS;\n                        if (x1 > x2) {\n                            n = 0;\n                        }\n                    }\n                    if (n === 3) {\n                        x1 = x1Right + smS;\n                        x2 = x2Right + smS;\n                        sRight = 1;\n                    }\n                    if (n === 0) {\n                        x1 = x1Left - smS;\n                        x2 = x2Left - smS;\n                        sLeft    = 1;\n                    }\n\n                    var y1 = document.getElementById(key2).offsetTop + document.getElementById(key2 + '.' + key3).offsetTop + heightField;\n                    var y2 = document.getElementById(contr[K][key][key2][key3][0]).offsetTop +\n                                     document.getElementById(contr[K][key][key2][key3][0] + '.' + contr[K][key][key2][key3][1]).offsetTop + heightField;\n\n                    if (!selected && localX > x1 - 10 && localX < x1 + 10 && localY > y1 - 7 && localY < y1 + 7) {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab, 'rgba(255,0,0,1)'\n                        );\n\n                        selected = 1;\n                        Key0 = contr[K][key][key2][key3][0];\n                        Key1 = contr[K][key][key2][key3][1];\n                        Key2 = key2;\n                        Key3 = key3;\n                        Key = K;\n                    } else {\n                        DesignerMove.drawLine0(\n                            x1, x2, y1, y2, osnTab,\n                            contr[K][key][key2][key3][0] + '.' + contr[K][key][key2][key3][1]\n                        );\n                    }\n                }\n            }\n        }\n    }\n    if (selected) {\n        // select relations\n        var left = globX - (document.getElementById('layer_upd_relation').offsetWidth >> 1);\n        document.getElementById('layer_upd_relation').style.left = left + 'px';\n        var top = globY - document.getElementById('layer_upd_relation').offsetHeight - 10;\n        document.getElementById('layer_upd_relation').style.top = top + 'px';\n        document.getElementById('layer_upd_relation').style.display = 'block';\n        var argsep = CommonParams.get('arg_separator');\n        linkRelation = 'T1=' + Key0 + argsep + 'F1=' + Key1 + argsep + 'T2=' + Key2 + argsep + 'F2=' + Key3 + argsep + 'K=' + Key;\n    }\n};\n\nDesignerMove.updRelation = function () {\n    document.getElementById('layer_upd_relation').style.display = 'none';\n    var argsep = CommonParams.get('arg_separator');\n    linkRelation += argsep + 'server=' + server + argsep + 'db=' + db;\n    linkRelation += argsep + 'operation=removeRelation' + argsep + 'ajax_request=true';\n\n    var $msgbox = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n    $.post('index.php?route=/database/designer', linkRelation, function (data) {\n        if (data.success === false) {\n            Functions.ajaxShowMessage(data.error, false);\n        } else {\n            Functions.ajaxRemoveMessage($msgbox);\n            Functions.ajaxShowMessage(data.message);\n            DesignerMove.loadPage(selectedPage);\n        }\n    }); // end $.post()\n};\n\nDesignerMove.visibleTab = function (id, tN) {\n    if (id.checked) {\n        document.getElementById(tN).style.display = 'block';\n    } else {\n        document.getElementById(tN).style.display = 'none';\n    }\n    DesignerMove.reload();\n    DesignerMove.markUnsaved();\n};\n\n// max/min all tables\nDesignerMove.hideTabAll = function (idThis) {\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (idThis.alt === 'v') {\n                E.elements[i].checked = true;\n                document.getElementById(E.elements[i].value).style.display = '';\n            } else {\n                E.elements[i].checked = false;\n                document.getElementById(E.elements[i].value).style.display = 'none';\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.inArrayK = function (x, m) {\n    var b = 0;\n    for (var u in m) {\n        if (x === u) {\n            b = 1;\n            break;\n        }\n    }\n    return b;\n};\n\nDesignerMove.noHaveConstr = function (idThis) {\n    var a = [];\n    var K;\n    var key;\n    var key2;\n    var key3;\n    for (K in contr) {\n        for (key in contr[K]) {\n            // contr name\n            for (key2 in contr[K][key]) {\n                // table name\n                for (key3 in contr[K][key][key2]) {\n                    // field name\n                    a[key2] = a[contr[K][key][key2][key3][0]] = 1; // exist constr\n                }\n            }\n        }\n    }\n\n    if (idThis.alt === 'v') {\n        idThis.alt = '>';\n        idThis.src = idThis.dataset.right;\n    } else {\n        idThis.alt = 'v';\n        idThis.src = idThis.dataset.down;\n    }\n    var E = document.getElementById('container-form');\n    var EelementsLength = E.elements.length;\n    for (var i = 0; i < EelementsLength; i++) {\n        if (E.elements[i].type === 'checkbox' && E.elements[i].id.startsWith('check_vis_')) {\n            if (!DesignerMove.inArrayK(E.elements[i].value, a)) {\n                if (idThis.alt === 'v') {\n                    E.elements[i].checked = true;\n                    document.getElementById(E.elements[i].value).style.display = '';\n                } else {\n                    E.elements[i].checked = false;\n                    document.getElementById(E.elements[i].value).style.display = 'none';\n                }\n            }\n        }\n    }\n};\n\nDesignerMove.generalScroll = function () {\n    // if (timeoutId)\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(\n        function () {\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.left = document.body.scrollLeft + 'px';\n            // eslint-disable-next-line compat/compat\n            document.getElementById('top_menu').style.top  = document.body.scrollTop + 'px';\n        },\n        200\n    );\n};\n\n// max/min all tables\nDesignerMove.showLeftMenu = function (idThis) {\n    var icon = idThis.children[0];\n    $('#key_Show_left_menu').toggleClass('M_butt_Selected_down');\n    if (icon.alt === 'v') {\n        document.getElementById('layer_menu').style.top = '0px';\n        document.getElementById('layer_menu').style.display = 'block';\n        icon.alt = '>';\n        icon.src = icon.dataset.up;\n        if (isIe) {\n            DesignerMove.generalScroll();\n        }\n    } else {\n        document.getElementById('layer_menu').style.top = -1000 + 'px'; // fast scroll\n        document.getElementById('layer_menu').style.display = 'none';\n        icon.alt = 'v';\n        icon.src = icon.dataset.down;\n    }\n};\n\nDesignerMove.sideMenuRight = function (idThis) {\n    $('#side_menu').toggleClass('right');\n    $('#layer_menu').toggleClass('float-start');\n    var moveMenuIcon = $(idThis.getElementsByTagName('img')[0]);\n    var resizeIcon = $('#layer_menu_sizer > img')\n        .toggleClass('float-start')\n        .toggleClass('float-end');\n\n    var srcResizeIcon = resizeIcon.attr('src');\n    resizeIcon.attr('src', resizeIcon.attr('data-right'));\n    resizeIcon.attr('data-right', srcResizeIcon);\n\n    var srcMoveIcon = moveMenuIcon.attr('src');\n    moveMenuIcon.attr('src', moveMenuIcon.attr('data-right'));\n    moveMenuIcon.attr('data-right', srcMoveIcon);\n\n    menuMoved = !menuMoved;\n    DesignerMove.saveValueInConfig('side_menu', $('#side_menu').hasClass('right'));\n    $('#key_Left_Right').toggleClass('M_butt_Selected_down');\n    $('#key_Left_Right').toggleClass('M_butt');\n};\n\nDesignerMove.showText = function () {\n    $('#side_menu').find('.hidable').show();\n};\n\nDesignerMove.hideText = function () {\n    if (!alwaysShowText) {\n        $('#side_menu').find('.hidable').hide();\n    }\n};\n\nDesignerMove.pinText = function () {\n    alwaysShowText = !alwaysShowText;\n    $('#pin_Text').toggleClass('M_butt_Selected_down');\n    $('#pin_Text').toggleClass('M_butt');\n    DesignerMove.saveValueInConfig('pin_text', alwaysShowText);\n};\n\nDesignerMove.startDisplayField = function () {\n    if (onRelation) {\n        return;\n    }\n    if (!onDisplayField) {\n        onDisplayField = 1;\n        document.getElementById('designer_hint').innerHTML = Messages.strChangeDisplay;\n        document.getElementById('designer_hint').style.display = 'block';\n        document.getElementById('display_field_button').className = 'M_butt_Selected_down';// '#FFEE99';gray #AAAAAA\n\n        if (isIe) { // correct for IE\n            document.getElementById('display_field_button').className = 'M_butt_Selected_down_IE';\n        }\n    } else {\n        document.getElementById('designer_hint').innerHTML = '';\n        document.getElementById('designer_hint').style.display = 'none';\n        document.getElementById('display_field_button').className = 'M_butt';\n        onDisplayField = 0;\n    }\n};\n\nvar TargetColors = [];\n\nDesignerMove.getColorByTarget = function (target) {\n    var color = '';  // \"rgba(0,100,150,1)\";\n\n    for (var targetColor in TargetColors) {\n        if (TargetColors[targetColor][0] === target) {\n            color = TargetColors[targetColor][1];\n            break;\n        }\n    }\n\n    if (color.length === 0) {\n        var i = TargetColors.length + 1;\n        var d = i % 6;\n        var j = (i - d) / 6;\n        j = j % 4;\n        j++;\n        var colorCase = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1],\n            [1, 1, 0],\n            [1, 0, 1],\n            [0, 1, 1]\n        ];\n        var a = colorCase[d][0];\n        var b = colorCase[d][1];\n        var c = colorCase[d][2];\n        var e = (1 - (j - 1) / 6);\n\n        var r = Math.round(a * 200 * e);\n        var g = Math.round(b * 200 * e);\n        b = Math.round(c * 200 * e);\n        color = 'rgba(' + r + ',' + g + ',' + b + ',1)';\n\n        TargetColors.push([target, color]);\n    }\n\n    return color;\n};\n\nDesignerMove.clickOption = function (dbName, tableName, columnName, tableDbNameUrl, optionColNameString) {\n    var designerOptions = document.getElementById('designer_optionse');\n    var left = globX - (designerOptions.offsetWidth >> 1);\n    designerOptions.style.left = left + 'px';\n    // var top = Glob_Y - designerOptions.offsetHeight - 10;\n    designerOptions.style.top  = (screen.height / 4) + 'px';\n    designerOptions.style.display = 'block';\n    document.getElementById('ok_add_object_db_and_table_name_url').value = tableDbNameUrl;\n    document.getElementById('ok_add_object_db_name').value = dbName;\n    document.getElementById('ok_add_object_table_name').value = tableName;\n    document.getElementById('ok_add_object_col_name').value = columnName;\n    document.getElementById('option_col_name').innerHTML = optionColNameString;\n};\n\nDesignerMove.closeOption = function () {\n    document.getElementById('designer_optionse').style.display = 'none';\n    document.getElementById('rel_opt').value = '--';\n    document.getElementById('Query').value = '';\n    document.getElementById('new_name').value = '';\n    document.getElementById('operator').value = '---';\n    document.getElementById('groupby').checked = false;\n    document.getElementById('h_rel_opt').value = '--';\n    document.getElementById('h_operator').value = '---';\n    document.getElementById('having').value = '';\n    document.getElementById('orderby').value = '---';\n};\n\nDesignerMove.selectAll = function (tableName, dbName, idSelectAll) {\n    var parentIsChecked = $('#' + idSelectAll).is(':checked');\n    var checkboxAll = $('#container-form input[id_check_all=\\'' + idSelectAll + '\\']:checkbox');\n\n    checkboxAll.each(function () {\n        // already checked and then check parent\n        if (parentIsChecked === true && this.checked) {\n            // was checked, removing column from selected fields\n            // trigger unchecked event\n            this.click();\n        }\n        this.checked = parentIsChecked;\n        this.disabled = parentIsChecked;\n    });\n    if (parentIsChecked) {\n        selectField.push('`' + tableName + '`.*');\n        fromArray.push(tableName);\n    } else {\n        var i;\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === ('`' + tableName + '`.*')) {\n                selectField.splice(i, 1);\n            }\n        }\n        var k;\n        for (k = 0; k < fromArray.length; k++) {\n            if (fromArray[k] === tableName) {\n                fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n    DesignerMove.reload();\n};\n\nDesignerMove.tableOnOver = function (idThis, val, buil) {\n    var builLocal = parseInt(buil);\n    if (!val) {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag_2';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag_2';\n        }\n    } else {\n        document.getElementById('id_zag_' + idThis).className = 'tab_zag';\n        if (builLocal) {\n            document.getElementById('id_zag_' + idThis + '_2').className = 'tab_zag';\n        }\n    }\n};\n\n/**\n * This function stores selected column information in selectField[]\n * In case column is checked it add else it deletes\n *\n * @param {string} tableName\n * @param {string} colName\n * @param {string} checkboxId\n */\nDesignerMove.storeColumn = function (tableName, colName, checkboxId) {\n    var i;\n    var k;\n    var selectKeyField = '`' + tableName + '`.`' + colName + '`';\n    if (document.getElementById(checkboxId).checked === true) {\n        selectField.push(selectKeyField);\n        fromArray.push(tableName);\n    } else {\n        for (i = 0; i < selectField.length; i++) {\n            if (selectField[i] === selectKeyField) {\n                selectField.splice(i, 1);\n                break;\n            }\n        }\n        for (k = 0; k < fromArray.length; k++) {\n            if (fromArray[k] === tableName) {\n                fromArray.splice(k, 1);\n                break;\n            }\n        }\n    }\n};\n\n/**\n * This function builds object and adds them to historyArray\n * first it does a few checks on each object, then makes an object(where,rename,groupby,aggregate,orderby)\n * then a new history object is made and finally all these history objects are added to historyArray[]\n *\n * @param {string} dbName\n * @param {string} tableName\n * @param {string} colName\n * @param {string} dbTableNameUrl\n */\nDesignerMove.addObject = function (dbName, tableName, colName, dbTableNameUrl) {\n    var p;\n    var whereObj;\n    var rel = document.getElementById('rel_opt');\n    var sum = 0;\n    var init = historyArray.length;\n    if (rel.value !== '--') {\n        if (document.getElementById('Query').value === '') {\n            Functions.ajaxShowMessage(Functions.sprintf(Messages.strQueryEmpty));\n            return;\n        }\n        p = document.getElementById('Query');\n        whereObj = new DesignerHistory.Where(rel.value, p.value);// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, hTabs[dbTableNameUrl], 'Where'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('new_name').value !== '') {\n        var renameObj = new DesignerHistory.Rename(document.getElementById('new_name').value);// make Rename object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, renameObj, tableName, hTabs[dbTableNameUrl], 'Rename'));\n        sum = sum + 1;\n    }\n    if (document.getElementById('operator').value !== '---') {\n        var aggregateObj = new DesignerHistory.Aggregate(document.getElementById('operator').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, aggregateObj, tableName, hTabs[dbTableNameUrl], 'Aggregate'));\n        sum = sum + 1;\n        // make aggregate operator\n    }\n    if (document.getElementById('groupby').checked === true) {\n        historyArray.push(new DesignerHistory.HistoryObj(colName, 'GroupBy', tableName, hTabs[dbTableNameUrl], 'GroupBy'));\n        sum = sum + 1;\n        // make groupby\n    }\n    if (document.getElementById('h_rel_opt').value !== '--') {\n        if (document.getElementById('having').value === '') {\n            return;\n        }\n        whereObj = new DesignerHistory.Having(\n            document.getElementById('h_rel_opt').value,\n            document.getElementById('having').value,\n            document.getElementById('h_operator').value\n        );// make where object\n        historyArray.push(new DesignerHistory.HistoryObj(colName, whereObj, tableName, hTabs[dbTableNameUrl], 'Having'));\n        sum = sum + 1;\n        // make having\n    }\n    if (document.getElementById('orderby').value !== '---') {\n        var orderByObj = new DesignerHistory.OrderBy(document.getElementById('orderby').value);\n        historyArray.push(new DesignerHistory.HistoryObj(colName, orderByObj, tableName, hTabs[dbTableNameUrl], 'OrderBy'));\n        sum = sum + 1;\n        // make orderby\n    }\n    Functions.ajaxShowMessage(Functions.sprintf(Messages.strObjectsCreated, sum));\n    // output sum new objects created\n    var existingDiv = document.getElementById('ab');\n    existingDiv.innerHTML = DesignerHistory.display(init, historyArray.length);\n    DesignerMove.closeOption();\n    $('#ab').accordion('refresh');\n};\n\nDesignerMove.enablePageContentEvents = function () {\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousemove');\n    $('#page_content').on('mousedown', function (e) {\n        DesignerMove.mouseDown(e);\n    });\n    $('#page_content').on('mouseup', function (e) {\n        DesignerMove.mouseUp(e);\n    });\n    $('#page_content').on('mousemove', function (e) {\n        DesignerMove.mouseMove(e);\n    });\n};\n\n/**\n * This function enables the events on table items.\n * It helps to enable them on page loading and when a table is added on the fly.\n * @param {number} index\n * @param {object} element\n */\nDesignerMove.enableTableEvents = function (index, element) {\n    $(element).on('click', '.select_all_1', function () {\n        DesignerMove.selectAll($(this).attr('table_name'), $(this).attr('db_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab,.small_tab2', function () {\n        DesignerMove.smallTab($(this).attr('table_name'), 1);\n    });\n    $(element).on('click', '.small_tab_pref_1', function () {\n        DesignerMove.startTabUpd($(this).attr('db_url'), $(this).attr('table_name_url'));\n    });\n    $(element).on('click', '.select_all_store_col', function () {\n        DesignerMove.storeColumn($(this).attr('table_name'), $(this).attr('col_name'), $(this).attr('id'));\n    });\n    $(element).on('click', '.small_tab_pref_click_opt', function () {\n        DesignerMove.clickOption(\n            $(this).attr('db_name'),\n            $(this).attr('table_name'),\n            $(this).attr('col_name'),\n            $(this).attr('db_table_name_url'),\n            $(this).attr('option_col_name_modal')\n        );\n    });\n    $(element).on('click', '.tab_field_2,.tab_field_3,.tab_field', function () {\n        var params = ($(this).attr('click_field_param')).split(',');\n        DesignerMove.clickField(params[3], params[0], params[1], params[2]);\n    });\n\n    $(element).find('.tab_zag_noquery').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_noquery').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, $(this).attr('query_set'));\n    });\n    $(element).find('.tab_zag_query').on('mouseover', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),0, 1);\n    });\n    $(element).find('.tab_zag_query').on('mouseout', function () {\n        DesignerMove.tableOnOver($(this).attr('table_name'),1, 1);\n    });\n\n    DesignerMove.enablePageContentEvents();\n};\n\nAJAX.registerTeardown('designer/move.js', function () {\n    $('#side_menu').off('mouseenter mouseleave');\n    $('#key_Show_left_menu').off('click');\n    $('#toggleFullscreen').off('click');\n    $('#newPage').off('click');\n    $('#editPage').off('click');\n    $('#savePos').off('click');\n    $('#SaveAs').off('click');\n    $('#delPages').off('click');\n    $('#StartTableNew').off('click');\n    $('#rel_button').off('click');\n    $('#StartTableNew').off('click');\n    $('#display_field_button').off('click');\n    $('#reloadPage').off('click');\n    $('#angular_direct_button').off('click');\n    $('#grid_button').off('click');\n    $('#key_SB_all').off('click');\n    $('#SmallTabInvert').off('click');\n    $('#relLineInvert').off('click');\n    $('#exportPages').off('click');\n    $('#query_builder').off('click');\n    $('#key_Left_Right').off('click');\n    $('#pin_Text').off('click');\n    $('#canvas').off('click');\n    $('#key_HS_all').off('click');\n    $('#key_HS').off('click');\n    $('.scroll_tab_struct').off('click');\n    $('.scroll_tab_checkbox').off('click');\n    $('#id_scroll_tab').find('tr').off('click', '.designer_Tabs2,.designer_Tabs');\n    $('.designer_tab').off('click', '.select_all_1');\n    $('.designer_tab').off('click', '.small_tab,.small_tab2');\n    $('.designer_tab').off('click', '.small_tab_pref_1');\n    $('.tab_zag_noquery').off('mouseover');\n    $('.tab_zag_noquery').off('mouseout');\n    $('.tab_zag_query').off('mouseover');\n    $('.tab_zag_query').off('mouseout');\n    $('.designer_tab').off('click','.tab_field_2,.tab_field_3,.tab_field');\n    $('.designer_tab').off('click', '.select_all_store_col');\n    $('.designer_tab').off('click', '.small_tab_pref_click_opt');\n    $('#del_button').off('click');\n    $('#cancel_button').off('click');\n    $('#ok_add_object').off('click');\n    $('#cancel_close_option').off('click');\n    $('#ok_new_rel_panel').off('click');\n    $('#cancel_new_rel_panel').off('click');\n    $('#page_content').off('mouseup');\n    $('#page_content').off('mousedown');\n    $('#page_content').off('mousemove');\n});\n\nAJAX.registerOnload('designer/move.js', function () {\n    $('#key_Show_left_menu').on('click', function () {\n        DesignerMove.showLeftMenu(this);\n        return false;\n    });\n    $('#toggleFullscreen').on('click', function () {\n        DesignerMove.toggleFullscreen();\n        return false;\n    });\n    $('#addOtherDbTables').on('click', function () {\n        DesignerMove.addOtherDbTables();\n        return false;\n    });\n    $('#newPage').on('click', function () {\n        DesignerMove.new();\n        return false;\n    });\n    $('#editPage').on('click', function () {\n        DesignerMove.editPages();\n        return false;\n    });\n    $('#savePos').on('click', function () {\n        DesignerMove.save3();\n        return false;\n    });\n    $('#SaveAs').on('click', function () {\n        DesignerMove.saveAs();\n        $(document).on('ajaxStop', function () {\n            $('#selected_value').on('click', function () {\n                $('#savePageNewRadio').prop('checked', true);\n            });\n        });\n        return false;\n    });\n    $('#delPages').on('click', function () {\n        DesignerMove.deletePages();\n        return false;\n    });\n    $('#StartTableNew').on('click', function () {\n        DesignerMove.startTableNew();\n        return false;\n    });\n    $('#rel_button').on('click', function () {\n        DesignerMove.startRelation();\n        return false;\n    });\n    $('#display_field_button').on('click', function () {\n        DesignerMove.startDisplayField();\n        return false;\n    });\n    $('#reloadPage').on('click', function () {\n        DesignerMove.loadPage(selectedPage);\n    });\n    $('#angular_direct_button').on('click', function () {\n        DesignerMove.angularDirect();\n        return false;\n    });\n    $('#grid_button').on('click', function () {\n        DesignerMove.grid();\n        return false;\n    });\n    $('#key_SB_all').on('click', function () {\n        DesignerMove.smallTabAll(this);\n        return false;\n    });\n    $('#SmallTabInvert').on('click', function () {\n        DesignerMove.smallTabInvert();\n        return false;\n    });\n    $('#relLineInvert').on('click', function () {\n        DesignerMove.relationLinesInvert();\n        return false;\n    });\n    $('#exportPages').on('click', function () {\n        DesignerMove.exportPages();\n        return false;\n    });\n    $('#query_builder').on('click', function () {\n        DesignerHistory.buildQuery('SQL Query on Database', 0);\n    });\n    $('#key_Left_Right').on('click', function () {\n        DesignerMove.sideMenuRight(this);\n        return false;\n    });\n    $('#side_menu').on('mouseenter', function () {\n        DesignerMove.showText();\n        return false;\n    });\n    $('#side_menu').on('mouseleave', function () {\n        DesignerMove.hideText();\n        return false;\n    });\n    $('#pin_Text').on('click', function () {\n        DesignerMove.pinText(this);\n        return false;\n    });\n    $('#canvas').on('click', function (event) {\n        DesignerMove.canvasClick(this, event);\n    });\n    $('#key_HS_all').on('click', function () {\n        DesignerMove.hideTabAll(this);\n        return false;\n    });\n    $('#key_HS').on('click', function () {\n        DesignerMove.noHaveConstr(this);\n        return false;\n    });\n\n    $('.designer_tab').each(DesignerMove.enableTableEvents);\n    $('.designer_tab').each(DesignerMove.addTableToTablesList);\n\n    $('input#del_button').on('click', function () {\n        DesignerMove.updRelation();\n    });\n    $('input#cancel_button').on('click', function () {\n        document.getElementById('layer_upd_relation').style.display = 'none';\n        DesignerMove.reload();\n    });\n    $('input#ok_add_object').on('click', function () {\n        DesignerMove.addObject(\n            $('#ok_add_object_db_name').val(),\n            $('#ok_add_object_table_name').val(),\n            $('#ok_add_object_col_name').val(),\n            $('#ok_add_object_db_and_table_name_url').val()\n        );\n    });\n    $('input#cancel_close_option').on('click', function () {\n        DesignerMove.closeOption();\n    });\n    $('input#ok_new_rel_panel').on('click', function () {\n        DesignerMove.newRelation();\n    });\n    $('input#cancel_new_rel_panel').on('click', function () {\n        document.getElementById('layer_new_relation').style.display = 'none';\n    });\n    DesignerMove.enablePageContentEvents();\n});\n"],"names":["DesignerMove","change","showRelationLines","alwaysShowText","AJAX","registerTeardown","$","document","off","show","registerOnload","$content","$img","find","$span","siblings","css","on","fullscreenElement","removeClass","attr","data","text","valueSent","saveValueInConfig","hide","markSaved","markUnsaved","mainDirection","directionEffect","curClick","smS","smAdd","sLeft","sRight","onRelation","onGrid","onDisplayField","onAngularDirect","clickField","linkRelation","canvasWidth","canvasHeight","osnTabWidth","osnTabHeight","heightField","globX","globY","timeoutId","layerMenuCurClick","fromArray","menuMoved","gridSize","isIe","all","window","opera","onscroll","generalScroll","onselectstart","mouseDown","e","clientX","body","scrollLeft","pageX","clientY","scrollTop","pageY","target","tagName","parentNode","className","id","getElementById","style","display","zIndex","mouseMove","preventDefault","newDx","newDy","deltaX","deltaY","$curClick","curX","parseFloat","curY","newX","newY","parseInt","$layerMenu","newWidth","width","left","top","mouseUp","reload","canvasPos","height","osnTabPos","setDefaultValuesFromSavedState","angularDirect","grid","$relLineInvert","relationLinesInvert","showText","$keySbAll","trigger","toggleClass","$keyLeftRight","main","smallTabRefresh","resizeOsnTab","maxX","maxY","key","jTabs","kX","offsetWidth","kY","offsetHeight","drawLine0","x1","x2","y1","y2","osnTab","colorTarget","line0","offsetLeft","offsetTop","getColorByTarget","n","a","K","key2","key3","clear","contr","checked","x1Left","x1Right","x2Left","x2Right","Math","abs","i","rowOffsetTop","tabHideButton","innerHTML","fromColumn","toColumn","line","colorLine","canvas","ctx","getContext","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","circle","rect","line2","line3","x1Local","x2Local","xS","x","y","r","w","color","arc","PI","clearRect","h","fillStyle","fillRect","toggleFullscreen","pageContent","addClass","screen","requestFullscreen","exitFullscreen","addTableToTablesList","index","tableDom","db","table","dbEncoded","tableEncoded","tableIsChecked","checkboxStatus","Messages","strHide","strShow","$newTableLine","strStructure","themeImagePath","html","first","append","startTabUpd","selectTab","currentvalue","visibleTab","val","$tablesCounter","displayModal","form","heading","type","modal","addOtherDbTables","$selectDb","strNone","$selectTable","post","CommonParams","get","message","each","innerText","$form","strAddTables","$table","encodeURIComponent","length","Functions","ajaxShowMessage","sprintf","strTableAlreadyExists","undefined","$newTableDom","remove","enableTableEvents","dbName","sqlQuery","rows","new","promptToSaveCurrentPage","loadPage","save","url","value","action","getUrlPos","forceString","designerTablesEnabled","poststr","argsep","coords","tbCoords","DesignerObjects","TableCoordinate","push","save2","callback","server","selectedPage","$msgbox","strProcessingRequest","success","error","ajaxRemoveMessage","strModificationSaved","name","trim","DesignerPage","saveToSelectedPage","submitSaveDialogAndClose","strEnterValidPageName","prepareForAjaxRequest","serialize","saveToNewPage","page","pgNr","pageDescr","save3","strPageName","strSavePage","editPages","createPageList","options","strOpenPage","selected","strSelectPage","deletePages","strDeletePage","$messageBox","deletingCurrentPage","strSuccessfulPageDelete","deletePage","saveAs","strSavePageAs","selectedValue","$selectedPage","choice","selectedPageId","strLeavingPage","exportPages","substring","split","pair","input","$formatDropDown","format","strExportRelationalSchema","paramPage","appendTo","showTablesInLandingPage","loadHtmlForPage","showNewPageTables","indexSent","startRelation","strSelectReferencedKey","T","f","pk","pkLocal","alert","strPleaseSelectPrimaryOrUniqueKey","strSelectForeignKey","fieldNameToSend","decodeURIComponent","newDisplayFieldClass","oldTabField","displayField","tabField","newRelation","startTableNew","set","CommonActions","refreshMain","smallTabAll","idThis","icon","children","alt","element","smallTab","src","dataset","right","down","smallTabInvert","t","idZag","idT","scrollTo","setTimeout","canvasClick","event","Key0","Key1","Key2","Key3","Key","localX","localY","offset","updRelation","tN","hideTabAll","E","EelementsLength","elements","startsWith","inArrayK","m","b","u","noHaveConstr","clearTimeout","showLeftMenu","up","sideMenuRight","moveMenuIcon","getElementsByTagName","resizeIcon","srcResizeIcon","srcMoveIcon","hasClass","hideText","pinText","startDisplayField","strChangeDisplay","TargetColors","targetColor","d","j","colorCase","c","round","g","clickOption","tableName","columnName","tableDbNameUrl","optionColNameString","designerOptions","closeOption","selectAll","idSelectAll","parentIsChecked","is","checkboxAll","click","disabled","selectField","splice","k","tableOnOver","buil","builLocal","storeColumn","colName","checkboxId","selectKeyField","addObject","dbTableNameUrl","p","whereObj","rel","sum","init","historyArray","strQueryEmpty","DesignerHistory","Where","HistoryObj","hTabs","renameObj","Rename","aggregateObj","Aggregate","Having","orderByObj","OrderBy","strObjectsCreated","existingDiv","accordion","enablePageContentEvents","params","prop","buildQuery"],"sourceRoot":""}