{"version":3,"file":"import.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/import.js"],"sourcesContent":["/**\n * Functions used in the import tab\n *\n */\n\n\n/**\n * Toggles the hiding and showing of each plugin's options\n * according to the currently selected plugin from the dropdown list\n */\nfunction changePluginOpts () {\n    $('#format_specific_opts').find('div.format_specific_options').each(function () {\n        $(this).hide();\n    });\n    var selectedPluginName = $('#plugins').find('option:selected').val();\n    $('#' + selectedPluginName + '_options').fadeIn('slow');\n\n    const importNotification = document.getElementById('import_notification');\n    importNotification.innerText = '';\n    if (selectedPluginName === 'csv') {\n        importNotification.innerHTML = '<div class=\"alert alert-info mb-0 mt-3\" role=\"alert\">' + Messages.strImportCSV + '</div>';\n    }\n}\n\n/**\n * Toggles the hiding and showing of each plugin's options and sets the selected value\n * in the plugin dropdown list according to the format of the selected file\n *\n * @param {string} fname\n */\nfunction matchFile (fname) {\n    var fnameArray = fname.toLowerCase().split('.');\n    var len = fnameArray.length;\n    if (len !== 0) {\n        var extension = fnameArray[len - 1];\n        if (extension === 'gz' || extension === 'bz2' || extension === 'zip') {\n            len--;\n        }\n        // Only toggle if the format of the file can be imported\n        if ($('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).length === 1) {\n            $('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).prop('selected', true);\n            changePluginOpts();\n        }\n    }\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('import.js', function () {\n    $('#plugins').off('change');\n    $('#input_import_file').off('change');\n    $('#select_local_import_file').off('change');\n    $('#input_import_file').off('change').off('focus');\n    $('#select_local_import_file').off('focus');\n    $('#text_csv_enclosed').add('#text_csv_escaped').off('keyup');\n});\n\nAJAX.registerOnload('import.js', function () {\n    // import_file_form validation.\n    $(document).on('submit', '#import_file_form', function () {\n        var radioLocalImport = $('#localFileTab');\n        var radioImport = $('#uploadFileTab');\n        var fileMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + Messages.strImportDialogMessage + '</div>';\n        var wrongTblNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + Messages.strTableNameDialogMessage + '</div>';\n        var wrongDBNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + Messages.strDBNameDialogMessage + '</div>';\n\n        if (radioLocalImport.length !== 0) {\n            // remote upload.\n\n            if (radioImport.hasClass('active') && $('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                Functions.ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n\n            if (radioLocalImport.hasClass('active')) {\n                if ($('#select_local_import_file').length === 0) {\n                    Functions.ajaxShowMessage('<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + Messages.strNoImportFile + ' </div>', false);\n                    return false;\n                }\n\n                if ($('#select_local_import_file').val() === '') {\n                    $('#select_local_import_file').trigger('focus');\n                    Functions.ajaxShowMessage(fileMsg, false);\n                    return false;\n                }\n            }\n        } else {\n            // local upload.\n            if ($('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                Functions.ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if ($('#text_csv_new_tbl_name').length > 0) {\n                var newTblName = $('#text_csv_new_tbl_name').val();\n                if (newTblName.length > 0 && newTblName.trim().length === 0) {\n                    Functions.ajaxShowMessage(wrongTblNameMsg, false);\n                    return false;\n                }\n            }\n            if ($('#text_csv_new_db_name').length > 0) {\n                var newDBName = $('#text_csv_new_db_name').val();\n                if (newDBName.length > 0 && newDBName.trim().length === 0) {\n                    Functions.ajaxShowMessage(wrongDBNameMsg, false);\n                    return false;\n                }\n            }\n        }\n\n        // show progress bar.\n        $('#upload_form_status').css('display', 'inline');\n        $('#upload_form_status_info').css('display', 'inline');\n    });\n\n    // Initially display the options for the selected plugin\n    changePluginOpts();\n\n    // Whenever the selected plugin changes, change the options displayed\n    $('#plugins').on('change', function () {\n        changePluginOpts();\n    });\n\n    $('#input_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    $('#select_local_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    /**\n     * Set up the interface for Javascript-enabled browsers since the default is for\n     *  Javascript-disabled browsers\n     */\n    $('#format_specific_opts').find('div.format_specific_options')\n        .find('h3')\n        .remove();\n    // $(\"form[name=import] *\").unwrap();\n\n    /**\n     * for input element text_csv_enclosed and text_csv_escaped allow just one character to enter.\n     * as mysql allows just one character for these fields,\n     * if first character is escape then allow two including escape character.\n     */\n    $('#text_csv_enclosed').add('#text_csv_escaped').on('keyup', function () {\n        if ($(this).val().length === 2 && $(this).val().charAt(0) !== '\\\\') {\n            $(this).val($(this).val().substring(0, 1));\n            return false;\n        }\n        return true;\n    });\n});\n"],"names":["changePluginOpts","$","find","each","hide","selectedPluginName","val","fadeIn","importNotification","document","getElementById","innerText","innerHTML","Messages","strImportCSV","matchFile","fname","fnameArray","toLowerCase","split","len","length","extension","filterByValue","prop","AJAX","registerTeardown","off","add","registerOnload","on","radioLocalImport","radioImport","fileMsg","strImportDialogMessage","wrongTblNameMsg","strTableNameDialogMessage","wrongDBNameMsg","strDBNameDialogMessage","hasClass","trigger","Functions","ajaxShowMessage","strNoImportFile","newTblName","trim","newDBName","css","remove","charAt","substring"],"sourceRoot":""}