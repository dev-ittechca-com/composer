{"version":3,"file":"import.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/import.js"],"sourcesContent":["/**\n * Functions used in the import tab\n *\n */\n\n\n/**\n * Toggles the hiding and showing of each plugin's options\n * according to the currently selected plugin from the dropdown list\n */\nfunction changePluginOpts () {\n    $('#format_specific_opts').find('div.format_specific_options').each(function () {\n        $(this).hide();\n    });\n    var selectedPluginName = $('#plugins').find('option:selected').val();\n    $('#' + selectedPluginName + '_options').fadeIn('slow');\n\n    const importNotification = document.getElementById('import_notification');\n    importNotification.innerText = '';\n    if (selectedPluginName === 'csv') {\n        importNotification.innerHTML = '<div class=\"alert alert-info mb-0 mt-3\" role=\"alert\">' + Messages.strImportCSV + '</div>';\n    }\n}\n\n/**\n * Toggles the hiding and showing of each plugin's options and sets the selected value\n * in the plugin dropdown list according to the format of the selected file\n *\n * @param {string} fname\n */\nfunction matchFile (fname) {\n    var fnameArray = fname.toLowerCase().split('.');\n    var len = fnameArray.length;\n    if (len !== 0) {\n        var extension = fnameArray[len - 1];\n        if (extension === 'gz' || extension === 'bz2' || extension === 'zip') {\n            len--;\n        }\n        // Only toggle if the format of the file can be imported\n        if ($('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).length === 1) {\n            $('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).prop('selected', true);\n            changePluginOpts();\n        }\n    }\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nwindow.AJAX.registerTeardown('import.js', function () {\n    $('#plugins').off('change');\n    $('#input_import_file').off('change');\n    $('#select_local_import_file').off('change');\n    $('#input_import_file').off('change').off('focus');\n    $('#select_local_import_file').off('focus');\n    $('#text_csv_enclosed').add('#text_csv_escaped').off('keyup');\n});\n\nwindow.AJAX.registerOnload('import.js', function () {\n    // import_file_form validation.\n    $(document).on('submit', '#import_file_form', function () {\n        var radioLocalImport = $('#localFileTab');\n        var radioImport = $('#uploadFileTab');\n        var fileMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + Messages.strImportDialogMessage + '</div>';\n        var wrongTblNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + Messages.strTableNameDialogMessage + '</div>';\n        var wrongDBNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + Messages.strDBNameDialogMessage + '</div>';\n\n        if (radioLocalImport.length !== 0) {\n            // remote upload.\n\n            if (radioImport.hasClass('active') && $('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                Functions.ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n\n            if (radioLocalImport.hasClass('active')) {\n                if ($('#select_local_import_file').length === 0) {\n                    Functions.ajaxShowMessage('<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + Messages.strNoImportFile + ' </div>', false);\n                    return false;\n                }\n\n                if ($('#select_local_import_file').val() === '') {\n                    $('#select_local_import_file').trigger('focus');\n                    Functions.ajaxShowMessage(fileMsg, false);\n                    return false;\n                }\n            }\n        } else {\n            // local upload.\n            if ($('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                Functions.ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if ($('#text_csv_new_tbl_name').length > 0) {\n                var newTblName = $('#text_csv_new_tbl_name').val();\n                if (newTblName.length > 0 && newTblName.trim().length === 0) {\n                    Functions.ajaxShowMessage(wrongTblNameMsg, false);\n                    return false;\n                }\n            }\n            if ($('#text_csv_new_db_name').length > 0) {\n                var newDBName = $('#text_csv_new_db_name').val();\n                if (newDBName.length > 0 && newDBName.trim().length === 0) {\n                    Functions.ajaxShowMessage(wrongDBNameMsg, false);\n                    return false;\n                }\n            }\n        }\n\n        // show progress bar.\n        $('#upload_form_status').css('display', 'inline');\n        $('#upload_form_status_info').css('display', 'inline');\n    });\n\n    // Initially display the options for the selected plugin\n    changePluginOpts();\n\n    // Whenever the selected plugin changes, change the options displayed\n    $('#plugins').on('change', function () {\n        changePluginOpts();\n    });\n\n    $('#input_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    $('#select_local_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    /**\n     * Set up the interface for Javascript-enabled browsers since the default is for\n     *  Javascript-disabled browsers\n     */\n    $('#format_specific_opts').find('div.format_specific_options')\n        .find('h3')\n        .remove();\n    // $(\"form[name=import] *\").unwrap();\n\n    /**\n     * for input element text_csv_enclosed and text_csv_escaped allow just one character to enter.\n     * as mysql allows just one character for these fields,\n     * if first character is escape then allow two including escape character.\n     */\n    $('#text_csv_enclosed').add('#text_csv_escaped').on('keyup', function () {\n        if ($(this).val().length === 2 && $(this).val().charAt(0) !== '\\\\') {\n            $(this).val($(this).val().substring(0, 1));\n            return false;\n        }\n        return true;\n    });\n});\n"],"names":["changePluginOpts","$","find","each","hide","selectedPluginName","val","fadeIn","importNotification","document","getElementById","innerText","innerHTML","Messages","strImportCSV","matchFile","fname","fnameArray","toLowerCase","split","len","length","extension","filterByValue","prop","window","AJAX","registerTeardown","off","add","registerOnload","on","radioLocalImport","radioImport","fileMsg","strImportDialogMessage","wrongTblNameMsg","strTableNameDialogMessage","wrongDBNameMsg","strDBNameDialogMessage","hasClass","trigger","Functions","ajaxShowMessage","strNoImportFile","newTblName","trim","newDBName","css","remove","charAt","substring"],"sourceRoot":""}