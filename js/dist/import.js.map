{"version":3,"file":"import.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/import.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { Functions } from './modules/functions.js';\nimport { Navigation } from './modules/navigation.js';\nimport { CommonParams } from './modules/common.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\n\n/* global themeImagePath */ // templates/javascript/variables.twig\n\n/**\n * Functions used in the import tab\n *\n */\n\n\n/**\n * Toggles the hiding and showing of each plugin's options\n * according to the currently selected plugin from the dropdown list\n */\nfunction changePluginOpts () {\n    $('#format_specific_opts').find('div.format_specific_options').each(function () {\n        $(this).hide();\n    });\n    var selectedPluginName = $('#plugins').find('option:selected').val();\n    $('#' + selectedPluginName + '_options').fadeIn('slow');\n\n    const importNotification = document.getElementById('import_notification');\n    importNotification.innerText = '';\n    if (selectedPluginName === 'csv') {\n        importNotification.innerHTML = '<div class=\"alert alert-info mb-0 mt-3\" role=\"alert\">' + window.Messages.strImportCSV + '</div>';\n    }\n}\n\n/**\n * Toggles the hiding and showing of each plugin's options and sets the selected value\n * in the plugin dropdown list according to the format of the selected file\n *\n * @param {string} fname\n */\nfunction matchFile (fname) {\n    var fnameArray = fname.toLowerCase().split('.');\n    var len = fnameArray.length;\n    if (len !== 0) {\n        var extension = fnameArray[len - 1];\n        if (extension === 'gz' || extension === 'bz2' || extension === 'zip') {\n            len--;\n        }\n        // Only toggle if the format of the file can be imported\n        if ($('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).length === 1) {\n            $('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).prop('selected', true);\n            changePluginOpts();\n        }\n    }\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('import.js', function () {\n    $('#plugins').off('change');\n    $('#input_import_file').off('change');\n    $('#select_local_import_file').off('change');\n    $('#input_import_file').off('change').off('focus');\n    $('#select_local_import_file').off('focus');\n    $('#text_csv_enclosed').add('#text_csv_escaped').off('keyup');\n    $('#importmain #buttonGo').off('click');\n});\n\nAJAX.registerOnload('import.js', function () {\n    // import_file_form validation.\n    $(document).on('submit', '#import_file_form', function () {\n        var radioLocalImport = $('#localFileTab');\n        var radioImport = $('#uploadFileTab');\n        var fileMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strImportDialogMessage + '</div>';\n        var wrongTblNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strTableNameDialogMessage + '</div>';\n        var wrongDBNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strDBNameDialogMessage + '</div>';\n\n        if (radioLocalImport.length !== 0) {\n            // remote upload.\n\n            if (radioImport.hasClass('active') && $('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n\n            if (radioLocalImport.hasClass('active')) {\n                if ($('#select_local_import_file').length === 0) {\n                    ajaxShowMessage('<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strNoImportFile + ' </div>', false);\n                    return false;\n                }\n\n                if ($('#select_local_import_file').val() === '') {\n                    $('#select_local_import_file').trigger('focus');\n                    ajaxShowMessage(fileMsg, false);\n                    return false;\n                }\n            }\n        } else {\n            // local upload.\n            if ($('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if ($('#text_csv_new_tbl_name').length > 0) {\n                var newTblName = $('#text_csv_new_tbl_name').val();\n                if (newTblName.length > 0 && newTblName.trim().length === 0) {\n                    ajaxShowMessage(wrongTblNameMsg, false);\n                    return false;\n                }\n            }\n            if ($('#text_csv_new_db_name').length > 0) {\n                var newDBName = $('#text_csv_new_db_name').val();\n                if (newDBName.length > 0 && newDBName.trim().length === 0) {\n                    ajaxShowMessage(wrongDBNameMsg, false);\n                    return false;\n                }\n            }\n        }\n\n        // show progress bar.\n        $('#upload_form_status').css('display', 'inline');\n        $('#upload_form_status_info').css('display', 'inline');\n    });\n\n    // Initially display the options for the selected plugin\n    changePluginOpts();\n\n    // Whenever the selected plugin changes, change the options displayed\n    $('#plugins').on('change', function () {\n        changePluginOpts();\n    });\n\n    $('#input_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    $('#select_local_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    /**\n     * Set up the interface for Javascript-enabled browsers since the default is for\n     *  Javascript-disabled browsers\n     */\n    $('#format_specific_opts').find('div.format_specific_options')\n        .find('h3')\n        .remove();\n    // $(\"form[name=import] *\").unwrap();\n\n    /**\n     * for input element text_csv_enclosed and text_csv_escaped allow just one character to enter.\n     * as mysql allows just one character for these fields,\n     * if first character is escape then allow two including escape character.\n     */\n    $('#text_csv_enclosed').add('#text_csv_escaped').on('keyup', function () {\n        if ($(this).val().length === 2 && $(this).val().charAt(0) !== '\\\\') {\n            $(this).val($(this).val().substring(0, 1));\n            return false;\n        }\n        return true;\n    });\n\n    $('#importmain #buttonGo').on('click', function () {\n        const uploadProgressInfo = document.getElementById('upload_progress_info');\n        const uploadId = uploadProgressInfo.dataset.uploadId;\n        const handler = uploadProgressInfo.dataset.handler;\n\n        $('#upload_form_form').css('display', 'none');\n\n        const clockImage = '<img src=\"' + themeImagePath + 'ajax_clock_small.gif\" width=\"16\" height=\"16\" alt=\"ajax clock\">';\n\n        if (handler !== 'PhpMyAdmin\\\\Plugins\\\\Import\\\\Upload\\\\UploadNoplugin') {\n            var finished = false;\n            var percent = 0.0;\n            var total = 0;\n            var complete = 0;\n            var originalTitle = parent && parent.document ? parent.document.title : false;\n            var importStart;\n\n            var performUpload = function () {\n                $.getJSON(\n                    'index.php?route=/import-status',\n                    { 'id': uploadId, 'import_status': 1, 'server': CommonParams.get('server') },\n                    function (response) {\n                        finished = response.finished;\n                        percent = response.percent;\n                        total = response.total;\n                        complete = response.complete;\n\n                        if (total === 0 && complete === 0 && percent === 0) {\n                            $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressMaximumAllowedSize);\n                            $('#upload_form_status').css('display', 'none');\n                        } else {\n                            var now = new Date();\n                            now = Date.UTC(\n                                now.getFullYear(),\n                                now.getMonth(),\n                                now.getDate(),\n                                now.getHours(),\n                                now.getMinutes(),\n                                now.getSeconds()\n                            ) + now.getMilliseconds() - 1000;\n                            var statusText = window.sprintf(\n                                window.Messages.uploadProgressStatusText,\n                                Functions.formatBytes(\n                                    complete, 1, window.Messages.strDecimalSeparator\n                                ),\n                                Functions.formatBytes(\n                                    total, 1, window.Messages.strDecimalSeparator\n                                )\n                            );\n\n                            if ($('#importmain').is(':visible')) {\n                                // Show progress UI\n                                $('#importmain').hide();\n                                const uploadProgressDiv = '<div class=\"upload_progress\">'\n                                    + '<div class=\"upload_progress_bar_outer\">'\n                                    + '<div class=\"percentage\"></div>'\n                                    + '<div id=\"status\" class=\"upload_progress_bar_inner\">'\n                                    + '<div class=\"percentage\"></div></div></div>'\n                                    + '<div>' + clockImage + ' ' + window.Messages.uploadProgressUploading + '</div>'\n                                    + '<div id=\"statustext\"></div></div>';\n                                $('#import_form_status').html(uploadProgressDiv).show();\n                                importStart = now;\n                            } else if (percent > 9 || complete > 2000000) {\n                                // Calculate estimated time\n                                var usedTime = now - importStart;\n                                var seconds = parseInt(((total - complete) / complete) * usedTime / 1000);\n                                var speed = window.sprintf(\n                                    window.Messages.uploadProgressPerSecond,\n                                    Functions.formatBytes(complete / usedTime * 1000, 1, window.Messages.strDecimalSeparator)\n                                );\n\n                                var minutes = parseInt(seconds / 60);\n                                seconds %= 60;\n                                var estimatedTime;\n                                if (minutes > 0) {\n                                    estimatedTime = window.Messages.uploadProgressRemainingMin\n                                        .replace('%MIN', minutes)\n                                        .replace('%SEC', seconds);\n                                } else {\n                                    estimatedTime = window.Messages.uploadProgressRemainingSec\n                                        .replace('%SEC', seconds);\n                                }\n\n                                statusText += '<br>' + speed + '<br><br>' + estimatedTime;\n                            }\n\n                            var percentString = Math.round(percent) + '%';\n                            $('#status').animate({ width: percentString }, 150);\n                            $('.percentage').text(percentString);\n\n                            // Show percent in window title\n                            if (originalTitle !== false) {\n                                parent.document.title\n                                    = percentString + ' - ' + originalTitle;\n                            } else {\n                                document.title\n                                    = percentString + ' - ' + originalTitle;\n                            }\n                            $('#statustext').html(statusText);\n                        }\n\n                        if (finished) {\n                            if (originalTitle !== false) {\n                                parent.document.title = originalTitle;\n                            } else {\n                                document.title = originalTitle;\n                            }\n                            $('#importmain').hide();\n                            // Loads the message, either success or mysql error\n                            $('#import_form_status')\n                                .html(clockImage + ' ' + window.Messages.uploadProgressBeingProcessed)\n                                .show();\n                            $('#import_form_status').load(\n                                'index.php?route=/import-status&message=1&import_status=1&server=' + CommonParams.get('server')\n                            );\n                            Navigation.reload();\n                        } else {\n                            setTimeout(performUpload, 1000);\n                        }\n                    });\n            };\n            setTimeout(performUpload, 1000);\n        } else {\n            // No plugin available\n            $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressNoDetails);\n            $('#upload_form_status').css('display', 'none');\n        }\n    });\n});\n"],"names":["$","AJAX","Functions","Navigation","CommonParams","ajaxShowMessage","changePluginOpts","find","each","hide","selectedPluginName","val","fadeIn","importNotification","document","getElementById","innerText","innerHTML","window","Messages","strImportCSV","matchFile","fname","fnameArray","toLowerCase","split","len","length","extension","filterByValue","prop","registerTeardown","off","add","registerOnload","on","radioLocalImport","radioImport","fileMsg","strImportDialogMessage","wrongTblNameMsg","strTableNameDialogMessage","wrongDBNameMsg","strDBNameDialogMessage","hasClass","trigger","strNoImportFile","newTblName","trim","newDBName","css","remove","charAt","substring","uploadProgressInfo","uploadId","dataset","handler","clockImage","themeImagePath","finished","percent","total","complete","originalTitle","parent","title","importStart","performUpload","getJSON","get","response","html","uploadProgressMaximumAllowedSize","now","Date","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","statusText","sprintf","uploadProgressStatusText","formatBytes","strDecimalSeparator","is","uploadProgressDiv","uploadProgressUploading","show","usedTime","seconds","parseInt","speed","uploadProgressPerSecond","minutes","estimatedTime","uploadProgressRemainingMin","replace","uploadProgressRemainingSec","percentString","Math","round","animate","width","text","uploadProgressBeingProcessed","load","reload","setTimeout","uploadProgressNoDetails"],"sourceRoot":""}