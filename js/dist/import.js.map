{"version":3,"file":"import.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/import.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { Functions } from './modules/functions.js';\nimport { Navigation } from './modules/navigation.js';\nimport { CommonParams } from './modules/common.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\n\n/* global themeImagePath */ // templates/javascript/variables.twig\n\n/**\n * Functions used in the import tab\n *\n */\n\n\n/**\n * Toggles the hiding and showing of each plugin's options\n * according to the currently selected plugin from the dropdown list\n */\nfunction changePluginOpts () {\n    $('#format_specific_opts').find('div.format_specific_options').each(function () {\n        $(this).hide();\n    });\n    var selectedPluginName = $('#plugins').find('option:selected').val();\n    $('#' + selectedPluginName + '_options').fadeIn('slow');\n\n    const importNotification = document.getElementById('import_notification');\n    importNotification.innerText = '';\n    if (selectedPluginName === 'csv') {\n        importNotification.innerHTML = '<div class=\"alert alert-info mb-0 mt-3\" role=\"alert\">' + window.Messages.strImportCSV + '</div>';\n    }\n}\n\n/**\n * Toggles the hiding and showing of each plugin's options and sets the selected value\n * in the plugin dropdown list according to the format of the selected file\n *\n * @param {string} fname\n */\nfunction matchFile (fname) {\n    var fnameArray = fname.toLowerCase().split('.');\n    var len = fnameArray.length;\n    if (len !== 0) {\n        var extension = fnameArray[len - 1];\n        if (extension === 'gz' || extension === 'bz2' || extension === 'zip') {\n            len--;\n        }\n        // Only toggle if the format of the file can be imported\n        if ($('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).length === 1) {\n            $('select[name=\\'format\\'] option').filterByValue(fnameArray[len - 1]).prop('selected', true);\n            changePluginOpts();\n        }\n    }\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('import.js', function () {\n    $('#plugins').off('change');\n    $('#input_import_file').off('change');\n    $('#select_local_import_file').off('change');\n    $('#input_import_file').off('change').off('focus');\n    $('#select_local_import_file').off('focus');\n    $('#text_csv_enclosed').add('#text_csv_escaped').off('keyup');\n    $('#importmain #buttonGo').off('click');\n});\n\nAJAX.registerOnload('import.js', function () {\n    // import_file_form validation.\n    $(document).on('submit', '#import_file_form', function () {\n        var radioLocalImport = $('#localFileTab');\n        var radioImport = $('#uploadFileTab');\n        var fileMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strImportDialogMessage + '</div>';\n        var wrongTblNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strTableNameDialogMessage + '</div>';\n        var wrongDBNameMsg = '<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\">' + window.Messages.strDBNameDialogMessage + '</div>';\n\n        if (radioLocalImport.length !== 0) {\n            // remote upload.\n\n            if (radioImport.hasClass('active') && $('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n\n            if (radioLocalImport.hasClass('active')) {\n                if ($('#select_local_import_file').length === 0) {\n                    ajaxShowMessage('<div class=\"alert alert-danger\" role=\"alert\"><img src=\"themes/dot.gif\" title=\"\" alt=\"\" class=\"icon ic_s_error\"> ' + window.Messages.strNoImportFile + ' </div>', false);\n                    return false;\n                }\n\n                if ($('#select_local_import_file').val() === '') {\n                    $('#select_local_import_file').trigger('focus');\n                    ajaxShowMessage(fileMsg, false);\n                    return false;\n                }\n            }\n        } else {\n            // local upload.\n            if ($('#input_import_file').val() === '') {\n                $('#input_import_file').trigger('focus');\n                ajaxShowMessage(fileMsg, false);\n                return false;\n            }\n            if ($('#text_csv_new_tbl_name').length > 0) {\n                var newTblName = $('#text_csv_new_tbl_name').val();\n                if (newTblName.length > 0 && newTblName.trim().length === 0) {\n                    ajaxShowMessage(wrongTblNameMsg, false);\n                    return false;\n                }\n            }\n            if ($('#text_csv_new_db_name').length > 0) {\n                var newDBName = $('#text_csv_new_db_name').val();\n                if (newDBName.length > 0 && newDBName.trim().length === 0) {\n                    ajaxShowMessage(wrongDBNameMsg, false);\n                    return false;\n                }\n            }\n        }\n\n        // show progress bar.\n        $('#upload_form_status').css('display', 'inline');\n        $('#upload_form_status_info').css('display', 'inline');\n    });\n\n    // Initially display the options for the selected plugin\n    changePluginOpts();\n\n    // Whenever the selected plugin changes, change the options displayed\n    $('#plugins').on('change', function () {\n        changePluginOpts();\n    });\n\n    $('#input_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    $('#select_local_import_file').on('change', function () {\n        matchFile($(this).val());\n    });\n\n    /**\n     * Set up the interface for Javascript-enabled browsers since the default is for\n     *  Javascript-disabled browsers\n     */\n    $('#format_specific_opts').find('div.format_specific_options')\n        .find('h3')\n        .remove();\n    // $(\"form[name=import] *\").unwrap();\n\n    /**\n     * for input element text_csv_enclosed and text_csv_escaped allow just one character to enter.\n     * as mysql allows just one character for these fields,\n     * if first character is escape then allow two including escape character.\n     */\n    $('#text_csv_enclosed').add('#text_csv_escaped').on('keyup', function () {\n        if ($(this).val().length === 2 && $(this).val().charAt(0) !== '\\\\') {\n            $(this).val($(this).val().substring(0, 1));\n            return false;\n        }\n        return true;\n    });\n\n    $('#importmain #buttonGo').on('click', function () {\n        const uploadProgressInfo = document.getElementById('upload_progress_info');\n        const uploadId = uploadProgressInfo.dataset.uploadId;\n        const handler = uploadProgressInfo.dataset.handler;\n\n        $('#upload_form_form').css('display', 'none');\n\n        const clockImage = '<img src=\"' + themeImagePath + 'ajax_clock_small.gif\" width=\"16\" height=\"16\" alt=\"ajax clock\">';\n\n        if (handler !== 'PhpMyAdmin\\\\Plugins\\\\Import\\\\Upload\\\\UploadNoplugin') {\n            var finished = false;\n            var percent = 0.0;\n            var total = 0;\n            var complete = 0;\n            var originalTitle = parent && parent.document ? parent.document.title : false;\n            var importStart;\n\n            var performUpload = function () {\n                $.getJSON(\n                    'index.php?route=/import-status',\n                    { 'id': uploadId, 'import_status': 1, 'server': CommonParams.get('server') },\n                    function (response) {\n                        finished = response.finished;\n                        percent = response.percent;\n                        total = response.total;\n                        complete = response.complete;\n\n                        if (total === 0 && complete === 0 && percent === 0) {\n                            $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressMaximumAllowedSize);\n                            $('#upload_form_status').css('display', 'none');\n                        } else {\n                            var now = new Date();\n                            now = Date.UTC(\n                                now.getFullYear(),\n                                now.getMonth(),\n                                now.getDate(),\n                                now.getHours(),\n                                now.getMinutes(),\n                                now.getSeconds()\n                            ) + now.getMilliseconds() - 1000;\n                            var statusText = window.sprintf(\n                                window.Messages.uploadProgressStatusText,\n                                Functions.formatBytes(\n                                    complete, 1, window.Messages.strDecimalSeparator\n                                ),\n                                Functions.formatBytes(\n                                    total, 1, window.Messages.strDecimalSeparator\n                                )\n                            );\n\n                            if ($('#importmain').is(':visible')) {\n                                // Show progress UI\n                                $('#importmain').hide();\n                                const uploadProgressDiv = '<div class=\"upload_progress\">'\n                                    + '<div class=\"upload_progress_bar_outer\">'\n                                    + '<div class=\"percentage\"></div>'\n                                    + '<div id=\"status\" class=\"upload_progress_bar_inner\">'\n                                    + '<div class=\"percentage\"></div></div></div>'\n                                    + '<div>' + clockImage + ' ' + window.Messages.uploadProgressUploading + '</div>'\n                                    + '<div id=\"statustext\"></div></div>';\n                                $('#import_form_status').html(uploadProgressDiv).show();\n                                importStart = now;\n                            } else if (percent > 9 || complete > 2000000) {\n                                // Calculate estimated time\n                                var usedTime = now - importStart;\n                                var seconds = parseInt(((total - complete) / complete) * usedTime / 1000);\n                                var speed = window.sprintf(\n                                    window.Messages.uploadProgressPerSecond,\n                                    Functions.formatBytes(complete / usedTime * 1000, 1, window.Messages.strDecimalSeparator)\n                                );\n\n                                var minutes = parseInt(seconds / 60);\n                                seconds %= 60;\n                                var estimatedTime;\n                                if (minutes > 0) {\n                                    estimatedTime = window.Messages.uploadProgressRemainingMin\n                                        .replace('%MIN', minutes)\n                                        .replace('%SEC', seconds);\n                                } else {\n                                    estimatedTime = window.Messages.uploadProgressRemainingSec\n                                        .replace('%SEC', seconds);\n                                }\n\n                                statusText += '<br>' + speed + '<br><br>' + estimatedTime;\n                            }\n\n                            var percentString = Math.round(percent) + '%';\n                            $('#status').animate({ width: percentString }, 150);\n                            $('.percentage').text(percentString);\n\n                            // Show percent in window title\n                            if (originalTitle !== false) {\n                                parent.document.title\n                                    = percentString + ' - ' + originalTitle;\n                            } else {\n                                document.title\n                                    = percentString + ' - ' + originalTitle;\n                            }\n                            $('#statustext').html(statusText);\n                        }\n\n                        if (finished) {\n                            if (originalTitle !== false) {\n                                parent.document.title = originalTitle;\n                            } else {\n                                document.title = originalTitle;\n                            }\n                            $('#importmain').hide();\n                            // Loads the message, either success or mysql error\n                            $('#import_form_status')\n                                .html(clockImage + ' ' + window.Messages.uploadProgressBeingProcessed)\n                                .show();\n                            $('#import_form_status').load(\n                                'index.php?route=/import-status&message=1&import_status=1&server=' + CommonParams.get('server')\n                            );\n                            Navigation.reload();\n                        } else {\n                            setTimeout(performUpload, 1000);\n                        }\n                    });\n            };\n            setTimeout(performUpload, 1000);\n        } else {\n            // No plugin available\n            $('#upload_form_status_info').html(clockImage + ' ' + window.Messages.uploadProgressNoDetails);\n            $('#upload_form_status').css('display', 'none');\n        }\n    });\n});\n"],"names":["$","AJAX","Functions","Navigation","CommonParams","ajaxShowMessage","changePluginOpts","find","each","hide","selectedPluginName","val","fadeIn","importNotification","document","getElementById","innerText","innerHTML","window","Messages","strImportCSV","matchFile","fname","fnameArray","toLowerCase","split","len","length","extension","filterByValue","prop","registerTeardown","off","add","registerOnload","on","radioLocalImport","radioImport","fileMsg","strImportDialogMessage","wrongTblNameMsg","strTableNameDialogMessage","wrongDBNameMsg","strDBNameDialogMessage","hasClass","trigger","strNoImportFile","newTblName","trim","newDBName","css","remove","charAt","substring","uploadProgressInfo","uploadId","dataset","handler","clockImage","themeImagePath","finished","percent","total","complete","originalTitle","parent","title","importStart","performUpload","getJSON","get","response","html","uploadProgressMaximumAllowedSize","now","Date","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","statusText","sprintf","uploadProgressStatusText","formatBytes","strDecimalSeparator","is","uploadProgressDiv","uploadProgressUploading","show","usedTime","seconds","parseInt","speed","uploadProgressPerSecond","minutes","estimatedTime","uploadProgressRemainingMin","replace","uploadProgressRemainingSec","percentString","Math","round","animate","width","text","uploadProgressBeingProcessed","load","reload","setTimeout","uploadProgressNoDetails"],"sourceRoot":""}