{"version":3,"file":"error_report.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/error_report.js"],"sourcesContent":["\n/* global TraceKit */ // js/vendor/tracekit.js\n\n/**\n * general function, usually for data manipulation pages\n *\n */\nvar ErrorReport = {\n    /**\n     * @var {object}, stores the last exception info\n     */\n    lastException: null,\n    /**\n     * @var object stores the Error Report Data to prevent unnecessary data fetching\n     */\n    errorReportData: null,\n    /**\n     * @var object maintains unique keys already used\n     */\n    keyDict: {},\n    /**\n     * handles thrown error exceptions based on user preferences\n     *\n     * @param {object} data\n     * @param {any} exception\n     * @return {void}\n     */\n    errorDataHandler: function (data, exception) {\n        if (data.success !== true) {\n            Functions.ajaxShowMessage(data.error, false);\n            return;\n        }\n        if (data.report_setting === 'ask') {\n            ErrorReport.showErrorNotification();\n        } else if (data.report_setting === 'always') {\n            var reportData = ErrorReport.getReportData(exception);\n            var postData = $.extend(reportData, {\n                'send_error_report': true,\n                'automatic': true\n            });\n            $.post('index.php?route=/error-report', postData, function (data) {\n                if (data.success === false) {\n                    // in the case of an error, show the error message returned.\n                    Functions.ajaxShowMessage(data.error, false);\n                } else {\n                    Functions.ajaxShowMessage(data.message, false);\n                }\n            });\n        }\n    },\n    errorHandler: function (exception) {\n        // issue: 14359\n        if (JSON.stringify(ErrorReport.lastException) === JSON.stringify(exception)) {\n            return;\n        }\n        if (exception.name === null || typeof(exception.name) === 'undefined') {\n            exception.name = ErrorReport.extractExceptionName(exception);\n        }\n        ErrorReport.lastException = exception;\n        if (ErrorReport.errorReportData === null) {\n            $.post('index.php?route=/error-report', {\n                'ajax_request': true,\n                'server': window.CommonParams.get('server'),\n                'get_settings': true,\n                'exception_type': 'js'\n            }, function (data) {\n                ErrorReport.errorReportData = data;\n                ErrorReport.errorDataHandler(data, exception);\n            });\n        } else {\n            ErrorReport.errorDataHandler(ErrorReport.errorReportData, exception);\n        }\n    },\n    /**\n     * Shows the modal dialog previewing the report\n     *\n     * @param exception object error report info\n     *\n     * @return {void}\n     */\n    showReportDialog: function (exception) {\n        const reportData = ErrorReport.getReportData(exception);\n\n        const sendErrorReport = function () {\n            const postData = $.extend(reportData, {\n                'send_error_report': true,\n                'description': $('#errorReportDescription').val(),\n                'always_send': $('#errorReportAlwaysSendCheckbox')[0].checked\n            });\n            $.post('index.php?route=/error-report', postData, function (data) {\n                if (data.success === false) {\n                    Functions.ajaxShowMessage(data.error, false);\n                } else {\n                    Functions.ajaxShowMessage(data.message, 3000);\n                }\n            });\n            $('#errorReportModal').modal('hide');\n        };\n\n        $.post('index.php?route=/error-report', reportData).done(function (data) {\n            // Delete the modal to refresh it in case the user changed SendErrorReports value\n            if (document.getElementById('errorReportModal') !== null) {\n                $('#errorReportModal').remove();\n            }\n\n            $('body').append($(data.report_modal));\n            const $errorReportModal = $('#errorReportModal');\n            $errorReportModal.on('show.bs.modal', function () {\n                // Prevents multiple onClick events\n                $('#errorReportModalConfirm').off('click', sendErrorReport);\n                $('#errorReportModalConfirm').on('click', sendErrorReport);\n                $('#errorReportModal .modal-body').html(data.message);\n            });\n            $errorReportModal.modal('show');\n        });\n    },\n    /**\n     * Shows the small notification that asks for user permission\n     *\n     * @return {void}\n     */\n    showErrorNotification: function () {\n        var key = Math.random().toString(36).substring(2, 12);\n        while (key in ErrorReport.keyDict) {\n            key = Math.random().toString(36).substring(2, 12);\n        }\n        ErrorReport.keyDict[key] = 1;\n\n        var $div = $(\n            '<div class=\"alert alert-danger\" role=\"alert\" id=\"error_notification_' + key + '\"></div>'\n        ).append(\n            Functions.getImage('s_error') + Messages.strErrorOccurred\n        );\n\n        var $buttons = $('<div class=\"float-end\"></div>');\n        var buttonHtml  = '<button class=\"btn btn-primary\" id=\"show_error_report_' + key + '\">';\n        buttonHtml += Messages.strShowReportDetails;\n        buttonHtml += '</button>';\n\n        var settingsUrl = 'index.php?route=/preferences/features&server=' + window.CommonParams.get('server');\n        buttonHtml += '<a class=\"ajax\" href=\"' + settingsUrl + '\">';\n        buttonHtml += Functions.getImage('s_cog', Messages.strChangeReportSettings);\n        buttonHtml += '</a>';\n\n        buttonHtml += '<a href=\"#\" id=\"ignore_error_' + key + '\" data-notification-id=\"' + key + '\">';\n        buttonHtml += Functions.getImage('b_close', Messages.strIgnore);\n        buttonHtml += '</a>';\n\n        $buttons.html(buttonHtml);\n\n        $div.append($buttons);\n        // eslint-disable-next-line compat/compat\n        $div.appendTo(document.body);\n        $(document).on('click', '#show_error_report_' + key, ErrorReport.createReportDialog);\n        $(document).on('click', '#ignore_error_' + key, ErrorReport.removeErrorNotification);\n    },\n    /**\n     * Removes the notification if it was displayed before\n     *\n     * @param {Event} e\n     * @return {void}\n     */\n    removeErrorNotification: function (e) {\n        if (e) {\n            // don't remove the hash fragment by navigating to #\n            e.preventDefault();\n        }\n        $('#error_notification_' + $(this).data('notification-id')).fadeOut(function () {\n            $(this).remove();\n        });\n    },\n    /**\n     * Extracts Exception name from message if it exists\n     *\n     * @param exception\n     * @return {string}\n     */\n    extractExceptionName: function (exception) {\n        if (exception.message === null || typeof(exception.message) === 'undefined') {\n            return '';\n        }\n\n        var reg = /([a-zA-Z]+):/;\n        var regexResult = reg.exec(exception.message);\n        if (regexResult && regexResult.length === 2) {\n            return regexResult[1];\n        }\n\n        return '';\n    },\n    /**\n     * Shows the modal dialog previewing the report\n     *\n     * @return {void}\n     */\n    createReportDialog: function () {\n        ErrorReport.removeErrorNotification();\n        ErrorReport.showReportDialog(ErrorReport.lastException);\n    },\n    /**\n     * Returns the report data to send to the server\n     *\n     * @param exception object exception info\n     *\n     * @return {object}\n     */\n    getReportData: function (exception) {\n        if (exception && exception.stack && exception.stack.length) {\n            for (var i = 0; i < exception.stack.length; i++) {\n                var stack = exception.stack[i];\n                if (stack.context && stack.context.length) {\n                    for (var j = 0; j < stack.context.length; j++) {\n                        if (stack.context[j].length >  80) {\n                            stack.context[j] = stack.context[j].substring(-1, 75) + '//...';\n                        }\n                    }\n                }\n            }\n        }\n        var reportData = {\n            'server': window.CommonParams.get('server'),\n            'ajax_request': true,\n            'exception': exception,\n            'url': window.location.href,\n            'exception_type': 'js'\n        };\n        if (window.AJAX.scriptHandler.scripts.length > 0) {\n            reportData.scripts = window.AJAX.scriptHandler.scripts.map(\n                function (script) {\n                    return script;\n                }\n            );\n        }\n        return reportData;\n    },\n    /**\n     * Wraps given function in error reporting code and returns wrapped function\n     *\n     * @param {Function} func function to be wrapped\n     *\n     * @return {Function}\n     */\n    wrapFunction: function (func) {\n        if (!func.wrapped) {\n            var newFunc = function () {\n                try {\n                    return func.apply(this, arguments);\n                } catch (x) {\n                    TraceKit.report(x);\n                }\n            };\n            newFunc.wrapped = true;\n            // Set guid of wrapped function same as original function, so it can be removed\n            // See bug#4146 (problem with jquery draggable and sortable)\n            newFunc.guid = func.guid = func.guid || newFunc.guid || jQuery.guid++;\n            return newFunc;\n        } else {\n            return func;\n        }\n    },\n    /**\n     * Automatically wraps the callback in window.AJAX.registerOnload\n     *\n     * @return {void}\n     */\n    wrapAjaxOnloadCallback: function () {\n        var oldOnload = window.AJAX.registerOnload;\n        window.AJAX.registerOnload = function (file, func) {\n            var wrappedFunction = ErrorReport.wrapFunction(func);\n            oldOnload.call(this, file, wrappedFunction);\n        };\n    },\n    /**\n     * Automatically wraps the callback in $.fn.on\n     *\n     * @return {void}\n     */\n    wrapJqueryOnCallback: function () {\n        var oldOn = $.fn.on;\n        $.fn.on = function () {\n            for (var i = 1; i <= 3; i++) {\n                if (typeof(arguments[i]) === 'function') {\n                    arguments[i] = ErrorReport.wrapFunction(arguments[i]);\n                    break;\n                }\n            }\n            return oldOn.apply(this, arguments);\n        };\n    },\n    /**\n     * Wraps the callback in window.AJAX.registerOnload automatically\n     *\n     * @return {void}\n     */\n    setUpErrorReporting: function () {\n        ErrorReport.wrapAjaxOnloadCallback();\n        ErrorReport.wrapJqueryOnCallback();\n    }\n};\n\nwindow.AJAX.registerOnload('error_report.js', function () {\n    TraceKit.report.subscribe(ErrorReport.errorHandler);\n    ErrorReport.setUpErrorReporting();\n});\n"],"names":["ErrorReport","lastException","errorReportData","keyDict","errorDataHandler","data","exception","success","Functions","ajaxShowMessage","error","report_setting","showErrorNotification","reportData","getReportData","postData","$","extend","post","message","errorHandler","JSON","stringify","name","extractExceptionName","window","CommonParams","get","showReportDialog","sendErrorReport","val","checked","modal","done","document","getElementById","remove","append","report_modal","$errorReportModal","on","off","html","key","Math","random","toString","substring","$div","getImage","Messages","strErrorOccurred","$buttons","buttonHtml","strShowReportDetails","settingsUrl","strChangeReportSettings","strIgnore","appendTo","body","createReportDialog","removeErrorNotification","e","preventDefault","fadeOut","reg","regexResult","exec","length","stack","i","context","j","location","href","AJAX","scriptHandler","scripts","map","script","wrapFunction","func","wrapped","newFunc","apply","arguments","x","TraceKit","report","guid","jQuery","wrapAjaxOnloadCallback","oldOnload","registerOnload","file","wrappedFunction","call","wrapJqueryOnCallback","oldOn","fn","setUpErrorReporting","subscribe"],"sourceRoot":""}