{"version":3,"file":"sql.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/sql.js"],"sourcesContent":["/**\n * @fileoverview    functions used wherever an sql query form is used\n *\n * @requires    jQuery\n * @requires    js/functions.js\n *\n * @test-module Sql\n */\n\n/* global isStorageSupported */ // js/config.js\n/* global codeMirrorEditor */ // js/functions.js\n/* global makeGrid */ // js/makegrid.js\n/* global sqlBoxLocked */ // js/functions.js\n\nvar Sql = {};\n\n/**\n * decode a string URL_encoded\n *\n * @param {string} str\n * @return {string} the URL-decoded string\n */\nSql.urlDecode = function (str) {\n    if (typeof str !== 'undefined') {\n        return decodeURIComponent(str.replace(/\\+/g, '%20'));\n    }\n};\n\n/**\n * encode a string URL_decoded\n *\n * @param {string} str\n * @return {string} the URL-encoded string\n */\nSql.urlEncode = function (str) {\n    if (typeof str !== 'undefined') {\n        return encodeURIComponent(str).replace(/%20/g, '+');\n    }\n};\n\n/**\n * Saves SQL query in local storage or cookie\n *\n * @param {string} query SQL query\n * @return {void}\n */\nSql.autoSave = function (query) {\n    if (query) {\n        var key = Sql.getAutoSavedKey();\n        if (isStorageSupported('localStorage')) {\n            window.localStorage.setItem(key, query);\n        } else {\n            Cookies.set(key, query, { path: CommonParams.get('rootPath') });\n        }\n    }\n};\n\n/**\n * Saves SQL query in local storage or cookie\n *\n * @param {string} db database name\n * @param {string} table table name\n * @param {string} query SQL query\n * @return {void}\n */\nSql.showThisQuery = function (db, table, query) {\n    var showThisQueryObject = {\n        'db': db,\n        'table': table,\n        'query': query\n    };\n    if (isStorageSupported('localStorage')) {\n        window.localStorage.showThisQuery = 1;\n        window.localStorage.showThisQueryObject = JSON.stringify(showThisQueryObject);\n    } else {\n        Cookies.set('showThisQuery', 1, { path: CommonParams.get('rootPath') });\n        Cookies.set('showThisQueryObject', JSON.stringify(showThisQueryObject), { path: CommonParams.get('rootPath') });\n    }\n};\n\n/**\n * Set query to codemirror if show this query is\n * checked and query for the db and table pair exists\n */\nSql.setShowThisQuery = function () {\n    var db = $('input[name=\"db\"]').val();\n    var table = $('input[name=\"table\"]').val();\n    if (isStorageSupported('localStorage')) {\n        if (window.localStorage.showThisQueryObject !== undefined) {\n            var storedDb = JSON.parse(window.localStorage.showThisQueryObject).db;\n            var storedTable = JSON.parse(window.localStorage.showThisQueryObject).table;\n            var storedQuery = JSON.parse(window.localStorage.showThisQueryObject).query;\n        }\n        if (window.localStorage.showThisQuery !== undefined\n            && window.localStorage.showThisQuery === '1') {\n            $('input[name=\"show_query\"]').prop('checked', true);\n            if (db === storedDb && table === storedTable) {\n                if (codeMirrorEditor) {\n                    codeMirrorEditor.setValue(storedQuery);\n                } else if (document.sqlform) {\n                    document.sqlform.sql_query.value = storedQuery;\n                }\n            }\n        } else {\n            $('input[name=\"show_query\"]').prop('checked', false);\n        }\n    }\n};\n\n/**\n * Saves SQL query with sort in local storage or cookie\n *\n * @param {string} query SQL query\n * @return {void}\n */\nSql.autoSaveWithSort = function (query) {\n    if (query) {\n        if (isStorageSupported('localStorage')) {\n            window.localStorage.setItem('autoSavedSqlSort', query);\n        } else {\n            Cookies.set('autoSavedSqlSort', query, { path: CommonParams.get('rootPath') });\n        }\n    }\n};\n\n/**\n * Clear saved SQL query with sort in local storage or cookie\n *\n * @return {void}\n */\nSql.clearAutoSavedSort = function () {\n    if (isStorageSupported('localStorage')) {\n        window.localStorage.removeItem('autoSavedSqlSort');\n    } else {\n        Cookies.set('autoSavedSqlSort', '', { path: CommonParams.get('rootPath') });\n    }\n};\n\n/**\n * Get the field name for the current field.  Required to construct the query\n * for grid editing\n *\n * @param $tableResults enclosing results table\n * @param $thisField    jQuery object that points to the current field's tr\n *\n * @return {string}\n */\nSql.getFieldName = function ($tableResults, $thisField) {\n    var thisFieldIndex = $thisField.index();\n    // ltr or rtl direction does not impact how the DOM was generated\n    // check if the action column in the left exist\n    var leftActionExist = !$tableResults.find('th').first().hasClass('draggable');\n    // number of column span for checkbox and Actions\n    var leftActionSkip = leftActionExist ? $tableResults.find('th').first().attr('colspan') - 1 : 0;\n\n    // If this column was sorted, the text of the a element contains something\n    // like <small>1</small> that is useful to indicate the order in case\n    // of a sort on multiple columns; however, we dont want this as part\n    // of the column name so we strip it ( .clone() to .end() )\n    var fieldName = $tableResults\n        .find('thead')\n        .find('th')\n        .eq(thisFieldIndex - leftActionSkip)\n        .find('a')\n        .clone()    // clone the element\n        .children() // select all the children\n        .remove()   // remove all of them\n        .end()      // go back to the selected element\n        .text();    // grab the text\n    // happens when just one row (headings contain no a)\n    if (fieldName === '') {\n        var $heading = $tableResults.find('thead').find('th').eq(thisFieldIndex - leftActionSkip).children('span');\n        // may contain column comment enclosed in a span - detach it temporarily to read the column name\n        var $tempColComment = $heading.children().detach();\n        fieldName = $heading.text();\n        // re-attach the column comment\n        $heading.append($tempColComment);\n    }\n\n    fieldName = fieldName.trim();\n\n    return fieldName;\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('sql.js', function () {\n    $(document).off('click', 'a.delete_row.ajax');\n    $(document).off('submit', '.bookmarkQueryForm');\n    $('input#bkm_label').off('input');\n    $(document).off('makegrid', '.sqlqueryresults');\n    $('#togglequerybox').off('click');\n    $(document).off('click', '#button_submit_query');\n    $(document).off('change', '#id_bookmark');\n    $('input[name=\\'bookmark_variable\\']').off('keypress');\n    $(document).off('submit', '#sqlqueryform.ajax');\n    $(document).off('click', 'input[name=navig].ajax');\n    $(document).off('submit', 'form[name=\\'displayOptionsForm\\'].ajax');\n    $(document).off('mouseenter', 'th.column_heading.pointer');\n    $(document).off('mouseleave', 'th.column_heading.pointer');\n    $(document).off('click', 'th.column_heading.marker');\n    $(document).off('scroll', window);\n    $(document).off('keyup', '.filter_rows');\n    if (codeMirrorEditor) {\n        codeMirrorEditor.off('change');\n    } else {\n        $('#sqlquery').off('input propertychange');\n    }\n    $('body').off('click', '.navigation .showAllRows');\n    $('body').off('click', 'a.browse_foreign');\n    $('body').off('click', '#simulate_dml');\n    $('body').off('keyup', '#sqlqueryform');\n    $('body').off('click', 'form[name=\"resultsForm\"].ajax button[name=\"submit_mult\"], form[name=\"resultsForm\"].ajax input[name=\"submit_mult\"]');\n    $(document).off('submit', '.maxRowsForm');\n    $(document).off('click', '#view_as');\n    $(document).off('click', '#sqlquery');\n});\n\n/**\n * @description <p>Ajax scripts for sql and browse pages</p>\n *\n * Actions ajaxified here:\n * <ul>\n * <li>Retrieve results of an SQL query</li>\n * <li>Paginate the results table</li>\n * <li>Sort the results table</li>\n * <li>Change table according to display options</li>\n * <li>Grid editing of data</li>\n * <li>Saving a bookmark</li>\n * </ul>\n *\n * @name        document.ready\n * @memberOf    jQuery\n */\nAJAX.registerOnload('sql.js', function () {\n    if (codeMirrorEditor || document.sqlform) {\n        Sql.setShowThisQuery();\n    }\n    $(function () {\n        if (codeMirrorEditor) {\n            codeMirrorEditor.on('change', function () {\n                Sql.autoSave(codeMirrorEditor.getValue());\n            });\n        } else {\n            $('#sqlquery').on('input propertychange', function () {\n                Sql.autoSave($('#sqlquery').val());\n            });\n            var useLocalStorageValue = isStorageSupported('localStorage') && typeof window.localStorage.autoSavedSqlSort !== 'undefined';\n            // Save sql query with sort\n            if ($('#RememberSorting') !== undefined && $('#RememberSorting').is(':checked')) {\n                $('select[name=\"sql_query\"]').on('change', function () {\n                    Sql.autoSaveWithSort($(this).val());\n                });\n                $('.sortlink').on('click', function () {\n                    Sql.clearAutoSavedSort();\n                });\n            } else {\n                Sql.clearAutoSavedSort();\n            }\n            // If sql query with sort for current table is stored, change sort by key select value\n            var sortStoredQuery = useLocalStorageValue ? window.localStorage.autoSavedSqlSort : Cookies.get('autoSavedSqlSort', { path: CommonParams.get('rootPath') });\n            if (typeof sortStoredQuery !== 'undefined' && sortStoredQuery !== $('select[name=\"sql_query\"]').val() && $('select[name=\"sql_query\"] option[value=\"' + sortStoredQuery + '\"]').length !== 0) {\n                $('select[name=\"sql_query\"]').val(sortStoredQuery).trigger('change');\n            }\n        }\n    });\n\n    // Delete row from SQL results\n    $(document).on('click', 'a.delete_row.ajax', function (e) {\n        e.preventDefault();\n        var question =  Functions.sprintf(Messages.strDoYouReally, Functions.escapeHtml($(this).closest('td').find('div').text()));\n        var $link = $(this);\n        $link.confirm(question, $link.attr('href'), function (url) {\n            Functions.ajaxShowMessage();\n            var argsep = CommonParams.get('arg_separator');\n            var params = 'ajax_request=1' + argsep + 'is_js_confirmed=1';\n            var postData = $link.getPostData();\n            if (postData) {\n                params += argsep + postData;\n            }\n            $.post(url, params, function (data) {\n                if (data.success) {\n                    Functions.ajaxShowMessage(data.message);\n                    $link.closest('tr').remove();\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            });\n        });\n    });\n\n    // Ajaxification for 'Bookmark this SQL query'\n    $(document).on('submit', '.bookmarkQueryForm', function (e) {\n        e.preventDefault();\n        Functions.ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        $.post($(this).attr('action'), 'ajax_request=1' + argsep + $(this).serialize(), function (data) {\n            if (data.success) {\n                Functions.ajaxShowMessage(data.message);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    /* Hides the bookmarkoptions checkboxes when the bookmark label is empty */\n    $('input#bkm_label').on('input', function () {\n        $('input#id_bkm_all_users, input#id_bkm_replace')\n            .parent()\n            .toggle($(this).val().length > 0);\n    }).trigger('input');\n\n    /**\n     * Attach Event Handler for 'Copy to clipboard'\n     */\n    $(document).on('click', '#copyToClipBoard', function (event) {\n        event.preventDefault();\n\n        var textArea = document.createElement('textarea');\n\n        //\n        // *** This styling is an extra step which is likely not required. ***\n        //\n        // Why is it here? To ensure:\n        // 1. the element is able to have focus and selection.\n        // 2. if element was to flash render it has minimal visual impact.\n        // 3. less flakyness with selection and copying which **might** occur if\n        //    the textarea element is not visible.\n        //\n        // The likelihood is the element won't even render, not even a flash,\n        // so some of these are just precautions. However in IE the element\n        // is visible whilst the popup box asking the user for permission for\n        // the web page to copy to the clipboard.\n        //\n\n        // Place in top-left corner of screen regardless of scroll position.\n        textArea.style.position = 'fixed';\n        textArea.style.top = 0;\n        textArea.style.left = 0;\n\n        // Ensure it has a small width and height. Setting to 1px / 1em\n        // doesn't work as this gives a negative w/h on some browsers.\n        textArea.style.width = '2em';\n        textArea.style.height = '2em';\n\n        // We don't need padding, reducing the size if it does flash render.\n        textArea.style.padding = 0;\n\n        // Clean up any borders.\n        textArea.style.border = 'none';\n        textArea.style.outline = 'none';\n        textArea.style.boxShadow = 'none';\n\n        // Avoid flash of white box if rendered for any reason.\n        textArea.style.background = 'transparent';\n\n        textArea.value = '';\n\n        $('#server-breadcrumb a').each(function () {\n            textArea.value += $(this).data('raw-text') + '/';\n        });\n        textArea.value += '\\t\\t' + window.location.href;\n        textArea.value += '\\n';\n        $('.alert-success').each(function () {\n            textArea.value += $(this).text() + '\\n\\n';\n        });\n\n        $('.sql pre').each(function () {\n            textArea.value += $(this).text() + '\\n\\n';\n        });\n\n        $('.table_results .column_heading a').each(function () {\n            // Don't copy ordering number text within <small> tag\n            textArea.value += $(this).clone().find('small').remove().end().text() + '\\t';\n        });\n\n        textArea.value += '\\n';\n        $('.table_results tbody tr').each(function () {\n            $(this).find('.data span').each(function () {\n                // Extract <em> tag for NULL values before converting to string to not mess up formatting\n                var data = $(this).find('em').length !== 0 ? $(this).find('em')[0] : this;\n                textArea.value += $(data).text() + '\\t';\n            });\n            textArea.value += '\\n';\n        });\n\n        // eslint-disable-next-line compat/compat\n        document.body.appendChild(textArea);\n\n        textArea.select();\n\n        try {\n            document.execCommand('copy');\n        } catch (err) {\n            alert('Sorry! Unable to copy');\n        }\n\n        // eslint-disable-next-line compat/compat\n        document.body.removeChild(textArea);\n    }); // end of Copy to Clipboard action\n\n    /**\n     * Attach the {@link makegrid} function to a custom event, which will be\n     * triggered manually everytime the table of results is reloaded\n     * @memberOf    jQuery\n     */\n    $(document).on('makegrid', '.sqlqueryresults', function () {\n        $('.table_results').each(function () {\n            makeGrid(this);\n        });\n    });\n\n    /**\n     * Append the \"Show/Hide query box\" message to the query input form\n     *\n     * @memberOf jQuery\n     * @name    appendToggleSpan\n     */\n    // do not add this link more than once\n    if (! $('#sqlqueryform').find('button').is('#togglequerybox')) {\n        $('<button class=\"btn btn-secondary\" id=\"togglequerybox\"></button>')\n            .html(Messages.strHideQueryBox)\n            .appendTo('#sqlqueryform')\n        // initially hidden because at this point, nothing else\n        // appears under the link\n            .hide();\n\n        // Attach the toggling of the query box visibility to a click\n        $('#togglequerybox').on('click', function () {\n            var $link = $(this);\n            $link.siblings().slideToggle('fast');\n            if ($link.text() === Messages.strHideQueryBox) {\n                $link.text(Messages.strShowQueryBox);\n                // cheap trick to add a spacer between the menu tabs\n                // and \"Show query box\"; feel free to improve!\n                $('#togglequerybox_spacer').remove();\n                $link.before('<br id=\"togglequerybox_spacer\">');\n            } else {\n                $link.text(Messages.strHideQueryBox);\n            }\n            // avoid default click action\n            return false;\n        });\n    }\n\n\n    /**\n     * Event handler for sqlqueryform.ajax button_submit_query\n     *\n     * @memberOf    jQuery\n     */\n    $(document).on('click', '#button_submit_query', function () {\n        $('.alert-success,.alert-danger').hide();\n        // hide already existing error or success message\n        var $form = $(this).closest('form');\n        // the Go button related to query submission was clicked,\n        // instead of the one related to Bookmarks, so empty the\n        // id_bookmark selector to avoid misinterpretation in\n        // /import about what needs to be done\n        $form.find('select[name=id_bookmark]').val('');\n        var isShowQuery =  $('input[name=\"show_query\"]').is(':checked');\n        if (isShowQuery) {\n            window.localStorage.showThisQuery = '1';\n            var db = $('input[name=\"db\"]').val();\n            var table = $('input[name=\"table\"]').val();\n            var query;\n            if (codeMirrorEditor) {\n                query = codeMirrorEditor.getValue();\n            } else {\n                query = $('#sqlquery').val();\n            }\n            Sql.showThisQuery(db, table, query);\n        } else {\n            window.localStorage.showThisQuery = '0';\n        }\n    });\n\n    /**\n     * Event handler to show appropriate number of variable boxes\n     * based on the bookmarked query\n     */\n    $(document).on('change', '#id_bookmark', function () {\n        var varCount = $(this).find('option:selected').data('varcount');\n        if (typeof varCount === 'undefined') {\n            varCount = 0;\n        }\n\n        var $varDiv = $('#bookmarkVariables');\n        $varDiv.empty();\n        for (var i = 1; i <= varCount; i++) {\n            $varDiv.append($('<div class=\"mb-3\">'));\n            $varDiv.append($('<label for=\"bookmarkVariable' + i + '\">' + Functions.sprintf(Messages.strBookmarkVariable, i) + '</label>'));\n            $varDiv.append($('<input class=\"form-control\" type=\"text\" size=\"10\" name=\"bookmark_variable[' + i + ']\" id=\"bookmarkVariable' + i + '\">'));\n            $varDiv.append($('</div>'));\n        }\n\n        if (varCount === 0) {\n            $varDiv.parent().hide();\n        } else {\n            $varDiv.parent().show();\n        }\n    });\n\n    /**\n     * Event handler for hitting enter on sqlqueryform bookmark_variable\n     * (the Variable textfield in Bookmarked SQL query section)\n     *\n     * @memberOf    jQuery\n     */\n    $('input[name=bookmark_variable]').on('keypress', function (event) {\n        // force the 'Enter Key' to implicitly click the #button_submit_bookmark\n        var keycode = (event.keyCode ? event.keyCode : (event.which ? event.which : event.charCode));\n        if (keycode === 13) { // keycode for enter key\n            // When you press enter in the sqlqueryform, which\n            // has 2 submit buttons, the default is to run the\n            // #button_submit_query, because of the tabindex\n            // attribute.\n            // This submits #button_submit_bookmark instead,\n            // because when you are in the Bookmarked SQL query\n            // section and hit enter, you expect it to do the\n            // same action as the Go button in that section.\n            $('#button_submit_bookmark').trigger('click');\n            return false;\n        } else  {\n            return true;\n        }\n    });\n\n    /**\n     * Ajax Event handler for 'SQL Query Submit'\n     *\n     * @see         Functions.ajaxShowMessage()\n     * @memberOf    jQuery\n     * @name        sqlqueryform_submit\n     */\n    $(document).on('submit', '#sqlqueryform.ajax', function (event) {\n        event.preventDefault();\n\n        var $form = $(this);\n        if (codeMirrorEditor) {\n            $form[0].elements.sql_query.value = codeMirrorEditor.getValue();\n        }\n        if (! Functions.checkSqlQuery($form[0])) {\n            return false;\n        }\n\n        // remove any div containing a previous error message\n        $('.alert-danger').remove();\n\n        var $msgbox = Functions.ajaxShowMessage();\n        var $sqlqueryresultsouter = $('#sqlqueryresultsouter');\n\n        Functions.prepareForAjaxRequest($form);\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post($form.attr('action'), $form.serialize() + argsep + 'ajax_page_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                // success happens if the query returns rows or not\n\n                // show a message that stays on screen\n                if (typeof data.action_bookmark !== 'undefined') {\n                    // view only\n                    if ('1' === data.action_bookmark) {\n                        $('#sqlquery').text(data.sql_query);\n                        // send to codemirror if possible\n                        Functions.setQuery(data.sql_query);\n                    }\n                    // delete\n                    if ('2' === data.action_bookmark) {\n                        $('#id_bookmark option[value=\\'' + data.id_bookmark + '\\']').remove();\n                        // if there are no bookmarked queries now (only the empty option),\n                        // remove the bookmark section\n                        if ($('#id_bookmark option').length === 1) {\n                            $('#fieldsetBookmarkOptions').hide();\n                            $('#fieldsetBookmarkOptionsFooter').hide();\n                        }\n                    }\n                }\n                $sqlqueryresultsouter\n                    .show()\n                    .html(data.message);\n                Functions.highlightSql($sqlqueryresultsouter);\n\n                if (data.menu) {\n                    history.replaceState({\n                        menu : data.menu\n                    },\n                    null\n                    );\n                    AJAX.handleMenu.replace(data.menu);\n                }\n\n                if (data.params) {\n                    CommonParams.setAll(data.params);\n                }\n\n                if (typeof data.ajax_reload !== 'undefined') {\n                    if (data.ajax_reload.reload) {\n                        if (data.ajax_reload.table_name) {\n                            CommonParams.set('table', data.ajax_reload.table_name);\n                            CommonActions.refreshMain();\n                        } else {\n                            Navigation.reload();\n                        }\n                    }\n                } else if (typeof data.reload !== 'undefined') {\n                    // this happens if a USE or DROP command was typed\n                    CommonActions.setDb(data.db);\n                    var url;\n                    if (data.db) {\n                        if (data.table) {\n                            url = 'index.php?route=/table/sql';\n                        } else {\n                            url = 'index.php?route=/database/sql';\n                        }\n                    } else {\n                        url = 'index.php?route=/server/sql';\n                    }\n                    CommonActions.refreshMain(url, function () {\n                        $('#sqlqueryresultsouter')\n                            .show()\n                            .html(data.message);\n                        Functions.highlightSql($('#sqlqueryresultsouter'));\n                    });\n                }\n\n                $('.sqlqueryresults').trigger('makegrid');\n                $('#togglequerybox').show();\n\n                if (typeof data.action_bookmark === 'undefined') {\n                    if ($('#sqlqueryform input[name=\"retain_query_box\"]').is(':checked') !== true) {\n                        if ($('#togglequerybox').siblings(':visible').length > 0) {\n                            $('#togglequerybox').trigger('click');\n                        }\n                    }\n                }\n            } else if (typeof data !== 'undefined' && data.success === false) {\n                // show an error message that stays on screen\n                $sqlqueryresultsouter\n                    .show()\n                    .html(data.error);\n                $('html, body').animate({ scrollTop: $(document).height() }, 200);\n            }\n            Functions.ajaxRemoveMessage($msgbox);\n        }); // end $.post()\n    }); // end SQL Query submit\n\n    /**\n     * Ajax Event handler for the display options\n     * @memberOf    jQuery\n     * @name        displayOptionsForm_submit\n     */\n    $(document).on('submit', 'form[name=\\'displayOptionsForm\\'].ajax', function (event) {\n        event.preventDefault();\n\n        var $form = $(this);\n\n        var $msgbox = Functions.ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        $.post($form.attr('action'), $form.serialize() + argsep + 'ajax_request=true', function (data) {\n            Functions.ajaxRemoveMessage($msgbox);\n            var $sqlqueryresults = $form.parents('.sqlqueryresults');\n            $sqlqueryresults\n                .html(data.message)\n                .trigger('makegrid');\n            Functions.highlightSql($sqlqueryresults);\n        }); // end $.post()\n    }); // end displayOptionsForm handler\n\n    // Filter row handling. --STARTS--\n    $(document).on('keyup', '.filter_rows', function () {\n        var uniqueId = $(this).data('for');\n        var $targetTable = $('.table_results[data-uniqueId=\\'' + uniqueId + '\\']');\n        var $headerCells = $targetTable.find('th[data-column]');\n        var targetColumns = [];\n        // To handle colspan=4, in case of edit,copy etc options.\n        var dummyTh = ($('.edit_row_anchor').length !== 0 ?\n            '<th class=\"hide dummy_th\"></th><th class=\"hide dummy_th\"></th><th class=\"hide dummy_th\"></th>'\n            : '');\n        // Selecting columns that will be considered for filtering and searching.\n        $headerCells.each(function () {\n            targetColumns.push($(this).text().trim());\n        });\n\n        var phrase = $(this).val();\n        // Set same value to both Filter rows fields.\n        $('.filter_rows[data-for=\\'' + uniqueId + '\\']').not(this).val(phrase);\n        // Handle colspan.\n        $targetTable.find('thead > tr').prepend(dummyTh);\n        $.uiTableFilter($targetTable, phrase, targetColumns);\n        $targetTable.find('th.dummy_th').remove();\n    });\n    // Filter row handling. --ENDS--\n\n    // Prompt to confirm on Show All\n    $('body').on('click', '.navigation .showAllRows', function (e) {\n        e.preventDefault();\n        var $form = $(this).parents('form');\n\n        Sql.submitShowAllForm = function () {\n            var argsep = CommonParams.get('arg_separator');\n            var submitData = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true';\n            Functions.ajaxShowMessage();\n            AJAX.source = $form;\n            $.post($form.attr('action'), submitData, AJAX.responseHandler);\n        };\n\n        if (! $(this).is(':checked')) { // already showing all rows\n            Sql.submitShowAllForm();\n        } else {\n            $form.confirm(Messages.strShowAllRowsWarning, $form.attr('action'), function () {\n                Sql.submitShowAllForm();\n            });\n        }\n    });\n\n    $('body').on('keyup', '#sqlqueryform', function () {\n        Functions.handleSimulateQueryButton();\n    });\n\n    /**\n     * Ajax event handler for 'Simulate DML'.\n     */\n    $('body').on('click', '#simulate_dml', function () {\n        var $form = $('#sqlqueryform');\n        var query = '';\n        var delimiter = $('#id_sql_delimiter').val();\n        var dbName = $form.find('input[name=\"db\"]').val();\n\n        if (codeMirrorEditor) {\n            query = codeMirrorEditor.getValue();\n        } else {\n            query = $('#sqlquery').val();\n        }\n\n        if (query.length === 0) {\n            alert(Messages.strFormEmpty);\n            $('#sqlquery').trigger('focus');\n            return false;\n        }\n\n        var $msgbox = Functions.ajaxShowMessage();\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/import/simulate-dml',\n            data: {\n                'server': CommonParams.get('server'),\n                'db': dbName,\n                'ajax_request': '1',\n                'sql_query': query,\n                'sql_delimiter': delimiter\n            },\n            success: function (response) {\n                Functions.ajaxRemoveMessage($msgbox);\n                if (response.success) {\n                    var dialogContent = '<div class=\"preview_sql\">';\n                    if (response.sql_data) {\n                        var len = response.sql_data.length;\n                        for (var i = 0; i < len; i++) {\n                            dialogContent += '<strong>' + Messages.strSQLQuery +\n                                '</strong>' + response.sql_data[i].sql_query +\n                                Messages.strMatchedRows +\n                                ' <a href=\"' + response.sql_data[i].matched_rows_url +\n                                '\">' + response.sql_data[i].matched_rows + '</a><br>';\n                            if (i < len - 1) {\n                                dialogContent += '<hr>';\n                            }\n                        }\n                    } else {\n                        dialogContent += response.message;\n                    }\n                    dialogContent += '</div>';\n                    var $dialogContent = $(dialogContent);\n                    var modal = $('#simulateDmlModal');\n                    modal.modal('show');\n                    modal.find('.modal-body').first().html($dialogContent);\n                    modal.on('shown.bs.modal', function () {\n                        Functions.highlightSql(modal);\n                    });\n                } else {\n                    Functions.ajaxShowMessage(response.error);\n                }\n            },\n            error: function () {\n                Functions.ajaxShowMessage(Messages.strErrorProcessingRequest);\n            }\n        });\n    });\n\n    /**\n     * Handles multi submits of results browsing page such as edit, delete and export\n     */\n    $('body').on('click', 'form[name=\"resultsForm\"].ajax button[name=\"submit_mult\"], form[name=\"resultsForm\"].ajax input[name=\"submit_mult\"]', function (e) {\n        e.preventDefault();\n        var $button = $(this);\n        var action = $button.val();\n        var $form = $button.closest('form');\n        var argsep = CommonParams.get('arg_separator');\n        var submitData = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true' + argsep;\n        Functions.ajaxShowMessage();\n        AJAX.source = $form;\n\n        var url;\n        if (action === 'edit') {\n            submitData = submitData + argsep + 'default_action=update';\n            url = 'index.php?route=/table/change/rows';\n        } else if (action === 'copy') {\n            submitData = submitData + argsep + 'default_action=insert';\n            url = 'index.php?route=/table/change/rows';\n        } else if (action === 'export') {\n            url = 'index.php?route=/table/export/rows';\n        } else if (action === 'delete') {\n            url = 'index.php?route=/table/delete/confirm';\n        } else {\n            return;\n        }\n\n        $.post(url, submitData, AJAX.responseHandler);\n    });\n\n    $(document).on('submit', '.maxRowsForm', function () {\n        var unlimNumRows = $(this).find('input[name=\"unlim_num_rows\"]').val();\n\n        var maxRowsCheck = Functions.checkFormElementInRange(\n            this,\n            'session_max_rows',\n            Messages.strNotValidRowNumber,\n            1\n        );\n        var posCheck = Functions.checkFormElementInRange(\n            this,\n            'pos',\n            Messages.strNotValidRowNumber,\n            0,\n            unlimNumRows > 0 ? unlimNumRows - 1 : null\n        );\n\n        return maxRowsCheck && posCheck;\n    });\n\n    $('#insertBtn').on('click', function () {\n        Functions.insertValueQuery();\n    });\n\n    $('#view_as').on('click', function () {\n        Functions.selectContent(this, sqlBoxLocked, true);\n    });\n\n    $('#sqlquery').on('click', function () {\n        if ($(this).data('textarea-auto-select') === true) {\n            Functions.selectContent(this, sqlBoxLocked, true);\n        }\n    });\n}); // end $()\n\n/**\n * Starting from some th, change the class of all td under it.\n * If isAddClass is specified, it will be used to determine whether to add or remove the class.\n *\n * @param $thisTh\n * @param {string} newClass\n * @param isAddClass\n */\nSql.changeClassForColumn = function ($thisTh, newClass, isAddClass) {\n    // index 0 is the th containing the big T\n    var thIndex = $thisTh.index();\n    var hasBigT = $thisTh.closest('tr').children().first().hasClass('column_action');\n    // .eq() is zero-based\n    if (hasBigT) {\n        thIndex--;\n    }\n    var $table = $thisTh.parents('.table_results');\n    if (! $table.length) {\n        $table = $thisTh.parents('table').siblings('.table_results');\n    }\n    var $tds = $table.find('tbody tr').find('td.data').eq(thIndex);\n    if (isAddClass === undefined) {\n        $tds.toggleClass(newClass);\n    } else {\n        $tds.toggleClass(newClass, isAddClass);\n    }\n};\n\n/**\n * Handles browse foreign values modal dialog\n *\n * @param {object} $thisA reference to the browse foreign value link\n */\nSql.browseForeignDialog = function ($thisA) {\n    var formId = '#browse_foreign_form';\n    var showAllId = '#foreign_showAll';\n    var tableId = '#browse_foreign_table';\n    var filterId = '#input_foreign_filter';\n    var $dialog = null;\n    var argSep = CommonParams.get('arg_separator');\n    var params = $thisA.getPostData();\n    params += argSep + 'ajax_request=true';\n    $.post($thisA.attr('href'), params, function (data) {\n        // Creates browse foreign value dialog\n        $dialog = $('<div>').append(data.message).dialog({\n            title: Messages.strBrowseForeignValues,\n            width: Math.min($(window).width() - 100, 700),\n            maxHeight: $(window).height() - 100,\n            dialogClass: 'browse_foreign_modal',\n            close: function () {\n                // remove event handlers attached to elements related to dialog\n                $(tableId).off('click', 'td a.foreign_value');\n                $(formId).off('click', showAllId);\n                $(formId).off('submit');\n                // remove dialog itself\n                $(this).remove();\n            },\n            modal: true\n        });\n    }).done(function () {\n        var showAll = false;\n        $(tableId).on('click', 'td a.foreign_value', function (e) {\n            e.preventDefault();\n            var $input = $thisA.prev('input[type=text]');\n            // Check if input exists or get CEdit edit_box\n            if ($input.length === 0) {\n                $input = $thisA.closest('.edit_area').prev('.edit_box');\n            }\n            // Set selected value as input value\n            $input.val($(this).data('key'));\n            // Unchecks the Ignore checkbox for the current row\n            $input.trigger('change');\n\n            $dialog.dialog('close');\n        });\n        $(formId).on('click', showAllId, function () {\n            showAll = true;\n        });\n        $(formId).on('submit', function (e) {\n            e.preventDefault();\n            // if filter value is not equal to old value\n            // then reset page number to 1\n            if ($(filterId).val() !== $(filterId).data('old')) {\n                $(formId).find('select[name=pos]').val('0');\n            }\n            var postParams = $(this).serializeArray();\n            // if showAll button was clicked to submit form then\n            // add showAll button parameter to form\n            if (showAll) {\n                postParams.push({\n                    name: $(showAllId).attr('name'),\n                    value: $(showAllId).val()\n                });\n            }\n            // updates values in dialog\n            $.post($(this).attr('action') + '&ajax_request=1', postParams, function (data) {\n                var $obj = $('<div>').html(data.message);\n                $(formId).html($obj.find(formId).html());\n                $(tableId).html($obj.find(tableId).html());\n            });\n            showAll = false;\n        });\n    });\n};\n\n/**\n * Get the auto saved query key\n * @return {String}\n */\nSql.getAutoSavedKey = function () {\n    var db = $('input[name=\"db\"]').val();\n    var table = $('input[name=\"table\"]').val();\n    var key = db;\n    if (table !== undefined) {\n        key += '.' + table;\n    }\n    return 'autoSavedSql_' + key;\n};\n\nSql.checkSavedQuery = function () {\n    var key = Sql.getAutoSavedKey();\n\n    if (isStorageSupported('localStorage') &&\n        typeof window.localStorage.getItem(key) === 'string') {\n        Functions.ajaxShowMessage(Messages.strPreviousSaveQuery);\n    } else if (Cookies.get(key, { path: CommonParams.get('rootPath') })) {\n        Functions.ajaxShowMessage(Messages.strPreviousSaveQuery);\n    }\n};\n\nAJAX.registerOnload('sql.js', function () {\n    $('body').on('click', 'a.browse_foreign', function (e) {\n        e.preventDefault();\n        Sql.browseForeignDialog($(this));\n    });\n\n    /**\n     * vertical column highlighting in horizontal mode when hovering over the column header\n     */\n    $(document).on('mouseenter', 'th.column_heading.pointer', function () {\n        Sql.changeClassForColumn($(this), 'hover', true);\n    });\n    $(document).on('mouseleave', 'th.column_heading.pointer', function () {\n        Sql.changeClassForColumn($(this), 'hover', false);\n    });\n\n    /**\n     * vertical column marking in horizontal mode when clicking the column header\n     */\n    $(document).on('click', 'th.column_heading.marker', function () {\n        Sql.changeClassForColumn($(this), 'marked');\n    });\n\n    /**\n     * create resizable table\n     */\n    $('.sqlqueryresults').trigger('makegrid');\n\n    /**\n     * Check if there is any saved query\n     */\n    if (codeMirrorEditor || document.sqlform) {\n        Sql.checkSavedQuery();\n    }\n});\n\n/**\n * Profiling Chart\n */\nSql.makeProfilingChart = function () {\n    if ($('#profilingchart').length === 0 ||\n        $('#profilingchart').html().length !== 0 ||\n        !$.jqplot || !$.jqplot.Highlighter || !$.jqplot.PieRenderer\n    ) {\n        return;\n    }\n\n    var data = [];\n    $.each(JSON.parse($('#profilingChartData').html()), function (key, value) {\n        data.push([key, parseFloat(value)]);\n    });\n\n    // Remove chart and data divs contents\n    $('#profilingchart').html('').show();\n    $('#profilingChartData').html('');\n\n    Functions.createProfilingChart('profilingchart', data);\n};\n\n/**\n * initialize profiling data tables\n */\nSql.initProfilingTables = function () {\n    if (!$.tablesorter) {\n        return;\n    }\n    // Added to allow two direction sorting\n    $('#profiletable')\n        .find('thead th')\n        .off('click mousedown');\n\n    $('#profiletable').tablesorter({\n        widgets: ['zebra'],\n        sortList: [[0, 0]],\n        textExtraction: function (node) {\n            if (node.children.length > 0) {\n                return node.children[0].innerHTML;\n            } else {\n                return node.innerHTML;\n            }\n        }\n    });\n    // Added to allow two direction sorting\n    $('#profilesummarytable')\n        .find('thead th')\n        .off('click mousedown');\n\n    $('#profilesummarytable').tablesorter({\n        widgets: ['zebra'],\n        sortList: [[1, 1]],\n        textExtraction: function (node) {\n            if (node.children.length > 0) {\n                return node.children[0].innerHTML;\n            } else {\n                return node.innerHTML;\n            }\n        }\n    });\n};\n\nAJAX.registerOnload('sql.js', function () {\n    Sql.makeProfilingChart();\n    Sql.initProfilingTables();\n});\n"],"names":["Sql","urlDecode","str","decodeURIComponent","replace","urlEncode","encodeURIComponent","autoSave","query","key","getAutoSavedKey","isStorageSupported","window","localStorage","setItem","Cookies","set","path","CommonParams","get","showThisQuery","db","table","showThisQueryObject","JSON","stringify","setShowThisQuery","$","val","undefined","storedDb","parse","storedTable","storedQuery","prop","codeMirrorEditor","setValue","document","sqlform","sql_query","value","autoSaveWithSort","clearAutoSavedSort","removeItem","getFieldName","$tableResults","$thisField","thisFieldIndex","index","leftActionExist","find","first","hasClass","leftActionSkip","attr","fieldName","eq","clone","children","remove","end","text","$heading","$tempColComment","detach","append","trim","AJAX","registerTeardown","off","registerOnload","on","getValue","useLocalStorageValue","autoSavedSqlSort","is","sortStoredQuery","length","trigger","e","preventDefault","question","Functions","sprintf","Messages","strDoYouReally","escapeHtml","closest","$link","confirm","url","ajaxShowMessage","argsep","params","postData","getPostData","post","data","success","message","error","serialize","parent","toggle","event","textArea","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","each","location","href","body","appendChild","select","execCommand","err","alert","removeChild","makeGrid","html","strHideQueryBox","appendTo","hide","siblings","slideToggle","strShowQueryBox","before","$form","isShowQuery","varCount","$varDiv","empty","i","strBookmarkVariable","show","keycode","keyCode","which","charCode","elements","checkSqlQuery","$msgbox","$sqlqueryresultsouter","prepareForAjaxRequest","action_bookmark","setQuery","id_bookmark","highlightSql","menu","history","replaceState","handleMenu","setAll","ajax_reload","reload","table_name","CommonActions","refreshMain","Navigation","setDb","animate","scrollTop","ajaxRemoveMessage","$sqlqueryresults","parents","uniqueId","$targetTable","$headerCells","targetColumns","dummyTh","push","phrase","not","prepend","uiTableFilter","submitShowAllForm","submitData","source","responseHandler","strShowAllRowsWarning","handleSimulateQueryButton","delimiter","dbName","strFormEmpty","ajax","type","response","dialogContent","sql_data","len","strSQLQuery","strMatchedRows","matched_rows_url","matched_rows","$dialogContent","modal","strErrorProcessingRequest","$button","action","unlimNumRows","maxRowsCheck","checkFormElementInRange","strNotValidRowNumber","posCheck","insertValueQuery","selectContent","sqlBoxLocked","changeClassForColumn","$thisTh","newClass","isAddClass","thIndex","hasBigT","$table","$tds","toggleClass","browseForeignDialog","$thisA","formId","showAllId","tableId","filterId","$dialog","argSep","dialog","title","strBrowseForeignValues","Math","min","maxHeight","dialogClass","close","done","showAll","$input","prev","postParams","serializeArray","name","$obj","checkSavedQuery","getItem","strPreviousSaveQuery","makeProfilingChart","jqplot","Highlighter","PieRenderer","parseFloat","createProfilingChart","initProfilingTables","tablesorter","widgets","sortList","textExtraction","node","innerHTML"],"sourceRoot":""}