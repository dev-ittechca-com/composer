{"version":3,"file":"sql.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/sql.js"],"sourcesContent":["/**\n * @fileoverview    functions used wherever an sql query form is used\n *\n * @requires    jQuery\n * @requires    js/functions.js\n *\n * @test-module Sql\n */\n\n/* global isStorageSupported */ // js/config.js\n/* global codeMirrorEditor */ // js/functions.js\n/* global makeGrid */ // js/makegrid.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nvar Sql = {};\n\n/**\n * decode a string URL_encoded\n *\n * @param {string} str\n * @return {string} the URL-decoded string\n */\nSql.urlDecode = function (str) {\n    if (typeof str !== 'undefined') {\n        return decodeURIComponent(str.replace(/\\+/g, '%20'));\n    }\n};\n\n/**\n * encode a string URL_decoded\n *\n * @param {string} str\n * @return {string} the URL-encoded string\n */\nSql.urlEncode = function (str) {\n    if (typeof str !== 'undefined') {\n        return encodeURIComponent(str).replace(/%20/g, '+');\n    }\n};\n\n/**\n * Saves SQL query in local storage or cookie\n *\n * @param {string} query SQL query\n * @return {void}\n */\nSql.autoSave = function (query) {\n    if (query) {\n        var key = Sql.getAutoSavedKey();\n        if (isStorageSupported('localStorage')) {\n            window.localStorage.setItem(key, query);\n        } else {\n            Cookies.set(key, query, { path: CommonParams.get('rootPath') });\n        }\n    }\n};\n\n/**\n * Saves SQL query in local storage or cookie\n *\n * @param {string} db database name\n * @param {string} table table name\n * @param {string} query SQL query\n * @return {void}\n */\nSql.showThisQuery = function (db, table, query) {\n    var showThisQueryObject = {\n        'db': db,\n        'table': table,\n        'query': query\n    };\n    if (isStorageSupported('localStorage')) {\n        window.localStorage.showThisQuery = 1;\n        window.localStorage.showThisQueryObject = JSON.stringify(showThisQueryObject);\n    } else {\n        Cookies.set('showThisQuery', 1, { path: CommonParams.get('rootPath') });\n        Cookies.set('showThisQueryObject', JSON.stringify(showThisQueryObject), { path: CommonParams.get('rootPath') });\n    }\n};\n\n/**\n * Set query to codemirror if show this query is\n * checked and query for the db and table pair exists\n */\nSql.setShowThisQuery = function () {\n    var db = $('input[name=\"db\"]').val();\n    var table = $('input[name=\"table\"]').val();\n    if (isStorageSupported('localStorage')) {\n        if (window.localStorage.showThisQueryObject !== undefined) {\n            var storedDb = JSON.parse(window.localStorage.showThisQueryObject).db;\n            var storedTable = JSON.parse(window.localStorage.showThisQueryObject).table;\n            var storedQuery = JSON.parse(window.localStorage.showThisQueryObject).query;\n        }\n        if (window.localStorage.showThisQuery !== undefined\n            && window.localStorage.showThisQuery === '1') {\n            $('input[name=\"show_query\"]').prop('checked', true);\n            if (db === storedDb && table === storedTable) {\n                if (codeMirrorEditor) {\n                    codeMirrorEditor.setValue(storedQuery);\n                } else if (document.sqlform) {\n                    document.sqlform.sql_query.value = storedQuery;\n                }\n            }\n        } else {\n            $('input[name=\"show_query\"]').prop('checked', false);\n        }\n    }\n};\n\n/**\n * Saves SQL query with sort in local storage or cookie\n *\n * @param {string} query SQL query\n * @return {void}\n */\nSql.autoSaveWithSort = function (query) {\n    if (query) {\n        if (isStorageSupported('localStorage')) {\n            window.localStorage.setItem('autoSavedSqlSort', query);\n        } else {\n            Cookies.set('autoSavedSqlSort', query, { path: CommonParams.get('rootPath') });\n        }\n    }\n};\n\n/**\n * Clear saved SQL query with sort in local storage or cookie\n *\n * @return {void}\n */\nSql.clearAutoSavedSort = function () {\n    if (isStorageSupported('localStorage')) {\n        window.localStorage.removeItem('autoSavedSqlSort');\n    } else {\n        Cookies.set('autoSavedSqlSort', '', { path: CommonParams.get('rootPath') });\n    }\n};\n\n/**\n * Get the field name for the current field.  Required to construct the query\n * for grid editing\n *\n * @param $tableResults enclosing results table\n * @param $thisField    jQuery object that points to the current field's tr\n *\n * @return {string}\n */\nSql.getFieldName = function ($tableResults, $thisField) {\n    var thisFieldIndex = $thisField.index();\n    // ltr or rtl direction does not impact how the DOM was generated\n    // check if the action column in the left exist\n    var leftActionExist = !$tableResults.find('th').first().hasClass('draggable');\n    // number of column span for checkbox and Actions\n    var leftActionSkip = leftActionExist ? $tableResults.find('th').first().attr('colspan') - 1 : 0;\n\n    // If this column was sorted, the text of the a element contains something\n    // like <small>1</small> that is useful to indicate the order in case\n    // of a sort on multiple columns; however, we dont want this as part\n    // of the column name so we strip it ( .clone() to .end() )\n    var fieldName = $tableResults\n        .find('thead')\n        .find('th')\n        .eq(thisFieldIndex - leftActionSkip)\n        .find('a')\n        .clone()    // clone the element\n        .children() // select all the children\n        .remove()   // remove all of them\n        .end()      // go back to the selected element\n        .text();    // grab the text\n    // happens when just one row (headings contain no a)\n    if (fieldName === '') {\n        var $heading = $tableResults.find('thead').find('th').eq(thisFieldIndex - leftActionSkip).children('span');\n        // may contain column comment enclosed in a span - detach it temporarily to read the column name\n        var $tempColComment = $heading.children().detach();\n        fieldName = $heading.text();\n        // re-attach the column comment\n        $heading.append($tempColComment);\n    }\n\n    fieldName = fieldName.trim();\n\n    return fieldName;\n};\n\n/**\n * @type {boolean} lock for the sqlbox textarea in the querybox\n */\nlet sqlBoxLocked = false;\n\n/**\n * @type {boolean[]} holds elements which content should only selected once\n */\nconst onlyOnceElements = [];\n\n/**\n * Handles 'Simulate query' button on SQL query box.\n *\n * @return {void}\n */\nconst handleSimulateQueryButton = function () {\n    const updateRegExp = new RegExp('^\\\\s*UPDATE\\\\s+((`[^`]+`)|([A-Za-z0-9_$]+))\\\\s+SET\\\\s', 'i');\n    const deleteRegExp = new RegExp('^\\\\s*DELETE\\\\s+FROM\\\\s', 'i');\n    let query = '';\n\n    if (codeMirrorEditor) {\n        query = codeMirrorEditor.getValue();\n    } else {\n        query = $('#sqlquery').val();\n    }\n\n    const $simulateDml = $('#simulate_dml');\n    if (updateRegExp.test(query) || deleteRegExp.test(query)) {\n        if (! $simulateDml.length) {\n            $('#button_submit_query').before(\n                '<input type=\"button\" id=\"simulate_dml\"' +\n                'tabindex=\"199\" class=\"btn btn-primary\" value=\"' + Messages.strSimulateDML + '\">'\n            );\n        }\n    } else {\n        if ($simulateDml.length) {\n            $simulateDml.remove();\n        }\n    }\n};\n\n/**\n * selects the content of a given object, f.e. a textarea\n *\n * @param {HTMLTextAreaElement} element Element of which the content will be selected\n */\nconst selectContent = function (element) {\n    if (onlyOnceElements[element.name]) {\n        return;\n    }\n\n    onlyOnceElements[element.name] = true;\n\n    if (sqlBoxLocked) {\n        return;\n    }\n\n    element.select();\n};\n\n/**\n * Sets current value for query box.\n * @param {string} query\n * @return {void}\n */\nconst setQuery = function (query) {\n    if (codeMirrorEditor) {\n        codeMirrorEditor.setValue(query);\n        codeMirrorEditor.focus();\n    } else if (document.sqlform) {\n        document.sqlform.sql_query.value = query;\n        document.sqlform.sql_query.focus();\n    }\n};\n\n/**\n * Create quick sql statements.\n *\n * @param {'clear'|'format'|'saved'|'selectall'|'select'|'insert'|'update'|'delete'} queryType\n *\n */\nconst insertQuery = function (queryType) {\n    var table;\n    if (queryType === 'clear') {\n        setQuery('');\n        return;\n    } else if (queryType === 'format') {\n        if (codeMirrorEditor) {\n            $('#querymessage').html(Messages.strFormatting +\n                '&nbsp;<img class=\"ajaxIcon\" src=\"' +\n                themeImagePath + 'ajax_clock_small.gif\" alt=\"\">');\n            var params = {\n                'ajax_request': true,\n                'sql': codeMirrorEditor.getValue(),\n                'server': CommonParams.get('server')\n            };\n            $.ajax({\n                type: 'POST',\n                url: 'index.php?route=/database/sql/format',\n                data: params,\n                success: function (data) {\n                    if (data.success) {\n                        codeMirrorEditor.setValue(data.sql);\n                    }\n                    $('#querymessage').html('');\n                },\n                error: function () {\n                    $('#querymessage').html('');\n                }\n            });\n        }\n        return;\n    } else if (queryType === 'saved') {\n        var db = $('input[name=\"db\"]').val();\n        table = $('input[name=\"table\"]').val();\n        var key = db;\n        if (table !== undefined) {\n            key += '.' + table;\n        }\n        key = 'autoSavedSql_' + key;\n        if (isStorageSupported('localStorage') &&\n            typeof window.localStorage.getItem(key) === 'string') {\n            setQuery(window.localStorage.getItem(key));\n        } else if (Cookies.get(key, { path: CommonParams.get('rootPath') })) {\n            setQuery(Cookies.get(key, { path: CommonParams.get('rootPath') }));\n        } else {\n            Functions.ajaxShowMessage(Messages.strNoAutoSavedQuery);\n        }\n        return;\n    }\n\n    var query = '';\n    var myListBox = document.sqlform.dummy;\n    table = document.sqlform.table.value;\n\n    if (myListBox.options.length > 0) {\n        sqlBoxLocked = true;\n        var columnsList = '';\n        var valDis = '';\n        var editDis = '';\n        var NbSelect = 0;\n        for (var i = 0; i < myListBox.options.length; i++) {\n            NbSelect++;\n            if (NbSelect > 1) {\n                columnsList += ', ';\n                valDis += ',';\n                editDis += ',';\n            }\n            columnsList += myListBox.options[i].value;\n            valDis += '\\'[value-' + NbSelect + ']\\'';\n            editDis += myListBox.options[i].value + '=\\'[value-' + NbSelect + ']\\'';\n        }\n        if (queryType === 'selectall') {\n            query = 'SELECT * FROM `' + table + '` WHERE 1';\n        } else if (queryType === 'select') {\n            query = 'SELECT ' + columnsList + ' FROM `' + table + '` WHERE 1';\n        } else if (queryType === 'insert') {\n            query = 'INSERT INTO `' + table + '`(' + columnsList + ') VALUES (' + valDis + ')';\n        } else if (queryType === 'update') {\n            query = 'UPDATE `' + table + '` SET ' + editDis + ' WHERE 1';\n        } else if (queryType === 'delete') {\n            query = 'DELETE FROM `' + table + '` WHERE 0';\n        }\n        setQuery(query);\n        sqlBoxLocked = false;\n    }\n};\n\n/**\n * Inserts multiple fields.\n *\n */\nconst insertValueQuery = function () {\n    var myQuery = document.sqlform.sql_query;\n    var myListBox = document.sqlform.dummy;\n\n    if (myListBox.options.length > 0) {\n        sqlBoxLocked = true;\n        var columnsList = '';\n        var NbSelect = 0;\n        for (var i = 0; i < myListBox.options.length; i++) {\n            if (myListBox.options[i].selected) {\n                NbSelect++;\n                if (NbSelect > 1) {\n                    columnsList += ', ';\n                }\n                columnsList += myListBox.options[i].value;\n            }\n        }\n\n        /* CodeMirror support */\n        if (codeMirrorEditor) {\n            codeMirrorEditor.replaceSelection(columnsList);\n            codeMirrorEditor.focus();\n            // IE support\n        } else if (document.selection) {\n            myQuery.focus();\n            var sel = document.selection.createRange();\n            sel.text = columnsList;\n            // MOZILLA/NETSCAPE support\n        } else if (document.sqlform.sql_query.selectionStart || document.sqlform.sql_query.selectionStart === '0') {\n            var startPos = document.sqlform.sql_query.selectionStart;\n            var endPos = document.sqlform.sql_query.selectionEnd;\n            var SqlString = document.sqlform.sql_query.value;\n\n            myQuery.value = SqlString.substring(0, startPos) + columnsList + SqlString.substring(endPos, SqlString.length);\n            myQuery.focus();\n        } else {\n            myQuery.value += columnsList;\n        }\n\n        // eslint-disable-next-line no-unused-vars\n        sqlBoxLocked = false;\n    }\n};\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('sql.js', function () {\n    $(document).off('click', 'a.delete_row.ajax');\n    $(document).off('submit', '.bookmarkQueryForm');\n    $('input#bkm_label').off('input');\n    $(document).off('makegrid', '.sqlqueryresults');\n    $('#togglequerybox').off('click');\n    $(document).off('click', '#button_submit_query');\n    $(document).off('change', '#id_bookmark');\n    $('input[name=\\'bookmark_variable\\']').off('keypress');\n    $(document).off('submit', '#sqlqueryform.ajax');\n    $(document).off('click', 'input[name=navig].ajax');\n    $(document).off('submit', 'form[name=\\'displayOptionsForm\\'].ajax');\n    $(document).off('mouseenter', 'th.column_heading.pointer');\n    $(document).off('mouseleave', 'th.column_heading.pointer');\n    $(document).off('click', 'th.column_heading.marker');\n    $(document).off('scroll', window);\n    $(document).off('keyup', '.filter_rows');\n    if (codeMirrorEditor) {\n        codeMirrorEditor.off('change');\n    } else {\n        $('#sqlquery').off('input propertychange');\n    }\n    $('body').off('click', '.navigation .showAllRows');\n    $('body').off('click', 'a.browse_foreign');\n    $('body').off('click', '#simulate_dml');\n    $('body').off('keyup', '#sqlqueryform');\n    $('body').off('click', 'form[name=\"resultsForm\"].ajax button[name=\"submit_mult\"], form[name=\"resultsForm\"].ajax input[name=\"submit_mult\"]');\n    $(document).off('submit', '.maxRowsForm');\n    $(document).off('click', '#view_as');\n    $(document).off('click', '#sqlquery');\n    $(document).off('click', 'input.sqlbutton');\n    $('#fieldsSelect').off('dblclick');\n});\n\n/**\n * @description <p>Ajax scripts for sql and browse pages</p>\n *\n * Actions ajaxified here:\n * <ul>\n * <li>Retrieve results of an SQL query</li>\n * <li>Paginate the results table</li>\n * <li>Sort the results table</li>\n * <li>Change table according to display options</li>\n * <li>Grid editing of data</li>\n * <li>Saving a bookmark</li>\n * </ul>\n *\n * @name        document.ready\n * @memberOf    jQuery\n */\nAJAX.registerOnload('sql.js', function () {\n    if (codeMirrorEditor || document.sqlform) {\n        Sql.setShowThisQuery();\n    }\n    $(function () {\n        if (codeMirrorEditor) {\n            codeMirrorEditor.on('change', function () {\n                Sql.autoSave(codeMirrorEditor.getValue());\n            });\n        } else {\n            $('#sqlquery').on('input propertychange', function () {\n                Sql.autoSave($('#sqlquery').val());\n            });\n            var useLocalStorageValue = isStorageSupported('localStorage') && typeof window.localStorage.autoSavedSqlSort !== 'undefined';\n            // Save sql query with sort\n            if ($('#RememberSorting') !== undefined && $('#RememberSorting').is(':checked')) {\n                $('select[name=\"sql_query\"]').on('change', function () {\n                    Sql.autoSaveWithSort($(this).val());\n                });\n                $('.sortlink').on('click', function () {\n                    Sql.clearAutoSavedSort();\n                });\n            } else {\n                Sql.clearAutoSavedSort();\n            }\n            // If sql query with sort for current table is stored, change sort by key select value\n            var sortStoredQuery = useLocalStorageValue ? window.localStorage.autoSavedSqlSort : Cookies.get('autoSavedSqlSort', { path: CommonParams.get('rootPath') });\n            if (typeof sortStoredQuery !== 'undefined' && sortStoredQuery !== $('select[name=\"sql_query\"]').val() && $('select[name=\"sql_query\"] option[value=\"' + sortStoredQuery + '\"]').length !== 0) {\n                $('select[name=\"sql_query\"]').val(sortStoredQuery).trigger('change');\n            }\n        }\n    });\n\n    // Delete row from SQL results\n    $(document).on('click', 'a.delete_row.ajax', function (e) {\n        e.preventDefault();\n        var question =  Functions.sprintf(Messages.strDoYouReally, Functions.escapeHtml($(this).closest('td').find('div').text()));\n        var $link = $(this);\n        $link.confirm(question, $link.attr('href'), function (url) {\n            Functions.ajaxShowMessage();\n            var argsep = CommonParams.get('arg_separator');\n            var params = 'ajax_request=1' + argsep + 'is_js_confirmed=1';\n            var postData = $link.getPostData();\n            if (postData) {\n                params += argsep + postData;\n            }\n            $.post(url, params, function (data) {\n                if (data.success) {\n                    Functions.ajaxShowMessage(data.message);\n                    $link.closest('tr').remove();\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            });\n        });\n    });\n\n    // Ajaxification for 'Bookmark this SQL query'\n    $(document).on('submit', '.bookmarkQueryForm', function (e) {\n        e.preventDefault();\n        Functions.ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        $.post($(this).attr('action'), 'ajax_request=1' + argsep + $(this).serialize(), function (data) {\n            if (data.success) {\n                Functions.ajaxShowMessage(data.message);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    /* Hides the bookmarkoptions checkboxes when the bookmark label is empty */\n    $('input#bkm_label').on('input', function () {\n        $('input#id_bkm_all_users, input#id_bkm_replace')\n            .parent()\n            .toggle($(this).val().length > 0);\n    }).trigger('input');\n\n    /**\n     * Attach Event Handler for 'Copy to clipboard'\n     */\n    $(document).on('click', '#copyToClipBoard', function (event) {\n        event.preventDefault();\n\n        var textArea = document.createElement('textarea');\n\n        //\n        // *** This styling is an extra step which is likely not required. ***\n        //\n        // Why is it here? To ensure:\n        // 1. the element is able to have focus and selection.\n        // 2. if element was to flash render it has minimal visual impact.\n        // 3. less flakyness with selection and copying which **might** occur if\n        //    the textarea element is not visible.\n        //\n        // The likelihood is the element won't even render, not even a flash,\n        // so some of these are just precautions. However in IE the element\n        // is visible whilst the popup box asking the user for permission for\n        // the web page to copy to the clipboard.\n        //\n\n        // Place in top-left corner of screen regardless of scroll position.\n        textArea.style.position = 'fixed';\n        textArea.style.top = 0;\n        textArea.style.left = 0;\n\n        // Ensure it has a small width and height. Setting to 1px / 1em\n        // doesn't work as this gives a negative w/h on some browsers.\n        textArea.style.width = '2em';\n        textArea.style.height = '2em';\n\n        // We don't need padding, reducing the size if it does flash render.\n        textArea.style.padding = 0;\n\n        // Clean up any borders.\n        textArea.style.border = 'none';\n        textArea.style.outline = 'none';\n        textArea.style.boxShadow = 'none';\n\n        // Avoid flash of white box if rendered for any reason.\n        textArea.style.background = 'transparent';\n\n        textArea.value = '';\n\n        $('#server-breadcrumb a').each(function () {\n            textArea.value += $(this).data('raw-text') + '/';\n        });\n        textArea.value += '\\t\\t' + window.location.href;\n        textArea.value += '\\n';\n        $('.alert-success').each(function () {\n            textArea.value += $(this).text() + '\\n\\n';\n        });\n\n        $('.sql pre').each(function () {\n            textArea.value += $(this).text() + '\\n\\n';\n        });\n\n        $('.table_results .column_heading a').each(function () {\n            // Don't copy ordering number text within <small> tag\n            textArea.value += $(this).clone().find('small').remove().end().text() + '\\t';\n        });\n\n        textArea.value += '\\n';\n        $('.table_results tbody tr').each(function () {\n            $(this).find('.data span').each(function () {\n                // Extract <em> tag for NULL values before converting to string to not mess up formatting\n                var data = $(this).find('em').length !== 0 ? $(this).find('em')[0] : this;\n                textArea.value += $(data).text() + '\\t';\n            });\n            textArea.value += '\\n';\n        });\n\n        // eslint-disable-next-line compat/compat\n        document.body.appendChild(textArea);\n\n        textArea.select();\n\n        try {\n            document.execCommand('copy');\n        } catch (err) {\n            alert('Sorry! Unable to copy');\n        }\n\n        // eslint-disable-next-line compat/compat\n        document.body.removeChild(textArea);\n    }); // end of Copy to Clipboard action\n\n    /**\n     * Attach the {@link makegrid} function to a custom event, which will be\n     * triggered manually everytime the table of results is reloaded\n     * @memberOf    jQuery\n     */\n    $(document).on('makegrid', '.sqlqueryresults', function () {\n        $('.table_results').each(function () {\n            makeGrid(this);\n        });\n    });\n\n    /**\n     * Append the \"Show/Hide query box\" message to the query input form\n     *\n     * @memberOf jQuery\n     * @name    appendToggleSpan\n     */\n    // do not add this link more than once\n    if (! $('#sqlqueryform').find('button').is('#togglequerybox')) {\n        $('<button class=\"btn btn-secondary\" id=\"togglequerybox\"></button>')\n            .html(Messages.strHideQueryBox)\n            .appendTo('#sqlqueryform')\n        // initially hidden because at this point, nothing else\n        // appears under the link\n            .hide();\n\n        // Attach the toggling of the query box visibility to a click\n        $('#togglequerybox').on('click', function () {\n            var $link = $(this);\n            $link.siblings().slideToggle('fast');\n            if ($link.text() === Messages.strHideQueryBox) {\n                $link.text(Messages.strShowQueryBox);\n                // cheap trick to add a spacer between the menu tabs\n                // and \"Show query box\"; feel free to improve!\n                $('#togglequerybox_spacer').remove();\n                $link.before('<br id=\"togglequerybox_spacer\">');\n            } else {\n                $link.text(Messages.strHideQueryBox);\n            }\n            // avoid default click action\n            return false;\n        });\n    }\n\n\n    /**\n     * Event handler for sqlqueryform.ajax button_submit_query\n     *\n     * @memberOf    jQuery\n     */\n    $(document).on('click', '#button_submit_query', function () {\n        $('.alert-success,.alert-danger').hide();\n        // hide already existing error or success message\n        var $form = $(this).closest('form');\n        // the Go button related to query submission was clicked,\n        // instead of the one related to Bookmarks, so empty the\n        // id_bookmark selector to avoid misinterpretation in\n        // /import about what needs to be done\n        $form.find('select[name=id_bookmark]').val('');\n        var isShowQuery =  $('input[name=\"show_query\"]').is(':checked');\n        if (isShowQuery) {\n            window.localStorage.showThisQuery = '1';\n            var db = $('input[name=\"db\"]').val();\n            var table = $('input[name=\"table\"]').val();\n            var query;\n            if (codeMirrorEditor) {\n                query = codeMirrorEditor.getValue();\n            } else {\n                query = $('#sqlquery').val();\n            }\n            Sql.showThisQuery(db, table, query);\n        } else {\n            window.localStorage.showThisQuery = '0';\n        }\n    });\n\n    /**\n     * Event handler to show appropriate number of variable boxes\n     * based on the bookmarked query\n     */\n    $(document).on('change', '#id_bookmark', function () {\n        var varCount = $(this).find('option:selected').data('varcount');\n        if (typeof varCount === 'undefined') {\n            varCount = 0;\n        }\n\n        var $varDiv = $('#bookmarkVariables');\n        $varDiv.empty();\n        for (var i = 1; i <= varCount; i++) {\n            $varDiv.append($('<div class=\"mb-3\">'));\n            $varDiv.append($('<label for=\"bookmarkVariable' + i + '\">' + Functions.sprintf(Messages.strBookmarkVariable, i) + '</label>'));\n            $varDiv.append($('<input class=\"form-control\" type=\"text\" size=\"10\" name=\"bookmark_variable[' + i + ']\" id=\"bookmarkVariable' + i + '\">'));\n            $varDiv.append($('</div>'));\n        }\n\n        if (varCount === 0) {\n            $varDiv.parent().hide();\n        } else {\n            $varDiv.parent().show();\n        }\n    });\n\n    /**\n     * Event handler for hitting enter on sqlqueryform bookmark_variable\n     * (the Variable textfield in Bookmarked SQL query section)\n     *\n     * @memberOf    jQuery\n     */\n    $('input[name=bookmark_variable]').on('keypress', function (event) {\n        // force the 'Enter Key' to implicitly click the #button_submit_bookmark\n        var keycode = (event.keyCode ? event.keyCode : (event.which ? event.which : event.charCode));\n        if (keycode === 13) { // keycode for enter key\n            // When you press enter in the sqlqueryform, which\n            // has 2 submit buttons, the default is to run the\n            // #button_submit_query, because of the tabindex\n            // attribute.\n            // This submits #button_submit_bookmark instead,\n            // because when you are in the Bookmarked SQL query\n            // section and hit enter, you expect it to do the\n            // same action as the Go button in that section.\n            $('#button_submit_bookmark').trigger('click');\n            return false;\n        } else  {\n            return true;\n        }\n    });\n\n    /**\n     * Ajax Event handler for 'SQL Query Submit'\n     *\n     * @see         Functions.ajaxShowMessage()\n     * @memberOf    jQuery\n     * @name        sqlqueryform_submit\n     */\n    $(document).on('submit', '#sqlqueryform.ajax', function (event) {\n        event.preventDefault();\n\n        var $form = $(this);\n        if (codeMirrorEditor) {\n            $form[0].elements.sql_query.value = codeMirrorEditor.getValue();\n        }\n        if (! Functions.checkSqlQuery($form[0])) {\n            return false;\n        }\n\n        // remove any div containing a previous error message\n        $('.alert-danger').remove();\n\n        var $msgbox = Functions.ajaxShowMessage();\n        var $sqlqueryresultsouter = $('#sqlqueryresultsouter');\n\n        Functions.prepareForAjaxRequest($form);\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post($form.attr('action'), $form.serialize() + argsep + 'ajax_page_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                // success happens if the query returns rows or not\n\n                // show a message that stays on screen\n                if (typeof data.action_bookmark !== 'undefined') {\n                    // view only\n                    if ('1' === data.action_bookmark) {\n                        $('#sqlquery').text(data.sql_query);\n                        // send to codemirror if possible\n                        setQuery(data.sql_query);\n                    }\n                    // delete\n                    if ('2' === data.action_bookmark) {\n                        $('#id_bookmark option[value=\\'' + data.id_bookmark + '\\']').remove();\n                        // if there are no bookmarked queries now (only the empty option),\n                        // remove the bookmark section\n                        if ($('#id_bookmark option').length === 1) {\n                            $('#fieldsetBookmarkOptions').hide();\n                            $('#fieldsetBookmarkOptionsFooter').hide();\n                        }\n                    }\n                }\n                $sqlqueryresultsouter\n                    .show()\n                    .html(data.message);\n                Functions.highlightSql($sqlqueryresultsouter);\n\n                if (data.menu) {\n                    history.replaceState({\n                        menu : data.menu\n                    },\n                    null\n                    );\n                    AJAX.handleMenu.replace(data.menu);\n                }\n\n                if (data.params) {\n                    CommonParams.setAll(data.params);\n                }\n\n                if (typeof data.ajax_reload !== 'undefined') {\n                    if (data.ajax_reload.reload) {\n                        if (data.ajax_reload.table_name) {\n                            CommonParams.set('table', data.ajax_reload.table_name);\n                            CommonActions.refreshMain();\n                        } else {\n                            Navigation.reload();\n                        }\n                    }\n                } else if (typeof data.reload !== 'undefined') {\n                    // this happens if a USE or DROP command was typed\n                    CommonActions.setDb(data.db);\n                    var url;\n                    if (data.db) {\n                        if (data.table) {\n                            url = 'index.php?route=/table/sql';\n                        } else {\n                            url = 'index.php?route=/database/sql';\n                        }\n                    } else {\n                        url = 'index.php?route=/server/sql';\n                    }\n                    CommonActions.refreshMain(url, function () {\n                        $('#sqlqueryresultsouter')\n                            .show()\n                            .html(data.message);\n                        Functions.highlightSql($('#sqlqueryresultsouter'));\n                    });\n                }\n\n                $('.sqlqueryresults').trigger('makegrid');\n                $('#togglequerybox').show();\n\n                if (typeof data.action_bookmark === 'undefined') {\n                    if ($('#sqlqueryform input[name=\"retain_query_box\"]').is(':checked') !== true) {\n                        if ($('#togglequerybox').siblings(':visible').length > 0) {\n                            $('#togglequerybox').trigger('click');\n                        }\n                    }\n                }\n            } else if (typeof data !== 'undefined' && data.success === false) {\n                // show an error message that stays on screen\n                $sqlqueryresultsouter\n                    .show()\n                    .html(data.error);\n                $('html, body').animate({ scrollTop: $(document).height() }, 200);\n            }\n            Functions.ajaxRemoveMessage($msgbox);\n        }); // end $.post()\n    }); // end SQL Query submit\n\n    /**\n     * Ajax Event handler for the display options\n     * @memberOf    jQuery\n     * @name        displayOptionsForm_submit\n     */\n    $(document).on('submit', 'form[name=\\'displayOptionsForm\\'].ajax', function (event) {\n        event.preventDefault();\n\n        var $form = $(this);\n\n        var $msgbox = Functions.ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        $.post($form.attr('action'), $form.serialize() + argsep + 'ajax_request=true', function (data) {\n            Functions.ajaxRemoveMessage($msgbox);\n            var $sqlqueryresults = $form.parents('.sqlqueryresults');\n            $sqlqueryresults\n                .html(data.message)\n                .trigger('makegrid');\n            Functions.highlightSql($sqlqueryresults);\n        }); // end $.post()\n    }); // end displayOptionsForm handler\n\n    // Filter row handling. --STARTS--\n    $(document).on('keyup', '.filter_rows', function () {\n        var uniqueId = $(this).data('for');\n        var $targetTable = $('.table_results[data-uniqueId=\\'' + uniqueId + '\\']');\n        var $headerCells = $targetTable.find('th[data-column]');\n        var targetColumns = [];\n        // To handle colspan=4, in case of edit,copy etc options.\n        var dummyTh = ($('.edit_row_anchor').length !== 0 ?\n            '<th class=\"hide dummy_th\"></th><th class=\"hide dummy_th\"></th><th class=\"hide dummy_th\"></th>'\n            : '');\n        // Selecting columns that will be considered for filtering and searching.\n        $headerCells.each(function () {\n            targetColumns.push($(this).text().trim());\n        });\n\n        var phrase = $(this).val();\n        // Set same value to both Filter rows fields.\n        $('.filter_rows[data-for=\\'' + uniqueId + '\\']').not(this).val(phrase);\n        // Handle colspan.\n        $targetTable.find('thead > tr').prepend(dummyTh);\n        $.uiTableFilter($targetTable, phrase, targetColumns);\n        $targetTable.find('th.dummy_th').remove();\n    });\n    // Filter row handling. --ENDS--\n\n    // Prompt to confirm on Show All\n    $('body').on('click', '.navigation .showAllRows', function (e) {\n        e.preventDefault();\n        var $form = $(this).parents('form');\n\n        Sql.submitShowAllForm = function () {\n            var argsep = CommonParams.get('arg_separator');\n            var submitData = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true';\n            Functions.ajaxShowMessage();\n            AJAX.source = $form;\n            $.post($form.attr('action'), submitData, AJAX.responseHandler);\n        };\n\n        if (! $(this).is(':checked')) { // already showing all rows\n            Sql.submitShowAllForm();\n        } else {\n            $form.confirm(Messages.strShowAllRowsWarning, $form.attr('action'), function () {\n                Sql.submitShowAllForm();\n            });\n        }\n    });\n\n    $('body').on('keyup', '#sqlqueryform', function () {\n        handleSimulateQueryButton();\n    });\n\n    /**\n     * Ajax event handler for 'Simulate DML'.\n     */\n    $('body').on('click', '#simulate_dml', function () {\n        var $form = $('#sqlqueryform');\n        var query = '';\n        var delimiter = $('#id_sql_delimiter').val();\n        var dbName = $form.find('input[name=\"db\"]').val();\n\n        if (codeMirrorEditor) {\n            query = codeMirrorEditor.getValue();\n        } else {\n            query = $('#sqlquery').val();\n        }\n\n        if (query.length === 0) {\n            alert(Messages.strFormEmpty);\n            $('#sqlquery').trigger('focus');\n            return false;\n        }\n\n        var $msgbox = Functions.ajaxShowMessage();\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/import/simulate-dml',\n            data: {\n                'server': CommonParams.get('server'),\n                'db': dbName,\n                'ajax_request': '1',\n                'sql_query': query,\n                'sql_delimiter': delimiter\n            },\n            success: function (response) {\n                Functions.ajaxRemoveMessage($msgbox);\n                if (response.success) {\n                    var dialogContent = '<div class=\"preview_sql\">';\n                    if (response.sql_data) {\n                        var len = response.sql_data.length;\n                        for (var i = 0; i < len; i++) {\n                            dialogContent += '<strong>' + Messages.strSQLQuery +\n                                '</strong>' + response.sql_data[i].sql_query +\n                                Messages.strMatchedRows +\n                                ' <a href=\"' + response.sql_data[i].matched_rows_url +\n                                '\">' + response.sql_data[i].matched_rows + '</a><br>';\n                            if (i < len - 1) {\n                                dialogContent += '<hr>';\n                            }\n                        }\n                    } else {\n                        dialogContent += response.message;\n                    }\n                    dialogContent += '</div>';\n                    var $dialogContent = $(dialogContent);\n                    var modal = $('#simulateDmlModal');\n                    modal.modal('show');\n                    modal.find('.modal-body').first().html($dialogContent);\n                    modal.on('shown.bs.modal', function () {\n                        Functions.highlightSql(modal);\n                    });\n                } else {\n                    Functions.ajaxShowMessage(response.error);\n                }\n            },\n            error: function () {\n                Functions.ajaxShowMessage(Messages.strErrorProcessingRequest);\n            }\n        });\n    });\n\n    /**\n     * Handles multi submits of results browsing page such as edit, delete and export\n     */\n    $('body').on('click', 'form[name=\"resultsForm\"].ajax button[name=\"submit_mult\"], form[name=\"resultsForm\"].ajax input[name=\"submit_mult\"]', function (e) {\n        e.preventDefault();\n        var $button = $(this);\n        var action = $button.val();\n        var $form = $button.closest('form');\n        var argsep = CommonParams.get('arg_separator');\n        var submitData = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true' + argsep;\n        Functions.ajaxShowMessage();\n        AJAX.source = $form;\n\n        var url;\n        if (action === 'edit') {\n            submitData = submitData + argsep + 'default_action=update';\n            url = 'index.php?route=/table/change/rows';\n        } else if (action === 'copy') {\n            submitData = submitData + argsep + 'default_action=insert';\n            url = 'index.php?route=/table/change/rows';\n        } else if (action === 'export') {\n            url = 'index.php?route=/table/export/rows';\n        } else if (action === 'delete') {\n            url = 'index.php?route=/table/delete/confirm';\n        } else {\n            return;\n        }\n\n        $.post(url, submitData, AJAX.responseHandler);\n    });\n\n    $(document).on('submit', '.maxRowsForm', function () {\n        var unlimNumRows = $(this).find('input[name=\"unlim_num_rows\"]').val();\n\n        var maxRowsCheck = Functions.checkFormElementInRange(\n            this,\n            'session_max_rows',\n            Messages.strNotValidRowNumber,\n            1\n        );\n        var posCheck = Functions.checkFormElementInRange(\n            this,\n            'pos',\n            Messages.strNotValidRowNumber,\n            0,\n            unlimNumRows > 0 ? unlimNumRows - 1 : null\n        );\n\n        return maxRowsCheck && posCheck;\n    });\n\n    $('#insertBtn').on('click', function () {\n        insertValueQuery();\n    });\n\n    $('#view_as').on('click', function () {\n        selectContent(this);\n    });\n\n    $('#sqlquery').on('click', function () {\n        if ($(this).data('textarea-auto-select') === true) {\n            selectContent(this);\n        }\n    });\n\n    $(document).on('click', 'input.sqlbutton', function (evt) {\n        insertQuery(evt.target.id);\n        handleSimulateQueryButton();\n        return false;\n    });\n\n    $('#fieldsSelect').on('dblclick', () => {\n        insertValueQuery();\n    });\n});\n\n/**\n * Starting from some th, change the class of all td under it.\n * If isAddClass is specified, it will be used to determine whether to add or remove the class.\n *\n * @param $thisTh\n * @param {string} newClass\n * @param isAddClass\n */\nSql.changeClassForColumn = function ($thisTh, newClass, isAddClass) {\n    // index 0 is the th containing the big T\n    var thIndex = $thisTh.index();\n    var hasBigT = $thisTh.closest('tr').children().first().hasClass('column_action');\n    // .eq() is zero-based\n    if (hasBigT) {\n        thIndex--;\n    }\n    var $table = $thisTh.parents('.table_results');\n    if (! $table.length) {\n        $table = $thisTh.parents('table').siblings('.table_results');\n    }\n    var $tds = $table.find('tbody tr').find('td.data').eq(thIndex);\n    if (isAddClass === undefined) {\n        $tds.toggleClass(newClass);\n    } else {\n        $tds.toggleClass(newClass, isAddClass);\n    }\n};\n\n/**\n * Handles browse foreign values modal dialog\n *\n * @param {object} $thisA reference to the browse foreign value link\n */\nSql.browseForeignDialog = function ($thisA) {\n    var formId = '#browse_foreign_form';\n    var showAllId = '#foreign_showAll';\n    var tableId = '#browse_foreign_table';\n    var filterId = '#input_foreign_filter';\n    var $dialog = null;\n    var argSep = CommonParams.get('arg_separator');\n    var params = $thisA.getPostData();\n    params += argSep + 'ajax_request=true';\n    $.post($thisA.attr('href'), params, function (data) {\n        // Creates browse foreign value dialog\n        $dialog = $('<div>').append(data.message).dialog({\n            title: Messages.strBrowseForeignValues,\n            width: Math.min($(window).width() - 100, 700),\n            maxHeight: $(window).height() - 100,\n            dialogClass: 'browse_foreign_modal',\n            close: function () {\n                // remove event handlers attached to elements related to dialog\n                $(tableId).off('click', 'td a.foreign_value');\n                $(formId).off('click', showAllId);\n                $(formId).off('submit');\n                // remove dialog itself\n                $(this).remove();\n            },\n            modal: true\n        });\n    }).done(function () {\n        var showAll = false;\n        $(tableId).on('click', 'td a.foreign_value', function (e) {\n            e.preventDefault();\n            var $input = $thisA.prev('input[type=text]');\n            // Check if input exists or get CEdit edit_box\n            if ($input.length === 0) {\n                $input = $thisA.closest('.edit_area').prev('.edit_box');\n            }\n            // Set selected value as input value\n            $input.val($(this).data('key'));\n            // Unchecks the Ignore checkbox for the current row\n            $input.trigger('change');\n\n            $dialog.dialog('close');\n        });\n        $(formId).on('click', showAllId, function () {\n            showAll = true;\n        });\n        $(formId).on('submit', function (e) {\n            e.preventDefault();\n            // if filter value is not equal to old value\n            // then reset page number to 1\n            if ($(filterId).val() !== $(filterId).data('old')) {\n                $(formId).find('select[name=pos]').val('0');\n            }\n            var postParams = $(this).serializeArray();\n            // if showAll button was clicked to submit form then\n            // add showAll button parameter to form\n            if (showAll) {\n                postParams.push({\n                    name: $(showAllId).attr('name'),\n                    value: $(showAllId).val()\n                });\n            }\n            // updates values in dialog\n            $.post($(this).attr('action') + '&ajax_request=1', postParams, function (data) {\n                var $obj = $('<div>').html(data.message);\n                $(formId).html($obj.find(formId).html());\n                $(tableId).html($obj.find(tableId).html());\n            });\n            showAll = false;\n        });\n    });\n};\n\n/**\n * Get the auto saved query key\n * @return {String}\n */\nSql.getAutoSavedKey = function () {\n    var db = $('input[name=\"db\"]').val();\n    var table = $('input[name=\"table\"]').val();\n    var key = db;\n    if (table !== undefined) {\n        key += '.' + table;\n    }\n    return 'autoSavedSql_' + key;\n};\n\nSql.checkSavedQuery = function () {\n    var key = Sql.getAutoSavedKey();\n\n    if (isStorageSupported('localStorage') &&\n        typeof window.localStorage.getItem(key) === 'string') {\n        Functions.ajaxShowMessage(Messages.strPreviousSaveQuery);\n    } else if (Cookies.get(key, { path: CommonParams.get('rootPath') })) {\n        Functions.ajaxShowMessage(Messages.strPreviousSaveQuery);\n    }\n};\n\nAJAX.registerOnload('sql.js', function () {\n    $('body').on('click', 'a.browse_foreign', function (e) {\n        e.preventDefault();\n        Sql.browseForeignDialog($(this));\n    });\n\n    /**\n     * vertical column highlighting in horizontal mode when hovering over the column header\n     */\n    $(document).on('mouseenter', 'th.column_heading.pointer', function () {\n        Sql.changeClassForColumn($(this), 'hover', true);\n    });\n    $(document).on('mouseleave', 'th.column_heading.pointer', function () {\n        Sql.changeClassForColumn($(this), 'hover', false);\n    });\n\n    /**\n     * vertical column marking in horizontal mode when clicking the column header\n     */\n    $(document).on('click', 'th.column_heading.marker', function () {\n        Sql.changeClassForColumn($(this), 'marked');\n    });\n\n    /**\n     * create resizable table\n     */\n    $('.sqlqueryresults').trigger('makegrid');\n\n    /**\n     * Check if there is any saved query\n     */\n    if (codeMirrorEditor || document.sqlform) {\n        Sql.checkSavedQuery();\n    }\n});\n\n/**\n * Profiling Chart\n */\nSql.makeProfilingChart = function () {\n    if ($('#profilingchart').length === 0 ||\n        $('#profilingchart').html().length !== 0 ||\n        !$.jqplot || !$.jqplot.Highlighter || !$.jqplot.PieRenderer\n    ) {\n        return;\n    }\n\n    var data = [];\n    $.each(JSON.parse($('#profilingChartData').html()), function (key, value) {\n        data.push([key, parseFloat(value)]);\n    });\n\n    // Remove chart and data divs contents\n    $('#profilingchart').html('').show();\n    $('#profilingChartData').html('');\n\n    Functions.createProfilingChart('profilingchart', data);\n};\n\n/**\n * initialize profiling data tables\n */\nSql.initProfilingTables = function () {\n    if (!$.tablesorter) {\n        return;\n    }\n    // Added to allow two direction sorting\n    $('#profiletable')\n        .find('thead th')\n        .off('click mousedown');\n\n    $('#profiletable').tablesorter({\n        widgets: ['zebra'],\n        sortList: [[0, 0]],\n        textExtraction: function (node) {\n            if (node.children.length > 0) {\n                return node.children[0].innerHTML;\n            } else {\n                return node.innerHTML;\n            }\n        }\n    });\n    // Added to allow two direction sorting\n    $('#profilesummarytable')\n        .find('thead th')\n        .off('click mousedown');\n\n    $('#profilesummarytable').tablesorter({\n        widgets: ['zebra'],\n        sortList: [[1, 1]],\n        textExtraction: function (node) {\n            if (node.children.length > 0) {\n                return node.children[0].innerHTML;\n            } else {\n                return node.innerHTML;\n            }\n        }\n    });\n};\n\nAJAX.registerOnload('sql.js', function () {\n    Sql.makeProfilingChart();\n    Sql.initProfilingTables();\n});\n"],"names":["Sql","urlDecode","str","decodeURIComponent","replace","urlEncode","encodeURIComponent","autoSave","query","key","getAutoSavedKey","isStorageSupported","window","localStorage","setItem","Cookies","set","path","CommonParams","get","showThisQuery","db","table","showThisQueryObject","JSON","stringify","setShowThisQuery","$","val","undefined","storedDb","parse","storedTable","storedQuery","prop","codeMirrorEditor","setValue","document","sqlform","sql_query","value","autoSaveWithSort","clearAutoSavedSort","removeItem","getFieldName","$tableResults","$thisField","thisFieldIndex","index","leftActionExist","find","first","hasClass","leftActionSkip","attr","fieldName","eq","clone","children","remove","end","text","$heading","$tempColComment","detach","append","trim","sqlBoxLocked","onlyOnceElements","handleSimulateQueryButton","updateRegExp","RegExp","deleteRegExp","getValue","$simulateDml","test","length","before","Messages","strSimulateDML","selectContent","element","name","select","setQuery","focus","insertQuery","queryType","html","strFormatting","themeImagePath","params","ajax","type","url","data","success","sql","error","getItem","Functions","ajaxShowMessage","strNoAutoSavedQuery","myListBox","dummy","options","columnsList","valDis","editDis","NbSelect","i","insertValueQuery","myQuery","selected","replaceSelection","selection","sel","createRange","selectionStart","startPos","endPos","selectionEnd","SqlString","substring","AJAX","registerTeardown","off","registerOnload","on","useLocalStorageValue","autoSavedSqlSort","is","sortStoredQuery","trigger","e","preventDefault","question","sprintf","strDoYouReally","escapeHtml","closest","$link","confirm","argsep","postData","getPostData","post","message","serialize","parent","toggle","event","textArea","createElement","style","position","top","left","width","height","padding","border","outline","boxShadow","background","each","location","href","body","appendChild","execCommand","err","alert","removeChild","makeGrid","strHideQueryBox","appendTo","hide","siblings","slideToggle","strShowQueryBox","$form","isShowQuery","varCount","$varDiv","empty","strBookmarkVariable","show","keycode","keyCode","which","charCode","elements","checkSqlQuery","$msgbox","$sqlqueryresultsouter","prepareForAjaxRequest","action_bookmark","id_bookmark","highlightSql","menu","history","replaceState","handleMenu","setAll","ajax_reload","reload","table_name","CommonActions","refreshMain","Navigation","setDb","animate","scrollTop","ajaxRemoveMessage","$sqlqueryresults","parents","uniqueId","$targetTable","$headerCells","targetColumns","dummyTh","push","phrase","not","prepend","uiTableFilter","submitShowAllForm","submitData","source","responseHandler","strShowAllRowsWarning","delimiter","dbName","strFormEmpty","response","dialogContent","sql_data","len","strSQLQuery","strMatchedRows","matched_rows_url","matched_rows","$dialogContent","modal","strErrorProcessingRequest","$button","action","unlimNumRows","maxRowsCheck","checkFormElementInRange","strNotValidRowNumber","posCheck","evt","target","id","changeClassForColumn","$thisTh","newClass","isAddClass","thIndex","hasBigT","$table","$tds","toggleClass","browseForeignDialog","$thisA","formId","showAllId","tableId","filterId","$dialog","argSep","dialog","title","strBrowseForeignValues","Math","min","maxHeight","dialogClass","close","done","showAll","$input","prev","postParams","serializeArray","$obj","checkSavedQuery","strPreviousSaveQuery","makeProfilingChart","jqplot","Highlighter","PieRenderer","parseFloat","createProfilingChart","initProfilingTables","tablesorter","widgets","sortList","textExtraction","node","innerHTML"],"sourceRoot":""}