{"version":3,"file":"table/gis_visualization.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/table/gis_visualization.js"],"sourcesContent":["/**\n * @fileoverview    functions used for visualizing GIS data\n *\n * @requires    jquery\n * @requires    vendor/jquery/jquery.mousewheel.js\n */\n\n/* global drawOpenLayers */ // templates/table/gis_visualization/gis_visualization.twig\n\n// Constants\nvar zoomFactor = 1.5;\nvar defaultX = 0;\nvar defaultY = 0;\nvar defaultScale = 1;\n\n// Variables\nvar x = defaultX;\nvar y = defaultY;\nvar scale = defaultScale;\n\n/** @type {SVGElement|undefined} */\nvar gisSvg;\n/** @type {ol.Map|undefined} */\nvar map;\n\n/**\n * Zooms and pans the visualization.\n */\nfunction zoomAndPan () {\n    var g = gisSvg.getElementById('groupPanel');\n    if (!g) {\n        return;\n    }\n\n    $('#groupPanel', gisSvg).attr('transform', 'translate(' + x + ', ' + y + ') scale(' + scale + ')');\n    $('circle.vector', gisSvg).attr('r', 3 / scale);\n    $('circle.vector', gisSvg).attr('stroke-width', 2 / scale);\n    $('polyline.vector', gisSvg).attr('stroke-width', 2 / scale);\n    $('path.vector', gisSvg).attr('stroke-width', 0.5 / scale);\n}\n\n/**\n * Initially loads either SVG or OSM visualization based on the choice.\n */\nfunction selectVisualization () {\n    if ($('#choice').prop('checked') !== true) {\n        $('#openlayersmap').hide();\n    } else {\n        $('#placeholder').hide();\n    }\n}\n\n/**\n * Adds necessary styles to the div that contains the openStreetMap.\n */\nfunction styleOSM () {\n    var $placeholder = $('#placeholder');\n    var cssObj = {\n        'border' : '1px solid #aaa',\n        'width' : $placeholder.width(),\n        'height' : $placeholder.height(),\n        'float' : 'right'\n    };\n    $('#openlayersmap').css(cssObj);\n}\n\n/**\n * Store a reference to the gis svg element.\n */\nfunction storeGisSvgRef () {\n    gisSvg = $('#placeholder').find('svg').get(0);\n}\n\n/**\n * Adds controls for zooming and panning.\n */\nfunction addZoomPanControllers () {\n    if (!gisSvg) {\n        return;\n    }\n    var themeImagePath = $('#themeImagePath').val();\n    $('#placeholder').append(\n        // pan arrows\n        '<img class=\"button\" id=\"left_arrow\" src=\"' + themeImagePath + 'west-mini.png\">',\n        '<img class=\"button\" id=\"right_arrow\" src=\"' + themeImagePath + 'east-mini.png\">',\n        '<img class=\"button\" id=\"up_arrow\" src=\"' + themeImagePath + 'north-mini.png\">',\n        '<img class=\"button\" id=\"down_arrow\" src=\"' + themeImagePath + 'south-mini.png\">',\n        // zoom controls\n        '<img class=\"button\" id=\"zoom_in\" src=\"' + themeImagePath + 'zoom-plus-mini.png\">',\n        '<img class=\"button\" id=\"zoom_world\" src=\"' + themeImagePath + 'zoom-world-mini.png\">',\n        '<img class=\"button\" id=\"zoom_out\" src=\"' + themeImagePath + 'zoom-minus-mini.png\">'\n    );\n}\n\n/**\n * Resizes the GIS visualization to fit into the space available.\n */\nfunction resizeGISVisualization () {\n    var $placeholder = $('#placeholder');\n    var oldWidth = $placeholder.width();\n    var visWidth = $('#div_view_options').width() - 48;\n\n    // Assign new value for width\n    $placeholder.width(visWidth);\n    $(gisSvg).attr('width', visWidth);\n\n    // Assign the offset created due to resizing to defaultX and center the svg.\n    defaultX = (visWidth - oldWidth) / 2;\n    x = defaultX;\n    y = defaultY;\n    scale = defaultScale;\n}\n\n/**\n * Initialize the GIS visualization.\n */\nfunction initGISVisualization () {\n    storeGisSvgRef();\n    // Loads either SVG or OSM visualization based on the choice\n    selectVisualization();\n    // Resizes the GIS visualization to fit into the space available\n    resizeGISVisualization();\n\n    if (typeof ol !== 'undefined') {\n        // Adds necessary styles to the div that contains the openStreetMap\n        styleOSM();\n    }\n    // Adds controllers for zooming and panning\n    addZoomPanControllers();\n    zoomAndPan();\n}\n\nfunction drawOpenLayerMap () {\n    $('#placeholder').hide();\n    $('#openlayersmap').show();\n    // Function doesn't work properly if #openlayersmap is hidden\n    if (typeof map !== 'object') {\n        // Draws openStreetMap with openLayers\n        map = drawOpenLayers();\n    }\n}\n\nfunction getRelativeCoords (e) {\n    var position = $('#placeholder').offset();\n    return {\n        x : e.pageX - position.left,\n        y : e.pageY - position.top\n    };\n}\n\nfunction onGisMouseWheel (event) {\n    if (event.deltaY === 0) {\n        return;\n    }\n    event.preventDefault();\n\n    var relCoords = getRelativeCoords(event);\n    var factor = event.deltaY > 0 ? zoomFactor : 1 / zoomFactor;\n    // zoom\n    scale *= factor;\n    // zooming keeping the position under mouse pointer unmoved.\n    x = relCoords.x - (relCoords.x - x) * factor;\n    y = relCoords.y - (relCoords.y - y) * factor;\n    zoomAndPan();\n}\n\n/**\n * Ajax handlers for GIS visualization page\n *\n * Actions Ajaxified here:\n *\n * Zooming in and zooming out on mousewheel movement.\n * Panning the visualization on dragging.\n * Zooming in on double clicking.\n * Zooming out on clicking the zoom out button.\n * Panning on clicking the arrow buttons.\n * Displaying tooltips for GIS objects.\n */\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('table/gis_visualization.js', function () {\n    $(document).off('click', '#choice');\n    $(document).off('dragstart', 'svg');\n    $(document).off('mouseup', 'svg');\n    $(document).off('drag', 'svg');\n    $(document).off('dblclick', '#placeholder');\n    $(document).off('click', '#zoom_in');\n    $(document).off('click', '#zoom_world');\n    $(document).off('click', '#zoom_out');\n    $(document).off('click', '#left_arrow');\n    $(document).off('click', '#right_arrow');\n    $(document).off('click', '#up_arrow');\n    $(document).off('click', '#down_arrow');\n    $('.vector').off('mousemove').off('mouseout');\n    $('#placeholder').get(0).removeEventListener('wheel', onGisMouseWheel, { passive: false });\n    if (map) {\n        // Removes ol.Map's resize listener from window\n        map.setTarget(null);\n        map = undefined;\n    }\n});\n\nAJAX.registerOnload('table/gis_visualization.js', function () {\n    // If we are in GIS visualization, initialize it\n    if ($('#gis_div').length > 0) {\n        initGISVisualization();\n    }\n\n    if ($('#choice').prop('checked') === true) {\n        drawOpenLayerMap();\n    }\n\n    if (typeof ol === 'undefined') {\n        $('#choice, #labelChoice').hide();\n    }\n\n    $(document).on('click', '#choice', function () {\n        if ($(this).prop('checked') === false) {\n            $('#placeholder').show();\n            $('#openlayersmap').hide();\n        } else {\n            drawOpenLayerMap();\n        }\n    });\n\n    $('#placeholder').get(0).addEventListener('wheel', onGisMouseWheel, { passive: false });\n\n    var dragX = 0;\n    var dragY = 0;\n    $('svg').draggable({\n        helper: function () {\n            return $('<div>');// Give a fake element to be used for dragging display\n        }\n    });\n    $(document).on('dragstart', 'svg', function (event, dd) {\n        $('#placeholder').addClass('placeholderDrag');\n        dragX = Math.round(dd.offset.left);\n        dragY = Math.round(dd.offset.top);\n    });\n\n    $(document).on('mouseup', 'svg', function () {\n        $('#placeholder').removeClass('placeholderDrag');\n    });\n\n    $(document).on('drag', 'svg', function (event, dd) {\n        var newX = Math.round(dd.offset.left);\n        x +=  newX - dragX;\n        dragX = newX;\n        var newY = Math.round(dd.offset.top);\n        y +=  newY - dragY;\n        dragY = newY;\n        zoomAndPan();\n    });\n\n    $(document).on('dblclick', '#placeholder', function (event) {\n        if (event.target.classList.contains('button')) {\n            return;\n        }\n        scale *= zoomFactor;\n        // zooming in keeping the position under mouse pointer unmoved.\n        var relCoords = getRelativeCoords(event);\n        x = relCoords.x - (relCoords.x - x) * zoomFactor;\n        y = relCoords.y - (relCoords.y - y) * zoomFactor;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#zoom_in', function (e) {\n        e.preventDefault();\n        // zoom in\n        scale *= zoomFactor;\n\n        var width = $(gisSvg).attr('width');\n        var height = $(gisSvg).attr('height');\n        // zooming in keeping the center unmoved.\n        x = width / 2 - (width / 2 - x) * zoomFactor;\n        y = height / 2 - (height / 2 - y) * zoomFactor;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#zoom_world', function (e) {\n        e.preventDefault();\n        scale = 1;\n        x = defaultX;\n        y = defaultY;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#zoom_out', function (e) {\n        e.preventDefault();\n        // zoom out\n        scale /= zoomFactor;\n\n        var width = $(gisSvg).attr('width');\n        var height = $(gisSvg).attr('height');\n        // zooming out keeping the center unmoved.\n        x = width / 2 - (width / 2 - x) / zoomFactor;\n        y = height / 2 - (height / 2 - y) / zoomFactor;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#left_arrow', function (e) {\n        e.preventDefault();\n        x += 100;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#right_arrow', function (e) {\n        e.preventDefault();\n        x -= 100;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#up_arrow', function (e) {\n        e.preventDefault();\n        y += 100;\n        zoomAndPan();\n    });\n\n    $(document).on('click', '#down_arrow', function (e) {\n        e.preventDefault();\n        y -= 100;\n        zoomAndPan();\n    });\n\n    /**\n     * Detect the mousemove event and show tooltips.\n     */\n    $('.vector').on('mousemove', function (event) {\n        var contents = Functions.escapeHtml($(this).attr('name')).trim();\n        $('#tooltip').remove();\n        if (contents !== '') {\n            $('<div id=\"tooltip\">' + contents + '</div>').css({\n                position : 'absolute',\n                top : event.pageY + 10,\n                left : event.pageX + 10,\n                border : '1px solid #fdd',\n                padding : '2px',\n                'background-color' : '#fee',\n                opacity : 0.90\n            }).appendTo('body').fadeIn(200);\n        }\n    });\n\n    /**\n     * Detect the mouseout event and hide tooltips.\n     */\n    $('.vector').on('mouseout', function () {\n        $('#tooltip').remove();\n    });\n});\n"],"names":["zoomFactor","defaultX","defaultY","defaultScale","x","y","scale","gisSvg","map","zoomAndPan","g","getElementById","$","attr","selectVisualization","prop","hide","styleOSM","$placeholder","cssObj","width","height","css","storeGisSvgRef","find","get","addZoomPanControllers","themeImagePath","val","append","resizeGISVisualization","oldWidth","visWidth","initGISVisualization","ol","drawOpenLayerMap","show","drawOpenLayers","getRelativeCoords","e","position","offset","pageX","left","pageY","top","onGisMouseWheel","event","deltaY","preventDefault","relCoords","factor","AJAX","registerTeardown","document","off","removeEventListener","passive","setTarget","undefined","registerOnload","length","on","addEventListener","dragX","dragY","draggable","helper","dd","addClass","Math","round","removeClass","newX","newY","target","classList","contains","contents","Functions","escapeHtml","trim","remove","border","padding","opacity","appendTo","fadeIn"],"sourceRoot":""}