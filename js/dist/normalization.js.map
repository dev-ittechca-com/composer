{"version":3,"file":"normalization.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/normalization.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { Functions } from './modules/functions.js';\nimport { CommonParams } from './modules/common.js';\n\n/**\n * @fileoverview   events handling from normalization page\n * @name            normalization\n *\n * @requires    jQuery\n */\n\n/**\n * AJAX scripts for normalization\n *\n */\n\nvar normalizeto = '1nf';\nvar primaryKey;\nvar dataParsed = null;\n\nfunction appendHtmlColumnsList () {\n    $.post(\n        'index.php?route=/normalization/get-columns',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        },\n        function (data) {\n            if (data.success === true) {\n                $('select[name=makeAtomic]').html(data.message);\n            }\n        }\n    );\n}\n\nfunction goTo3NFStep1 (newTables) {\n    var tables = newTables;\n    if (Object.keys(tables).length === 1) {\n        tables = [CommonParams.get('table')];\n    }\n    $.post(\n        'index.php?route=/normalization/3nf/step1',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'server': CommonParams.get('server'),\n            'tables': tables,\n        }, function (data) {\n            $('#page_content').find('h3').html(window.Messages.str3NFNormalization);\n            $('#mainContent').find('legend').html(data.legendText);\n            $('#mainContent').find('h4').html(data.headText);\n            $('#mainContent').find('p').html(data.subText);\n            $('#mainContent').find('#extra').html(data.extra);\n            $('#extra').find('form').each(function () {\n                var formId = $(this).attr('id');\n                var colName = $(this).data('colname');\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').next().remove();\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').remove();\n            });\n            $('#mainContent').find('#newCols').html('');\n            $('.tblFooters').html('');\n\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'button',\n                        value: window.Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies('', true);\n                    })\n                    .appendTo('.tblFooters');\n            }\n        }\n    );\n}\n\nfunction goTo2NFStep1 () {\n    $.post(\n        'index.php?route=/normalization/2nf/step1',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#page_content h3').html(window.Messages.str2NFNormalization);\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'submit',\n                        value: window.Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies(data.primary_key);\n                    })\n                    .appendTo('.tblFooters');\n            } else {\n                if (normalizeto === '3nf') {\n                    $('#mainContent #newCols').html(window.Messages.strToNextStep);\n                    setTimeout(function () {\n                        goTo3NFStep1([CommonParams.get('table')]);\n                    }, 3000);\n                }\n            }\n        });\n}\n\nfunction goToFinish1NF () {\n    if (normalizeto !== '1nf') {\n        goTo2NFStep1();\n        return true;\n    }\n    $('#mainContent legend').html(window.Messages.strEndStep);\n    $('#mainContent h4').html(\n        '<h3>' + window.sprintf(window.Messages.strFinishMsg, Functions.escapeHtml(CommonParams.get('table'))) + '</h3>'\n    );\n    $('#mainContent p').html('');\n    $('#mainContent #extra').html('');\n    $('#mainContent #newCols').html('');\n    $('.tblFooters').html('');\n}\n\nfunction goToStep4 () {\n    $.post(\n        'index.php?route=/normalization/1nf/step4',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\nwindow.goToStep4 = goToStep4;\n\nfunction goToStep3 () {\n    $.post(\n        'index.php?route=/normalization/1nf/step3',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            primaryKey = JSON.parse(data.primary_key);\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep2 (extra) {\n    $.post(\n        'index.php?route=/normalization/1nf/step2',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server')\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra,#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            if (data.hasPrimaryKey === '1') {\n                if (extra === 'goToStep3') {\n                    $('#mainContent h4').html(window.Messages.strPrimaryKeyAdded);\n                    $('#mainContent p').html(window.Messages.strToNextStep);\n                }\n                if (extra === 'goToFinish1NF') {\n                    goToFinish1NF();\n                } else {\n                    setTimeout(function () {\n                        goToStep3();\n                    }, 3000);\n                }\n            } else {\n                // form to select columns to make primary\n                $('#mainContent #extra').html(data.extra);\n            }\n        }\n    );\n}\n\nfunction goTo2NFFinish (pd) {\n    var tables = {};\n    for (var dependson in pd) {\n        tables[dependson] = $('#extra input[name=\"' + dependson + '\"]').val();\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'pd': JSON.stringify(pd),\n        'newTablesName': JSON.stringify(tables),\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/2nf/create-new-tables',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    if (normalizeto === '3nf') {\n                        $('#pma_navigation_reload').trigger('click');\n                        goTo3NFStep1(tables);\n                        return true;\n                    }\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nfunction goTo3NFFinish (newTables) {\n    for (var table in newTables) {\n        for (var newtbl in newTables[table]) {\n            var updatedname = $('#extra input[name=\"' + newtbl + '\"]').val();\n            newTables[table][updatedname] = newTables[table][newtbl];\n            if (updatedname !== newtbl) {\n                delete newTables[table][newtbl];\n            }\n        }\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'server': CommonParams.get('server'),\n        'newTables': JSON.stringify(newTables),\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/3nf/create-new-tables',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nvar backup = '';\n\nfunction goTo2NFStep2 (pd, primaryKey) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(window.Messages.strStep + ' 2.2 ' + window.Messages.strConfirmPd);\n    $('#mainContent h4').html(window.Messages.strSelectedPd);\n    $('#mainContent p').html(window.Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var dependson in pd) {\n        if (dependson !== primaryKey) {\n            pdFound = true;\n            extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + window.Messages.strNoPdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n        };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization/2nf/new-tables',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                if (data.success === true) {\n                    extra += data.message;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + window.Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo2NFFinish\" value=\"' + window.Messages.strGo + '\">');\n    $('#goTo2NFFinish').on('click', function () {\n        goTo2NFFinish(pd);\n    });\n}\n\nfunction goTo3NFStep2 (pd, tablesTds) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(window.Messages.strStep + ' 3.2 ' + window.Messages.strConfirmTd);\n    $('#mainContent h4').html(window.Messages.strSelectedTd);\n    $('#mainContent p').html(window.Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var table in tablesTds) {\n        for (var i in tablesTds[table]) {\n            var dependson = tablesTds[table][i];\n            if (dependson !== '' && dependson !== table) {\n                pdFound = true;\n                extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n            }\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + window.Messages.strNoTdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'tables': JSON.stringify(tablesTds),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n        };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization/3nf/new-tables',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                dataParsed = data;\n                if (data.success === true) {\n                    extra += dataParsed.html;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + window.Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo3NFFinish\" value=\"' + window.Messages.strGo + '\">');\n    $('#goTo3NFFinish').on('click', function () {\n        if (!pdFound) {\n            goTo3NFFinish([]);\n        } else {\n            goTo3NFFinish(dataParsed.newTables);\n        }\n    });\n}\nfunction processDependencies (primaryKey, isTransitive) {\n    var pk = primaryKey;\n    var pd = {};\n    var tablesTds = {};\n    var dependsOn;\n    pd[pk] = [];\n    $('#extra form').each(function () {\n        var tblname;\n        if (isTransitive === true) {\n            tblname = $(this).data('tablename');\n            pk = tblname;\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            tablesTds[tblname].push(pk);\n        }\n        var formId = $(this).attr('id');\n        $('#' + formId + ' input[type=checkbox]:not(:checked)').prop('checked', false);\n        dependsOn = '';\n        $('#' + formId + ' input[type=checkbox]:checked').each(function () {\n            dependsOn += $(this).val() + ', ';\n            $(this).attr('checked','checked');\n        });\n        if (dependsOn === '') {\n            dependsOn = pk;\n        } else {\n            dependsOn = dependsOn.slice(0, -2);\n        }\n        if (! (dependsOn in pd)) {\n            pd[dependsOn] = [];\n        }\n        pd[dependsOn].push($(this).data('colname'));\n        if (isTransitive === true) {\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            if ($.inArray(dependsOn, tablesTds[tblname]) === -1) {\n                tablesTds[tblname].push(dependsOn);\n            }\n        }\n    });\n    backup = $('#mainContent').html();\n    if (isTransitive === true) {\n        goTo3NFStep2(pd, tablesTds);\n    } else {\n        goTo2NFStep2(pd, pk);\n    }\n    return false;\n}\n\nfunction moveRepeatingGroup (repeatingCols) {\n    var newTable = $('input[name=repeatGroupTable]').val();\n    var newColumn = $('input[name=repeatGroupColumn]').val();\n    if (!newTable) {\n        $('input[name=repeatGroupTable]').trigger('focus');\n        return false;\n    }\n    if (!newColumn) {\n        $('input[name=repeatGroupColumn]').trigger('focus');\n        return false;\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'repeatingColumns': repeatingCols,\n        'newTable':newTable,\n        'newColumn':newColumn,\n        'primary_columns':primaryKey.toString()\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/move-repeating-group',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    goToStep3();\n                }\n                Functions.ajaxShowMessage(data.message, false);\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\nAJAX.registerTeardown('normalization.js', function () {\n    $('#extra').off('click', '#selectNonAtomicCol');\n    $('#splitGo').off('click');\n    $('.tblFooters').off('click', '#saveSplit');\n    $('#extra').off('click', '#addNewPrimary');\n    $('.tblFooters').off('click', '#saveNewPrimary');\n    $('#extra').off('click', '#removeRedundant');\n    $('#mainContent p').off('click', '#createPrimaryKey');\n    $('#mainContent').off('click', '#backEditPd');\n    $('#mainContent').off('click', '#showPossiblePd');\n    $('#mainContent').off('click', '.pickPd');\n});\n\nAJAX.registerOnload('normalization.js', function () {\n    var selectedCol;\n    normalizeto = $('#mainContent').data('normalizeto');\n    $('#extra').on('click', '#selectNonAtomicCol', function () {\n        if ($(this).val() === 'no_such_col') {\n            goToStep2();\n        } else {\n            selectedCol = $(this).val();\n        }\n    });\n\n    $('#splitGo').on('click', function () {\n        if (!selectedCol || selectedCol === '') {\n            return false;\n        }\n        var numField = $('#numField').val();\n        $.post(\n            'index.php?route=/normalization/create-new-column',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'numFields': numField\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveSplit',\n                            value: window.Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: window.Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click','#saveSplit', function () {\n        window.centralColumnList = [];\n        if ($('#newCols #field_0_1').val() === '') {\n            $('#newCols #field_0_1').trigger('focus');\n            return false;\n        }\n        var argsep = CommonParams.get('arg_separator');\n        var datastring = $('#newCols :input').serialize();\n        datastring += argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success) {\n                $.post(\n                    'index.php?route=/sql',\n                    {\n                        'ajax_request': true,\n                        'db': CommonParams.get('db'),\n                        'table': CommonParams.get('table'),\n                        'server': CommonParams.get('server'),\n                        'dropped_column': selectedCol,\n                        'purge' : 1,\n                        'sql_query': 'ALTER TABLE `' + CommonParams.get('table') + '` DROP `' + selectedCol + '`;',\n                        'is_js_confirmed': 1\n                    },\n                    function (data) {\n                        if (data.success === true) {\n                            appendHtmlColumnsList();\n                            $('#newCols').html('');\n                            $('.tblFooters').html('');\n                        } else {\n                            Functions.ajaxShowMessage(data.error, false);\n                        }\n                        selectedCol = '';\n                    }\n                );\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    $('#extra').on('click', '#addNewPrimary', function () {\n        $.post(\n            'index.php?route=/normalization/add-new-primary',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveNewPrimary',\n                            value: window.Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: window.Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click', '#saveNewPrimary', function () {\n        var datastring = $('#newCols :input').serialize();\n        var argsep = CommonParams.get('arg_separator');\n        datastring += argsep + 'field_key[0]=primary_0' + argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success === true) {\n                $('#mainContent h4').html(window.Messages.strPrimaryKeyAdded);\n                $('#mainContent p').html(window.Messages.strToNextStep);\n                $('#mainContent #extra').html('');\n                $('#mainContent #newCols').html('');\n                $('.tblFooters').html('');\n                setTimeout(function () {\n                    goToStep3();\n                }, 2000);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n    $('#extra').on('click', '#removeRedundant', function () {\n        var dropQuery = 'ALTER TABLE `' + CommonParams.get('table') + '` ';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            dropQuery += 'DROP `' + $(this).val() + '`, ';\n        });\n        dropQuery = dropQuery.slice(0, -2);\n        $.post(\n            'index.php?route=/sql',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'sql_query': dropQuery,\n                'is_js_confirmed': 1\n            },\n            function (data) {\n                if (data.success === true) {\n                    goToStep2('goToFinish1NF');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n    });\n    $('#extra').on('click', '#moveRepeatingGroup', function () {\n        var repeatingCols = '';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            repeatingCols += $(this).val() + ', ';\n        });\n\n        if (repeatingCols !== '') {\n            var newColName = $('#extra input[type=checkbox]:checked').first().val();\n            repeatingCols = repeatingCols.slice(0, -2);\n            var confirmStr = window.sprintf(window.Messages.strMoveRepeatingGroup, Functions.escapeHtml(repeatingCols), Functions.escapeHtml(CommonParams.get('table')));\n            confirmStr += '<input type=\"text\" name=\"repeatGroupTable\" placeholder=\"' + window.Messages.strNewTablePlaceholder + '\">' +\n                '( ' + Functions.escapeHtml(primaryKey.toString()) + ', <input type=\"text\" name=\"repeatGroupColumn\" placeholder=\"' + window.Messages.strNewColumnPlaceholder + '\" value=\"' + Functions.escapeHtml(newColName) + '\">)' +\n                '</ol>';\n            $('#newCols').html(confirmStr);\n\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: window.Messages.strCancel,\n                    class: 'btn btn-secondary'\n                })\n                .on('click', function () {\n                    $('#newCols').html('');\n                    $('#extra input[type=checkbox]').prop('checked', false);\n                })\n                .appendTo('.tblFooters');\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: window.Messages.strGo,\n                    class: 'btn btn-primary'\n                })\n                .on('click', function () {\n                    moveRepeatingGroup(repeatingCols);\n                })\n                .appendTo('.tblFooters');\n        }\n    });\n    $('#mainContent p').on('click', '#createPrimaryKey', function (event) {\n        event.preventDefault();\n        var url = {\n            'create_index': 1,\n            'server':  CommonParams.get('server'),\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'added_fields': 1,\n            'add_fields':1,\n            'index': { 'Key_name':'PRIMARY' },\n            'ajax_request': true\n        };\n        var title = window.Messages.strAddPrimaryKey;\n        Functions.indexEditorDialog(url, title, function () {\n            // on success\n            $('.sqlqueryresults').remove();\n            $('.result_query').remove();\n            $('.tblFooters').html('');\n            goToStep2('goToStep3');\n        });\n        return false;\n    });\n    $('#mainContent').on('click', '#backEditPd', function () {\n        $('#mainContent').html(backup);\n    });\n    $('#mainContent').on('click', '#showPossiblePd', function () {\n        if ($(this).hasClass('hideList')) {\n            $(this).html('+ ' + window.Messages.strShowPossiblePd);\n            $(this).removeClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        if ($('#newCols').html() !== '') {\n            $('#showPossiblePd').html('- ' + window.Messages.strHidePd);\n            $('#showPossiblePd').addClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        $('#newCols').insertAfter('#mainContent h4');\n        $('#newCols').html('<div class=\"text-center\">' + window.Messages.strLoading + '<br>' + window.Messages.strWaitForPd + '</div>');\n        $.post(\n            'index.php?route=/normalization/partial-dependencies',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n            }, function (data) {\n                $('#showPossiblePd').html('- ' + window.Messages.strHidePd);\n                $('#showPossiblePd').addClass('hideList');\n                $('#newCols').html(data.message);\n            });\n    });\n    $('#mainContent').on('click', '.pickPd', function () {\n        var strColsLeft = $(this).next('.determinants').html();\n        var colsLeft = strColsLeft.split(',');\n        var strColsRight = $(this).next().next().html();\n        var colsRight = strColsRight.split(',');\n        for (var i in colsRight) {\n            $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[type=\"checkbox\"]').prop('checked', false);\n            for (var j in colsLeft) {\n                $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[value=\"' + colsLeft[j].trim() + '\"]').prop('checked', true);\n            }\n        }\n    });\n});\n"],"names":["$","AJAX","Functions","CommonParams","normalizeto","primaryKey","dataParsed","appendHtmlColumnsList","post","get","data","success","html","message","goTo3NFStep1","newTables","tables","Object","keys","length","find","window","Messages","str3NFNormalization","legendText","headText","subText","extra","each","formId","attr","colName","next","remove","type","value","strDone","class","on","processDependencies","appendTo","goTo2NFStep1","str2NFNormalization","primary_key","strToNextStep","setTimeout","goToFinish1NF","strEndStep","sprintf","strFinishMsg","escapeHtml","goToStep4","pk","escapeJsString","goToStep3","JSON","parse","goToStep2","hasPrimaryKey","strPrimaryKeyAdded","goTo2NFFinish","pd","dependson","val","datastring","stringify","ajax","url","async","queryError","trigger","ajaxShowMessage","error","goTo3NFFinish","table","newtbl","updatedname","backup","goTo2NFStep2","strStep","strConfirmPd","strSelectedPd","strPdHintNote","pdFound","toString","strNoPdSelected","strBack","strGo","goTo3NFStep2","tablesTds","strConfirmTd","strSelectedTd","i","strNoTdSelected","isTransitive","dependsOn","tblname","push","prop","slice","inArray","moveRepeatingGroup","repeatingCols","newTable","newColumn","registerTeardown","off","registerOnload","selectedCol","numField","hide","id","strSave","strCancel","parent","centralColumnList","argsep","serialize","dropQuery","newColName","first","confirmStr","strMoveRepeatingGroup","strNewTablePlaceholder","strNewColumnPlaceholder","event","preventDefault","title","strAddPrimaryKey","indexEditorDialog","hasClass","strShowPossiblePd","removeClass","slideToggle","strHidePd","addClass","insertAfter","strLoading","strWaitForPd","strColsLeft","colsLeft","split","strColsRight","colsRight","trim","j"],"sourceRoot":""}