{"version":3,"file":"normalization.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/normalization.js"],"sourcesContent":["/**\n * @fileoverview   events handling from normalization page\n * @name            normalization\n *\n * @requires    jQuery\n */\n\n/**\n * AJAX scripts for normalization\n *\n */\n\nvar normalizeto = '1nf';\nvar primaryKey;\nvar dataParsed = null;\n\nfunction appendHtmlColumnsList () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'getColumns': true\n        },\n        function (data) {\n            if (data.success === true) {\n                $('select[name=makeAtomic]').html(data.message);\n            }\n        }\n    );\n}\n\nfunction goTo3NFStep1 (newTables) {\n    var tables = newTables;\n    if (Object.keys(tables).length === 1) {\n        tables = [window.CommonParams.get('table')];\n    }\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'server': window.CommonParams.get('server'),\n            'tables': tables,\n            'step': '3.1'\n        }, function (data) {\n            $('#page_content').find('h3').html(Messages.str3NFNormalization);\n            $('#mainContent').find('legend').html(data.legendText);\n            $('#mainContent').find('h4').html(data.headText);\n            $('#mainContent').find('p').html(data.subText);\n            $('#mainContent').find('#extra').html(data.extra);\n            $('#extra').find('form').each(function () {\n                var formId = $(this).attr('id');\n                var colName = $(this).data('colname');\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').next().remove();\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').remove();\n            });\n            $('#mainContent').find('#newCols').html('');\n            $('.tblFooters').html('');\n\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'button',\n                        value: Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies('', true);\n                    })\n                    .appendTo('.tblFooters');\n            }\n        }\n    );\n}\n\nfunction goTo2NFStep1 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'step': '2.1'\n        }, function (data) {\n            $('#page_content h3').html(Messages.str2NFNormalization);\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'submit',\n                        value: Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies(data.primary_key);\n                    })\n                    .appendTo('.tblFooters');\n            } else {\n                if (normalizeto === '3nf') {\n                    $('#mainContent #newCols').html(Messages.strToNextStep);\n                    setTimeout(function () {\n                        goTo3NFStep1([window.CommonParams.get('table')]);\n                    }, 3000);\n                }\n            }\n        });\n}\n\nfunction goToFinish1NF () {\n    if (normalizeto !== '1nf') {\n        goTo2NFStep1();\n        return true;\n    }\n    $('#mainContent legend').html(Messages.strEndStep);\n    $('#mainContent h4').html(\n        '<h3>' + Functions.sprintf(Messages.strFinishMsg, Functions.escapeHtml(window.CommonParams.get('table'))) + '</h3>'\n    );\n    $('#mainContent p').html('');\n    $('#mainContent #extra').html('');\n    $('#mainContent #newCols').html('');\n    $('.tblFooters').html('');\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction goToStep4 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'step4': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep3 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'step3': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            primaryKey = JSON.parse(data.primary_key);\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep2 (extra) {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'step2': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra,#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            if (data.hasPrimaryKey === '1') {\n                if (extra === 'goToStep3') {\n                    $('#mainContent h4').html(Messages.strPrimaryKeyAdded);\n                    $('#mainContent p').html(Messages.strToNextStep);\n                }\n                if (extra === 'goToFinish1NF') {\n                    goToFinish1NF();\n                } else {\n                    setTimeout(function () {\n                        goToStep3();\n                    }, 3000);\n                }\n            } else {\n                // form to select columns to make primary\n                $('#mainContent #extra').html(data.extra);\n            }\n        }\n    );\n}\n\nfunction goTo2NFFinish (pd) {\n    var tables = {};\n    for (var dependson in pd) {\n        tables[dependson] = $('#extra input[name=\"' + dependson + '\"]').val();\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': window.CommonParams.get('db'),\n        'table': window.CommonParams.get('table'),\n        'server': window.CommonParams.get('server'),\n        'pd': JSON.stringify(pd),\n        'newTablesName':JSON.stringify(tables),\n        'createNewTables2NF':1 };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    if (normalizeto === '3nf') {\n                        $('#pma_navigation_reload').trigger('click');\n                        goTo3NFStep1(tables);\n                        return true;\n                    }\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nfunction goTo3NFFinish (newTables) {\n    for (var table in newTables) {\n        for (var newtbl in newTables[table]) {\n            var updatedname = $('#extra input[name=\"' + newtbl + '\"]').val();\n            newTables[table][updatedname] = newTables[table][newtbl];\n            if (updatedname !== newtbl) {\n                delete newTables[table][newtbl];\n            }\n        }\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': window.CommonParams.get('db'),\n        'server': window.CommonParams.get('server'),\n        'newTables':JSON.stringify(newTables),\n        'createNewTables3NF':1 };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nvar backup = '';\n\nfunction goTo2NFStep2 (pd, primaryKey) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(Messages.strStep + ' 2.2 ' + Messages.strConfirmPd);\n    $('#mainContent h4').html(Messages.strSelectedPd);\n    $('#mainContent p').html(Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var dependson in pd) {\n        if (dependson !== primaryKey) {\n            pdFound = true;\n            extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + Messages.strNoPdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'server': window.CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n            'getNewTables2NF':1 };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                if (data.success === true) {\n                    extra += data.message;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo2NFFinish\" value=\"' + Messages.strGo + '\">');\n    $('#goTo2NFFinish').on('click', function () {\n        goTo2NFFinish(pd);\n    });\n}\n\nfunction goTo3NFStep2 (pd, tablesTds) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(Messages.strStep + ' 3.2 ' + Messages.strConfirmTd);\n    $('#mainContent h4').html(Messages.strSelectedTd);\n    $('#mainContent p').html(Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var table in tablesTds) {\n        for (var i in tablesTds[table]) {\n            var dependson = tablesTds[table][i];\n            if (dependson !== '' && dependson !== table) {\n                pdFound = true;\n                extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n            }\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + Messages.strNoTdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': window.CommonParams.get('db'),\n            'tables': JSON.stringify(tablesTds),\n            'server': window.CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n            'getNewTables3NF':1 };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                dataParsed = data;\n                if (data.success === true) {\n                    extra += dataParsed.html;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo3NFFinish\" value=\"' + Messages.strGo + '\">');\n    $('#goTo3NFFinish').on('click', function () {\n        if (!pdFound) {\n            goTo3NFFinish([]);\n        } else {\n            goTo3NFFinish(dataParsed.newTables);\n        }\n    });\n}\nfunction processDependencies (primaryKey, isTransitive) {\n    var pk = primaryKey;\n    var pd = {};\n    var tablesTds = {};\n    var dependsOn;\n    pd[pk] = [];\n    $('#extra form').each(function () {\n        var tblname;\n        if (isTransitive === true) {\n            tblname = $(this).data('tablename');\n            pk = tblname;\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            tablesTds[tblname].push(pk);\n        }\n        var formId = $(this).attr('id');\n        $('#' + formId + ' input[type=checkbox]:not(:checked)').prop('checked', false);\n        dependsOn = '';\n        $('#' + formId + ' input[type=checkbox]:checked').each(function () {\n            dependsOn += $(this).val() + ', ';\n            $(this).attr('checked','checked');\n        });\n        if (dependsOn === '') {\n            dependsOn = pk;\n        } else {\n            dependsOn = dependsOn.slice(0, -2);\n        }\n        if (! (dependsOn in pd)) {\n            pd[dependsOn] = [];\n        }\n        pd[dependsOn].push($(this).data('colname'));\n        if (isTransitive === true) {\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            if ($.inArray(dependsOn, tablesTds[tblname]) === -1) {\n                tablesTds[tblname].push(dependsOn);\n            }\n        }\n    });\n    backup = $('#mainContent').html();\n    if (isTransitive === true) {\n        goTo3NFStep2(pd, tablesTds);\n    } else {\n        goTo2NFStep2(pd, pk);\n    }\n    return false;\n}\n\nfunction moveRepeatingGroup (repeatingCols) {\n    var newTable = $('input[name=repeatGroupTable]').val();\n    var newColumn = $('input[name=repeatGroupColumn]').val();\n    if (!newTable) {\n        $('input[name=repeatGroupTable]').trigger('focus');\n        return false;\n    }\n    if (!newColumn) {\n        $('input[name=repeatGroupColumn]').trigger('focus');\n        return false;\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': window.CommonParams.get('db'),\n        'table': window.CommonParams.get('table'),\n        'server': window.CommonParams.get('server'),\n        'repeatingColumns': repeatingCols,\n        'newTable':newTable,\n        'newColumn':newColumn,\n        'primary_columns':primaryKey.toString()\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    goToStep3();\n                }\n                Functions.ajaxShowMessage(data.message, false);\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\nwindow.AJAX.registerTeardown('normalization.js', function () {\n    $('#extra').off('click', '#selectNonAtomicCol');\n    $('#splitGo').off('click');\n    $('.tblFooters').off('click', '#saveSplit');\n    $('#extra').off('click', '#addNewPrimary');\n    $('.tblFooters').off('click', '#saveNewPrimary');\n    $('#extra').off('click', '#removeRedundant');\n    $('#mainContent p').off('click', '#createPrimaryKey');\n    $('#mainContent').off('click', '#backEditPd');\n    $('#mainContent').off('click', '#showPossiblePd');\n    $('#mainContent').off('click', '.pickPd');\n});\n\nwindow.AJAX.registerOnload('normalization.js', function () {\n    var selectedCol;\n    normalizeto = $('#mainContent').data('normalizeto');\n    $('#extra').on('click', '#selectNonAtomicCol', function () {\n        if ($(this).val() === 'no_such_col') {\n            goToStep2();\n        } else {\n            selectedCol = $(this).val();\n        }\n    });\n\n    $('#splitGo').on('click', function () {\n        if (!selectedCol || selectedCol === '') {\n            return false;\n        }\n        var numField = $('#numField').val();\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': window.CommonParams.get('db'),\n                'table': window.CommonParams.get('table'),\n                'server': window.CommonParams.get('server'),\n                'splitColumn': true,\n                'numFields': numField\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveSplit',\n                            value: Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click','#saveSplit', function () {\n        window.centralColumnList = [];\n        if ($('#newCols #field_0_1').val() === '') {\n            $('#newCols #field_0_1').trigger('focus');\n            return false;\n        }\n        var argsep = window.CommonParams.get('arg_separator');\n        var datastring = $('#newCols :input').serialize();\n        datastring += argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success) {\n                $.post(\n                    'index.php?route=/sql',\n                    {\n                        'ajax_request': true,\n                        'db': window.CommonParams.get('db'),\n                        'table': window.CommonParams.get('table'),\n                        'server': window.CommonParams.get('server'),\n                        'dropped_column': selectedCol,\n                        'purge' : 1,\n                        'sql_query': 'ALTER TABLE `' + window.CommonParams.get('table') + '` DROP `' + selectedCol + '`;',\n                        'is_js_confirmed': 1\n                    },\n                    function (data) {\n                        if (data.success === true) {\n                            appendHtmlColumnsList();\n                            $('#newCols').html('');\n                            $('.tblFooters').html('');\n                        } else {\n                            Functions.ajaxShowMessage(data.error, false);\n                        }\n                        selectedCol = '';\n                    }\n                );\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    $('#extra').on('click', '#addNewPrimary', function () {\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': window.CommonParams.get('db'),\n                'table': window.CommonParams.get('table'),\n                'server': window.CommonParams.get('server'),\n                'addNewPrimary': true\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveNewPrimary',\n                            value: Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click', '#saveNewPrimary', function () {\n        var datastring = $('#newCols :input').serialize();\n        var argsep = window.CommonParams.get('arg_separator');\n        datastring += argsep + 'field_key[0]=primary_0' + argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success === true) {\n                $('#mainContent h4').html(Messages.strPrimaryKeyAdded);\n                $('#mainContent p').html(Messages.strToNextStep);\n                $('#mainContent #extra').html('');\n                $('#mainContent #newCols').html('');\n                $('.tblFooters').html('');\n                setTimeout(function () {\n                    goToStep3();\n                }, 2000);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n    $('#extra').on('click', '#removeRedundant', function () {\n        var dropQuery = 'ALTER TABLE `' + window.CommonParams.get('table') + '` ';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            dropQuery += 'DROP `' + $(this).val() + '`, ';\n        });\n        dropQuery = dropQuery.slice(0, -2);\n        $.post(\n            'index.php?route=/sql',\n            {\n                'ajax_request': true,\n                'db': window.CommonParams.get('db'),\n                'table': window.CommonParams.get('table'),\n                'server': window.CommonParams.get('server'),\n                'sql_query': dropQuery,\n                'is_js_confirmed': 1\n            },\n            function (data) {\n                if (data.success === true) {\n                    goToStep2('goToFinish1NF');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n    });\n    $('#extra').on('click', '#moveRepeatingGroup', function () {\n        var repeatingCols = '';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            repeatingCols += $(this).val() + ', ';\n        });\n\n        if (repeatingCols !== '') {\n            var newColName = $('#extra input[type=checkbox]:checked').first().val();\n            repeatingCols = repeatingCols.slice(0, -2);\n            var confirmStr = Functions.sprintf(Messages.strMoveRepeatingGroup, Functions.escapeHtml(repeatingCols), Functions.escapeHtml(window.CommonParams.get('table')));\n            confirmStr += '<input type=\"text\" name=\"repeatGroupTable\" placeholder=\"' + Messages.strNewTablePlaceholder + '\">' +\n                '( ' + Functions.escapeHtml(primaryKey.toString()) + ', <input type=\"text\" name=\"repeatGroupColumn\" placeholder=\"' + Messages.strNewColumnPlaceholder + '\" value=\"' + Functions.escapeHtml(newColName) + '\">)' +\n                '</ol>';\n            $('#newCols').html(confirmStr);\n\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: Messages.strCancel,\n                    class: 'btn btn-secondary'\n                })\n                .on('click', function () {\n                    $('#newCols').html('');\n                    $('#extra input[type=checkbox]').prop('checked', false);\n                })\n                .appendTo('.tblFooters');\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: Messages.strGo,\n                    class: 'btn btn-primary'\n                })\n                .on('click', function () {\n                    moveRepeatingGroup(repeatingCols);\n                })\n                .appendTo('.tblFooters');\n        }\n    });\n    $('#mainContent p').on('click', '#createPrimaryKey', function (event) {\n        event.preventDefault();\n        var url = {\n            'create_index': 1,\n            'server':  window.CommonParams.get('server'),\n            'db': window.CommonParams.get('db'),\n            'table': window.CommonParams.get('table'),\n            'added_fields': 1,\n            'add_fields':1,\n            'index': { 'Key_name':'PRIMARY' },\n            'ajax_request': true\n        };\n        var title = Messages.strAddPrimaryKey;\n        Functions.indexEditorDialog(url, title, function () {\n            // on success\n            $('.sqlqueryresults').remove();\n            $('.result_query').remove();\n            $('.tblFooters').html('');\n            goToStep2('goToStep3');\n        });\n        return false;\n    });\n    $('#mainContent').on('click', '#backEditPd', function () {\n        $('#mainContent').html(backup);\n    });\n    $('#mainContent').on('click', '#showPossiblePd', function () {\n        if ($(this).hasClass('hideList')) {\n            $(this).html('+ ' + Messages.strShowPossiblePd);\n            $(this).removeClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        if ($('#newCols').html() !== '') {\n            $('#showPossiblePd').html('- ' + Messages.strHidePd);\n            $('#showPossiblePd').addClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        $('#newCols').insertAfter('#mainContent h4');\n        $('#newCols').html('<div class=\"text-center\">' + Messages.strLoading + '<br>' + Messages.strWaitForPd + '</div>');\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': window.CommonParams.get('db'),\n                'table': window.CommonParams.get('table'),\n                'server': window.CommonParams.get('server'),\n                'findPdl': true\n            }, function (data) {\n                $('#showPossiblePd').html('- ' + Messages.strHidePd);\n                $('#showPossiblePd').addClass('hideList');\n                $('#newCols').html(data.message);\n            });\n    });\n    $('#mainContent').on('click', '.pickPd', function () {\n        var strColsLeft = $(this).next('.determinants').html();\n        var colsLeft = strColsLeft.split(',');\n        var strColsRight = $(this).next().next().html();\n        var colsRight = strColsRight.split(',');\n        for (var i in colsRight) {\n            $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[type=\"checkbox\"]').prop('checked', false);\n            for (var j in colsLeft) {\n                $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[value=\"' + colsLeft[j].trim() + '\"]').prop('checked', true);\n            }\n        }\n    });\n});\n"],"names":["normalizeto","primaryKey","dataParsed","appendHtmlColumnsList","$","post","window","CommonParams","get","data","success","html","message","goTo3NFStep1","newTables","tables","Object","keys","length","find","Messages","str3NFNormalization","legendText","headText","subText","extra","each","formId","attr","colName","next","remove","type","value","strDone","class","on","processDependencies","appendTo","goTo2NFStep1","str2NFNormalization","primary_key","strToNextStep","setTimeout","goToFinish1NF","strEndStep","Functions","sprintf","strFinishMsg","escapeHtml","goToStep4","pk","escapeJsString","goToStep3","JSON","parse","goToStep2","hasPrimaryKey","strPrimaryKeyAdded","goTo2NFFinish","pd","dependson","val","datastring","stringify","ajax","url","async","queryError","trigger","ajaxShowMessage","error","goTo3NFFinish","table","newtbl","updatedname","backup","goTo2NFStep2","strStep","strConfirmPd","strSelectedPd","strPdHintNote","pdFound","toString","strNoPdSelected","strBack","strGo","goTo3NFStep2","tablesTds","strConfirmTd","strSelectedTd","i","strNoTdSelected","isTransitive","dependsOn","tblname","push","prop","slice","inArray","moveRepeatingGroup","repeatingCols","newTable","newColumn","AJAX","registerTeardown","off","registerOnload","selectedCol","numField","hide","id","strSave","strCancel","parent","centralColumnList","argsep","serialize","dropQuery","newColName","first","confirmStr","strMoveRepeatingGroup","strNewTablePlaceholder","strNewColumnPlaceholder","event","preventDefault","title","strAddPrimaryKey","indexEditorDialog","hasClass","strShowPossiblePd","removeClass","slideToggle","strHidePd","addClass","insertAfter","strLoading","strWaitForPd","strColsLeft","colsLeft","split","strColsRight","colsRight","trim","j"],"sourceRoot":""}