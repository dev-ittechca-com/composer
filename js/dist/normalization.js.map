{"version":3,"file":"normalization.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/normalization.js"],"sourcesContent":["/**\n * @fileoverview   events handling from normalization page\n * @name            normalization\n *\n * @requires    jQuery\n */\n\n// eslint-disable-next-line no-unused-vars\n/* global centralColumnList:writable */ // js/functions.js\n\n/**\n * AJAX scripts for normalization\n *\n */\n\nvar normalizeto = '1nf';\nvar primaryKey;\nvar dataParsed = null;\n\nfunction appendHtmlColumnsList () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'getColumns': true\n        },\n        function (data) {\n            if (data.success === true) {\n                $('select[name=makeAtomic]').html(data.message);\n            }\n        }\n    );\n}\n\nfunction goTo3NFStep1 (newTables) {\n    var tables = newTables;\n    if (Object.keys(tables).length === 1) {\n        tables = [CommonParams.get('table')];\n    }\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'server': CommonParams.get('server'),\n            'tables': tables,\n            'step': '3.1'\n        }, function (data) {\n            $('#page_content').find('h3').html(Messages.str3NFNormalization);\n            $('#mainContent').find('legend').html(data.legendText);\n            $('#mainContent').find('h4').html(data.headText);\n            $('#mainContent').find('p').html(data.subText);\n            $('#mainContent').find('#extra').html(data.extra);\n            $('#extra').find('form').each(function () {\n                var formId = $(this).attr('id');\n                var colName = $(this).data('colname');\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').next().remove();\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').remove();\n            });\n            $('#mainContent').find('#newCols').html('');\n            $('.tblFooters').html('');\n\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'button',\n                        value: Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies('', true);\n                    })\n                    .appendTo('.tblFooters');\n            }\n        }\n    );\n}\n\nfunction goTo2NFStep1 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'step': '2.1'\n        }, function (data) {\n            $('#page_content h3').html(Messages.str2NFNormalization);\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'submit',\n                        value: Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies(data.primary_key);\n                    })\n                    .appendTo('.tblFooters');\n            } else {\n                if (normalizeto === '3nf') {\n                    $('#mainContent #newCols').html(Messages.strToNextStep);\n                    setTimeout(function () {\n                        goTo3NFStep1([CommonParams.get('table')]);\n                    }, 3000);\n                }\n            }\n        });\n}\n\nfunction goToFinish1NF () {\n    if (normalizeto !== '1nf') {\n        goTo2NFStep1();\n        return true;\n    }\n    $('#mainContent legend').html(Messages.strEndStep);\n    $('#mainContent h4').html(\n        '<h3>' + Functions.sprintf(Messages.strFinishMsg, Functions.escapeHtml(CommonParams.get('table'))) + '</h3>'\n    );\n    $('#mainContent p').html('');\n    $('#mainContent #extra').html('');\n    $('#mainContent #newCols').html('');\n    $('.tblFooters').html('');\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction goToStep4 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'step4': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep3 () {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'step3': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            primaryKey = JSON.parse(data.primary_key);\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + Functions.escapeJsString(primaryKey[pk]) + '\\']').attr('disabled','disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep2 (extra) {\n    $.post(\n        'index.php?route=/normalization',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'step2': true\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra,#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            if (data.hasPrimaryKey === '1') {\n                if (extra === 'goToStep3') {\n                    $('#mainContent h4').html(Messages.strPrimaryKeyAdded);\n                    $('#mainContent p').html(Messages.strToNextStep);\n                }\n                if (extra === 'goToFinish1NF') {\n                    goToFinish1NF();\n                } else {\n                    setTimeout(function () {\n                        goToStep3();\n                    }, 3000);\n                }\n            } else {\n                // form to select columns to make primary\n                $('#mainContent #extra').html(data.extra);\n            }\n        }\n    );\n}\n\nfunction goTo2NFFinish (pd) {\n    var tables = {};\n    for (var dependson in pd) {\n        tables[dependson] = $('#extra input[name=\"' + dependson + '\"]').val();\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'pd': JSON.stringify(pd),\n        'newTablesName':JSON.stringify(tables),\n        'createNewTables2NF':1 };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    if (normalizeto === '3nf') {\n                        $('#pma_navigation_reload').trigger('click');\n                        goTo3NFStep1(tables);\n                        return true;\n                    }\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nfunction goTo3NFFinish (newTables) {\n    for (var table in newTables) {\n        for (var newtbl in newTables[table]) {\n            var updatedname = $('#extra input[name=\"' + newtbl + '\"]').val();\n            newTables[table][updatedname] = newTables[table][newtbl];\n            if (updatedname !== newtbl) {\n                delete newTables[table][newtbl];\n            }\n        }\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'server': CommonParams.get('server'),\n        'newTables':JSON.stringify(newTables),\n        'createNewTables3NF':1 };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    Functions.ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nvar backup = '';\n\nfunction goTo2NFStep2 (pd, primaryKey) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(Messages.strStep + ' 2.2 ' + Messages.strConfirmPd);\n    $('#mainContent h4').html(Messages.strSelectedPd);\n    $('#mainContent p').html(Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var dependson in pd) {\n        if (dependson !== primaryKey) {\n            pdFound = true;\n            extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + Messages.strNoPdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n            'getNewTables2NF':1 };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                if (data.success === true) {\n                    extra += data.message;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo2NFFinish\" value=\"' + Messages.strGo + '\">');\n    $('#goTo2NFFinish').on('click', function () {\n        goTo2NFFinish(pd);\n    });\n}\n\nfunction goTo3NFStep2 (pd, tablesTds) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(Messages.strStep + ' 3.2 ' + Messages.strConfirmTd);\n    $('#mainContent h4').html(Messages.strSelectedTd);\n    $('#mainContent p').html(Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var table in tablesTds) {\n        for (var i in tablesTds[table]) {\n            var dependson = tablesTds[table][i];\n            if (dependson !== '' && dependson !== table) {\n                pdFound = true;\n                extra += '<p class=\"d-block m-1\">' + Functions.escapeHtml(dependson) + ' -> ' + Functions.escapeHtml(pd[dependson].toString()) + '</p>';\n            }\n        }\n    }\n    if (!pdFound) {\n        extra += '<p class=\"d-block m-1\">' + Messages.strNoTdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'tables': JSON.stringify(tablesTds),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n            'getNewTables3NF':1 };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization',\n            data: datastring,\n            async:false,\n            success: function (data) {\n                dataParsed = data;\n                if (data.success === true) {\n                    extra += dataParsed.html;\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo3NFFinish\" value=\"' + Messages.strGo + '\">');\n    $('#goTo3NFFinish').on('click', function () {\n        if (!pdFound) {\n            goTo3NFFinish([]);\n        } else {\n            goTo3NFFinish(dataParsed.newTables);\n        }\n    });\n}\nfunction processDependencies (primaryKey, isTransitive) {\n    var pk = primaryKey;\n    var pd = {};\n    var tablesTds = {};\n    var dependsOn;\n    pd[pk] = [];\n    $('#extra form').each(function () {\n        var tblname;\n        if (isTransitive === true) {\n            tblname = $(this).data('tablename');\n            pk = tblname;\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            tablesTds[tblname].push(pk);\n        }\n        var formId = $(this).attr('id');\n        $('#' + formId + ' input[type=checkbox]:not(:checked)').prop('checked', false);\n        dependsOn = '';\n        $('#' + formId + ' input[type=checkbox]:checked').each(function () {\n            dependsOn += $(this).val() + ', ';\n            $(this).attr('checked','checked');\n        });\n        if (dependsOn === '') {\n            dependsOn = pk;\n        } else {\n            dependsOn = dependsOn.slice(0, -2);\n        }\n        if (! (dependsOn in pd)) {\n            pd[dependsOn] = [];\n        }\n        pd[dependsOn].push($(this).data('colname'));\n        if (isTransitive === true) {\n            if (!(tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            if ($.inArray(dependsOn, tablesTds[tblname]) === -1) {\n                tablesTds[tblname].push(dependsOn);\n            }\n        }\n    });\n    backup = $('#mainContent').html();\n    if (isTransitive === true) {\n        goTo3NFStep2(pd, tablesTds);\n    } else {\n        goTo2NFStep2(pd, pk);\n    }\n    return false;\n}\n\nfunction moveRepeatingGroup (repeatingCols) {\n    var newTable = $('input[name=repeatGroupTable]').val();\n    var newColumn = $('input[name=repeatGroupColumn]').val();\n    if (!newTable) {\n        $('input[name=repeatGroupTable]').trigger('focus');\n        return false;\n    }\n    if (!newColumn) {\n        $('input[name=repeatGroupColumn]').trigger('focus');\n        return false;\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'repeatingColumns': repeatingCols,\n        'newTable':newTable,\n        'newColumn':newColumn,\n        'primary_columns':primaryKey.toString()\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization',\n        data: datastring,\n        async:false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    goToStep3();\n                }\n                Functions.ajaxShowMessage(data.message, false);\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\nAJAX.registerTeardown('normalization.js', function () {\n    $('#extra').off('click', '#selectNonAtomicCol');\n    $('#splitGo').off('click');\n    $('.tblFooters').off('click', '#saveSplit');\n    $('#extra').off('click', '#addNewPrimary');\n    $('.tblFooters').off('click', '#saveNewPrimary');\n    $('#extra').off('click', '#removeRedundant');\n    $('#mainContent p').off('click', '#createPrimaryKey');\n    $('#mainContent').off('click', '#backEditPd');\n    $('#mainContent').off('click', '#showPossiblePd');\n    $('#mainContent').off('click', '.pickPd');\n});\n\nAJAX.registerOnload('normalization.js', function () {\n    var selectedCol;\n    normalizeto = $('#mainContent').data('normalizeto');\n    $('#extra').on('click', '#selectNonAtomicCol', function () {\n        if ($(this).val() === 'no_such_col') {\n            goToStep2();\n        } else {\n            selectedCol = $(this).val();\n        }\n    });\n\n    $('#splitGo').on('click', function () {\n        if (!selectedCol || selectedCol === '') {\n            return false;\n        }\n        var numField = $('#numField').val();\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'splitColumn': true,\n                'numFields': numField\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveSplit',\n                            value: Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click','#saveSplit', function () {\n        centralColumnList = [];\n        if ($('#newCols #field_0_1').val() === '') {\n            $('#newCols #field_0_1').trigger('focus');\n            return false;\n        }\n        var argsep = CommonParams.get('arg_separator');\n        var datastring = $('#newCols :input').serialize();\n        datastring += argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success) {\n                $.post(\n                    'index.php?route=/sql',\n                    {\n                        'ajax_request': true,\n                        'db': CommonParams.get('db'),\n                        'table': CommonParams.get('table'),\n                        'server': CommonParams.get('server'),\n                        'dropped_column': selectedCol,\n                        'purge' : 1,\n                        'sql_query': 'ALTER TABLE `' + CommonParams.get('table') + '` DROP `' + selectedCol + '`;',\n                        'is_js_confirmed': 1\n                    },\n                    function (data) {\n                        if (data.success === true) {\n                            appendHtmlColumnsList();\n                            $('#newCols').html('');\n                            $('.tblFooters').html('');\n                        } else {\n                            Functions.ajaxShowMessage(data.error, false);\n                        }\n                        selectedCol = '';\n                    }\n                );\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    $('#extra').on('click', '#addNewPrimary', function () {\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'addNewPrimary': true\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveNewPrimary',\n                            value: Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click', '#saveNewPrimary', function () {\n        var datastring = $('#newCols :input').serialize();\n        var argsep = CommonParams.get('arg_separator');\n        datastring += argsep + 'field_key[0]=primary_0' + argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success === true) {\n                $('#mainContent h4').html(Messages.strPrimaryKeyAdded);\n                $('#mainContent p').html(Messages.strToNextStep);\n                $('#mainContent #extra').html('');\n                $('#mainContent #newCols').html('');\n                $('.tblFooters').html('');\n                setTimeout(function () {\n                    goToStep3();\n                }, 2000);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n    $('#extra').on('click', '#removeRedundant', function () {\n        var dropQuery = 'ALTER TABLE `' + CommonParams.get('table') + '` ';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            dropQuery += 'DROP `' + $(this).val() + '`, ';\n        });\n        dropQuery = dropQuery.slice(0, -2);\n        $.post(\n            'index.php?route=/sql',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'sql_query': dropQuery,\n                'is_js_confirmed': 1\n            },\n            function (data) {\n                if (data.success === true) {\n                    goToStep2('goToFinish1NF');\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n    });\n    $('#extra').on('click', '#moveRepeatingGroup', function () {\n        var repeatingCols = '';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            repeatingCols += $(this).val() + ', ';\n        });\n\n        if (repeatingCols !== '') {\n            var newColName = $('#extra input[type=checkbox]:checked').first().val();\n            repeatingCols = repeatingCols.slice(0, -2);\n            var confirmStr = Functions.sprintf(Messages.strMoveRepeatingGroup, Functions.escapeHtml(repeatingCols), Functions.escapeHtml(CommonParams.get('table')));\n            confirmStr += '<input type=\"text\" name=\"repeatGroupTable\" placeholder=\"' + Messages.strNewTablePlaceholder + '\">' +\n                '( ' + Functions.escapeHtml(primaryKey.toString()) + ', <input type=\"text\" name=\"repeatGroupColumn\" placeholder=\"' + Messages.strNewColumnPlaceholder + '\" value=\"' + Functions.escapeHtml(newColName) + '\">)' +\n                '</ol>';\n            $('#newCols').html(confirmStr);\n\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: Messages.strCancel,\n                    class: 'btn btn-secondary'\n                })\n                .on('click', function () {\n                    $('#newCols').html('');\n                    $('#extra input[type=checkbox]').prop('checked', false);\n                })\n                .appendTo('.tblFooters');\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: Messages.strGo,\n                    class: 'btn btn-primary'\n                })\n                .on('click', function () {\n                    moveRepeatingGroup(repeatingCols);\n                })\n                .appendTo('.tblFooters');\n        }\n    });\n    $('#mainContent p').on('click', '#createPrimaryKey', function (event) {\n        event.preventDefault();\n        var url = {\n            'create_index': 1,\n            'server':  CommonParams.get('server'),\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'added_fields': 1,\n            'add_fields':1,\n            'index': { 'Key_name':'PRIMARY' },\n            'ajax_request': true\n        };\n        var title = Messages.strAddPrimaryKey;\n        Functions.indexEditorDialog(url, title, function () {\n            // on success\n            $('.sqlqueryresults').remove();\n            $('.result_query').remove();\n            $('.tblFooters').html('');\n            goToStep2('goToStep3');\n        });\n        return false;\n    });\n    $('#mainContent').on('click', '#backEditPd', function () {\n        $('#mainContent').html(backup);\n    });\n    $('#mainContent').on('click', '#showPossiblePd', function () {\n        if ($(this).hasClass('hideList')) {\n            $(this).html('+ ' + Messages.strShowPossiblePd);\n            $(this).removeClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        if ($('#newCols').html() !== '') {\n            $('#showPossiblePd').html('- ' + Messages.strHidePd);\n            $('#showPossiblePd').addClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        $('#newCols').insertAfter('#mainContent h4');\n        $('#newCols').html('<div class=\"text-center\">' + Messages.strLoading + '<br>' + Messages.strWaitForPd + '</div>');\n        $.post(\n            'index.php?route=/normalization',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'findPdl': true\n            }, function (data) {\n                $('#showPossiblePd').html('- ' + Messages.strHidePd);\n                $('#showPossiblePd').addClass('hideList');\n                $('#newCols').html(data.message);\n            });\n    });\n    $('#mainContent').on('click', '.pickPd', function () {\n        var strColsLeft = $(this).next('.determinants').html();\n        var colsLeft = strColsLeft.split(',');\n        var strColsRight = $(this).next().next().html();\n        var colsRight = strColsRight.split(',');\n        for (var i in colsRight) {\n            $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[type=\"checkbox\"]').prop('checked', false);\n            for (var j in colsLeft) {\n                $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[value=\"' + colsLeft[j].trim() + '\"]').prop('checked', true);\n            }\n        }\n    });\n});\n"],"names":["normalizeto","primaryKey","dataParsed","appendHtmlColumnsList","$","post","CommonParams","get","data","success","html","message","goTo3NFStep1","newTables","tables","Object","keys","length","find","Messages","str3NFNormalization","legendText","headText","subText","extra","each","formId","attr","colName","next","remove","type","value","strDone","class","on","processDependencies","appendTo","goTo2NFStep1","str2NFNormalization","primary_key","strToNextStep","setTimeout","goToFinish1NF","strEndStep","Functions","sprintf","strFinishMsg","escapeHtml","goToStep4","pk","escapeJsString","goToStep3","JSON","parse","goToStep2","hasPrimaryKey","strPrimaryKeyAdded","goTo2NFFinish","pd","dependson","val","datastring","stringify","ajax","url","async","queryError","trigger","ajaxShowMessage","error","goTo3NFFinish","table","newtbl","updatedname","backup","goTo2NFStep2","strStep","strConfirmPd","strSelectedPd","strPdHintNote","pdFound","toString","strNoPdSelected","strBack","strGo","goTo3NFStep2","tablesTds","strConfirmTd","strSelectedTd","i","strNoTdSelected","isTransitive","dependsOn","tblname","push","prop","slice","inArray","moveRepeatingGroup","repeatingCols","newTable","newColumn","AJAX","registerTeardown","off","registerOnload","selectedCol","numField","hide","id","strSave","strCancel","parent","centralColumnList","argsep","serialize","dropQuery","newColName","first","confirmStr","strMoveRepeatingGroup","strNewTablePlaceholder","strNewColumnPlaceholder","event","preventDefault","title","strAddPrimaryKey","indexEditorDialog","hasClass","strShowPossiblePd","removeClass","slideToggle","strHidePd","addClass","insertAfter","strLoading","strWaitForPd","strColsLeft","colsLeft","split","strColsRight","colsRight","trim","j"],"sourceRoot":""}