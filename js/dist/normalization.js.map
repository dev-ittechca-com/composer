{"version":3,"file":"normalization.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/normalization.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { Functions } from './modules/functions.js';\nimport { CommonParams } from './modules/common.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\nimport { escapeHtml, escapeJsString } from './modules/functions/escape.js';\n\n/**\n * @fileoverview   events handling from normalization page\n * @name            normalization\n *\n * @requires    jQuery\n */\n\n/**\n * AJAX scripts for normalization\n *\n */\n\nvar normalizeto = '1nf';\nvar primaryKey;\nvar dataParsed = null;\n\nfunction appendHtmlColumnsList () {\n    $.post(\n        'index.php?route=/normalization/get-columns',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        },\n        function (data) {\n            if (data.success === true) {\n                $('select[name=makeAtomic]').html(data.message);\n            }\n        }\n    );\n}\n\nfunction goTo3NFStep1 (newTables) {\n    var tables = newTables;\n    if (Object.keys(tables).length === 1) {\n        tables = [CommonParams.get('table')];\n    }\n    $.post(\n        'index.php?route=/normalization/3nf/step1',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'server': CommonParams.get('server'),\n            'tables': tables,\n        }, function (data) {\n            $('#page_content').find('h3').html(window.Messages.str3NFNormalization);\n            $('#mainContent').find('legend').html(data.legendText);\n            $('#mainContent').find('h4').html(data.headText);\n            $('#mainContent').find('p').html(data.subText);\n            $('#mainContent').find('#extra').html(data.extra);\n            $('#extra').find('form').each(function () {\n                var formId = $(this).attr('id');\n                var colName = $(this).data('colname');\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').next().remove();\n                $('#' + formId + ' input[value=\\'' + colName + '\\']').remove();\n            });\n            $('#mainContent').find('#newCols').html('');\n            $('.tblFooters').html('');\n\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'button',\n                        value: window.Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies('', true);\n                    })\n                    .appendTo('.tblFooters');\n            }\n        }\n    );\n}\n\nfunction goTo2NFStep1 () {\n    $.post(\n        'index.php?route=/normalization/2nf/step1',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#page_content h3').html(window.Messages.str2NFNormalization);\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            if (data.subText !== '') {\n                $('<input>')\n                    .attr({\n                        type: 'submit',\n                        value: window.Messages.strDone,\n                        class: 'btn btn-primary'\n                    })\n                    .on('click', function () {\n                        processDependencies(data.primary_key);\n                    })\n                    .appendTo('.tblFooters');\n            } else {\n                if (normalizeto === '3nf') {\n                    $('#mainContent #newCols').html(window.Messages.strToNextStep);\n                    setTimeout(function () {\n                        goTo3NFStep1([CommonParams.get('table')]);\n                    }, 3000);\n                }\n            }\n        });\n}\n\nfunction goToFinish1NF () {\n    if (normalizeto !== '1nf') {\n        goTo2NFStep1();\n        return true;\n    }\n    $('#mainContent legend').html(window.Messages.strEndStep);\n    $('#mainContent h4').html(\n        '<h3>' + window.sprintf(window.Messages.strFinishMsg, escapeHtml(CommonParams.get('table'))) + '</h3>'\n    );\n    $('#mainContent p').html('');\n    $('#mainContent #extra').html('');\n    $('#mainContent #newCols').html('');\n    $('.tblFooters').html('');\n}\n\nfunction goToStep4 () {\n    $.post(\n        'index.php?route=/normalization/1nf/step4',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + escapeJsString(primaryKey[pk]) + '\\']').attr('disabled', 'disabled');\n            }\n        }\n    );\n}\n\nwindow.goToStep4 = goToStep4;\n\nfunction goToStep3 () {\n    $.post(\n        'index.php?route=/normalization/1nf/step3',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra').html(data.extra);\n            $('#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            primaryKey = JSON.parse(data.primary_key);\n            for (var pk in primaryKey) {\n                $('#extra input[value=\\'' + escapeJsString(primaryKey[pk]) + '\\']').attr('disabled', 'disabled');\n            }\n        }\n    );\n}\n\nfunction goToStep2 (extra) {\n    $.post(\n        'index.php?route=/normalization/1nf/step2',\n        {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server')\n        }, function (data) {\n            $('#mainContent legend').html(data.legendText);\n            $('#mainContent h4').html(data.headText);\n            $('#mainContent p').html(data.subText);\n            $('#mainContent #extra,#mainContent #newCols').html('');\n            $('.tblFooters').html('');\n            if (data.hasPrimaryKey === '1') {\n                if (extra === 'goToStep3') {\n                    $('#mainContent h4').html(window.Messages.strPrimaryKeyAdded);\n                    $('#mainContent p').html(window.Messages.strToNextStep);\n                }\n                if (extra === 'goToFinish1NF') {\n                    goToFinish1NF();\n                } else {\n                    setTimeout(function () {\n                        goToStep3();\n                    }, 3000);\n                }\n            } else {\n                // form to select columns to make primary\n                $('#mainContent #extra').html(data.extra);\n            }\n        }\n    );\n}\n\nfunction goTo2NFFinish (pd) {\n    var tables = {};\n    for (var dependson in pd) {\n        tables[dependson] = $('#extra input[name=\"' + dependson + '\"]').val();\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'pd': JSON.stringify(pd),\n        'newTablesName': JSON.stringify(tables),\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/2nf/create-new-tables',\n        data: datastring,\n        async: false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    if (normalizeto === '3nf') {\n                        $('#pma_navigation_reload').trigger('click');\n                        goTo3NFStep1(tables);\n                        return true;\n                    }\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nfunction goTo3NFFinish (newTables) {\n    for (var table in newTables) {\n        for (var newtbl in newTables[table]) {\n            var updatedname = $('#extra input[name=\"' + newtbl + '\"]').val();\n            newTables[table][updatedname] = newTables[table][newtbl];\n            if (updatedname !== newtbl) {\n                delete newTables[table][newtbl];\n            }\n        }\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'server': CommonParams.get('server'),\n        'newTables': JSON.stringify(newTables),\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/3nf/create-new-tables',\n        data: datastring,\n        async: false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    $('#mainContent legend').html(data.legendText);\n                    $('#mainContent h4').html(data.headText);\n                    $('#mainContent p').html('');\n                    $('#mainContent #extra').html('');\n                    $('.tblFooters').html('');\n                } else {\n                    ajaxShowMessage(data.extra, false);\n                }\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nvar backup = '';\n\nfunction goTo2NFStep2 (pd, primaryKey) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(window.Messages.strStep + ' 2.2 ' + window.Messages.strConfirmPd);\n    $('#mainContent h4').html(window.Messages.strSelectedPd);\n    $('#mainContent p').html(window.Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var dependson in pd) {\n        if (dependson !== primaryKey) {\n            pdFound = true;\n            extra += '<p class=\"d-block m-1\">' + escapeHtml(dependson) + ' -> ' + escapeHtml(pd[dependson].toString()) + '</p>';\n        }\n    }\n    if (! pdFound) {\n        extra += '<p class=\"d-block m-1\">' + window.Messages.strNoPdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n        };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization/2nf/new-tables',\n            data: datastring,\n            async: false,\n            success: function (data) {\n                if (data.success === true) {\n                    extra += data.message;\n                } else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + window.Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo2NFFinish\" value=\"' + window.Messages.strGo + '\">');\n    $('#goTo2NFFinish').on('click', function () {\n        goTo2NFFinish(pd);\n    });\n}\n\nfunction goTo3NFStep2 (pd, tablesTds) {\n    $('#newCols').html('');\n    $('#mainContent legend').html(window.Messages.strStep + ' 3.2 ' + window.Messages.strConfirmTd);\n    $('#mainContent h4').html(window.Messages.strSelectedTd);\n    $('#mainContent p').html(window.Messages.strPdHintNote);\n    var extra = '<div class=\"dependencies_box\">';\n    var pdFound = false;\n    for (var table in tablesTds) {\n        for (var i in tablesTds[table]) {\n            var dependson = tablesTds[table][i];\n            if (dependson !== '' && dependson !== table) {\n                pdFound = true;\n                extra += '<p class=\"d-block m-1\">' + escapeHtml(dependson) + ' -> ' + escapeHtml(pd[dependson].toString()) + '</p>';\n            }\n        }\n    }\n    if (! pdFound) {\n        extra += '<p class=\"d-block m-1\">' + window.Messages.strNoTdSelected + '</p>';\n        extra += '</div>';\n    } else {\n        extra += '</div>';\n        var datastring = {\n            'ajax_request': true,\n            'db': CommonParams.get('db'),\n            'tables': JSON.stringify(tablesTds),\n            'server': CommonParams.get('server'),\n            'pd': JSON.stringify(pd),\n        };\n        $.ajax({\n            type: 'POST',\n            url: 'index.php?route=/normalization/3nf/new-tables',\n            data: datastring,\n            async: false,\n            success: function (data) {\n                dataParsed = data;\n                if (data.success === true) {\n                    extra += dataParsed.html;\n                } else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }\n        });\n    }\n    $('#mainContent #extra').html(extra);\n    $('.tblFooters').html('<input type=\"button\" class=\"btn btn-primary\" value=\"' + window.Messages.strBack + '\" id=\"backEditPd\"><input type=\"button\" class=\"btn btn-primary\" id=\"goTo3NFFinish\" value=\"' + window.Messages.strGo + '\">');\n    $('#goTo3NFFinish').on('click', function () {\n        if (! pdFound) {\n            goTo3NFFinish([]);\n        } else {\n            goTo3NFFinish(dataParsed.newTables);\n        }\n    });\n}\n\nfunction processDependencies (primaryKey, isTransitive) {\n    var pk = primaryKey;\n    var pd = {};\n    var tablesTds = {};\n    var dependsOn;\n    pd[pk] = [];\n    $('#extra form').each(function () {\n        var tblname;\n        if (isTransitive === true) {\n            tblname = $(this).data('tablename');\n            pk = tblname;\n            if (! (tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            tablesTds[tblname].push(pk);\n        }\n        var formId = $(this).attr('id');\n        $('#' + formId + ' input[type=checkbox]:not(:checked)').prop('checked', false);\n        dependsOn = '';\n        $('#' + formId + ' input[type=checkbox]:checked').each(function () {\n            dependsOn += $(this).val() + ', ';\n            $(this).attr('checked', 'checked');\n        });\n        if (dependsOn === '') {\n            dependsOn = pk;\n        } else {\n            dependsOn = dependsOn.slice(0, -2);\n        }\n        if (! (dependsOn in pd)) {\n            pd[dependsOn] = [];\n        }\n        pd[dependsOn].push($(this).data('colname'));\n        if (isTransitive === true) {\n            if (! (tblname in tablesTds)) {\n                tablesTds[tblname] = [];\n            }\n            if ($.inArray(dependsOn, tablesTds[tblname]) === -1) {\n                tablesTds[tblname].push(dependsOn);\n            }\n        }\n    });\n    backup = $('#mainContent').html();\n    if (isTransitive === true) {\n        goTo3NFStep2(pd, tablesTds);\n    } else {\n        goTo2NFStep2(pd, pk);\n    }\n    return false;\n}\n\nfunction moveRepeatingGroup (repeatingCols) {\n    var newTable = $('input[name=repeatGroupTable]').val();\n    var newColumn = $('input[name=repeatGroupColumn]').val();\n    if (! newTable) {\n        $('input[name=repeatGroupTable]').trigger('focus');\n        return false;\n    }\n    if (! newColumn) {\n        $('input[name=repeatGroupColumn]').trigger('focus');\n        return false;\n    }\n    var datastring = {\n        'ajax_request': true,\n        'db': CommonParams.get('db'),\n        'table': CommonParams.get('table'),\n        'server': CommonParams.get('server'),\n        'repeatingColumns': repeatingCols,\n        'newTable': newTable,\n        'newColumn': newColumn,\n        'primary_columns': primaryKey.toString()\n    };\n    $.ajax({\n        type: 'POST',\n        url: 'index.php?route=/normalization/move-repeating-group',\n        data: datastring,\n        async: false,\n        success: function (data) {\n            if (data.success === true) {\n                if (data.queryError === false) {\n                    goToStep3();\n                }\n                ajaxShowMessage(data.message, false);\n                $('#pma_navigation_reload').trigger('click');\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }\n    });\n}\n\nAJAX.registerTeardown('normalization.js', function () {\n    $('#extra').off('click', '#selectNonAtomicCol');\n    $('#splitGo').off('click');\n    $('.tblFooters').off('click', '#saveSplit');\n    $('#extra').off('click', '#addNewPrimary');\n    $('.tblFooters').off('click', '#saveNewPrimary');\n    $('#extra').off('click', '#removeRedundant');\n    $('#mainContent p').off('click', '#createPrimaryKey');\n    $('#mainContent').off('click', '#backEditPd');\n    $('#mainContent').off('click', '#showPossiblePd');\n    $('#mainContent').off('click', '.pickPd');\n});\n\nAJAX.registerOnload('normalization.js', function () {\n    var selectedCol;\n    normalizeto = $('#mainContent').data('normalizeto');\n    $('#extra').on('click', '#selectNonAtomicCol', function () {\n        if ($(this).val() === 'no_such_col') {\n            goToStep2();\n        } else {\n            selectedCol = $(this).val();\n        }\n    });\n\n    $('#splitGo').on('click', function () {\n        if (! selectedCol || selectedCol === '') {\n            return false;\n        }\n        var numField = $('#numField').val();\n        $.post(\n            'index.php?route=/normalization/create-new-column',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'numFields': numField\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveSplit',\n                            value: window.Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: window.Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click', '#saveSplit', function () {\n        window.centralColumnList = [];\n        if ($('#newCols #field_0_1').val() === '') {\n            $('#newCols #field_0_1').trigger('focus');\n            return false;\n        }\n        var argsep = CommonParams.get('arg_separator');\n        var datastring = $('#newCols :input').serialize();\n        datastring += argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success) {\n                $.post(\n                    'index.php?route=/sql',\n                    {\n                        'ajax_request': true,\n                        'db': CommonParams.get('db'),\n                        'table': CommonParams.get('table'),\n                        'server': CommonParams.get('server'),\n                        'dropped_column': selectedCol,\n                        'purge': 1,\n                        'sql_query': 'ALTER TABLE `' + CommonParams.get('table') + '` DROP `' + selectedCol + '`;',\n                        'is_js_confirmed': 1\n                    },\n                    function (data) {\n                        if (data.success === true) {\n                            appendHtmlColumnsList();\n                            $('#newCols').html('');\n                            $('.tblFooters').html('');\n                        } else {\n                            ajaxShowMessage(data.error, false);\n                        }\n                        selectedCol = '';\n                    }\n                );\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n\n    $('#extra').on('click', '#addNewPrimary', function () {\n        $.post(\n            'index.php?route=/normalization/add-new-primary',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n            },\n            function (data) {\n                if (data.success === true) {\n                    $('#newCols').html(data.message);\n                    $('.default_value').hide();\n                    $('.enum_notice').hide();\n\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'saveNewPrimary',\n                            value: window.Messages.strSave,\n                            class: 'btn btn-primary'\n                        })\n                        .appendTo('.tblFooters');\n                    $('<input>')\n                        .attr({\n                            type: 'submit',\n                            id: 'cancelSplit',\n                            value: window.Messages.strCancel,\n                            class: 'btn btn-secondary'\n                        })\n                        .on('click', function () {\n                            $('#newCols').html('');\n                            $(this).parent().html('');\n                        })\n                        .appendTo('.tblFooters');\n                } else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n        return false;\n    });\n    $('.tblFooters').on('click', '#saveNewPrimary', function () {\n        var datastring = $('#newCols :input').serialize();\n        var argsep = CommonParams.get('arg_separator');\n        datastring += argsep + 'field_key[0]=primary_0' + argsep + 'ajax_request=1' + argsep + 'do_save_data=1' + argsep + 'field_where=last';\n        $.post('index.php?route=/table/add-field', datastring, function (data) {\n            if (data.success === true) {\n                $('#mainContent h4').html(window.Messages.strPrimaryKeyAdded);\n                $('#mainContent p').html(window.Messages.strToNextStep);\n                $('#mainContent #extra').html('');\n                $('#mainContent #newCols').html('');\n                $('.tblFooters').html('');\n                setTimeout(function () {\n                    goToStep3();\n                }, 2000);\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        });\n    });\n    $('#extra').on('click', '#removeRedundant', function () {\n        var dropQuery = 'ALTER TABLE `' + CommonParams.get('table') + '` ';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            dropQuery += 'DROP `' + $(this).val() + '`, ';\n        });\n        dropQuery = dropQuery.slice(0, -2);\n        $.post(\n            'index.php?route=/sql',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n                'sql_query': dropQuery,\n                'is_js_confirmed': 1\n            },\n            function (data) {\n                if (data.success === true) {\n                    goToStep2('goToFinish1NF');\n                } else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }\n        );\n    });\n    $('#extra').on('click', '#moveRepeatingGroup', function () {\n        var repeatingCols = '';\n        $('#extra input[type=checkbox]:checked').each(function () {\n            repeatingCols += $(this).val() + ', ';\n        });\n\n        if (repeatingCols !== '') {\n            var newColName = $('#extra input[type=checkbox]:checked').first().val();\n            repeatingCols = repeatingCols.slice(0, -2);\n            var confirmStr = window.sprintf(window.Messages.strMoveRepeatingGroup, escapeHtml(repeatingCols), escapeHtml(CommonParams.get('table')));\n            confirmStr += '<input type=\"text\" name=\"repeatGroupTable\" placeholder=\"' + window.Messages.strNewTablePlaceholder + '\">' +\n                '( ' + escapeHtml(primaryKey.toString()) + ', <input type=\"text\" name=\"repeatGroupColumn\" placeholder=\"' + window.Messages.strNewColumnPlaceholder + '\" value=\"' + escapeHtml(newColName) + '\">)' +\n                '</ol>';\n            $('#newCols').html(confirmStr);\n\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: window.Messages.strCancel,\n                    class: 'btn btn-secondary'\n                })\n                .on('click', function () {\n                    $('#newCols').html('');\n                    $('#extra input[type=checkbox]').prop('checked', false);\n                })\n                .appendTo('.tblFooters');\n            $('<input>')\n                .attr({\n                    type: 'submit',\n                    value: window.Messages.strGo,\n                    class: 'btn btn-primary'\n                })\n                .on('click', function () {\n                    moveRepeatingGroup(repeatingCols);\n                })\n                .appendTo('.tblFooters');\n        }\n    });\n    $('#mainContent p').on('click', '#createPrimaryKey', function (event) {\n        event.preventDefault();\n        var url = {\n            'create_index': 1,\n            'server': CommonParams.get('server'),\n            'db': CommonParams.get('db'),\n            'table': CommonParams.get('table'),\n            'added_fields': 1,\n            'add_fields': 1,\n            'index': { 'Key_name': 'PRIMARY' },\n            'ajax_request': true\n        };\n        var title = window.Messages.strAddPrimaryKey;\n        Functions.indexEditorDialog(url, title, function () {\n            // on success\n            $('.sqlqueryresults').remove();\n            $('.result_query').remove();\n            $('.tblFooters').html('');\n            goToStep2('goToStep3');\n        });\n        return false;\n    });\n    $('#mainContent').on('click', '#backEditPd', function () {\n        $('#mainContent').html(backup);\n    });\n    $('#mainContent').on('click', '#showPossiblePd', function () {\n        if ($(this).hasClass('hideList')) {\n            $(this).html('+ ' + window.Messages.strShowPossiblePd);\n            $(this).removeClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        if ($('#newCols').html() !== '') {\n            $('#showPossiblePd').html('- ' + window.Messages.strHidePd);\n            $('#showPossiblePd').addClass('hideList');\n            $('#newCols').slideToggle('slow');\n            return false;\n        }\n        $('#newCols').insertAfter('#mainContent h4');\n        $('#newCols').html('<div class=\"text-center\">' + window.Messages.strLoading + '<br>' + window.Messages.strWaitForPd + '</div>');\n        $.post(\n            'index.php?route=/normalization/partial-dependencies',\n            {\n                'ajax_request': true,\n                'db': CommonParams.get('db'),\n                'table': CommonParams.get('table'),\n                'server': CommonParams.get('server'),\n            }, function (data) {\n                $('#showPossiblePd').html('- ' + window.Messages.strHidePd);\n                $('#showPossiblePd').addClass('hideList');\n                $('#newCols').html(data.message);\n            });\n    });\n    $('#mainContent').on('click', '.pickPd', function () {\n        var strColsLeft = $(this).next('.determinants').html();\n        var colsLeft = strColsLeft.split(',');\n        var strColsRight = $(this).next().next().html();\n        var colsRight = strColsRight.split(',');\n        for (var i in colsRight) {\n            $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[type=\"checkbox\"]').prop('checked', false);\n            for (var j in colsLeft) {\n                $('form[data-colname=\"' + colsRight[i].trim() + '\"] input[value=\"' + colsLeft[j].trim() + '\"]').prop('checked', true);\n            }\n        }\n    });\n});\n"],"names":["$","AJAX","Functions","CommonParams","ajaxShowMessage","escapeHtml","escapeJsString","normalizeto","primaryKey","dataParsed","appendHtmlColumnsList","post","get","data","success","html","message","goTo3NFStep1","newTables","tables","Object","keys","length","find","window","Messages","str3NFNormalization","legendText","headText","subText","extra","each","formId","attr","colName","next","remove","type","value","strDone","class","on","processDependencies","appendTo","goTo2NFStep1","str2NFNormalization","primary_key","strToNextStep","setTimeout","goToFinish1NF","strEndStep","sprintf","strFinishMsg","goToStep4","pk","goToStep3","JSON","parse","goToStep2","hasPrimaryKey","strPrimaryKeyAdded","goTo2NFFinish","pd","dependson","val","datastring","stringify","ajax","url","async","queryError","trigger","error","goTo3NFFinish","table","newtbl","updatedname","backup","goTo2NFStep2","strStep","strConfirmPd","strSelectedPd","strPdHintNote","pdFound","toString","strNoPdSelected","strBack","strGo","goTo3NFStep2","tablesTds","strConfirmTd","strSelectedTd","i","strNoTdSelected","isTransitive","dependsOn","tblname","push","prop","slice","inArray","moveRepeatingGroup","repeatingCols","newTable","newColumn","registerTeardown","off","registerOnload","selectedCol","numField","hide","id","strSave","strCancel","parent","centralColumnList","argsep","serialize","dropQuery","newColName","first","confirmStr","strMoveRepeatingGroup","strNewTablePlaceholder","strNewColumnPlaceholder","event","preventDefault","title","strAddPrimaryKey","indexEditorDialog","hasClass","strShowPossiblePd","removeClass","slideToggle","strHidePd","addClass","insertAfter","strLoading","strWaitForPd","strColsLeft","colsLeft","split","strColsRight","colsRight","trim","j"],"sourceRoot":""}