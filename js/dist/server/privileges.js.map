{"version":3,"file":"server/privileges.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/server/privileges.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport { CommonParams } from '../modules/common.js';\nimport { Navigation } from '../modules/navigation.js';\n\n/**\n * Export privileges modal handler\n *\n * @param {object} data\n *\n * @param {JQuery} msgbox\n *\n */\nfunction exportPrivilegesModalHandler (data, msgbox) {\n    if (typeof data !== 'undefined' && data.success === true) {\n        var modal = $('#exportPrivilegesModal');\n        // Remove any previous privilege modal data, if any\n        modal.find('.modal-body').first().html('');\n        $('#exportPrivilegesModalLabel').first().html('Loading');\n        modal.modal('show');\n        modal.on('shown.bs.modal', function () {\n            modal.find('.modal-body').first().html(data.message);\n            $('#exportPrivilegesModalLabel').first().html(data.title);\n            Functions.ajaxRemoveMessage(msgbox);\n            // Attach syntax highlighted editor to export dialog\n            Functions.getSqlEditor(modal.find('textarea'));\n        });\n        return;\n    }\n    Functions.ajaxShowMessage(data.error, false);\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst EditUserGroup = {\n    /**\n     * @param {MouseEvent} event\n     */\n    handleEvent: function (event) {\n        const editUserGroupModal = document.getElementById('editUserGroupModal');\n        const button = event.relatedTarget;\n        const username = button.getAttribute('data-username');\n\n        $.get(\n            'index.php?route=/server/user-groups/edit-form',\n            {\n                'username': username,\n                'server': CommonParams.get('server')\n            },\n            data => {\n                if (typeof data === 'undefined' || data.success !== true) {\n                    Functions.ajaxShowMessage(data.error, false, 'error');\n\n                    return;\n                }\n\n                const modal = window.bootstrap.Modal.getInstance(editUserGroupModal);\n                const modalBody = editUserGroupModal.querySelector('.modal-body');\n                const saveButton = editUserGroupModal.querySelector('#editUserGroupModalSaveButton');\n\n                modalBody.innerHTML = data.message;\n\n                saveButton.addEventListener('click', () => {\n                    const form = $(editUserGroupModal.querySelector('#changeUserGroupForm'));\n\n                    $.post(\n                        'index.php?route=/server/privileges',\n                        form.serialize() + CommonParams.get('arg_separator') + 'ajax_request=1',\n                        data => {\n                            if (typeof data === 'undefined' || data.success !== true) {\n                                Functions.ajaxShowMessage(data.error, false, 'error');\n\n                                return;\n                            }\n\n                            const userGroup = form.serializeArray().find(el => el.name === 'userGroup').value;\n                            // button -> td -> tr -> td.usrGroup\n                            const userGroupTableCell = button.parentElement.parentElement.querySelector('.usrGroup');\n                            userGroupTableCell.textContent = userGroup;\n                        }\n                    );\n\n                    modal.hide();\n                });\n            }\n        );\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst AccountLocking = {\n    handleEvent: function () {\n        const button = this;\n        const isLocked = button.dataset.isLocked === 'true';\n        const url = isLocked\n            ? 'index.php?route=/server/privileges/account-unlock'\n            : 'index.php?route=/server/privileges/account-lock';\n        const params = {\n            'username': button.dataset.userName,\n            'hostname': button.dataset.hostName,\n            'ajax_request': true,\n            'server': CommonParams.get('server'),\n        };\n\n        $.post(url, params, data => {\n            if (data.success === false) {\n                Functions.ajaxShowMessage(data.error);\n                return;\n            }\n\n            if (isLocked) {\n                const lockIcon = Functions.getImage('s_lock', window.Messages.strLock, {}).toString();\n                button.innerHTML = '<span class=\"text-nowrap\">' + lockIcon + ' ' + window.Messages.strLock + '</span>';\n                button.title = window.Messages.strLockAccount;\n                button.dataset.isLocked = 'false';\n            } else {\n                const unlockIcon = Functions.getImage('s_unlock', window.Messages.strUnlock, {}).toString();\n                button.innerHTML = '<span class=\"text-nowrap\">' + unlockIcon + ' ' + window.Messages.strUnlock + '</span>';\n                button.title = window.Messages.strUnlockAccount;\n                button.dataset.isLocked = 'true';\n            }\n\n            Functions.ajaxShowMessage(data.message);\n        });\n    }\n};\n\n/**\n * Display a warning if there is already a user by the name entered as the username.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst AddUserLoginCheckUsername = {\n    handleEvent: function () {\n        var username = $(this).val();\n        var $warning = $('#user_exists_warning');\n        if ($('#select_pred_username').val() === 'userdefined' && username !== '') {\n            var href = $('form[name=\\'usersForm\\']').attr('action');\n            var params = {\n                'ajax_request' : true,\n                'server' : CommonParams.get('server'),\n                'validate_username' : true,\n                'username' : username\n            };\n            $.get(href, params, function (data) {\n                if (data.user_exists) {\n                    $warning.show();\n                } else {\n                    $warning.hide();\n                }\n            });\n        } else {\n            $warning.hide();\n        }\n    }\n};\n\n/**\n * Indicating password strength\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst PasswordStrength = {\n    handleEvent: function () {\n        var meterObj = $('#password_strength_meter');\n        var meterObjLabel = $('#password_strength');\n        var username = $('input[name=\"username\"]');\n        username = username.val();\n        Functions.checkPasswordStrength($(this).val(), meterObj, meterObjLabel, username);\n    }\n};\n\n/**\n * Automatically switching to 'Use Text field' from 'No password' once start writing in text area\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SwitchToUseTextField = {\n    handleEvent: function () {\n        if ($('#text_pma_pw').val() !== '') {\n            $('#select_pred_password').val('userdefined');\n        }\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ChangePasswordStrength = {\n    handleEvent: function () {\n        var meterObj = $('#change_password_strength_meter');\n        var meterObjLabel = $('#change_password_strength');\n        Functions.checkPasswordStrength($(this).val(), meterObj, meterObjLabel, CommonParams.get('user'));\n    }\n};\n\n/**\n * Display a notice if sha256_password is selected\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ShowSha256PasswordNotice = {\n    handleEvent: function () {\n        var selectedPlugin = $(this).val();\n        if (selectedPlugin === 'sha256_password') {\n            $('#ssl_reqd_warning').show();\n        } else {\n            $('#ssl_reqd_warning').hide();\n        }\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst RevokeUser = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n\n        var $thisButton = $(this);\n        var $form = $('#usersForm');\n\n        $thisButton.confirm(window.Messages.strDropUserWarning, $form.attr('action'), function (url) {\n            var $dropUsersDbCheckbox = $('#dropUsersDbCheckbox');\n            if ($dropUsersDbCheckbox.is(':checked')) {\n                var isConfirmed = confirm(window.Messages.strDropDatabaseStrongWarning + '\\n' + window.sprintf(window.Messages.strDoYouReally, 'DROP DATABASE'));\n                if (! isConfirmed) {\n                    // Uncheck the drop users database checkbox\n                    $dropUsersDbCheckbox.prop('checked', false);\n                }\n            }\n\n            Functions.ajaxShowMessage(window.Messages.strRemovingSelectedUsers);\n\n            var argsep = CommonParams.get('arg_separator');\n            $.post(url, $form.serialize() + argsep + 'delete=' + $thisButton.val() + argsep + 'ajax_request=true', function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    Functions.ajaxShowMessage(data.message);\n                    // Refresh navigation, if we dropped some databases with the name\n                    // that is the same as the username of the deleted user\n                    if ($('#dropUsersDbCheckbox:checked').length) {\n                        Navigation.reload();\n                    }\n                    // Remove the revoked user from the users list\n                    $form.find('input:checkbox:checked').parents('tr').slideUp('medium', function () {\n                        var thisUserInitial = $(this).find('input:checkbox').val().charAt(0).toUpperCase();\n                        $(this).remove();\n\n                        // If this is the last user with thisUserInitial, remove the link from #userAccountsPagination\n                        if ($('#userRightsTable').find('input:checkbox[value^=\"' + thisUserInitial + '\"], input:checkbox[value^=\"' + thisUserInitial.toLowerCase() + '\"]').length === 0) {\n                            $('#userAccountsPagination')\n                                .find('.page-item > .page-link:contains(' + thisUserInitial + ')')\n                                .parent('.page-item')\n                                .addClass('disabled')\n                                .html('<a class=\"page-link\" href=\"#\" tabindex=\"-1\" aria-disabled=\"true\">' + thisUserInitial + '</a>');\n                        }\n\n                        // Re-check the classes of each row\n                        $form\n                            .find('tbody').find('tr').each(function (index) {\n                                if (index >= 0 && index % 2 === 0) {\n                                    $(this).removeClass('odd').addClass('even');\n                                } else if (index >= 0 && index % 2 !== 0) {\n                                    $(this).removeClass('even').addClass('odd');\n                                }\n                            });\n                        // update the checkall checkbox\n                        $(Functions.checkboxesSel).trigger('change');\n                    });\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }); // end $.post()\n        });\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ExportPrivileges = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n        // can't export if no users checked\n        if ($(this.form).find('input:checked').length === 0) {\n            Functions.ajaxShowMessage(window.Messages.strNoAccountSelected, 2000, 'success');\n            return;\n        }\n        var msgbox = Functions.ajaxShowMessage();\n        var argsep = CommonParams.get('arg_separator');\n        var serverId = CommonParams.get('server');\n        var selectedUsers = $('#usersForm input[name*=\\'selected_usr\\']:checkbox').serialize();\n        var postStr = selectedUsers + '&submit_mult=export' + argsep + 'ajax_request=true&server=' + serverId;\n\n        $.post($(this.form).prop('action'), postStr, function (data) {\n            exportPrivilegesModalHandler(data, msgbox);\n        }); // end $.post\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst ExportUser = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        event.preventDefault();\n        var msgbox = Functions.ajaxShowMessage();\n        $.get($(this).attr('href'), { 'ajax_request': true }, function (data) {\n            exportPrivilegesModalHandler(data, msgbox);\n        });\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SslTypeToggle = {\n    handleEvent: function () {\n        var $div = $('#specified_div');\n        if ($('#ssl_type_SPECIFIED').is(':checked')) {\n            $div.find('input').prop('disabled', false);\n        } else {\n            $div.find('input').prop('disabled', true);\n        }\n    }\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SslPrivilegeToggle = {\n    handleEvent: function () {\n        var $div = $('#require_ssl_div');\n        if ($(this).is(':checked')) {\n            $div.find('input').prop('disabled', false);\n            $('#ssl_type_SPECIFIED').trigger('change');\n        } else {\n            $div.find('input').prop('disabled', true);\n        }\n    }\n};\n\n/**\n * Create submenu for simpler interface\n */\nfunction addOrUpdateSubmenu () {\n    var $editUserDialog = $('#edit_user_dialog');\n    if ($editUserDialog.length === 0) {\n        return;\n    }\n\n    var $subNav = $('.nav-pills');\n    var submenuLabel;\n    var submenuLink;\n    var linkNumber;\n\n    // if submenu exists yet, remove it first\n    if ($subNav.length > 0) {\n        $subNav.remove();\n    }\n\n    // construct a submenu from the existing fieldsets\n    $subNav = $('<ul></ul>').prop('class', 'nav nav-pills m-2');\n\n    $('#edit_user_dialog .submenu-item').each(function () {\n        submenuLabel = $(this).find('.js-submenu-label[data-submenu-label]').data('submenu-label');\n\n        submenuLink = $('<a></a>')\n            .prop('class', 'nav-link')\n            .prop('href', '#')\n            .html(submenuLabel);\n\n        $('<li></li>')\n            .prop('class', 'nav-item')\n            .append(submenuLink)\n            .appendTo($subNav);\n    });\n\n    // click handlers for submenu\n    $subNav.find('a').on('click', function (e) {\n        e.preventDefault();\n        // if already active, ignore click\n        if ($(this).hasClass('active')) {\n            return;\n        }\n        $subNav.find('a').removeClass('active');\n        $(this).addClass('active');\n\n        // which section to show now?\n        linkNumber = $subNav.find('a').index($(this));\n        // hide all sections but the one to show\n        $('#edit_user_dialog .submenu-item').hide().eq(linkNumber).show();\n    });\n\n    // make first menu item active\n    // TODO: support URL hash history\n    $subNav.find('> :first-child a').addClass('active');\n    $editUserDialog.prepend($subNav);\n\n    // hide all sections but the first\n    $('#edit_user_dialog .submenu-item').hide().eq(0).show();\n\n    // scroll to the top\n    $('html, body').animate({ scrollTop: 0 }, 'fast');\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst SelectAllPrivileges = {\n    /**\n     * @param {Event} event\n     */\n    handleEvent: function (event) {\n        const method = event.target.getAttribute('data-select-target');\n        var options = $(method).first().children();\n        options.each(function (_, obj) {\n            obj.selected = true;\n        });\n    }\n};\n\nfunction setMaxWidth () {\n    var windowWidth = $(window).width();\n    $('.jsresponsive').css('max-width', (windowWidth - 35) + 'px');\n}\n\n/**\n * Validates the \"add a user\" form\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n */\nconst CheckAddUser = {\n    handleEvent: function () {\n        const theForm = this;\n\n        if (theForm.elements.hostname.value === '') {\n            alert(window.Messages.strHostEmpty);\n            theForm.elements.hostname.focus();\n            return false;\n        }\n\n        if ((theForm.elements.pred_username && theForm.elements.pred_username.value === 'userdefined') && theForm.elements.username.value === '') {\n            alert(window.Messages.strUserEmpty);\n            theForm.elements.username.focus();\n            return false;\n        }\n\n        return Functions.checkPassword($(theForm));\n    }\n};\n\nconst selectPasswordRadioWhenChangingPassword = () => {\n    $('#nopass_0').prop('checked', true);\n};\n\n/**\n * AJAX scripts for /server/privileges page.\n *\n * Actions ajaxified here:\n * Add user\n * Revoke a user\n * Edit privileges\n * Export privileges\n * Paginate table of users\n * Flush privileges\n *\n * @memberOf    jQuery\n * @name        document.ready\n */\n\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('server/privileges.js', function () {\n    $('#fieldset_add_user_login').off('change', 'input[name=\\'username\\']');\n    $(document).off('click', '#deleteUserCard .btn.ajax');\n    $('#text_pma_change_pw').off('keyup');\n    $('#text_pma_change_pw').off('change');\n    $('#text_pma_change_pw2').off('change');\n\n    const editUserGroupModal = document.getElementById('editUserGroupModal');\n    if (editUserGroupModal) {\n        editUserGroupModal.removeEventListener('show.bs.modal', EditUserGroup);\n    }\n\n    $(document).off('click', 'button.mult_submit[value=export]');\n    $(document).off('click', 'a.export_user_anchor.ajax');\n    $('button.jsAccountLocking').off('click');\n    $('#dropUsersDbCheckbox').off('click');\n    $(document).off('click', '.checkall_box');\n    $(document).off('change', '#checkbox_SSL_priv');\n    $(document).off('change', 'input[name=\"ssl_type\"]');\n    $(document).off('change', '#select_authentication_plugin');\n});\n\nAJAX.registerOnload('server/privileges.js', function () {\n    $('#fieldset_add_user_login').on('change', 'input[name=\\'username\\']', AddUserLoginCheckUsername.handleEvent);\n    $('#text_pma_pw').on('keyup', PasswordStrength.handleEvent);\n    $('#text_pma_pw').on('input', SwitchToUseTextField.handleEvent);\n    $('#text_pma_change_pw').on('keyup', ChangePasswordStrength.handleEvent);\n    $('#text_pma_change_pw').on('change', selectPasswordRadioWhenChangingPassword);\n    $('#text_pma_change_pw2').on('change', selectPasswordRadioWhenChangingPassword);\n    $(document).on('change', '#select_authentication_plugin', ShowSha256PasswordNotice.handleEvent);\n    $(document).on('click', '#deleteUserCard .btn.ajax', RevokeUser.handleEvent);\n\n    const editUserGroupModal = document.getElementById('editUserGroupModal');\n    if (editUserGroupModal) {\n        editUserGroupModal.addEventListener('show.bs.modal', EditUserGroup);\n    }\n\n    $(document).on('click', 'button.mult_submit[value=export]', ExportPrivileges.handleEvent);\n\n    // if exporting non-ajax, highlight anyways\n    Functions.getSqlEditor($('textarea.export'));\n\n    $(document).on('click', 'a.export_user_anchor.ajax', ExportUser.handleEvent);\n    $('button.jsAccountLocking').on('click', AccountLocking.handleEvent);\n    $(document).on('change', 'input[name=\"ssl_type\"]', SslTypeToggle.handleEvent);\n\n    $(document).on('change', '#checkbox_SSL_priv', SslPrivilegeToggle.handleEvent);\n    $('#checkbox_SSL_priv').trigger('change');\n\n    $('input.autofocus').trigger('focus');\n    $(Functions.checkboxesSel).trigger('change');\n    Functions.displayPasswordGenerateButton();\n    addOrUpdateSubmenu();\n\n    $('#select_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#insert_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#update_priv_all').on('click', SelectAllPrivileges.handleEvent);\n    $('#references_priv_all').on('click', SelectAllPrivileges.handleEvent);\n\n    setMaxWidth();\n\n    $('#addUsersForm').on('submit', CheckAddUser.handleEvent);\n    $('#copyUserForm').on('submit', CheckAddUser.handleEvent);\n});\n"],"names":["$","AJAX","Functions","CommonParams","Navigation","exportPrivilegesModalHandler","data","msgbox","success","modal","find","first","html","on","message","title","ajaxRemoveMessage","getSqlEditor","ajaxShowMessage","error","EditUserGroup","handleEvent","event","editUserGroupModal","document","getElementById","button","relatedTarget","username","getAttribute","get","window","bootstrap","Modal","getInstance","modalBody","querySelector","saveButton","innerHTML","addEventListener","form","post","serialize","userGroup","serializeArray","el","name","value","userGroupTableCell","parentElement","textContent","hide","AccountLocking","isLocked","dataset","url","params","userName","hostName","lockIcon","getImage","Messages","strLock","toString","strLockAccount","unlockIcon","strUnlock","strUnlockAccount","AddUserLoginCheckUsername","val","$warning","href","attr","user_exists","show","PasswordStrength","meterObj","meterObjLabel","checkPasswordStrength","SwitchToUseTextField","ChangePasswordStrength","ShowSha256PasswordNotice","selectedPlugin","RevokeUser","preventDefault","$thisButton","$form","confirm","strDropUserWarning","$dropUsersDbCheckbox","is","isConfirmed","strDropDatabaseStrongWarning","sprintf","strDoYouReally","prop","strRemovingSelectedUsers","argsep","length","reload","parents","slideUp","thisUserInitial","charAt","toUpperCase","remove","toLowerCase","parent","addClass","each","index","removeClass","checkboxesSel","trigger","ExportPrivileges","strNoAccountSelected","serverId","selectedUsers","postStr","ExportUser","SslTypeToggle","$div","SslPrivilegeToggle","addOrUpdateSubmenu","$editUserDialog","$subNav","submenuLabel","submenuLink","linkNumber","append","appendTo","e","hasClass","eq","prepend","animate","scrollTop","SelectAllPrivileges","method","target","options","children","_","obj","selected","setMaxWidth","windowWidth","width","css","CheckAddUser","theForm","elements","hostname","alert","strHostEmpty","focus","pred_username","strUserEmpty","checkPassword","selectPasswordRadioWhenChangingPassword","registerTeardown","off","removeEventListener","registerOnload","displayPasswordGenerateButton"],"sourceRoot":""}