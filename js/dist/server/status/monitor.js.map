{"version":3,"file":"server/status/monitor.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/server/status/monitor.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../../modules/ajax.js';\nimport { Functions } from '../../modules/functions.js';\nimport { CommonParams } from '../../modules/common.js';\nimport { Config } from '../../modules/config.js';\n\n/**\n * @fileoverview    Javascript functions used in server status monitor page\n * @name            Server Status Monitor\n *\n * @requires    jQueryUI\n */\n\n/* global firstDayOfCalendar, themeImagePath */ // templates/javascript/variables.twig\n/* global variableNames */ // templates/server/status/monitor/index.twig\n\nvar runtime = {};\nvar serverTimeDiff;\nvar serverOs;\nvar isSuperUser;\nvar serverDbIsLocal;\nvar chartSize;\nvar monitorSettings;\n\nfunction serverResponseError () {\n    var btns = {\n        [window.Messages.strReloadPage]: {\n            text: window.Messages.strReloadPage,\n            class: 'btn btn-primary',\n            click: function () {\n                window.location.reload();\n            },\n        },\n    };\n    $('#emptyDialog').dialog({\n        classes: {\n            'ui-dialog-titlebar-close': 'btn-close'\n        },\n        title: window.Messages.strRefreshFailed\n    });\n    $('#emptyDialog').html(\n        Functions.getImage('s_attention') +\n        window.Messages.strInvalidResponseExplanation\n    );\n    $('#emptyDialog').dialog({\n        classes: {\n            'ui-dialog-titlebar-close': 'btn-close'\n        },\n        buttons: btns\n    });\n}\n\n/**\n * Destroys all monitor related resources\n */\nfunction destroyGrid () {\n    if (runtime.charts) {\n        $.each(runtime.charts, function (key, value) {\n            try {\n                value.chart.destroy();\n            } catch (err) {\n                // continue regardless of error\n            }\n        });\n    }\n\n    try {\n        runtime.refreshRequest.abort();\n    } catch (err) {\n        // continue regardless of error\n    }\n    try {\n        clearTimeout(runtime.refreshTimeout);\n    } catch (err) {\n        // continue regardless of error\n    }\n    $('#chartGrid').html('');\n    runtime.charts = null;\n    runtime.chartAI = 0;\n    monitorSettings = null;\n}\n\nAJAX.registerOnload('server/status/monitor.js', function () {\n    var $jsDataForm = $('#js_data');\n    serverTimeDiff = new Date().getTime() - $jsDataForm.find('input[name=server_time]').val();\n    serverOs = $jsDataForm.find('input[name=server_os]').val();\n    isSuperUser = $jsDataForm.find('input[name=is_superuser]').val();\n    serverDbIsLocal = $jsDataForm.find('input[name=server_db_isLocal]').val();\n});\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('server/status/monitor.js', function () {\n    $('#emptyDialog').remove();\n    $('a.popupLink').off('click');\n    $('body').off('click');\n});\n/**\n * Popup behaviour\n */\nAJAX.registerOnload('server/status/monitor.js', function () {\n    $('<div></div>')\n        .attr('id', 'emptyDialog')\n        .appendTo('#page_content');\n\n    $('a.popupLink').on('click', function () {\n        var $link = $(this);\n        $('div.' + $link.attr('href').substring(1))\n            .show()\n            .offset({ top: $link.offset().top + $link.height() + 5, left: $link.offset().left })\n            .addClass('openedPopup');\n\n        return false;\n    });\n    $('body').on('click', function (event) {\n        $('div.openedPopup').each(function () {\n            var $cnt = $(this);\n            var pos = $cnt.offset();\n            // Hide if the mouseclick is outside the popupcontent\n            if (event.pageX > pos.left + $cnt.outerWidth() ||\n                event.pageY > pos.top + $cnt.outerHeight()\n            ) {\n                $cnt.hide().removeClass('openedPopup');\n            }\n        });\n    });\n});\n\nAJAX.registerTeardown('server/status/monitor.js', function () {\n    $('a[href=\"#rearrangeCharts\"], a[href=\"#endChartEditMode\"]').off('click');\n    $('div.popupContent select[name=\"chartColumns\"]').off('change');\n    $('div.popupContent select[name=\"gridChartRefresh\"]').off('change');\n    $('a[href=\"#addNewChart\"]').off('click');\n    $('a[href=\"#exportMonitorConfig\"]').off('click');\n    $('a[href=\"#importMonitorConfig\"]').off('click');\n    $('a[href=\"#clearMonitorConfig\"]').off('click');\n    $('a[href=\"#pauseCharts\"]').off('click');\n    $('a[href=\"#monitorInstructionsDialog\"]').off('click');\n    $('input[name=\"chartType\"]').off('click');\n    $('input[name=\"useDivisor\"]').off('click');\n    $('input[name=\"useUnit\"]').off('click');\n    $('select[name=\"varChartList\"]').off('click');\n    $('a[href=\"#kibDivisor\"]').off('click');\n    $('a[href=\"#mibDivisor\"]').off('click');\n    $('a[href=\"#submitClearSeries\"]').off('click');\n    $('a[href=\"#submitAddSeries\"]').off('click');\n    // $(\"input#variableInput\").destroy();\n    $('#chartPreset').off('click');\n    $('#chartStatusVar').off('click');\n    destroyGrid();\n});\n\nAJAX.registerOnload('server/status/monitor.js', function () {\n    // Show tab links\n    $('div.tabLinks').show();\n    $('#loadingMonitorIcon').remove();\n    // Codemirror is loaded on demand so we might need to initialize it\n    if (! window.codeMirrorEditor) {\n        var $elm = $('#sqlquery');\n        if ($elm.length > 0 && typeof window.CodeMirror !== 'undefined') {\n            window.codeMirrorEditor = window.CodeMirror.fromTextArea(\n                $elm[0],\n                {\n                    lineNumbers: true,\n                    matchBrackets: true,\n                    indentUnit: 4,\n                    mode: 'text/x-mysql',\n                    lineWrapping: true\n                }\n            );\n        }\n    }\n    // Timepicker is loaded on demand so we need to initialize\n    // datetime fields from the 'load log' dialog\n    $('#logAnalyseDialog').find('.datetimefield').each(function () {\n        Functions.addDatepicker($(this));\n    });\n\n    /** ** Monitor charting implementation ****/\n    /* Saves the previous ajax response for differential values */\n    var oldChartData = null;\n    // Holds about to be created chart\n    var newChart = null;\n    var chartSpacing;\n\n    // Whenever the monitor object (runtime.charts) or the settings object\n    // (monitorSettings) changes in a way incompatible to the previous version,\n    // increase this number. It will reset the users monitor and settings object\n    // in their localStorage to the default configuration\n    var monitorProtocolVersion = '1.0';\n\n    // Runtime parameter of the monitor, is being fully set in initGrid()\n    runtime = {\n        // Holds all visible charts in the grid\n        charts: null,\n        // Stores the timeout handler so it can be cleared\n        refreshTimeout: null,\n        // Stores the GET request to refresh the charts\n        refreshRequest: null,\n        // Chart auto increment\n        chartAI: 0,\n        // To play/pause the monitor\n        redrawCharts: false,\n        // Object that contains a list of nodes that need to be retrieved\n        // from the server for chart updates\n        dataList: [],\n        // Current max points per chart (needed for auto calculation)\n        gridMaxPoints: 20,\n        // displayed time frame\n        xmin: -1,\n        xmax: -1\n    };\n    monitorSettings = null;\n\n    var defaultMonitorSettings = {\n        columns: 3,\n        chartSize: { width: 295, height: 250 },\n        // Max points in each chart. Settings it to 'auto' sets\n        // gridMaxPoints to (chartwidth - 40) / 12\n        gridMaxPoints: 'auto',\n        /* Refresh rate of all grid charts in ms */\n        gridRefresh: 5000\n    };\n\n    // Allows drag and drop rearrange and print/edit icons on charts\n    var editMode = false;\n\n    /* List of preconfigured charts that the user may select */\n    var presetCharts = {\n        // Query cache efficiency\n        'qce': {\n            title: window.Messages.strQueryCacheEfficiency,\n            series: [{\n                label: window.Messages.strQueryCacheEfficiency\n            }],\n            nodes: [{\n                dataPoints: [{ type: 'statusvar', name: 'Qcache_hits' }, { type: 'statusvar', name: 'Com_select' }],\n                transformFn: 'qce'\n            }],\n            maxYLabel: 0\n        },\n        // Query cache usage\n        'qcu': {\n            title: window.Messages.strQueryCacheUsage,\n            series: [{\n                label: window.Messages.strQueryCacheUsed\n            }],\n            nodes: [{\n                dataPoints: [{ type: 'statusvar', name: 'Qcache_free_memory' }, { type: 'servervar', name: 'query_cache_size' }],\n                transformFn: 'qcu'\n            }],\n            maxYLabel: 0\n        }\n    };\n\n    // time span selection\n    var selectionTimeDiff = [];\n    var selectionStartX;\n    var selectionStartY;\n    var drawTimeSpan = false;\n\n    /* Add OS specific system info charts to the preset chart list */\n    switch (serverOs) {\n    case 'WINNT':\n        $.extend(presetCharts, {\n            'cpu': {\n                title: window.Messages.strSystemCPUUsage,\n                series: [{\n                    label: window.Messages.strAverageLoad\n                }],\n                nodes: [{\n                    dataPoints: [{ type: 'cpu', name: 'loadavg' }]\n                }],\n                maxYLabel: 100\n            },\n\n            'memory': {\n                title: window.Messages.strSystemMemory,\n                series: [{\n                    dataType: 'memory',\n                    label: window.Messages.strUsedMemory,\n                    fill: true\n                }, {\n                    label: window.Messages.strFreeMemory,\n                    fill: true\n                }],\n                nodes: [{ dataPoints: [{ type: 'memory', name: 'MemUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'MemFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            },\n\n            'swap': {\n                title: window.Messages.strSystemSwap,\n                series: [{\n                    label: window.Messages.strUsedSwap,\n                    fill: true\n                }, {\n                    label: window.Messages.strFreeSwap,\n                    fill: true\n                }],\n                nodes: [{ dataPoints: [{ type: 'memory', name: 'SwapUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'SwapFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            }\n        });\n        break;\n\n    case 'Linux':\n        $.extend(presetCharts, {\n            'cpu': {\n                title: window.Messages.strSystemCPUUsage,\n                series: [{\n                    label: window.Messages.strAverageLoad\n                }],\n                nodes: [{ dataPoints: [{ type: 'cpu', name: 'irrelevant' }], transformFn: 'cpu-linux' }],\n                maxYLabel: 0\n            },\n            'memory': {\n                title: window.Messages.strSystemMemory,\n                series: [\n                    { label: window.Messages.strBufferedMemory, fill: true },\n                    { label: window.Messages.strUsedMemory, fill: true },\n                    { label: window.Messages.strCachedMemory, fill: true },\n                    { label: window.Messages.strFreeMemory, fill: true }\n                ],\n                nodes: [\n                    { dataPoints: [{ type: 'memory', name: 'Buffers' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'MemUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'Cached' }],  valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'MemFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            },\n            'swap': {\n                title: window.Messages.strSystemSwap,\n                series: [\n                    { label: window.Messages.strCachedSwap, fill: true },\n                    { label: window.Messages.strUsedSwap, fill: true },\n                    { label: window.Messages.strFreeSwap, fill: true }\n                ],\n                nodes: [\n                    { dataPoints: [{ type: 'memory', name: 'SwapCached' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'SwapUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'SwapFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            }\n        });\n        break;\n\n    case 'SunOS':\n        $.extend(presetCharts, {\n            'cpu': {\n                title: window.Messages.strSystemCPUUsage,\n                series: [{\n                    label: window.Messages.strAverageLoad\n                }],\n                nodes: [{\n                    dataPoints: [{ type: 'cpu', name: 'loadavg' }]\n                }],\n                maxYLabel: 0\n            },\n            'memory': {\n                title: window.Messages.strSystemMemory,\n                series: [\n                    { label: window.Messages.strUsedMemory, fill: true },\n                    { label: window.Messages.strFreeMemory, fill: true }\n                ],\n                nodes: [\n                    { dataPoints: [{ type: 'memory', name: 'MemUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'MemFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            },\n            'swap': {\n                title: window.Messages.strSystemSwap,\n                series: [\n                    { label: window.Messages.strUsedSwap, fill: true },\n                    { label: window.Messages.strFreeSwap, fill: true }\n                ],\n                nodes: [\n                    { dataPoints: [{ type: 'memory', name: 'SwapUsed' }], valueDivisor: 1024 },\n                    { dataPoints: [{ type: 'memory', name: 'SwapFree' }], valueDivisor: 1024 }\n                ],\n                maxYLabel: 0\n            }\n        });\n        break;\n    }\n\n    // Default setting for the chart grid\n    var defaultChartGrid = {\n        'c0': {\n            title: window.Messages.strQuestions,\n            series: [\n                { label: window.Messages.strQuestions }\n            ],\n            nodes: [\n                { dataPoints: [{ type: 'statusvar', name: 'Questions' }], display: 'differential' }\n            ],\n            maxYLabel: 0\n        },\n        'c1': {\n            title: window.Messages.strChartConnectionsTitle,\n            series: [\n                { label: window.Messages.strConnections },\n                { label: window.Messages.strProcesses }\n            ],\n            nodes: [\n                { dataPoints: [{ type: 'statusvar', name: 'Connections' }], display: 'differential' },\n                { dataPoints: [{ type: 'proc', name: 'processes' }] }\n            ],\n            maxYLabel: 0\n        },\n        'c2': {\n            title: window.Messages.strTraffic,\n            series: [\n                { label: window.Messages.strBytesSent },\n                { label: window.Messages.strBytesReceived }\n            ],\n            nodes: [\n                { dataPoints: [{ type: 'statusvar', name: 'Bytes_sent' }], display: 'differential', valueDivisor: 1024 },\n                { dataPoints: [{ type: 'statusvar', name: 'Bytes_received' }], display: 'differential', valueDivisor: 1024 }\n            ],\n            maxYLabel: 0\n        }\n    };\n\n    // Server is localhost => We can add cpu/memory/swap to the default chart\n    if (serverDbIsLocal && typeof presetCharts.cpu !== 'undefined') {\n        defaultChartGrid.c3 = presetCharts.cpu;\n        defaultChartGrid.c4 = presetCharts.memory;\n        defaultChartGrid.c5 = presetCharts.swap;\n    }\n\n    $('a[href=\"#rearrangeCharts\"], a[href=\"#endChartEditMode\"]').on('click', function (event) {\n        event.preventDefault();\n        editMode = !editMode;\n        if ($(this).attr('href') === '#endChartEditMode') {\n            editMode = false;\n        }\n\n        $('a[href=\"#endChartEditMode\"]').toggle(editMode);\n\n        if (editMode) {\n            // Close the settings popup\n            $('div.popupContent').hide().removeClass('openedPopup');\n\n            $('#chartGrid').sortableTable({\n                ignoreRect: {\n                    top: 8,\n                    left: chartSize.width - 63,\n                    width: 54,\n                    height: 24\n                }\n            });\n        } else {\n            $('#chartGrid').sortableTable('destroy');\n        }\n        saveMonitor(); // Save settings\n        return false;\n    });\n\n    // global settings\n    $('div.popupContent select[name=\"chartColumns\"]').on('change', function () {\n        monitorSettings.columns = parseInt(this.value, 10);\n\n        calculateChartSize();\n        // Empty cells should keep their size so you can drop onto them\n        $('#chartGrid').find('tr td').css('width', chartSize.width + 'px');\n        $('#chartGrid').find('.monitorChart').css({\n            width: chartSize.width + 'px',\n            height: chartSize.height + 'px'\n        });\n\n        /* Reorder all charts that it fills all column cells */\n        var numColumns;\n        var $tr = $('#chartGrid').find('tr').first();\n\n        var tempManageCols = function () {\n            if (numColumns > monitorSettings.columns) {\n                if ($tr.next().length === 0) {\n                    $tr.after('<tr></tr>');\n                }\n                $tr.next().prepend($(this));\n            }\n            numColumns++;\n        };\n\n        var tempAddCol = function () {\n            if ($(this).next().length !== 0) {\n                $(this).append($(this).next().find('td').first());\n            }\n        };\n\n        while ($tr.length !== 0) {\n            numColumns = 1;\n            // To many cells in one row => put into next row\n            $tr.find('td').each(tempManageCols);\n\n            // To little cells in one row => for each cell to little,\n            // move all cells backwards by 1\n            if ($tr.next().length > 0) {\n                var cnt = monitorSettings.columns - $tr.find('td').length;\n                for (var i = 0; i < cnt; i++) {\n                    $tr.append($tr.next().find('td').first());\n                    $tr.nextAll().each(tempAddCol);\n                }\n            }\n\n            $tr = $tr.next();\n        }\n\n        if (monitorSettings.gridMaxPoints === 'auto') {\n            runtime.gridMaxPoints = Math.round((chartSize.width - 40) / 12);\n        }\n\n        runtime.xmin = new Date().getTime() - serverTimeDiff - runtime.gridMaxPoints * monitorSettings.gridRefresh;\n        runtime.xmax = new Date().getTime() - serverTimeDiff + monitorSettings.gridRefresh;\n\n        if (editMode) {\n            $('#chartGrid').sortableTable('refresh');\n        }\n\n        refreshChartGrid();\n        saveMonitor(); // Save settings\n    });\n\n    $('div.popupContent select[name=\"gridChartRefresh\"]').on('change', function () {\n        monitorSettings.gridRefresh = parseInt(this.value, 10) * 1000;\n        clearTimeout(runtime.refreshTimeout);\n\n        if (runtime.refreshRequest) {\n            runtime.refreshRequest.abort();\n        }\n\n        runtime.xmin = new Date().getTime() - serverTimeDiff - runtime.gridMaxPoints * monitorSettings.gridRefresh;\n        // fixing chart shift towards left on refresh rate change\n        // runtime.xmax = new Date().getTime() - serverTimeDiff + monitorSettings.gridRefresh;\n        runtime.refreshTimeout = setTimeout(refreshChartGrid, monitorSettings.gridRefresh);\n\n        saveMonitor(); // Save settings\n    });\n\n    $('a[href=\"#addNewChart\"]').on('click', function (event) {\n        event.preventDefault();\n\n        $('#addChartButton').on('click', function () {\n            var type = $('input[name=\"chartType\"]:checked').val();\n\n            if (type === 'preset') {\n                newChart = presetCharts[$('#addChartModal').find('select[name=\"presetCharts\"]').prop('value')];\n            } else {\n                // If user builds their own chart, it's being set/updated\n                // each time they add a series\n                // So here we only warn if they didn't add a series yet\n                if (! newChart || ! newChart.nodes || newChart.nodes.length === 0) {\n                    alert(window.Messages.strAddOneSeriesWarning);\n                    return;\n                }\n            }\n\n            newChart.title = $('input[name=\"chartTitle\"]').val();\n            // Add a cloned object to the chart grid\n            addChart($.extend(true, {}, newChart));\n\n            newChart = null;\n\n            saveMonitor(); // Save settings\n\n            $('#closeModalButton').off('click');\n        });\n\n        $('#closeModalButton').on('click', function () {\n            newChart = null;\n            $('span#clearSeriesLink').hide();\n            $('#seriesPreview').html('');\n            $('#closeModalButton').off('click');\n        });\n\n        var $presetList = $('#addChartModal').find('select[name=\"presetCharts\"]');\n        if ($presetList.html().length === 0) {\n            $.each(presetCharts, function (key, value) {\n                $presetList.append('<option value=\"' + key + '\">' + value.title + '</option>');\n            });\n            $presetList.on('change', function () {\n                $('input[name=\"chartTitle\"]').val(\n                    $presetList.find(':selected').text()\n                );\n                $('#chartPreset').prop('checked', true);\n            });\n            $('#chartPreset').on('click', function () {\n                $('input[name=\"chartTitle\"]').val(\n                    $presetList.find(':selected').text()\n                );\n            });\n            $('#chartStatusVar').on('click', function () {\n                $('input[name=\"chartTitle\"]').val(\n                    $('#chartSeries').find(':selected').text().replace(/_/g, ' ')\n                );\n            });\n            $('#chartSeries').on('change', function () {\n                $('input[name=\"chartTitle\"]').val(\n                    $('#chartSeries').find(':selected').text().replace(/_/g, ' ')\n                );\n            });\n        }\n\n        $('#addChartModal').modal('show');\n\n        $('#seriesPreview').html('<i>' + window.Messages.strNone + '</i>');\n\n        return false;\n    });\n\n    $('a[href=\"#exportMonitorConfig\"]').on('click', function (event) {\n        event.preventDefault();\n        var gridCopy = {};\n        $.each(runtime.charts, function (key, elem) {\n            gridCopy[key] = {};\n            gridCopy[key].nodes = elem.nodes;\n            gridCopy[key].series = elem.series;\n            gridCopy[key].settings = elem.settings;\n            gridCopy[key].title = elem.title;\n            gridCopy[key].maxYLabel = elem.maxYLabel;\n        });\n        var exportData = {\n            monitorCharts: gridCopy,\n            monitorSettings: monitorSettings\n        };\n\n        var blob = new Blob([JSON.stringify(exportData)], { type: 'application/octet-stream' });\n        var url = null;\n        var fileName = 'monitor-config.json';\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(blob, fileName);\n        } else {\n            url = URL.createObjectURL(blob);\n            window.location.href = url;\n        }\n        setTimeout(function () {\n            // For some browsers it is necessary to delay revoking the ObjectURL\n            if (url !== null) {\n                window.URL.revokeObjectURL(url);\n            }\n            url = undefined;\n            blob = undefined;\n        }, 100);\n    });\n\n    $('a[href=\"#importMonitorConfig\"]').on('click', function (event) {\n        event.preventDefault();\n        $('#emptyDialog').dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            title: window.Messages.strImportDialogTitle\n        });\n        $('#emptyDialog').html(window.Messages.strImportDialogMessage + '<br><form>' +\n            '<input type=\"file\" name=\"file\" id=\"import_file\"> </form>');\n\n        var dlgBtns = {\n            [window.Messages.strImport]: {\n                text: window.Messages.strImport,\n                class: 'btn btn-primary',\n            },\n            [window.Messages.strCancel]: {\n                text: window.Messages.strCancel,\n                class: 'btn btn-secondary',\n            },\n        };\n\n        dlgBtns[window.Messages.strImport].click = function () {\n            var input = $('#emptyDialog').find('#import_file')[0];\n            var reader = new FileReader();\n\n            reader.onerror = function (event) {\n                alert(window.Messages.strFailedParsingConfig + '\\n' + event.target.error.code);\n            };\n            reader.onload = function (e) {\n                var data = e.target.result;\n                var json = null;\n                // Try loading config\n                try {\n                    json = JSON.parse(data);\n                } catch (err) {\n                    alert(window.Messages.strFailedParsingConfig);\n                    $('#emptyDialog').dialog('close');\n                    return;\n                }\n\n                // Basic check, is this a monitor config json?\n                if (!json || ! json.monitorCharts || ! json.monitorCharts) {\n                    alert(window.Messages.strFailedParsingConfig);\n                    $('#emptyDialog').dialog('close');\n                    return;\n                }\n\n                // If json ok, try applying config\n                try {\n                    if (Config.isStorageSupported('localStorage')) {\n                        window.localStorage.monitorCharts = JSON.stringify(json.monitorCharts);\n                        window.localStorage.monitorSettings = JSON.stringify(json.monitorSettings);\n                    }\n                    rebuildGrid();\n                } catch (err) {\n                    alert(window.Messages.strFailedBuildingGrid);\n                    // If an exception is thrown, load default again\n                    if (Config.isStorageSupported('localStorage')) {\n                        window.localStorage.removeItem('monitorCharts');\n                        window.localStorage.removeItem('monitorSettings');\n                    }\n                    rebuildGrid();\n                }\n\n                $('#emptyDialog').dialog('close');\n            };\n            reader.readAsText(input.files[0]);\n        };\n\n        dlgBtns[window.Messages.strCancel].click = function () {\n            $(this).dialog('close');\n        };\n\n        $('#emptyDialog').dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            width: 'auto',\n            height: 'auto',\n            buttons: dlgBtns\n        });\n    });\n\n    $('a[href=\"#clearMonitorConfig\"]').on('click', function (event) {\n        event.preventDefault();\n        if (Config.isStorageSupported('localStorage')) {\n            window.localStorage.removeItem('monitorCharts');\n            window.localStorage.removeItem('monitorSettings');\n            window.localStorage.removeItem('monitorVersion');\n        }\n        $(this).hide();\n        rebuildGrid();\n    });\n\n    $('a[href=\"#pauseCharts\"]').on('click', function (event) {\n        event.preventDefault();\n        runtime.redrawCharts = ! runtime.redrawCharts;\n        if (! runtime.redrawCharts) {\n            $(this).html(Functions.getImage('play') + window.Messages.strResumeMonitor);\n        } else {\n            $(this).html(Functions.getImage('pause') + window.Messages.strPauseMonitor);\n            if (! runtime.charts) {\n                initGrid();\n                $('a[href=\"#settingsPopup\"]').show();\n            }\n        }\n        return false;\n    });\n\n    $('a[href=\"#monitorInstructionsDialog\"]').on('click', function (event) {\n        event.preventDefault();\n\n        var $dialog = $('#monitorInstructionsDialog');\n        var dlgBtns = {\n            [window.Messages.strClose]: {\n                text: window.Messages.strClose,\n                class: 'btn btn-primary',\n                click: function () {\n                    $(this).dialog('close');\n                }\n            },\n        };\n        $dialog.dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            width: '60%',\n            height: 'auto',\n            buttons: dlgBtns\n        }).find('img.ajaxIcon').show();\n\n        var loadLogVars = function (getvars) {\n            var vars = {\n                'ajax_request': true,\n                'server': CommonParams.get('server')\n            };\n            if (getvars) {\n                $.extend(vars, getvars);\n            }\n\n            $.post('index.php?route=/server/status/monitor/log-vars', vars,\n                function (data) {\n                    var logVars;\n                    if (typeof data !== 'undefined' && data.success === true) {\n                        logVars = data.message;\n                    } else {\n                        return serverResponseError();\n                    }\n                    var icon = Functions.getImage('s_success');\n                    var msg = '';\n                    var str = '';\n\n                    if (logVars.general_log === 'ON') {\n                        if (logVars.slow_query_log === 'ON') {\n                            msg = window.Messages.strBothLogOn;\n                        } else {\n                            msg = window.Messages.strGenLogOn;\n                        }\n                    }\n\n                    if (msg.length === 0 && logVars.slow_query_log === 'ON') {\n                        msg = window.Messages.strSlowLogOn;\n                    }\n\n                    if (msg.length === 0) {\n                        icon = Functions.getImage('s_error');\n                        msg = window.Messages.strBothLogOff;\n                    }\n\n                    str = '<b>' + window.Messages.strCurrentSettings + '</b><br><div class=\"smallIndent\">';\n                    str += icon + msg + '<br>';\n\n                    if (logVars.log_output !== 'TABLE') {\n                        str += Functions.getImage('s_error') + ' ' + window.Messages.strLogOutNotTable + '<br>';\n                    } else {\n                        str += Functions.getImage('s_success') + ' ' + window.Messages.strLogOutIsTable + '<br>';\n                    }\n\n                    if (logVars.slow_query_log === 'ON') {\n                        if (logVars.long_query_time > 2) {\n                            str += Functions.getImage('s_attention') + ' ';\n                            str += window.sprintf(window.Messages.strSmallerLongQueryTimeAdvice, logVars.long_query_time);\n                            str += '<br>';\n                        }\n\n                        if (logVars.long_query_time < 2) {\n                            str += Functions.getImage('s_success') + ' ';\n                            str += window.sprintf(window.Messages.strLongQueryTimeSet, logVars.long_query_time);\n                            str += '<br>';\n                        }\n                    }\n\n                    str += '</div>';\n\n                    if (isSuperUser) {\n                        str += '<p></p><b>' + window.Messages.strChangeSettings + '</b>';\n                        str += '<div class=\"smallIndent\">';\n                        str += window.Messages.strSettingsAppliedGlobal + '<br>';\n\n                        var varValue = 'TABLE';\n                        if (logVars.log_output === 'TABLE') {\n                            varValue = 'FILE';\n                        }\n\n                        str += '- <a class=\"set\" href=\"#log_output-' + varValue + '\">';\n                        str += window.sprintf(window.Messages.strSetLogOutput, varValue);\n                        str += ' </a><br>';\n\n                        if (logVars.general_log !== 'ON') {\n                            str += '- <a class=\"set\" href=\"#general_log-ON\">';\n                            str += window.sprintf(window.Messages.strEnableVar, 'general_log');\n                            str += ' </a><br>';\n                        } else {\n                            str += '- <a class=\"set\" href=\"#general_log-OFF\">';\n                            str += window.sprintf(window.Messages.strDisableVar, 'general_log');\n                            str += ' </a><br>';\n                        }\n\n                        if (logVars.slow_query_log !== 'ON') {\n                            str += '- <a class=\"set\" href=\"#slow_query_log-ON\">';\n                            str +=  window.sprintf(window.Messages.strEnableVar, 'slow_query_log');\n                            str += ' </a><br>';\n                        } else {\n                            str += '- <a class=\"set\" href=\"#slow_query_log-OFF\">';\n                            str +=  window.sprintf(window.Messages.strDisableVar, 'slow_query_log');\n                            str += ' </a><br>';\n                        }\n\n                        varValue = 5;\n                        if (logVars.long_query_time > 2) {\n                            varValue = 1;\n                        }\n\n                        str += '- <a class=\"set\" href=\"#long_query_time-' + varValue + '\">';\n                        str += window.sprintf(window.Messages.setSetLongQueryTime, varValue);\n                        str += ' </a><br>';\n                    } else {\n                        str += window.Messages.strNoSuperUser + '<br>';\n                    }\n\n                    str += '</div>';\n\n                    $dialog.find('div.monitorUse').toggle(\n                        logVars.log_output === 'TABLE' && (logVars.slow_query_log === 'ON' || logVars.general_log === 'ON')\n                    );\n\n                    $dialog.find('div.ajaxContent').html(str);\n                    $dialog.find('img.ajaxIcon').hide();\n                    $dialog.find('a.set').on('click', function () {\n                        var nameValue = $(this).attr('href').split('-');\n                        loadLogVars({ varName: nameValue[0].substring(1), varValue: nameValue[1] });\n                        $dialog.find('img.ajaxIcon').show();\n                    });\n                }\n            );\n        };\n\n\n        loadLogVars();\n\n        return false;\n    });\n\n    $('input[name=\"chartType\"]').on('change', function () {\n        $('#chartVariableSettings').toggle(this.checked && this.value === 'variable');\n        var title = $('input[name=\"chartTitle\"]').val();\n        if (title === window.Messages.strChartTitle ||\n            title === $('label[for=\"' + $('input[name=\"chartTitle\"]').data('lastRadio') + '\"]').text()\n        ) {\n            $('input[name=\"chartTitle\"]')\n                .data('lastRadio', $(this).attr('id'))\n                .val($('label[for=\"' + $(this).attr('id') + '\"]').text());\n        }\n    });\n\n    $('input[name=\"useDivisor\"]').on('change', function () {\n        $('span.divisorInput').toggle(this.checked);\n    });\n\n    $('input[name=\"useUnit\"]').on('change', function () {\n        $('span.unitInput').toggle(this.checked);\n    });\n\n    $('select[name=\"varChartList\"]').on('change', function () {\n        if (this.selectedIndex !== 0) {\n            $('#variableInput').val(this.value);\n        }\n    });\n\n    $('a[href=\"#kibDivisor\"]').on('click', function (event) {\n        event.preventDefault();\n        $('input[name=\"valueDivisor\"]').val(1024);\n        $('input[name=\"valueUnit\"]').val(window.Messages.strKiB);\n        $('span.unitInput').toggle(true);\n        $('input[name=\"useUnit\"]').prop('checked', true);\n        return false;\n    });\n\n    $('a[href=\"#mibDivisor\"]').on('click', function (event) {\n        event.preventDefault();\n        $('input[name=\"valueDivisor\"]').val(1024 * 1024);\n        $('input[name=\"valueUnit\"]').val(window.Messages.strMiB);\n        $('span.unitInput').toggle(true);\n        $('input[name=\"useUnit\"]').prop('checked', true);\n        return false;\n    });\n\n    $('a[href=\"#submitClearSeries\"]').on('click', function (event) {\n        event.preventDefault();\n        $('#seriesPreview').html('<i>' + window.Messages.strNone + '</i>');\n        newChart = null;\n        $('#clearSeriesLink').hide();\n    });\n\n    $('a[href=\"#submitAddSeries\"]').on('click', function (event) {\n        event.preventDefault();\n        if ($('#variableInput').val() === '') {\n            return false;\n        }\n\n        if (newChart === null) {\n            $('#seriesPreview').html('');\n\n            newChart = {\n                title: $('input[name=\"chartTitle\"]').val(),\n                nodes: [],\n                series: [],\n                maxYLabel: 0\n            };\n        }\n\n        var serie = {\n            dataPoints: [{ type: 'statusvar', name: $('#variableInput').val() }],\n            display: $('input[name=\"differentialValue\"]').prop('checked') ? 'differential' : ''\n        };\n\n        if (serie.dataPoints[0].name === 'Processes') {\n            serie.dataPoints[0].type = 'proc';\n        }\n\n        if ($('input[name=\"useDivisor\"]').prop('checked')) {\n            serie.valueDivisor = parseInt($('input[name=\"valueDivisor\"]').val(), 10);\n        }\n\n        if ($('input[name=\"useUnit\"]').prop('checked')) {\n            serie.unit = $('input[name=\"valueUnit\"]').val();\n        }\n\n        var str = serie.display === 'differential' ? ', ' + window.Messages.strDifferential : '';\n        str += serie.valueDivisor ? (', ' + window.sprintf(window.Messages.strDividedBy, serie.valueDivisor)) : '';\n        str += serie.unit ? (', ' + window.Messages.strUnit + ': ' + serie.unit) : '';\n\n        var newSeries = {\n            label: $('#variableInput').val().replace(/_/g, ' ')\n        };\n        newChart.series.push(newSeries);\n        $('#seriesPreview').append('- ' + Functions.escapeHtml(newSeries.label + str) + '<br>');\n        newChart.nodes.push(serie);\n        $('#variableInput').val('');\n        $('input[name=\"differentialValue\"]').prop('checked', true);\n        $('input[name=\"useDivisor\"]').prop('checked', false);\n        $('input[name=\"useUnit\"]').prop('checked', false);\n        $('input[name=\"useDivisor\"]').trigger('change');\n        $('input[name=\"useUnit\"]').trigger('change');\n        $('select[name=\"varChartList\"]').get(0).selectedIndex = 0;\n\n        $('#clearSeriesLink').show();\n\n        return false;\n    });\n\n    $('#variableInput').autocomplete({\n        source: variableNames\n    });\n\n    /* Initializes the monitor, called only once */\n    function initGrid () {\n        var i;\n\n        /* Apply default values & config */\n        if (Config.isStorageSupported('localStorage')) {\n            if (typeof window.localStorage.monitorCharts !== 'undefined') {\n                runtime.charts = JSON.parse(window.localStorage.monitorCharts);\n            }\n            if (typeof window.localStorage.monitorSettings !== 'undefined') {\n                monitorSettings = JSON.parse(window.localStorage.monitorSettings);\n            }\n\n            $('a[href=\"#clearMonitorConfig\"]').toggle(runtime.charts !== null);\n\n            if (runtime.charts !== null\n                && typeof window.localStorage.monitorVersion !== 'undefined'\n                && monitorProtocolVersion !== window.localStorage.monitorVersion\n            ) {\n                $('#emptyDialog').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    title: window.Messages.strIncompatibleMonitorConfig\n                });\n                $('#emptyDialog').html(window.Messages.strIncompatibleMonitorConfigDescription);\n\n                var dlgBtns = {\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-primary',\n                        click: function () {\n                            $(this).dialog('close');\n                        }\n                    },\n                };\n\n                $('#emptyDialog').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    width: 400,\n                    buttons: dlgBtns\n                });\n            }\n        }\n\n        if (runtime.charts === null) {\n            runtime.charts = defaultChartGrid;\n        }\n        if (monitorSettings === null) {\n            monitorSettings = defaultMonitorSettings;\n        }\n\n        $('select[name=\"gridChartRefresh\"]').val(monitorSettings.gridRefresh / 1000);\n        $('select[name=\"chartColumns\"]').val(monitorSettings.columns);\n\n        if (monitorSettings.gridMaxPoints === 'auto') {\n            runtime.gridMaxPoints = Math.round((monitorSettings.chartSize.width - 40) / 12);\n        } else {\n            runtime.gridMaxPoints = monitorSettings.gridMaxPoints;\n        }\n\n        runtime.xmin = new Date().getTime() - serverTimeDiff - runtime.gridMaxPoints * monitorSettings.gridRefresh;\n        runtime.xmax = new Date().getTime() - serverTimeDiff + monitorSettings.gridRefresh;\n\n        /* Calculate how much spacing there is between each chart */\n        $('#chartGrid').html('<tr><td></td><td></td></tr><tr><td></td><td></td></tr>');\n        chartSpacing = {\n            width: $('#chartGrid').find('td').eq(1).offset().left -\n                $('#chartGrid').find('td').eq(0).offset().left,\n            height: $('#chartGrid').find('tr').eq(1).find('td').eq(1).offset().top -\n               $('#chartGrid').find('tr').eq(0).find('td').eq(0).offset().top\n        };\n        $('#chartGrid').html('');\n\n        /* Add all charts - in correct order */\n        var keys = [];\n        $.each(runtime.charts, function (key) {\n            keys.push(key);\n        });\n        keys.sort();\n        for (i = 0; i < keys.length; i++) {\n            addChart(runtime.charts[keys[i]], true);\n        }\n\n        /* Fill in missing cells */\n        var numCharts = $('#chartGrid').find('.monitorChart').length;\n        var numMissingCells = (monitorSettings.columns - numCharts % monitorSettings.columns) % monitorSettings.columns;\n        for (i = 0; i < numMissingCells; i++) {\n            $('#chartGrid').find('tr').last().append('<td></td>');\n        }\n\n        // Empty cells should keep their size so you can drop onto them\n        calculateChartSize();\n        $('#chartGrid').find('tr td').css('width', chartSize.width + 'px');\n\n        buildRequiredDataList();\n        refreshChartGrid();\n    }\n\n    /* Calls destroyGrid() and initGrid(), but before doing so it saves the chart\n     * data from each chart and restores it after the monitor is initialized again */\n    function rebuildGrid () {\n        var oldData = null;\n        if (runtime.charts) {\n            oldData = {};\n            $.each(runtime.charts, function (key, chartObj) {\n                for (var i = 0, l = chartObj.nodes.length; i < l; i++) {\n                    oldData[chartObj.nodes[i].dataPoint] = [];\n                    for (var j = 0, ll = chartObj.chart.series[i].data.length; j < ll; j++) {\n                        oldData[chartObj.nodes[i].dataPoint].push([chartObj.chart.series[i].data[j].x, chartObj.chart.series[i].data[j].y]);\n                    }\n                }\n            });\n        }\n\n        destroyGrid();\n        initGrid();\n    }\n\n    /* Calculates the dynamic chart size that depends on the column width */\n    function calculateChartSize () {\n        var panelWidth;\n        if ($('body').height() > $(window).height()) { // has vertical scroll bar\n            panelWidth = $('#logTable').innerWidth();\n        } else {\n            panelWidth = $('#logTable').innerWidth() - 10; // leave some space for vertical scroll bar\n        }\n\n        var wdt = panelWidth;\n        var windowWidth = $(window).width();\n\n        if (windowWidth > 768) {\n            wdt = (panelWidth - monitorSettings.columns * Math.abs(chartSpacing.width)) / monitorSettings.columns;\n        }\n\n        chartSize = {\n            width: Math.floor(wdt),\n            height: Math.floor(0.75 * wdt)\n        };\n    }\n\n    /* Adds a chart to the chart grid */\n    function addChart (chartObj, initialize) {\n        var i;\n        var settings = {\n            title: Functions.escapeHtml(chartObj.title),\n            grid: {\n                drawBorder: false,\n                shadow: false,\n                background: 'rgba(0,0,0,0)'\n            },\n            axes: {\n                xaxis: {\n                    renderer: $.jqplot.DateAxisRenderer,\n                    tickOptions: {\n                        formatString: '%H:%M:%S',\n                        showGridline: false\n                    },\n                    min: runtime.xmin,\n                    max: runtime.xmax\n                },\n                yaxis: {\n                    min: 0,\n                    max: 100,\n                    tickInterval: 20\n                }\n            },\n            seriesDefaults: {\n                rendererOptions: {\n                    smooth: true\n                },\n                showLine: true,\n                lineWidth: 2,\n                markerOptions: {\n                    size: 6\n                }\n            },\n            highlighter: {\n                show: true\n            }\n        };\n\n        if (settings.title === window.Messages.strSystemCPUUsage ||\n            settings.title === window.Messages.strQueryCacheEfficiency\n        ) {\n            settings.axes.yaxis.tickOptions = {\n                formatString: '%d %%'\n            };\n        } else if (settings.title === window.Messages.strSystemMemory ||\n            settings.title === window.Messages.strSystemSwap\n        ) {\n            settings.stackSeries = true;\n            settings.axes.yaxis.tickOptions = {\n                formatter: $.jqplot.byteFormatter(2) // MiB\n            };\n        } else if (settings.title === window.Messages.strTraffic) {\n            settings.axes.yaxis.tickOptions = {\n                formatter: $.jqplot.byteFormatter(1) // KiB\n            };\n        } else if (settings.title === window.Messages.strQuestions ||\n            settings.title === window.Messages.strConnections\n        ) {\n            settings.axes.yaxis.tickOptions = {\n                formatter: function (format, val) {\n                    if (Math.abs(val) >= 1000000) {\n                        return $.jqplot.sprintf('%.3g M', val / 1000000);\n                    } else if (Math.abs(val) >= 1000) {\n                        return $.jqplot.sprintf('%.3g k', val / 1000);\n                    } else {\n                        return $.jqplot.sprintf('%d', val);\n                    }\n                }\n            };\n        }\n\n        settings.series = chartObj.series;\n\n        if ($('#' + 'gridchart' + runtime.chartAI).length === 0) {\n            var numCharts = $('#chartGrid').find('.monitorChart').length;\n\n            if (numCharts === 0 || (numCharts % monitorSettings.columns === 0)) {\n                $('#chartGrid').append('<tr></tr>');\n            }\n\n            if (!chartSize) {\n                calculateChartSize();\n            }\n            $('#chartGrid').find('tr').last().append(\n                '<td><div id=\"gridChartContainer' + runtime.chartAI + '\" class=\"\">' +\n                '<div class=\"ui-state-default monitorChart\"' +\n                ' id=\"gridchart' + runtime.chartAI + '\"' +\n                ' style=\"width:' + chartSize.width + 'px; height:' + chartSize.height + 'px;\"></div>' +\n                '</div></td>'\n            );\n        }\n\n        // Set series' data as [0,0], smooth lines won't plot with data array having null values.\n        // also chart won't plot initially with no data and data comes on refreshChartGrid()\n        var series = [];\n        for (i in chartObj.series) {\n            series.push([[0, 0]]);\n        }\n\n        var tempTooltipContentEditor = function (str, seriesIndex, pointIndex, plot) {\n            var j;\n            // TODO: move style to theme CSS\n            var tooltipHtml = '<div id=\"tooltip_editor\">';\n            // x value i.e. time\n            var timeValue = str.split(',')[0];\n            var seriesValue;\n            tooltipHtml += 'Time: ' + timeValue;\n            tooltipHtml += '<span id=\"tooltip_font\">';\n            // Add y values to the tooltip per series\n            for (j in plot.series) {\n                // get y value if present\n                if (plot.series[j].data.length > pointIndex) {\n                    seriesValue = plot.series[j].data[pointIndex][1];\n                } else {\n                    return;\n                }\n                var seriesLabel = plot.series[j].label;\n                var seriesColor = plot.series[j].color;\n                // format y value\n                if (plot.series[0]._yaxis.tickOptions.formatter) { // eslint-disable-line no-underscore-dangle\n                    // using formatter function\n                    // eslint-disable-next-line no-underscore-dangle\n                    seriesValue = plot.series[0]._yaxis.tickOptions.formatter('%s', seriesValue);\n                } else if (plot.series[0]._yaxis.tickOptions.formatString) { // eslint-disable-line no-underscore-dangle\n                    // using format string\n                    // eslint-disable-next-line no-underscore-dangle\n                    seriesValue = window.sprintf(plot.series[0]._yaxis.tickOptions.formatString, seriesValue);\n                }\n                tooltipHtml += '<br><span style=\"color:' + seriesColor + '\">' +\n                    seriesLabel + ': ' + seriesValue + '</span>';\n            }\n            tooltipHtml += '</span></div>';\n            return tooltipHtml;\n        };\n\n        // set Tooltip for each series\n        for (i in settings.series) {\n            settings.series[i].highlighter = {\n                show: true,\n                tooltipContentEditor: tempTooltipContentEditor\n            };\n        }\n\n        chartObj.chart = $.jqplot('gridchart' + runtime.chartAI, series, settings);\n        // remove [0,0] after plotting\n        for (i in chartObj.chart.series) {\n            chartObj.chart.series[i].data.shift();\n        }\n\n        var $legend = $('<div></div>').css('padding', '0.5em');\n        for (i in chartObj.chart.series) {\n            $legend.append(\n                $('<div></div>').append(\n                    $('<div>').css({\n                        width: '1em',\n                        height: '1em',\n                        background: chartObj.chart.seriesColors[i]\n                    }).addClass('float-start')\n                ).append(\n                    $('<div>').text(\n                        chartObj.chart.series[i].label\n                    ).addClass('float-start')\n                ).append(\n                    $('<div class=\"clearfloat\">')\n                ).addClass('float-start')\n            );\n        }\n        $('#gridchart' + runtime.chartAI)\n            .parent()\n            .append($legend);\n\n        if (initialize !== true) {\n            runtime.charts['c' + runtime.chartAI] = chartObj;\n            buildRequiredDataList();\n        }\n\n        // time span selection\n        $('#gridchart' + runtime.chartAI).on('jqplotMouseDown', function (ev, gridpos, datapos) {\n            drawTimeSpan = true;\n            selectionTimeDiff.push(datapos.xaxis);\n            if ($('#selection_box').length) {\n                $('#selection_box').remove();\n            }\n            var selectionBox = $('<div id=\"selection_box\" >');\n            // eslint-disable-next-line compat/compat\n            $(document.body).append(selectionBox);\n            selectionStartX = ev.pageX;\n            selectionStartY = ev.pageY;\n            selectionBox\n                .attr({ id: 'selection_box' })\n                .css({\n                    top: selectionStartY - gridpos.y,\n                    left: selectionStartX\n                })\n                .fadeIn();\n        });\n\n        $('#gridchart' + runtime.chartAI).on('jqplotMouseUp', function (ev, gridpos, datapos) {\n            if (! drawTimeSpan || editMode) {\n                return;\n            }\n\n            selectionTimeDiff.push(datapos.xaxis);\n\n            if (selectionTimeDiff[1] <= selectionTimeDiff[0]) {\n                selectionTimeDiff = [];\n                return;\n            }\n            // get date from timestamp\n            var min = new Date(Math.ceil(selectionTimeDiff[0]));\n            var max = new Date(Math.ceil(selectionTimeDiff[1]));\n            getLogAnalyseDialog(min, max);\n            selectionTimeDiff = [];\n            drawTimeSpan = false;\n        });\n\n        $('#gridchart' + runtime.chartAI).on('jqplotMouseMove', function (ev) {\n            if (! drawTimeSpan || editMode) {\n                return;\n            }\n            if (selectionStartX !== undefined) {\n                $('#selection_box')\n                    .css({\n                        width: Math.ceil(ev.pageX - selectionStartX)\n                    })\n                    .fadeIn();\n            }\n        });\n\n        $('#gridchart' + runtime.chartAI).on('jqplotMouseLeave', function () {\n            drawTimeSpan = false;\n        });\n\n        // eslint-disable-next-line compat/compat\n        $(document.body).on('mouseup', function () {\n            if ($('#selection_box').length) {\n                $('#selection_box').remove();\n            }\n        });\n\n        // Edit, Print icon only in edit mode\n        $('#chartGrid').find('div svg').find('*[zIndex=20], *[zIndex=21], *[zIndex=19]').toggle(editMode);\n\n        runtime.chartAI++;\n    }\n\n    function getLogAnalyseDialog (min, max) {\n        var $logAnalyseDialog = $('#logAnalyseDialog');\n        var $dateStart = $logAnalyseDialog.find('input[name=\"dateStart\"]');\n        var $dateEnd = $logAnalyseDialog.find('input[name=\"dateEnd\"]');\n        $dateStart.prop('readonly', true);\n        $dateEnd.prop('readonly', true);\n\n        var dlgBtns = {\n            [window.Messages.strFromSlowLog]: {\n                text: window.Messages.strFromSlowLog,\n                class: 'btn btn-secondary',\n            },\n            [window.Messages.strFromGeneralLog]: {\n                text: window.Messages.strFromGeneralLog,\n                class: 'btn btn-secondary',\n            },\n        };\n\n        dlgBtns[window.Messages.strFromSlowLog].click = function () {\n            loadLog('slow', min, max);\n            $(this).dialog('close');\n        };\n\n        dlgBtns[window.Messages.strFromGeneralLog].click = function () {\n            loadLog('general', min, max);\n            $(this).dialog('close');\n        };\n\n        $logAnalyseDialog.dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            width: 'auto',\n            height: 'auto',\n            buttons: dlgBtns\n        });\n\n        Functions.addDatepicker($dateStart, 'datetime', {\n            showMillisec: false,\n            showMicrosec: false,\n            timeFormat: 'HH:mm:ss',\n            firstDay: firstDayOfCalendar\n        });\n        Functions.addDatepicker($dateEnd, 'datetime', {\n            showMillisec: false,\n            showMicrosec: false,\n            timeFormat: 'HH:mm:ss',\n            firstDay: firstDayOfCalendar\n        });\n        $dateStart.datepicker('setDate', min);\n        $dateEnd.datepicker('setDate', max);\n    }\n\n    function loadLog (type, min, max) {\n        var dateStart = Date.parse($('#logAnalyseDialog').find('input[name=\"dateStart\"]').datepicker('getDate')) || min;\n        var dateEnd = Date.parse($('#logAnalyseDialog').find('input[name=\"dateEnd\"]').datepicker('getDate')) || max;\n\n        loadLogStatistics({\n            src: type,\n            start: dateStart,\n            end: dateEnd,\n            removeVariables: $('#removeVariables').prop('checked'),\n            limitTypes: $('#limitTypes').prop('checked')\n        });\n    }\n\n    /* Called in regular intervals, this function updates the values of each chart in the grid */\n    function refreshChartGrid () {\n        /* Send to server */\n        runtime.refreshRequest = $.post('index.php?route=/server/status/monitor/chart', {\n            'ajax_request': true,\n            'requiredData': JSON.stringify(runtime.dataList),\n            'server': CommonParams.get('server')\n        }, function (data) {\n            var chartData;\n            if (typeof data !== 'undefined' && data.success === true) {\n                chartData = data.message;\n            } else {\n                return serverResponseError();\n            }\n            var value;\n            var i = 0;\n            var diff;\n            var total;\n\n            /* Update values in each graph */\n            $.each(runtime.charts, function (orderKey, elem) {\n                var key = elem.chartID;\n                // If newly added chart, we have no data for it yet\n                if (! chartData[key]) {\n                    return;\n                }\n                // Draw all series\n                total = 0;\n                for (var j = 0; j < elem.nodes.length; j++) {\n                    // Update x-axis\n                    if (i === 0 && j === 0) {\n                        if (oldChartData === null) {\n                            diff = chartData.x - runtime.xmax;\n                        } else {\n                            diff = parseInt(chartData.x - oldChartData.x, 10);\n                        }\n\n                        runtime.xmin += diff;\n                        runtime.xmax += diff;\n                    }\n\n                    // elem.chart.xAxis[0].setExtremes(runtime.xmin, runtime.xmax, false);\n                    /* Calculate y value */\n\n                    // If transform function given, use it\n                    if (elem.nodes[j].transformFn) {\n                        value = chartValueTransform(\n                            elem.nodes[j].transformFn,\n                            chartData[key][j],\n                            // Check if first iteration (oldChartData==null), or if newly added chart oldChartData[key]==null\n                            (\n                                oldChartData === null ||\n                                oldChartData[key] === null ||\n                                oldChartData[key] === undefined ? null : oldChartData[key][j]\n                            )\n                        );\n\n                    // Otherwise use original value and apply differential and divisor if given,\n                    // in this case we have only one data point per series - located at chartData[key][j][0]\n                    } else {\n                        value = parseFloat(chartData[key][j][0].value);\n\n                        if (elem.nodes[j].display === 'differential') {\n                            if (oldChartData === null ||\n                                oldChartData[key] === null ||\n                                oldChartData[key] === undefined\n                            ) {\n                                continue;\n                            }\n                            value -= oldChartData[key][j][0].value;\n                        }\n\n                        if (elem.nodes[j].valueDivisor) {\n                            value = value / elem.nodes[j].valueDivisor;\n                        }\n                    }\n\n                    // Set y value, if defined\n                    if (value !== undefined) {\n                        elem.chart.series[j].data.push([chartData.x, value]);\n                        if (value > elem.maxYLabel) {\n                            elem.maxYLabel = value;\n                        } else if (elem.maxYLabel === 0) {\n                            elem.maxYLabel = 0.5;\n                        }\n                        // free old data point values and update maxYLabel\n                        if (elem.chart.series[j].data.length > runtime.gridMaxPoints &&\n                            elem.chart.series[j].data[0][0] < runtime.xmin\n                        ) {\n                            // check if the next freeable point is highest\n                            if (elem.maxYLabel <= elem.chart.series[j].data[0][1]) {\n                                elem.chart.series[j].data.splice(0, elem.chart.series[j].data.length - runtime.gridMaxPoints);\n                                elem.maxYLabel = getMaxYLabel(elem.chart.series[j].data);\n                            } else {\n                                elem.chart.series[j].data.splice(0, elem.chart.series[j].data.length - runtime.gridMaxPoints);\n                            }\n                        }\n                        if (elem.title === window.Messages.strSystemMemory ||\n                            elem.title === window.Messages.strSystemSwap\n                        ) {\n                            total += value;\n                        }\n                    }\n                }\n\n                // update chart options\n                // keep ticks number/positioning consistent while refreshrate changes\n                var tickInterval = (runtime.xmax - runtime.xmin) / 5;\n                elem.chart.axes.xaxis.ticks = [(runtime.xmax - tickInterval * 4),\n                    (runtime.xmax - tickInterval * 3), (runtime.xmax - tickInterval * 2),\n                    (runtime.xmax - tickInterval), runtime.xmax];\n\n                if (elem.title !== window.Messages.strSystemCPUUsage &&\n                    elem.title !== window.Messages.strQueryCacheEfficiency &&\n                    elem.title !== window.Messages.strSystemMemory &&\n                    elem.title !== window.Messages.strSystemSwap\n                ) {\n                    elem.chart.axes.yaxis.max = Math.ceil(elem.maxYLabel * 1.1);\n                    elem.chart.axes.yaxis.tickInterval = Math.ceil(elem.maxYLabel * 1.1 / 5);\n                } else if (elem.title === window.Messages.strSystemMemory ||\n                    elem.title === window.Messages.strSystemSwap\n                ) {\n                    elem.chart.axes.yaxis.max = Math.ceil(total * 1.1 / 100) * 100;\n                    elem.chart.axes.yaxis.tickInterval = Math.ceil(total * 1.1 / 5);\n                }\n                i++;\n\n                if (runtime.redrawCharts) {\n                    elem.chart.replot();\n                }\n            });\n\n            oldChartData = chartData;\n\n            runtime.refreshTimeout = setTimeout(refreshChartGrid, monitorSettings.gridRefresh);\n        });\n    }\n\n    /* Function to get highest plotted point's y label, to scale the chart,\n     * TODO: make jqplot's autoscale:true work here\n     */\n    function getMaxYLabel (dataValues) {\n        var maxY = dataValues[0][1];\n        $.each(dataValues, function (k, v) {\n            maxY = (v[1] > maxY) ? v[1] : maxY;\n        });\n        return maxY;\n    }\n\n    /* Function that supplies special value transform functions for chart values */\n    function chartValueTransform (name, cur, prev) {\n        switch (name) {\n        case 'cpu-linux':\n            if (prev === null) {\n                return undefined;\n            }\n            // cur and prev are datapoint arrays, but containing\n            // only 1 element for cpu-linux\n            var newCur = cur[0];\n            var newPrev = prev[0];\n\n            var diffTotal = newCur.busy + newCur.idle - (newPrev.busy + newPrev.idle);\n            var diffIdle = newCur.idle - newPrev.idle;\n            return 100 * (diffTotal - diffIdle) / diffTotal;\n\n        // Query cache efficiency (%)\n        case 'qce':\n            if (prev === null) {\n                return undefined;\n            }\n            // cur[0].value is Qcache_hits, cur[1].value is Com_select\n            var diffQHits = cur[0].value - prev[0].value;\n            // No NaN please :-)\n            if (cur[1].value - prev[1].value === 0) {\n                return 0;\n            }\n\n            return diffQHits / (cur[1].value - prev[1].value + diffQHits) * 100;\n\n        // Query cache usage (%)\n        case 'qcu':\n            if (cur[1].value === 0) {\n                return 0;\n            }\n            // cur[0].value is Qcache_free_memory, cur[1].value is query_cache_size\n            return 100 - cur[0].value / cur[1].value * 100;\n        }\n        return undefined;\n    }\n\n    /* Build list of nodes that need to be retrieved from server.\n     * It creates something like a stripped down version of the runtime.charts object.\n     */\n    function buildRequiredDataList () {\n        runtime.dataList = {};\n        // Store an own id, because the property name is subject of reordering,\n        // thus destroying our mapping with runtime.charts <=> runtime.dataList\n        var chartID = 0;\n        $.each(runtime.charts, function (key, chart) {\n            runtime.dataList[chartID] = [];\n            for (var i = 0, l = chart.nodes.length; i < l; i++) {\n                runtime.dataList[chartID][i] = chart.nodes[i].dataPoints;\n            }\n            runtime.charts[key].chartID = chartID;\n            chartID++;\n        });\n    }\n\n    /* Loads the log table data, generates the table and handles the filters */\n    function loadLogStatistics (opts) {\n        var logRequest = null;\n\n        if (! opts.removeVariables) {\n            opts.removeVariables = false;\n        }\n        if (! opts.limitTypes) {\n            opts.limitTypes = false;\n        }\n\n        $('#emptyDialog').dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            title: window.Messages.strAnalysingLogsTitle\n        });\n        $('#emptyDialog').html(window.Messages.strAnalysingLogs +\n                                ' <img class=\"ajaxIcon\" src=\"' + themeImagePath +\n                                'ajax_clock_small.gif\" alt=\"\">');\n\n        var dlgBtns = {\n            [window.Messages.strCancelRequest]: {\n                text: window.Messages.strCancelRequest,\n                class: 'btn btn-primary',\n            },\n        };\n\n        dlgBtns[window.Messages.strCancelRequest].click = function () {\n            if (logRequest !== null) {\n                logRequest.abort();\n            }\n\n            $(this).dialog('close');\n        };\n\n        $('#emptyDialog').dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            width: 'auto',\n            height: 'auto',\n            buttons: dlgBtns\n        });\n\n        var url = 'index.php?route=/server/status/monitor/slow-log';\n        if (opts.src === 'general') {\n            url = 'index.php?route=/server/status/monitor/general-log';\n        }\n        logRequest = $.post(\n            url,\n            {\n                'ajax_request': true,\n                'time_start': Math.round(opts.start / 1000),\n                'time_end': Math.round(opts.end / 1000),\n                'removeVariables': opts.removeVariables,\n                'limitTypes': opts.limitTypes,\n                'server': CommonParams.get('server')\n            },\n            function (data) {\n                var logData;\n                var dlgBtns = {\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-primary',\n                    },\n                };\n                if (typeof data !== 'undefined' && data.success === true) {\n                    logData = data.message;\n                } else {\n                    return serverResponseError();\n                }\n\n                if (logData.rows.length === 0) {\n                    $('#emptyDialog').dialog({\n                        classes: {\n                            'ui-dialog-titlebar-close': 'btn-close'\n                        },\n                        title: window.Messages.strNoDataFoundTitle,\n                    });\n                    $('#emptyDialog').html('<p>' + window.Messages.strNoDataFound + '</p>');\n\n                    dlgBtns[window.Messages.strClose].click = function () {\n                        $(this).dialog('close');\n                    };\n\n                    $('#emptyDialog').dialog('option', 'buttons', dlgBtns);\n                    return;\n                }\n\n                runtime.logDataCols = buildLogTable(logData, opts.removeVariables);\n\n                /* Show some stats in the dialog */\n                $('#emptyDialog').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    title: window.Messages.strLoadingLogs\n                });\n                $('#emptyDialog').html('<p>' + window.Messages.strLogDataLoaded + '</p>');\n                $.each(logData.sum, function (key, value) {\n                    var newKey = key.charAt(0).toUpperCase() + key.slice(1).toLowerCase();\n                    if (newKey === 'Total') {\n                        newKey = '<b>' + newKey + '</b>';\n                    }\n                    $('#emptyDialog').append(newKey + ': ' + value + '<br>');\n                });\n\n                /* Add filter options if more than a bunch of rows there to filter */\n                if (logData.numRows > 12) {\n                    $('#logTable').prepend(\n                        '<fieldset class=\"pma-fieldset\" id=\"logDataFilter\">' +\n                        '    <legend>' + window.Messages.strFiltersForLogTable + '</legend>' +\n                        '    <div class=\"formelement\">' +\n                        '        <label for=\"filterQueryText\">' + window.Messages.strFilterByWordRegexp + '</label>' +\n                        '        <input name=\"filterQueryText\" type=\"text\" id=\"filterQueryText\">' +\n                        '    </div>' +\n                        ((logData.numRows > 250) ? ' <div class=\"formelement\"><button class=\"btn btn-secondary\" name=\"startFilterQueryText\" id=\"startFilterQueryText\">' + window.Messages.strFilter + '</button></div>' : '') +\n                        '    <div class=\"formelement\">' +\n                        '       <input type=\"checkbox\" id=\"noWHEREData\" name=\"noWHEREData\" value=\"1\"> ' +\n                        '       <label for=\"noWHEREData\"> ' + window.Messages.strIgnoreWhereAndGroup + '</label>' +\n                        '   </div' +\n                        '</fieldset>'\n                    );\n\n                    $('#noWHEREData').on('change', function () {\n                        filterQueries(true);\n                    });\n\n                    if (logData.numRows > 250) {\n                        $('#startFilterQueryText').on('click', filterQueries);\n                    } else {\n                        $('#filterQueryText').on('keyup', filterQueries);\n                    }\n                }\n\n                dlgBtns[window.Messages.strJumpToTable] = {\n                    text: window.Messages.strJumpToTable,\n                    class: 'btn btn-secondary',\n                    click: function () {\n                        $(this).dialog('close');\n                        $(document).scrollTop($('#logTable').offset().top);\n                    },\n                };\n\n                $('#emptyDialog').dialog('option', 'buttons', dlgBtns);\n            }\n        );\n\n        /**\n         * Handles the actions performed when the user uses any of the\n         * log table filters which are the filter by name and grouping\n         * with ignoring data in WHERE clauses\n         *\n         * @param {boolean} varFilterChange Should be true when the users enabled or disabled\n         *                to group queries ignoring data in WHERE clauses\n         */\n        function filterQueries (varFilterChange) {\n            var textFilter;\n            var val = $('#filterQueryText').val();\n\n            if (val.length === 0) {\n                textFilter = null;\n            } else {\n                try {\n                    textFilter = new RegExp(val, 'i');\n                    $('#filterQueryText').removeClass('error');\n                } catch (e) {\n                    if (e instanceof SyntaxError) {\n                        $('#filterQueryText').addClass('error');\n                        textFilter = null;\n                    }\n                }\n            }\n\n            var rowSum = 0;\n            var totalSum = 0;\n            var i = 0;\n            var q;\n            var noVars = $('#noWHEREData').prop('checked');\n            var equalsFilter = /([^=]+)=(\\d+|(('|\"|).*?[^\\\\])\\4((\\s+)|$))/gi;\n            var functionFilter = /([a-z0-9_]+)\\(.+?\\)/gi;\n            var filteredQueries = {};\n            var filteredQueriesLines = {};\n            var hide = false;\n            var rowData;\n            var queryColumnName = runtime.logDataCols[runtime.logDataCols.length - 2];\n            var sumColumnName = runtime.logDataCols[runtime.logDataCols.length - 1];\n            var isSlowLog = opts.src === 'slow';\n            var columnSums = {};\n\n            // For the slow log we have to count many columns (query_time, lock_time, rows_examined, rows_sent, etc.)\n            var countRow = function (query, row) {\n                var cells = row.match(/<td>(.*?)<\\/td>/gi);\n                if (!columnSums[query]) {\n                    columnSums[query] = [0, 0, 0, 0];\n                }\n\n                // lock_time and query_time and displayed in timespan format\n                columnSums[query][0] += timeToSec(cells[2].replace(/(<td>|<\\/td>)/gi, ''));\n                columnSums[query][1] += timeToSec(cells[3].replace(/(<td>|<\\/td>)/gi, ''));\n                // rows_examind and rows_sent are just numbers\n                columnSums[query][2] += parseInt(cells[4].replace(/(<td>|<\\/td>)/gi, ''), 10);\n                columnSums[query][3] += parseInt(cells[5].replace(/(<td>|<\\/td>)/gi, ''), 10);\n            };\n\n            // We just assume the sql text is always in the second last column, and that the total count is right of it\n            $('#logTable').find('table tbody tr td.queryCell').each(function () {\n                var $t = $(this);\n                // If query is a SELECT and user enabled or disabled to group\n                // queries ignoring data in where statements, we\n                // need to re-calculate the sums of each row\n                if (varFilterChange && $t.html().match(/^SELECT/i)) {\n                    if (noVars) {\n                        // Group on => Sum up identical columns, and hide all but 1\n\n                        q = $t.text().replace(equalsFilter, '$1=...$6').trim();\n                        q = q.replace(functionFilter, ' $1(...)');\n\n                        // Js does not specify a limit on property name length,\n                        // so we can abuse it as index :-)\n                        if (filteredQueries[q]) {\n                            filteredQueries[q] += parseInt($t.next().text(), 10);\n                            totalSum += parseInt($t.next().text(), 10);\n                            hide = true;\n                        } else {\n                            filteredQueries[q] = parseInt($t.next().text(), 10);\n                            filteredQueriesLines[q] = i;\n                            $t.text(q);\n                        }\n                        if (isSlowLog) {\n                            countRow(q, $t.parent().html());\n                        }\n                    } else {\n                        // Group off: Restore original columns\n\n                        rowData = $t.parent().data('query');\n                        // Restore SQL text\n                        $t.text(rowData[queryColumnName]);\n                        // Restore total count\n                        $t.next().text(rowData[sumColumnName]);\n                        // Restore slow log columns\n                        if (isSlowLog) {\n                            $t.parent().children('td').eq(2).text(rowData.query_time);\n                            $t.parent().children('td').eq(3).text(rowData.lock_time);\n                            $t.parent().children('td').eq(4).text(rowData.rows_sent);\n                            $t.parent().children('td').eq(5).text(rowData.rows_examined);\n                        }\n                    }\n                }\n\n                // If not required to be hidden, do we need\n                // to hide because of a not matching text filter?\n                if (! hide && (textFilter !== null && ! textFilter.exec($t.text()))) {\n                    hide = true;\n                }\n\n                // Now display or hide this column\n                if (hide) {\n                    $t.parent().css('display', 'none');\n                } else {\n                    totalSum += parseInt($t.next().text(), 10);\n                    rowSum++;\n                    $t.parent().css('display', '');\n                }\n\n                hide = false;\n                i++;\n            });\n\n            // We finished summarizing counts => Update count values of all grouped entries\n            if (varFilterChange) {\n                if (noVars) {\n                    var numCol;\n                    var row;\n                    var $table = $('#logTable').find('table tbody');\n                    $.each(filteredQueriesLines, function (key, value) {\n                        if (filteredQueries[key] <= 1) {\n                            return;\n                        }\n\n                        row =  $table.children('tr').eq(value);\n                        numCol = row.children().eq(runtime.logDataCols.length - 1);\n                        numCol.text(filteredQueries[key]);\n\n                        if (isSlowLog) {\n                            row.children('td').eq(2).text(secToTime(columnSums[key][0]));\n                            row.children('td').eq(3).text(secToTime(columnSums[key][1]));\n                            row.children('td').eq(4).text(columnSums[key][2]);\n                            row.children('td').eq(5).text(columnSums[key][3]);\n                        }\n                    });\n                }\n\n                $('#logTable').find('table').trigger('update');\n                setTimeout(function () {\n                    $('#logTable').find('table').trigger('sorton', [[[runtime.logDataCols.length - 1, 1]]]);\n                }, 0);\n            }\n\n            // Display some stats at the bottom of the table\n            $('#logTable').find('table tfoot tr')\n                .html('<th colspan=\"' + (runtime.logDataCols.length - 1) + '\">' +\n                      window.Messages.strSumRows + ' ' + rowSum + '<span class=\"float-end\">' +\n                      window.Messages.strTotal + '</span></th><th class=\"text-end\">' + totalSum + '</th>');\n        }\n    }\n\n    /* Turns a timespan (12:12:12) into a number */\n    function timeToSec (timeStr) {\n        var time = timeStr.split(':');\n        return (parseInt(time[0], 10) * 3600) + (parseInt(time[1], 10) * 60) + parseInt(time[2], 10);\n    }\n\n    /* Turns a number into a timespan (100 into 00:01:40) */\n    function secToTime (timeInt) {\n        var time = timeInt;\n        var hours = Math.floor(time / 3600);\n        time -= hours * 3600;\n        var minutes = Math.floor(time / 60);\n        time -= minutes * 60;\n\n        if (hours < 10) {\n            hours = '0' + hours;\n        }\n        if (minutes < 10) {\n            minutes = '0' + minutes;\n        }\n        if (time < 10) {\n            time = '0' + time;\n        }\n\n        return hours + ':' + minutes + ':' + time;\n    }\n\n    /* Constructs the log table out of the retrieved server data */\n    function buildLogTable (data, groupInserts) {\n        var rows = data.rows;\n        var cols = [];\n        var $table = $('<table class=\"table table-striped table-hover align-middle sortable\"></table>');\n        var $tBody;\n        var $tRow;\n        var $tCell;\n\n        $('#logTable').html($table);\n\n        var tempPushKey = function (key) {\n            cols.push(key);\n        };\n\n        var formatValue = function (name, value) {\n            if (name === 'user_host') {\n                return value.replace(/(\\[.*?\\])+/g, '');\n            }\n            return Functions.escapeHtml(value);\n        };\n\n        for (var i = 0, l = rows.length; i < l; i++) {\n            if (i === 0) {\n                $.each(rows[0], tempPushKey);\n                $table.append('<thead>' +\n                              '<tr><th class=\"text-nowrap\">' + cols.join('</th><th class=\"text-nowrap\">') + '</th></tr>' +\n                              '</thead>'\n                );\n\n                $table.append($tBody = $('<tbody></tbody>'));\n            }\n\n            $tBody.append($tRow = $('<tr class=\"noclick\"></tr>'));\n            for (var j = 0, ll = cols.length; j < ll; j++) {\n                // Assuming the query column is the second last\n                if (j === cols.length - 2 && rows[i][cols[j]].match(/^SELECT/i)) {\n                    $tRow.append($tCell = $('<td class=\"linkElem queryCell\">' + formatValue(cols[j], rows[i][cols[j]]) + '</td>'));\n                    $tCell.on('click', openQueryAnalyzer);\n                } else {\n                    $tRow.append('<td>' + formatValue(cols[j], rows[i][cols[j]]) + '</td>');\n                }\n\n                $tRow.data('query', rows[i]);\n            }\n        }\n\n        $table.append('<tfoot>' +\n                    '<tr><th colspan=\"' + (cols.length - 1) + '\">' + window.Messages.strSumRows +\n                    ' ' + data.numRows + '<span class=\"float-end\">' + window.Messages.strTotal +\n                    '</span></th><th class=\"text-end\">' + data.sum.TOTAL + '</th></tr></tfoot>');\n\n        // Append a tooltip to the count column, if there exist one\n        if ($('#logTable').find('tr').first().find('th').last().text().indexOf('#') > -1) {\n            $('#logTable').find('tr').first().find('th').last().append('&nbsp;' + Functions.getImage('b_help', '', { 'class': 'qroupedQueryInfoIcon' }));\n\n            var tooltipContent = window.Messages.strCountColumnExplanation;\n            if (groupInserts) {\n                tooltipContent += '<p>' + window.Messages.strMoreCountColumnExplanation + '</p>';\n            }\n\n            Functions.tooltip(\n                $('img.qroupedQueryInfoIcon'),\n                'img',\n                tooltipContent\n            );\n        }\n\n        $('#logTable').find('table').tablesorter({\n            sortList: [[cols.length - 1, 1]],\n            widgets: ['fast-zebra']\n        });\n\n        $('#logTable').find('table thead th')\n            .append('<div class=\"sorticon\"></div>');\n\n        return cols;\n    }\n\n    /* Opens the query analyzer dialog */\n    function openQueryAnalyzer () {\n        var rowData = $(this).parent().data('query');\n        var query = rowData.argument || rowData.sql_text;\n\n        if (window.codeMirrorEditor) {\n            // TODO: somehow Functions.sqlPrettyPrint messes up the query, needs be fixed\n            // query = Functions.sqlPrettyPrint(query);\n            window.codeMirrorEditor.setValue(query);\n            // Codemirror is bugged, it doesn't refresh properly sometimes.\n            // Following lines seem to fix that\n            setTimeout(function () {\n                window.codeMirrorEditor.refresh();\n            }, 50);\n        } else {\n            $('#sqlquery').val(query);\n        }\n\n        var profilingChart = null;\n        var dlgBtns = {\n            [window.Messages.strAnalyzeQuery]: {\n                text: window.Messages.strAnalyzeQuery,\n                class: 'btn btn-primary',\n            },\n            [window.Messages.strClose]: {\n                text: window.Messages.strClose,\n                class: 'btn btn-secondary',\n            },\n        };\n\n        dlgBtns[window.Messages.strAnalyzeQuery].click = function () {\n            profilingChart = loadQueryAnalysis(rowData);\n        };\n        dlgBtns[window.Messages.strClose].click = function () {\n            $(this).dialog('close');\n        };\n\n        $('#queryAnalyzerDialog').dialog({\n            classes: {\n                'ui-dialog-titlebar-close': 'btn-close'\n            },\n            width: 'auto',\n            height: 'auto',\n            resizable: false,\n            buttons: dlgBtns,\n            close: function () {\n                if (profilingChart !== null) {\n                    profilingChart.destroy();\n                }\n                $('#queryAnalyzerDialog').find('div.placeHolder').html('');\n                if (window.codeMirrorEditor) {\n                    window.codeMirrorEditor.setValue('');\n                } else {\n                    $('#sqlquery').val('');\n                }\n            }\n        });\n    }\n\n    /* Loads and displays the analyzed query data */\n    function loadQueryAnalysis (rowData) {\n        var db = rowData.db || '';\n        var profilingChart = null;\n\n        $('#queryAnalyzerDialog').find('div.placeHolder').html(\n            window.Messages.strAnalyzing + ' <img class=\"ajaxIcon\" src=\"' +\n            themeImagePath + 'ajax_clock_small.gif\" alt=\"\">');\n\n        $.post('index.php?route=/server/status/monitor/query', {\n            'ajax_request': true,\n            'query': window.codeMirrorEditor ? window.codeMirrorEditor.getValue() : $('#sqlquery').val(),\n            'database': db,\n            'server': CommonParams.get('server')\n        }, function (responseData) {\n            var data = responseData;\n            var i;\n            var l;\n            if (typeof data !== 'undefined' && data.success === true) {\n                data = data.message;\n            }\n            if (data.error) {\n                if (data.error.indexOf('1146') !== -1 || data.error.indexOf('1046') !== -1) {\n                    data.error = window.Messages.strServerLogError;\n                }\n                $('#queryAnalyzerDialog').find('div.placeHolder').html('<div class=\"alert alert-danger\" role=\"alert\">' + data.error + '</div>');\n                return;\n            }\n            var totalTime = 0;\n            // Float sux, I'll use table :(\n            $('#queryAnalyzerDialog').find('div.placeHolder')\n                .html('<table class=\"table table-borderless\"><tr><td class=\"explain\"></td><td class=\"chart\"></td></tr></table>');\n\n            var explain = '<b>' + window.Messages.strExplainOutput + '</b> ' + $('#explain_docu').html();\n            if (data.explain.length > 1) {\n                explain += ' (';\n                for (i = 0; i < data.explain.length; i++) {\n                    if (i > 0) {\n                        explain += ', ';\n                    }\n                    explain += '<a href=\"#showExplain-' + i + '\">' + i + '</a>';\n                }\n                explain += ')';\n            }\n            explain += '<p></p>';\n\n            var tempExplain = function (key, value) {\n                var newValue = (value === null) ? 'null' : Functions.escapeHtml(value);\n\n                if (key === 'type' && newValue.toLowerCase() === 'all') {\n                    newValue = '<span class=\"text-danger\">' + newValue + '</span>';\n                }\n                if (key === 'Extra') {\n                    newValue = newValue.replace(/(using (temporary|filesort))/gi, '<span class=\"text-danger\">$1</span>');\n                }\n                explain += key + ': ' + newValue + '<br>';\n            };\n\n            for (i = 0, l = data.explain.length; i < l; i++) {\n                explain += '<div class=\"explain-' + i + '\"' + (i > 0 ?  'style=\"display:none;\"' : '') + '>';\n                $.each(data.explain[i], tempExplain);\n                explain += '</div>';\n            }\n\n            explain += '<p><b>' + window.Messages.strAffectedRows + '</b> ' + data.affectedRows;\n\n            $('#queryAnalyzerDialog').find('div.placeHolder td.explain').append(explain);\n\n            $('#queryAnalyzerDialog').find('div.placeHolder a[href*=\"#showExplain\"]').on('click', function () {\n                var id = $(this).attr('href').split('-')[1];\n                $(this).parent().find('div[class*=\"explain\"]').hide();\n                $(this).parent().find('div[class*=\"explain-' + id + '\"]').show();\n            });\n\n            if (data.profiling) {\n                var chartData = [];\n                var numberTable = '<table class=\"table table-sm table-striped table-hover w-auto queryNums\"><thead><tr><th>' + window.Messages.strStatus + '</th><th>' + window.Messages.strTime + '</th></tr></thead><tbody>';\n                var duration;\n                var otherTime = 0;\n\n                for (i = 0, l = data.profiling.length; i < l; i++) {\n                    duration = parseFloat(data.profiling[i].duration);\n\n                    totalTime += duration;\n\n                    numberTable += '<tr><td>' + data.profiling[i].state + ' </td><td> ' + Functions.prettyProfilingNum(duration, 2) + '</td></tr>';\n                }\n\n                // Only put those values in the pie which are > 2%\n                for (i = 0, l = data.profiling.length; i < l; i++) {\n                    duration = parseFloat(data.profiling[i].duration);\n\n                    if (duration / totalTime > 0.02) {\n                        chartData.push([Functions.prettyProfilingNum(duration, 2) + ' ' + data.profiling[i].state, duration]);\n                    } else {\n                        otherTime += duration;\n                    }\n                }\n\n                if (otherTime > 0) {\n                    chartData.push([Functions.prettyProfilingNum(otherTime, 2) + ' ' + window.Messages.strOther, otherTime]);\n                }\n\n                numberTable += '<tr><td><b>' + window.Messages.strTotalTime + '</b></td><td>' + Functions.prettyProfilingNum(totalTime, 2) + '</td></tr>';\n                numberTable += '</tbody></table>';\n\n                $('#queryAnalyzerDialog').find('div.placeHolder td.chart').append(\n                    '<b>' + window.Messages.strProfilingResults + ' ' + $('#profiling_docu').html() + '</b> ' +\n                    '(<a href=\"#showNums\">' + window.Messages.strTable + '</a>, <a href=\"#showChart\">' + window.Messages.strChart + '</a>)<br>' +\n                    numberTable + ' <div id=\"queryProfiling\"></div>');\n\n                $('#queryAnalyzerDialog').find('div.placeHolder a[href=\"#showNums\"]').on('click', function () {\n                    $('#queryAnalyzerDialog').find('#queryProfiling').hide();\n                    $('#queryAnalyzerDialog').find('table.queryNums').show();\n                    return false;\n                });\n\n                $('#queryAnalyzerDialog').find('div.placeHolder a[href=\"#showChart\"]').on('click', function () {\n                    $('#queryAnalyzerDialog').find('#queryProfiling').show();\n                    $('#queryAnalyzerDialog').find('table.queryNums').hide();\n                    return false;\n                });\n\n                profilingChart = Functions.createProfilingChart(\n                    'queryProfiling',\n                    chartData\n                );\n            }\n        });\n        return profilingChart;\n    }\n\n    /* Saves the monitor to localstorage */\n    function saveMonitor () {\n        var gridCopy = {};\n\n        $.each(runtime.charts, function (key, elem) {\n            gridCopy[key] = {};\n            gridCopy[key].nodes = elem.nodes;\n            gridCopy[key].settings = elem.settings;\n            gridCopy[key].title = elem.title;\n            gridCopy[key].series = elem.series;\n            gridCopy[key].maxYLabel = elem.maxYLabel;\n        });\n\n        if (Config.isStorageSupported('localStorage')) {\n            window.localStorage.monitorCharts = JSON.stringify(gridCopy);\n            window.localStorage.monitorSettings = JSON.stringify(monitorSettings);\n            window.localStorage.monitorVersion = monitorProtocolVersion;\n        }\n\n        $('a[href=\"#clearMonitorConfig\"]').show();\n    }\n});\n\n// Run the monitor once loaded\nAJAX.registerOnload('server/status/monitor.js', function () {\n    $('a[href=\"#pauseCharts\"]').trigger('click');\n});\n"],"names":["$","AJAX","Functions","CommonParams","Config","runtime","serverTimeDiff","serverOs","isSuperUser","serverDbIsLocal","chartSize","monitorSettings","serverResponseError","btns","window","Messages","strReloadPage","text","class","click","location","reload","dialog","classes","title","strRefreshFailed","html","getImage","strInvalidResponseExplanation","buttons","destroyGrid","charts","each","key","value","chart","destroy","err","refreshRequest","abort","clearTimeout","refreshTimeout","chartAI","registerOnload","$jsDataForm","Date","getTime","find","val","registerTeardown","remove","off","attr","appendTo","on","$link","substring","show","offset","top","height","left","addClass","event","$cnt","pos","pageX","outerWidth","pageY","outerHeight","hide","removeClass","codeMirrorEditor","$elm","length","CodeMirror","fromTextArea","lineNumbers","matchBrackets","indentUnit","mode","lineWrapping","addDatepicker","oldChartData","newChart","chartSpacing","monitorProtocolVersion","redrawCharts","dataList","gridMaxPoints","xmin","xmax","defaultMonitorSettings","columns","width","gridRefresh","editMode","presetCharts","strQueryCacheEfficiency","series","label","nodes","dataPoints","type","name","transformFn","maxYLabel","strQueryCacheUsage","strQueryCacheUsed","selectionTimeDiff","selectionStartX","selectionStartY","drawTimeSpan","extend","strSystemCPUUsage","strAverageLoad","strSystemMemory","dataType","strUsedMemory","fill","strFreeMemory","valueDivisor","strSystemSwap","strUsedSwap","strFreeSwap","strBufferedMemory","strCachedMemory","strCachedSwap","defaultChartGrid","strQuestions","display","strChartConnectionsTitle","strConnections","strProcesses","strTraffic","strBytesSent","strBytesReceived","cpu","c3","c4","memory","c5","swap","preventDefault","toggle","sortableTable","ignoreRect","saveMonitor","parseInt","calculateChartSize","css","numColumns","$tr","first","tempManageCols","next","after","prepend","tempAddCol","append","cnt","i","nextAll","Math","round","refreshChartGrid","setTimeout","prop","alert","strAddOneSeriesWarning","addChart","$presetList","replace","modal","strNone","gridCopy","elem","settings","exportData","monitorCharts","blob","Blob","JSON","stringify","url","fileName","navigator","msSaveOrOpenBlob","URL","createObjectURL","href","revokeObjectURL","undefined","strImportDialogTitle","strImportDialogMessage","dlgBtns","strImport","strCancel","input","reader","FileReader","onerror","strFailedParsingConfig","target","error","code","onload","e","data","result","json","parse","isStorageSupported","localStorage","rebuildGrid","strFailedBuildingGrid","removeItem","readAsText","files","strResumeMonitor","strPauseMonitor","initGrid","$dialog","strClose","loadLogVars","getvars","vars","get","post","logVars","success","message","icon","msg","str","general_log","slow_query_log","strBothLogOn","strGenLogOn","strSlowLogOn","strBothLogOff","strCurrentSettings","log_output","strLogOutNotTable","strLogOutIsTable","long_query_time","sprintf","strSmallerLongQueryTimeAdvice","strLongQueryTimeSet","strChangeSettings","strSettingsAppliedGlobal","varValue","strSetLogOutput","strEnableVar","strDisableVar","setSetLongQueryTime","strNoSuperUser","nameValue","split","varName","checked","strChartTitle","selectedIndex","strKiB","strMiB","serie","unit","strDifferential","strDividedBy","strUnit","newSeries","push","escapeHtml","trigger","autocomplete","source","variableNames","monitorVersion","strIncompatibleMonitorConfig","strIncompatibleMonitorConfigDescription","eq","keys","sort","numCharts","numMissingCells","last","buildRequiredDataList","oldData","chartObj","l","dataPoint","j","ll","x","y","panelWidth","innerWidth","wdt","windowWidth","abs","floor","initialize","grid","drawBorder","shadow","background","axes","xaxis","renderer","jqplot","DateAxisRenderer","tickOptions","formatString","showGridline","min","max","yaxis","tickInterval","seriesDefaults","rendererOptions","smooth","showLine","lineWidth","markerOptions","size","highlighter","stackSeries","formatter","byteFormatter","format","tempTooltipContentEditor","seriesIndex","pointIndex","plot","tooltipHtml","timeValue","seriesValue","seriesLabel","seriesColor","color","_yaxis","tooltipContentEditor","shift","$legend","seriesColors","parent","ev","gridpos","datapos","selectionBox","document","body","id","fadeIn","ceil","getLogAnalyseDialog","$logAnalyseDialog","$dateStart","$dateEnd","strFromSlowLog","strFromGeneralLog","loadLog","showMillisec","showMicrosec","timeFormat","firstDay","firstDayOfCalendar","datepicker","dateStart","dateEnd","loadLogStatistics","src","start","end","removeVariables","limitTypes","chartData","diff","total","orderKey","chartID","chartValueTransform","parseFloat","splice","getMaxYLabel","ticks","replot","dataValues","maxY","k","v","cur","prev","newCur","newPrev","diffTotal","busy","idle","diffIdle","diffQHits","opts","logRequest","strAnalysingLogsTitle","strAnalysingLogs","themeImagePath","strCancelRequest","logData","rows","strNoDataFoundTitle","strNoDataFound","logDataCols","buildLogTable","strLoadingLogs","strLogDataLoaded","sum","newKey","charAt","toUpperCase","slice","toLowerCase","numRows","strFiltersForLogTable","strFilterByWordRegexp","strFilter","strIgnoreWhereAndGroup","filterQueries","strJumpToTable","scrollTop","varFilterChange","textFilter","RegExp","SyntaxError","rowSum","totalSum","q","noVars","equalsFilter","functionFilter","filteredQueries","filteredQueriesLines","rowData","queryColumnName","sumColumnName","isSlowLog","columnSums","countRow","query","row","cells","match","timeToSec","$t","trim","children","query_time","lock_time","rows_sent","rows_examined","exec","numCol","$table","secToTime","strSumRows","strTotal","timeStr","time","timeInt","hours","minutes","groupInserts","cols","$tBody","$tRow","$tCell","tempPushKey","formatValue","join","openQueryAnalyzer","TOTAL","indexOf","tooltipContent","strCountColumnExplanation","strMoreCountColumnExplanation","tooltip","tablesorter","sortList","widgets","argument","sql_text","setValue","refresh","profilingChart","strAnalyzeQuery","loadQueryAnalysis","resizable","close","db","strAnalyzing","getValue","responseData","strServerLogError","totalTime","explain","strExplainOutput","tempExplain","newValue","strAffectedRows","affectedRows","profiling","numberTable","strStatus","strTime","duration","otherTime","state","prettyProfilingNum","strOther","strTotalTime","strProfilingResults","strTable","strChart","createProfilingChart"],"sourceRoot":""}