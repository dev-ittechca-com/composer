{"version":3,"file":"home.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/home.js","webpack://phpmyadmin/./js/src/modules/git-info.js","webpack://phpmyadmin/./js/src/modules/themes-manager.js"],"sourcesContent":["module.exports = jQuery;","import { showGitVersion } from './modules/git-info.js';\nimport { ThemesManager } from './modules/themes-manager.js';\n\nwindow.AJAX.registerTeardown('home.js', () => {\n    const themesModal = document.getElementById('themesModal');\n    if (themesModal) {\n        themesModal.removeEventListener('show.bs.modal', ThemesManager.handleEvent);\n    }\n});\n\nwindow.AJAX.registerOnload('home.js', () => {\n    const themesModal = document.getElementById('themesModal');\n    if (themesModal) {\n        themesModal.addEventListener('show.bs.modal', ThemesManager.handleEvent);\n    }\n\n    showGitVersion();\n});\n","import $ from 'jquery';\n\nconst GitInfo = {\n    /**\n     * Version string to integer conversion.\n     * @param {string} str\n     * @return {number | false}\n     */\n    parseVersionString: str => {\n        if (typeof(str) !== 'string') {\n            return false;\n        }\n        let add = 0;\n        // Parse possible alpha/beta/rc/\n        const state = str.split('-');\n        if (state.length >= 2) {\n            if (state[1].startsWith('rc')) {\n                add = - 20 - parseInt(state[1].substring(2), 10);\n            } else if (state[1].startsWith('beta')) {\n                add =  - 40 - parseInt(state[1].substring(4), 10);\n            } else if (state[1].startsWith('alpha')) {\n                add =  - 60 - parseInt(state[1].substring(5), 10);\n            } else if (state[1].startsWith('dev')) {\n                /* We don't handle dev, it's git snapshot */\n                add = 0;\n            }\n        }\n        // Parse version\n        const x = str.split('.');\n        // Use 0 for non existing parts\n        const maj = parseInt(x[0], 10) || 0;\n        const min = parseInt(x[1], 10) || 0;\n        const pat = parseInt(x[2], 10) || 0;\n        const hotfix = parseInt(x[3], 10) || 0;\n        return maj * 100000000 + min * 1000000 + pat * 10000 + hotfix * 100 + add;\n    },\n\n    /**\n     * Indicates current available version on main page.\n     * @param {object} data\n     */\n    currentVersion: data => {\n        if (data && data.version && data.date) {\n            const current = GitInfo.parseVersionString($('span.version').text());\n            const latest = GitInfo.parseVersionString(data.version);\n            const url = 'index.php?route=/url&url=https://www.phpmyadmin.net/files/' + Functions.escapeHtml(encodeURIComponent(data.version)) + '/';\n            let versionInformationMessage = document.createElement('span');\n            versionInformationMessage.className = 'latest';\n            const versionInformationMessageLink = document.createElement('a');\n            versionInformationMessageLink.href = url;\n            versionInformationMessageLink.className = 'disableAjax';\n            versionInformationMessageLink.target = '_blank';\n            versionInformationMessageLink.rel = 'noopener noreferrer';\n            const versionInformationMessageLinkText = document.createTextNode(data.version);\n            versionInformationMessageLink.appendChild(versionInformationMessageLinkText);\n            const prefixMessage = document.createTextNode(window.Messages.strLatestAvailable + ' ');\n            versionInformationMessage.appendChild(prefixMessage);\n            versionInformationMessage.appendChild(versionInformationMessageLink);\n            if (latest > current) {\n                const message = Functions.sprintf(\n                    window.Messages.strNewerVersion,\n                    Functions.escapeHtml(data.version),\n                    Functions.escapeHtml(data.date)\n                );\n                let htmlClass = 'alert alert-primary';\n                if (Math.floor(latest / 10000) === Math.floor(current / 10000)) {\n                    /* Security update */\n                    htmlClass = 'alert alert-danger';\n                }\n                $('#newer_version_notice').remove();\n                const mainContainerDiv = document.createElement('div');\n                mainContainerDiv.id = 'newer_version_notice';\n                mainContainerDiv.className = htmlClass;\n                const mainContainerDivLink = document.createElement('a');\n                mainContainerDivLink.href = url;\n                mainContainerDivLink.className = 'disableAjax';\n                mainContainerDivLink.target = '_blank';\n                mainContainerDivLink.rel = 'noopener noreferrer';\n                const mainContainerDivLinkText = document.createTextNode(message);\n                mainContainerDivLink.appendChild(mainContainerDivLinkText);\n                mainContainerDiv.appendChild(mainContainerDivLink);\n                $('#maincontainer').append($(mainContainerDiv));\n            }\n            if (latest === current) {\n                versionInformationMessage = document.createTextNode(' (' + window.Messages.strUpToDate + ')');\n            }\n            /* Remove extra whitespace */\n            const versionInfo = $('#li_pma_version').contents().get(2);\n            if (typeof versionInfo !== 'undefined') {\n                versionInfo.textContent = versionInfo.textContent.trim();\n            }\n            const $liPmaVersion = $('#li_pma_version');\n            $liPmaVersion.find('span.latest').remove();\n            $liPmaVersion.append($(versionInformationMessage));\n        }\n    },\n\n    /**\n     * Loads Git revision data from ajax for index.php\n     */\n    displayGitRevision: () => {\n        $('#is_git_revision').remove();\n        $('#li_pma_version_git').remove();\n        $.get(\n            'index.php?route=/git-revision',\n            {\n                'server': window.CommonParams.get('server'),\n                'ajax_request': true,\n                'no_debug': true\n            },\n            data => {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    $(data.message).insertAfter('#li_pma_version');\n                }\n            }\n        );\n    },\n\n    /**\n     * Load version information asynchronously.\n     */\n    loadVersion: () => {\n        if ($('li.jsversioncheck').length === 0) {\n            return;\n        }\n\n        $.ajax({\n            dataType: 'json',\n            url: 'index.php?route=/version-check',\n            method: 'POST',\n            data: {\n                'server': window.CommonParams.get('server')\n            },\n            success: GitInfo.currentVersion\n        });\n    }\n};\n\nexport function showGitVersion () {\n    GitInfo.loadVersion();\n    if ($('#is_git_revision').length === 0) {\n        return;\n    }\n\n    setTimeout(GitInfo.displayGitRevision, 10);\n}\n","import $ from 'jquery';\n\n/**\n * @implements EventListener\n */\nexport const ThemesManager = {\n    handleEvent: () => {\n        $.get('index.php?route=/themes', data => {\n            $('#themesModal .modal-body').html(data.themes);\n        });\n    }\n};\n"],"names":["showGitVersion","ThemesManager","window","AJAX","registerTeardown","themesModal","document","getElementById","removeEventListener","handleEvent","registerOnload","addEventListener","$","GitInfo","parseVersionString","str","add","state","split","length","startsWith","parseInt","substring","x","maj","min","pat","hotfix","currentVersion","data","version","date","current","text","latest","url","Functions","escapeHtml","encodeURIComponent","versionInformationMessage","createElement","className","versionInformationMessageLink","href","target","rel","versionInformationMessageLinkText","createTextNode","appendChild","prefixMessage","Messages","strLatestAvailable","message","sprintf","strNewerVersion","htmlClass","Math","floor","remove","mainContainerDiv","id","mainContainerDivLink","mainContainerDivLinkText","append","strUpToDate","versionInfo","contents","get","textContent","trim","$liPmaVersion","find","displayGitRevision","CommonParams","success","insertAfter","loadVersion","ajax","dataType","method","setTimeout","html","themes"],"sourceRoot":""}