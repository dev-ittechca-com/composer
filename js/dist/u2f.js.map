{"version":3,"file":"u2f.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/u2f.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\n\nAJAX.registerOnload('u2f.js', function () {\n    var $inputReg = $('#u2f_registration_response');\n    if ($inputReg.length > 0) {\n        var $formReg = $inputReg.parents('form');\n        $formReg.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // A magic JS function that talks to the USB device. This function will keep polling for the USB device until it finds one.\n            var request = JSON.parse($inputReg.attr('data-request'));\n            window.u2f.register(request.appId, [request], JSON.parse($inputReg.attr('data-signatures')), function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        ajaxShowMessage(window.Messages.strU2FErrorRegister, false, 'error');\n                        break;\n                    case 3:\n                        ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputReg.val(JSON.stringify(data));\n                $formReg.trigger('submit');\n            });\n        }, 1000);\n    }\n    var $inputAuth = $('#u2f_authentication_response');\n    if ($inputAuth.length > 0) {\n        var $formAuth = $inputAuth.parents('form');\n        $formAuth.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // Magic JavaScript talking to your HID\n            // appid, challenge, authenticateRequests\n            var request = JSON.parse($inputAuth.attr('data-request'));\n            window.u2f.sign(request[0].appId, request[0].challenge, request, function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        ajaxShowMessage(window.Messages.strU2FErrorAuthenticate, false, 'error');\n                        break;\n                    case 3:\n                        ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputAuth.val(JSON.stringify(data));\n                $formAuth.trigger('submit');\n            });\n        }, 1000);\n    }\n});\n"],"names":["$","AJAX","ajaxShowMessage","registerOnload","$inputReg","length","$formReg","parents","find","hide","setTimeout","request","JSON","parse","attr","window","u2f","register","appId","data","errorCode","Messages","strU2FTimeout","strU2FErrorRegister","strU2FInvalidClient","strU2FBadRequest","strU2FUnknown","val","stringify","trigger","$inputAuth","$formAuth","sign","challenge","strU2FErrorAuthenticate"],"sourceRoot":""}