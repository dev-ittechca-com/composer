{"version":3,"file":"u2f.js","mappings":";;;;;;AAAA;;;;;;;;;ACAA;AAEAC,MAAM,CAACC,IAAP,CAAYC,cAAZ,CAA2B,QAA3B,EAAqC,YAAY;EAC7C,IAAIC,SAAS,GAAGJ,mCAAC,CAAC,4BAAD,CAAjB;;EACA,IAAII,SAAS,CAACC,MAAV,GAAmB,CAAvB,EAA0B;IACtB,IAAIC,QAAQ,GAAGF,SAAS,CAACG,OAAV,CAAkB,MAAlB,CAAf;IACAD,QAAQ,CAACE,IAAT,CAAc,oBAAd,EAAoCC,IAApC;IACAC,UAAU,CAAC,YAAY;MACnB;MACA,IAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWT,SAAS,CAACU,IAAV,CAAe,cAAf,CAAX,CAAd;MACAb,MAAM,CAACc,GAAP,CAAWC,QAAX,CAAoBL,OAAO,CAACM,KAA5B,EAAmC,CAACN,OAAD,CAAnC,EAA8CC,IAAI,CAACC,KAAL,CAAWT,SAAS,CAACU,IAAV,CAAe,iBAAf,CAAX,CAA9C,EAA6F,UAAUI,IAAV,EAAgB;QACzG;QACA,IAAIA,IAAI,CAACC,SAAL,IAAkBD,IAAI,CAACC,SAAL,KAAmB,CAAzC,EAA4C;UACxC,QAAQD,IAAI,CAACC,SAAb;YACA,KAAK,CAAL;cACIC,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBC,aAA1C,EAAyD,KAAzD,EAAgE,OAAhE;cACA;;YACJ,KAAK,CAAL;cACIH,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBE,mBAA1C,EAA+D,KAA/D,EAAsE,OAAtE;cACA;;YACJ,KAAK,CAAL;cACIJ,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBG,mBAA1C,EAA+D,KAA/D,EAAsE,OAAtE;cACA;;YACJ,KAAK,CAAL;cACIL,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBI,gBAA1C,EAA4D,KAA5D,EAAmE,OAAnE;cACA;;YACJ;cACIN,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBK,aAA1C,EAAyD,KAAzD,EAAgE,OAAhE;cACA;UAfJ;;UAiBA;QACH,CArBwG,CAuBzG;;;QACAvB,SAAS,CAACwB,GAAV,CAAchB,IAAI,CAACiB,SAAL,CAAeX,IAAf,CAAd;QACAZ,QAAQ,CAACwB,OAAT,CAAiB,QAAjB;MACH,CA1BD;IA2BH,CA9BS,EA8BP,IA9BO,CAAV;EA+BH;;EACD,IAAIC,UAAU,GAAG/B,mCAAC,CAAC,8BAAD,CAAlB;;EACA,IAAI+B,UAAU,CAAC1B,MAAX,GAAoB,CAAxB,EAA2B;IACvB,IAAI2B,SAAS,GAAGD,UAAU,CAACxB,OAAX,CAAmB,MAAnB,CAAhB;IACAyB,SAAS,CAACxB,IAAV,CAAe,oBAAf,EAAqCC,IAArC;IACAC,UAAU,CAAC,YAAY;MACnB;MACA;MACA,IAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWkB,UAAU,CAACjB,IAAX,CAAgB,cAAhB,CAAX,CAAd;MACAb,MAAM,CAACc,GAAP,CAAWkB,IAAX,CAAgBtB,OAAO,CAAC,CAAD,CAAP,CAAWM,KAA3B,EAAkCN,OAAO,CAAC,CAAD,CAAP,CAAWuB,SAA7C,EAAwDvB,OAAxD,EAAiE,UAAUO,IAAV,EAAgB;QAC7E;QACA,IAAIA,IAAI,CAACC,SAAL,IAAkBD,IAAI,CAACC,SAAL,KAAmB,CAAzC,EAA4C;UACxC,QAAQD,IAAI,CAACC,SAAb;YACA,KAAK,CAAL;cACIC,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBC,aAA1C,EAAyD,KAAzD,EAAgE,OAAhE;cACA;;YACJ,KAAK,CAAL;cACIH,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBa,uBAA1C,EAAmE,KAAnE,EAA0E,OAA1E;cACA;;YACJ,KAAK,CAAL;cACIf,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBG,mBAA1C,EAA+D,KAA/D,EAAsE,OAAtE;cACA;;YACJ,KAAK,CAAL;cACIL,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBI,gBAA1C,EAA4D,KAA5D,EAAmE,OAAnE;cACA;;YACJ;cACIN,SAAS,CAACC,eAAV,CAA0BpB,MAAM,CAACqB,QAAP,CAAgBK,aAA1C,EAAyD,KAAzD,EAAgE,OAAhE;cACA;UAfJ;;UAiBA;QACH,CArB4E,CAuB7E;;;QACAI,UAAU,CAACH,GAAX,CAAehB,IAAI,CAACiB,SAAL,CAAeX,IAAf,CAAf;QACAc,SAAS,CAACF,OAAV,CAAkB,QAAlB;MACH,CA1BD;IA2BH,CA/BS,EA+BP,IA/BO,CAAV;EAgCH;AACJ,CA1ED","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/u2f.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\n\nwindow.AJAX.registerOnload('u2f.js', function () {\n    var $inputReg = $('#u2f_registration_response');\n    if ($inputReg.length > 0) {\n        var $formReg = $inputReg.parents('form');\n        $formReg.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // A magic JS function that talks to the USB device. This function will keep polling for the USB device until it finds one.\n            var request = JSON.parse($inputReg.attr('data-request'));\n            window.u2f.register(request.appId, [request], JSON.parse($inputReg.attr('data-signatures')), function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        Functions.ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        Functions.ajaxShowMessage(window.Messages.strU2FErrorRegister, false, 'error');\n                        break;\n                    case 3:\n                        Functions.ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        Functions.ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        Functions.ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputReg.val(JSON.stringify(data));\n                $formReg.trigger('submit');\n            });\n        }, 1000);\n    }\n    var $inputAuth = $('#u2f_authentication_response');\n    if ($inputAuth.length > 0) {\n        var $formAuth = $inputAuth.parents('form');\n        $formAuth.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // Magic JavaScript talking to your HID\n            // appid, challenge, authenticateRequests\n            var request = JSON.parse($inputAuth.attr('data-request'));\n            window.u2f.sign(request[0].appId, request[0].challenge, request, function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        Functions.ajaxShowMessage(window.Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        Functions.ajaxShowMessage(window.Messages.strU2FErrorAuthenticate, false, 'error');\n                        break;\n                    case 3:\n                        Functions.ajaxShowMessage(window.Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        Functions.ajaxShowMessage(window.Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        Functions.ajaxShowMessage(window.Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputAuth.val(JSON.stringify(data));\n                $formAuth.trigger('submit');\n            });\n        }, 1000);\n    }\n});\n"],"names":["$","window","AJAX","registerOnload","$inputReg","length","$formReg","parents","find","hide","setTimeout","request","JSON","parse","attr","u2f","register","appId","data","errorCode","Functions","ajaxShowMessage","Messages","strU2FTimeout","strU2FErrorRegister","strU2FInvalidClient","strU2FBadRequest","strU2FUnknown","val","stringify","trigger","$inputAuth","$formAuth","sign","challenge","strU2FErrorAuthenticate"],"sourceRoot":""}