{"version":3,"file":"u2f.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/u2f.js"],"sourcesContent":["/* global u2f */ // js/vendor/u2f-api-polyfill.js\n\nAJAX.registerOnload('u2f.js', function () {\n    var $inputReg = $('#u2f_registration_response');\n    if ($inputReg.length > 0) {\n        var $formReg = $inputReg.parents('form');\n        $formReg.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // A magic JS function that talks to the USB device. This function will keep polling for the USB device until it finds one.\n            var request = JSON.parse($inputReg.attr('data-request'));\n            u2f.register(request.appId, [request], JSON.parse($inputReg.attr('data-signatures')), function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        Functions.ajaxShowMessage(Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        Functions.ajaxShowMessage(Messages.strU2FErrorRegister, false, 'error');\n                        break;\n                    case 3:\n                        Functions.ajaxShowMessage(Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        Functions.ajaxShowMessage(Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        Functions.ajaxShowMessage(Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputReg.val(JSON.stringify(data));\n                $formReg.trigger('submit');\n            });\n        }, 1000);\n    }\n    var $inputAuth = $('#u2f_authentication_response');\n    if ($inputAuth.length > 0) {\n        var $formAuth = $inputAuth.parents('form');\n        $formAuth.find('input[type=submit]').hide();\n        setTimeout(function () {\n            // Magic JavaScript talking to your HID\n            // appid, challenge, authenticateRequests\n            var request = JSON.parse($inputAuth.attr('data-request'));\n            u2f.sign(request[0].appId, request[0].challenge, request, function (data) {\n                // Handle returning error data\n                if (data.errorCode && data.errorCode !== 0) {\n                    switch (data.errorCode) {\n                    case 5:\n                        Functions.ajaxShowMessage(Messages.strU2FTimeout, false, 'error');\n                        break;\n                    case 4:\n                        Functions.ajaxShowMessage(Messages.strU2FErrorAuthenticate, false, 'error');\n                        break;\n                    case 3:\n                        Functions.ajaxShowMessage(Messages.strU2FInvalidClient, false, 'error');\n                        break;\n                    case 2:\n                        Functions.ajaxShowMessage(Messages.strU2FBadRequest, false, 'error');\n                        break;\n                    default:\n                        Functions.ajaxShowMessage(Messages.strU2FUnknown, false, 'error');\n                        break;\n                    }\n                    return;\n                }\n\n                // Fill and submit form.\n                $inputAuth.val(JSON.stringify(data));\n                $formAuth.trigger('submit');\n            });\n        }, 1000);\n    }\n});\n"],"names":["AJAX","registerOnload","$inputReg","$","length","$formReg","parents","find","hide","setTimeout","request","JSON","parse","attr","u2f","register","appId","data","errorCode","Functions","ajaxShowMessage","Messages","strU2FTimeout","strU2FErrorRegister","strU2FInvalidClient","strU2FBadRequest","strU2FUnknown","val","stringify","trigger","$inputAuth","$formAuth","sign","challenge","strU2FErrorAuthenticate"],"sourceRoot":""}