{"version":3,"file":"makegrid.js","mappings":";AAAA;AAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,QAAQ,GAAG,UAAUC,CAAV,EAAaC,YAAb,EAA2BC,aAA3B,EAA0CC,WAA1C,EAAuDC,cAAvD,EAAuE;AAClF,MAAIC,eAAe,GAAGJ,YAAY,KAAKK,SAAjB,GAA6B,IAA7B,GAAoCL,YAA1D;AACA,MAAIM,gBAAgB,GAAGL,aAAa,KAAKI,SAAlB,GAA8B,IAA9B,GAAqCJ,aAA5D;AACA,MAAIM,cAAc,GAAGL,WAAW,KAAKG,SAAhB,GAA4B,IAA5B,GAAmCH,WAAxD;AACA,MAAIM,iBAAiB,GAAGL,cAAc,KAAKE,SAAnB,GAA+B,IAA/B,GAAsCF,cAA9D;AAEA,MAAIM,CAAC,GAAG;AACJ;AACR;AACA;AACQC,IAAAA,WAAW,EAAE,EAJT;;AAOJ;AACR;AACA;AACQC,IAAAA,UAAU,EAAE,CAVR;AAUwB;AAC5BC,IAAAA,eAAe,EAAE,IAXb;AAWwB;AAE5B;AACAC,IAAAA,QAAQ,EAAE,EAdN;AAce;AAEnB;AACAC,IAAAA,QAAQ,EAAE,EAjBN;AAiBe;AACnBC,IAAAA,cAAc,EAAE,EAlBZ;AAkBwB;AAC5BC,IAAAA,mBAAmB,EAAE,CAnBjB;AAmBwB;AAE5B;AACAC,IAAAA,WAAW,EAAE,EAtBT;AAsBwB;AAC5BC,IAAAA,QAAQ,EAAE,EAvBN;AAuBwB;AAC5BC,IAAAA,QAAQ,EAAE,EAxBN;AAwBwB;AAC5BC,IAAAA,QAAQ,EAAE,EAzBN;AAyBwB;AAC5BC,IAAAA,eAAe,EAAE,KA1Bb;AA2BJC,IAAAA,YAAY,EAAE,KA3BV;AA4BJC,IAAAA,YAAY,EAAE,KA5BV;AA8BJ;AACAC,IAAAA,gBAAgB,EAAE,KA/Bd;AA+BwB;AAC5BC,IAAAA,sBAAsB,EAAE,KAhCpB;AAgC4B;AAChCC,IAAAA,eAAe,EAAE,IAjCb;AAiCwB;AAC5BC,IAAAA,YAAY,EAAE,EAlCV;AAkCwB;AAC5BC,IAAAA,YAAY,EAAE,EAnCV;AAmCwB;AAC5BC,IAAAA,iBAAiB,EAAE,KApCf;AAoCwB;AAC5BC,IAAAA,eAAe,EAAE,CArCb;AAqCwB;AAC5BC,IAAAA,eAAe,EAAE,KAtCb;AAsCwB;AAC5BC,IAAAA,YAAY,EAAE,KAvCV;AAuCwB;AAC5BC,IAAAA,eAAe,EAAE,EAxCb;AAwCwB;AAC5BC,IAAAA,OAAO,EAAG,IAzCN;AAyCwB;AAC5BC,IAAAA,QAAQ,EAAE,KA1CN;AA0CwB;AAC5BC,IAAAA,cAAc,EAAE,EA3CZ;AA2CwB;AAE5B;AACAC,IAAAA,KAAK,EAAE,IA9CH;AA+CJC,IAAAA,MAAM,EAAE,IA/CJ;AAgDJC,IAAAA,EAAE,EAAE,IAhDA;AAiDJC,IAAAA,KAAK,EAAE,IAjDH;;AAoDJ;AACR;AACA;;AAEQ;AACR;AACA;AACA;AACA;AACA;AACQC,IAAAA,YAAY,EAAE,UAAUC,CAAV,EAAaC,GAAb,EAAkB;AAC5B,UAAIC,CAAC,GAAGC,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAUC,IAAV,CAAe,KAAf,EAAsBC,KAAtB,CAA4BL,GAA5B,CAAR,CAD4B,CACiB;;AAC7CE,MAAAA,CAAC,CAACF,GAAD,CAAD,CAAOM,QAAP,CAAgB,kBAAhB;AACAxC,MAAAA,CAAC,CAACyC,MAAF,GAAW;AACPC,QAAAA,EAAE,EAAET,CAAC,CAACU,KADC;AAEPR,QAAAA,CAAC,EAAEA,CAFI;AAGPD,QAAAA,GAAG,EAAEA,GAHE;AAIPU,QAAAA,OAAO,EAAER,CAAC,CAACF,GAAD,CAAD,CAAOW,QAAP,GAAkBC,IAJpB;AAKPC,QAAAA,QAAQ,EAAEX,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,sBAAZ,EAAoCU,EAApC,CAAuCb,CAAvC,EAA0CG,IAA1C,CAA+C,MAA/C,EAAuDW,UAAvD;AALH,OAAX,CAH4B,CAU5B;;AACAb,MAAAA,CAAC,CAACc,QAAQ,CAACC,IAAV,CAAD,CAAiBC,GAAjB,CAAqB,QAArB,EAA+B,YAA/B,EAA6CC,QAA7C;;AACA,UAAIrD,CAAC,CAACe,gBAAN,EAAwB;AACpBf,QAAAA,CAAC,CAACsD,YAAF;AACH;AACJ,KA7EG;;AA+EJ;AACR;AACA;AACA;AACA;AACA;AACQC,IAAAA,gBAAgB,EAAE,UAAUtB,CAAV,EAAaC,GAAb,EAAkB;AAChC;AACAE,MAAAA,CAAC,CAACpC,CAAC,CAACwD,IAAH,CAAD,CAAUC,IAAV,CAAerB,CAAC,CAACF,GAAD,CAAD,CAAOuB,IAAP,EAAf;AACA,UAAIC,MAAM,GAAGtB,CAAC,CAACF,GAAD,CAAD,CAAOW,QAAP,EAAb;AACAT,MAAAA,CAAC,CAACpC,CAAC,CAACwD,IAAH,CAAD,CAAUJ,GAAV,CAAc;AACVO,QAAAA,GAAG,EAAED,MAAM,CAACC,GAAP,GAAa,EADR;AAEVb,QAAAA,IAAI,EAAEY,MAAM,CAACZ,IAFH;AAGVc,QAAAA,MAAM,EAAExB,CAAC,CAACF,GAAD,CAAD,CAAO0B,MAAP,EAHE;AAIVC,QAAAA,KAAK,EAAEzB,CAAC,CAACF,GAAD,CAAD,CAAO2B,KAAP;AAJG,OAAd;AAMAzB,MAAAA,CAAC,CAACpC,CAAC,CAAC8D,QAAH,CAAD,CAAcV,GAAd,CAAkB;AACdO,QAAAA,GAAG,EAAED,MAAM,CAACC;AADE,OAAlB,EAVgC,CAchC;;AACA,UAAIxB,CAAC,GAAGnC,CAAC,CAAC+D,YAAF,CAAe7B,GAAf,CAAR;AAEAlC,MAAAA,CAAC,CAACgE,UAAF,GAAe;AACXtB,QAAAA,EAAE,EAAET,CAAC,CAACU,KADK;AAEXsB,QAAAA,EAAE,EAAEhC,CAAC,CAACiC,KAFK;AAGX/B,QAAAA,CAAC,EAAEA,CAHQ;AAIXgC,QAAAA,IAAI,EAAEhC,CAJK;AAKXD,QAAAA,GAAG,EAAEA,GALM;AAMXkC,QAAAA,MAAM,EAAEV,MAAM,CAACC,GANJ;AAOXf,QAAAA,OAAO,EAAEc,MAAM,CAACZ;AAPL,OAAf,CAjBgC,CA2BhC;;AACAV,MAAAA,CAAC,CAACc,QAAQ,CAACC,IAAV,CAAD,CAAiBC,GAAjB,CAAqB,QAArB,EAA+B,MAA/B,EAAuCC,QAAvC;;AACA,UAAIrD,CAAC,CAACe,gBAAN,EAAwB;AACpBf,QAAAA,CAAC,CAACsD,YAAF;AACH;AACJ,KArHG;;AAuHJ;AACR;AACA;AACA;AACA;AACQe,IAAAA,QAAQ,EAAE,UAAUpC,CAAV,EAAa;AACnB,UAAIqC,EAAJ;;AACA,UAAItE,CAAC,CAACyC,MAAN,EAAc;AACV6B,QAAAA,EAAE,GAAGrC,CAAC,CAACU,KAAF,GAAU3C,CAAC,CAACyC,MAAF,CAASC,EAAxB;;AACA,YAAI1C,CAAC,CAACyC,MAAF,CAASM,QAAT,GAAoBuB,EAApB,GAAyBtE,CAAC,CAACC,WAA/B,EAA4C;AACxCmC,UAAAA,CAAC,CAACpC,CAAC,CAACyC,MAAF,CAASP,GAAV,CAAD,CAAgBkB,GAAhB,CAAoB,MAApB,EAA4BpD,CAAC,CAACyC,MAAF,CAASG,OAAT,GAAmB0B,EAAnB,GAAwB,IAApD;AACH;AACJ,OALD,MAKO,IAAItE,CAAC,CAACgE,UAAN,EAAkB;AACrB;AACAM,QAAAA,EAAE,GAAGrC,CAAC,CAACU,KAAF,GAAU3C,CAAC,CAACgE,UAAF,CAAatB,EAA5B;AACAN,QAAAA,CAAC,CAACpC,CAAC,CAACwD,IAAH,CAAD,CACKJ,GADL,CACS,MADT,EACiBpD,CAAC,CAACgE,UAAF,CAAapB,OAAb,GAAuB0B,EADxC,EAEKC,IAFL,GAHqB,CAOrB;;AACA,YAAIC,UAAU,GAAGxE,CAAC,CAACyE,aAAF,CAAgBxC,CAAhB,CAAjB;;AACA,YAAIuC,UAAJ,EAAgB;AACZ,cAAIL,IAAI,GAAGnE,CAAC,CAAC+D,YAAF,CAAeS,UAAf,CAAX;AACAxE,UAAAA,CAAC,CAACgE,UAAF,CAAaG,IAAb,GAAoBA,IAApB;;AACA,cAAIA,IAAI,KAAKnE,CAAC,CAACgE,UAAF,CAAa7B,CAA1B,EAA6B;AACzB;AACA,gBAAIuC,MAAM,GAAGtC,CAAC,CAACoC,UAAD,CAAD,CAAc3B,QAAd,EAAb;AACA,gBAAI8B,OAAO,GAAGR,IAAI,GAAGnE,CAAC,CAACgE,UAAF,CAAa7B,CAApB,GACVuC,MAAM,CAAC5B,IADG,GAEV4B,MAAM,CAAC5B,IAAP,GAAcV,CAAC,CAACoC,UAAD,CAAD,CAAcvB,UAAd,EAFlB;AAGAb,YAAAA,CAAC,CAACpC,CAAC,CAAC8D,QAAH,CAAD,CACKV,GADL,CACS;AACDN,cAAAA,IAAI,EAAE6B,OADL;AAEDC,cAAAA,UAAU,EAAE;AAFX,aADT;AAKH,WAXD,MAWO;AACH;AACAxC,YAAAA,CAAC,CAACpC,CAAC,CAAC8D,QAAH,CAAD,CAAcV,GAAd,CAAkB,YAAlB,EAAgC,QAAhC;AACH;AACJ;AACJ;AACJ,KAhKG;;AAkKJ;AACR;AACA;AACA;AACA;AACQyB,IAAAA,OAAO,EAAE,UAAU5C,CAAV,EAAa;AAClB,UAAIjC,CAAC,CAACyC,MAAN,EAAc;AACV,YAAI6B,EAAE,GAAGrC,CAAC,CAACU,KAAF,GAAU3C,CAAC,CAACyC,MAAF,CAASC,EAA5B;AACA,YAAIoC,EAAE,GAAG9E,CAAC,CAACyC,MAAF,CAASM,QAAT,GAAoBuB,EAA7B;;AACA,YAAIQ,EAAE,GAAG9E,CAAC,CAACC,WAAX,EAAwB;AACpB6E,UAAAA,EAAE,GAAG9E,CAAC,CAACC,WAAP;AACH;;AACD,YAAIkC,CAAC,GAAGnC,CAAC,CAACyC,MAAF,CAASN,CAAjB,CANU,CAOV;;AACAnC,QAAAA,CAAC,CAAC+E,MAAF,CAAS5C,CAAT,EAAY2C,EAAZ;AAEA9E,QAAAA,CAAC,CAACgF,QAAF;AACAhF,QAAAA,CAAC,CAACiF,SAAF;AACAjF,QAAAA,CAAC,CAACyC,MAAF,GAAW,KAAX;AACAL,QAAAA,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAUC,IAAV,CAAe,KAAf,EAAsB4C,WAAtB,CAAkC,kBAAlC;AACH,OAdD,MAcO,IAAIlF,CAAC,CAACgE,UAAN,EAAkB;AACrB;AACA,YAAIhE,CAAC,CAACgE,UAAF,CAAaG,IAAb,KAAsBnE,CAAC,CAACgE,UAAF,CAAa7B,CAAvC,EAA0C;AACtCnC,UAAAA,CAAC,CAACmF,QAAF,CAAWnF,CAAC,CAACgE,UAAF,CAAa7B,CAAxB,EAA2BnC,CAAC,CAACgE,UAAF,CAAaG,IAAxC,EADsC,CAEtC;;AACA,cAAIT,MAAM,GAAGtB,CAAC,CAACpC,CAAC,CAACgE,UAAF,CAAa9B,GAAd,CAAD,CAAoBW,QAApB,EAAb;AACA7C,UAAAA,CAAC,CAACgE,UAAF,CAAaI,MAAb,GAAsBV,MAAM,CAACC,GAA7B;AACA3D,UAAAA,CAAC,CAACgE,UAAF,CAAapB,OAAb,GAAuBc,MAAM,CAACZ,IAA9B;AACA9C,UAAAA,CAAC,CAACgE,UAAF,CAAa7B,CAAb,GAAiBnC,CAAC,CAACgE,UAAF,CAAaG,IAA9B,CANsC,CAOtC;;AACA,cAAInE,CAAC,CAACG,eAAN,EAAuB;AACnBH,YAAAA,CAAC,CAACoF,YAAF;AACH;;AACDpF,UAAAA,CAAC,CAACqF,oBAAF;AACH,SAdoB,CAgBrB;;;AACAjD,QAAAA,CAAC,CAACpC,CAAC,CAACwD,IAAH,CAAD,CAAU8B,IAAV,CAAe,IAAf,EAAqB,IAArB,EACKC,OADL,CACa;AACL5B,UAAAA,GAAG,EAAE3D,CAAC,CAACgE,UAAF,CAAaI,MADb;AAELtB,UAAAA,IAAI,EAAE9C,CAAC,CAACgE,UAAF,CAAapB;AAFd,SADb,EAIO,MAJP,EAKK4C,OALL;AAMApD,QAAAA,CAAC,CAACpC,CAAC,CAAC8D,QAAH,CAAD,CAAcV,GAAd,CAAkB,YAAlB,EAAgC,QAAhC;AAEApD,QAAAA,CAAC,CAACgE,UAAF,GAAe,KAAf;AACH,OAzCiB,CA0ClB;;;AACA5B,MAAAA,CAAC,CAACc,QAAQ,CAACC,IAAV,CAAD,CAAiBC,GAAjB,CAAqB,QAArB,EAA+B,SAA/B,EAA0CC,QAA1C,CAAmD,KAAnD;AACH,KAnNG;;AAqNJ;AACR;AACA;AACA;AACA;AACA;AACQ0B,IAAAA,MAAM,EAAE,UAAU5C,CAAV,EAAa2C,EAAb,EAAiB;AACrB1C,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBmD,IAAlB,CAAuB,YAAY;AAC/BrD,QAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,sBAAb,EAAqCU,EAArC,CAAwCb,CAAxC,EAA2CG,IAA3C,CAAgD,MAAhD,EACKoD,GADL,CACStD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,YAAb,EAA2BU,EAA3B,CAA8BhD,CAAC,CAACE,UAAF,GAAeiC,CAA7C,EAAgDG,IAAhD,CAAqD,MAArD,CADT,EAEKc,GAFL,CAES,OAFT,EAEkB0B,EAFlB;AAGH,OAJD;AAKH,KAjOG;;AAmOJ;AACR;AACA;AACQE,IAAAA,QAAQ,EAAE,YAAY;AAClB5C,MAAAA,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAUC,IAAV,CAAe,KAAf,EAAsBqD,IAAtB;AACA,UAAIC,aAAa,GAAGxD,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBuD,KAAlB,GAA0BvD,IAA1B,CAA+B,sBAA/B,CAApB;AACA,UAAIwD,cAAc,GAAG1D,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAUC,IAAV,CAAe,KAAf,EAAsB4C,WAAtB,CAAkC,WAAlC,CAArB;AACA9C,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,iBAAZ,EAA+BA,IAA/B,CAAoC,UAApC,EAAgDuD,KAAhD,GAAwDX,WAAxD,CAAoE,kBAApE;;AACA,WAAK,IAAI/C,CAAC,GAAG,CAAR,EAAW4D,CAAC,GAAGH,aAAa,CAACI,MAAlC,EAA0C7D,CAAC,GAAG4D,CAA9C,EAAiD5D,CAAC,EAAlD,EAAsD;AAClD,YAAI8D,IAAI,GAAG7D,CAAC,CAACwD,aAAa,CAACzD,CAAD,CAAd,CAAZ;AACA,YAAI+D,QAAJ;;AACA,YAAIC,SAAS,CAACC,SAAV,CAAoBC,WAApB,GAAkCC,OAAlC,CAA0C,QAA1C,MAAwD,CAAC,CAA7D,EAAgE;AAC5DJ,UAAAA,QAAQ,GAAGD,IAAI,CAAChD,UAAL,EAAX;AACH,SAFD,MAEO;AACHiD,UAAAA,QAAQ,GAAGD,IAAI,CAAChD,UAAL,CAAgB,IAAhB,CAAX;AACH;;AACDb,QAAAA,CAAC,CAAC0D,cAAc,CAAC3D,CAAD,CAAf,CAAD,CAAqBiB,GAArB,CAAyB,MAAzB,EAAiC6C,IAAI,CAACpD,QAAL,GAAgBC,IAAhB,GAAuBoD,QAAxD,EACK3B,IADL;;AAEA,YAAI0B,IAAI,CAACM,QAAL,CAAc,WAAd,CAAJ,EAAgC;AAC5BnE,UAAAA,CAAC,CAAC0D,cAAc,CAAC3D,CAAD,CAAf,CAAD,CAAqBK,QAArB,CAA8B,WAA9B;;AACA,cAAIL,CAAC,GAAG,CAAR,EAAW;AACPC,YAAAA,CAAC,CAAC0D,cAAc,CAAC3D,CAAC,GAAG,CAAL,CAAf,CAAD,CAAyBK,QAAzB,CAAkC,WAAlC;AACH;AACJ;AACJ;;AACD,UAAIJ,CAAC,CAAC0D,cAAc,CAAC,CAAD,CAAf,CAAD,CAAqBS,QAArB,CAA8B,WAA9B,CAAJ,EAAgD;AAC5CnE,QAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,UAAZ,EAAwBuD,KAAxB,GAAgCrD,QAAhC,CAAyC,kBAAzC;AACH;;AACDJ,MAAAA,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAUe,GAAV,CAAc,QAAd,EAAwBhB,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOsE,MAAP,EAAxB;AACH,KAhQG;;AAkQJ;AACR;AACA;AACA;AACA;AACA;AACQuB,IAAAA,QAAQ,EAAE,UAAUqB,IAAV,EAAgBrC,IAAhB,EAAsB;AAC5B/B,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBmD,IAAlB,CAAuB,YAAY;AAC/B,YAAItB,IAAI,GAAGqC,IAAX,EAAiB;AACbpE,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCmB,IAAhC,EACKuB,GADL,CACStD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAeiE,IAArC,CADT,EAEKsC,MAFL,CAEYrE,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCwD,IAAhC,EACHd,GADG,CACCtD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAesG,IAArC,CADD,CAFZ;AAIH,SALD,MAKO;AACHpE,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCmB,IAAhC,EACKuB,GADL,CACStD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAeiE,IAArC,CADT,EAEKuC,KAFL,CAEWtE,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCwD,IAAhC,EACFd,GADE,CACEtD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAesG,IAArC,CADF,CAFX;AAIH;AACJ,OAZD,EAD4B,CAc5B;;AACAxG,MAAAA,CAAC,CAACgF,QAAF,GAf4B,CAiB5B;;AACA,UAAIb,IAAI,GAAGqC,IAAX,EAAiB;AACbpE,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCmB,IAAhC,EACKsC,MADL,CACYrE,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCwD,IAAhC,CADZ;AAEH,OAHD,MAGO;AACHpE,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCmB,IAAhC,EACKuC,KADL,CACWtE,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCwD,IAAhC,CADX;AAEH,OAxB2B,CAyB5B;;;AACA,UAAII,GAAG,GAAG5G,CAAC,CAACI,QAAF,CAAWoG,IAAX,CAAV;AACAxG,MAAAA,CAAC,CAACI,QAAF,CAAWyG,MAAX,CAAkBL,IAAlB,EAAwB,CAAxB;AACAxG,MAAAA,CAAC,CAACI,QAAF,CAAWyG,MAAX,CAAkB1C,IAAlB,EAAwB,CAAxB,EAA2ByC,GAA3B,EA5B4B,CA6B5B;;AACA,UAAI5G,CAAC,CAACK,QAAF,CAAW2F,MAAX,GAAoB,CAAxB,EAA2B;AACvBY,QAAAA,GAAG,GAAG5G,CAAC,CAACK,QAAF,CAAWmG,IAAX,CAAN;AACAxG,QAAAA,CAAC,CAACK,QAAF,CAAWwG,MAAX,CAAkBL,IAAlB,EAAwB,CAAxB;AACAxG,QAAAA,CAAC,CAACK,QAAF,CAAWwG,MAAX,CAAkB1C,IAAlB,EAAwB,CAAxB,EAA2ByC,GAA3B;AACH;AACJ,KA3SG;;AA6SJ;AACR;AACA;AACA;AACA;AACA;AACQnC,IAAAA,aAAa,EAAE,UAAUxC,CAAV,EAAa;AACxB,UAAIuC,UAAJ;AACA,UAAIsC,QAAQ,GAAG1E,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,sBAAZ,CAAf;AACAwE,MAAAA,QAAQ,CAACrB,IAAT,CAAc,YAAY;AACtB,YAAI3C,IAAI,GAAGV,CAAC,CAAC,IAAD,CAAD,CAAQ2E,MAAR,GAAiBjE,IAA5B;AACA,YAAIkE,KAAK,GAAGlE,IAAI,GAAGV,CAAC,CAAC,IAAD,CAAD,CAAQa,UAAR,EAAnB;;AACA,YAAIH,IAAI,IAAIb,CAAC,CAACU,KAAV,IAAmBV,CAAC,CAACU,KAAF,IAAWqE,KAAlC,EAAyC;AACrCxC,UAAAA,UAAU,GAAG,IAAb;AACH;AACJ,OAND;AAOA,aAAOA,UAAP;AACH,KA9TG;;AAgUJ;AACR;AACA;AACA;AACA;AACA;AACQT,IAAAA,YAAY,EAAE,UAAU7B,GAAV,EAAe;AACzB,aAAOE,CAAC,CAACF,GAAD,CAAD,CAAO+E,OAAP,CAAe,IAAf,EAAqB3E,IAArB,CAA0B,cAA1B,EAA0CC,KAA1C,CAAgDL,GAAhD,CAAP;AACH,KAxUG;;AA0UJ;AACR;AACA;AACQgF,IAAAA,eAAe,EAAE,YAAY;AACzB;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnH,CAAC,CAACI,QAAF,CAAW4F,MAA/B,EAAuCmB,CAAC,EAAxC,EAA4C;AACxC,YAAIC,CAAC,GAAGpH,CAAC,CAACI,QAAF,CAAW+G,CAAX,CAAR;AACA,YAAIE,CAAC,GAAGF,CAAC,GAAG,CAAZ;;AACA,eAAOE,CAAC,IAAI,CAAL,IAAUD,CAAC,GAAGpH,CAAC,CAACI,QAAF,CAAWiH,CAAX,CAArB,EAAoC;AAChCA,UAAAA,CAAC;AACJ;;AACD,YAAIA,CAAC,KAAKF,CAAC,GAAG,CAAd,EAAiB;AACbnH,UAAAA,CAAC,CAACmF,QAAF,CAAWgC,CAAX,EAAcE,CAAC,GAAG,CAAlB;AACH;AACJ;;AACD,UAAIrH,CAAC,CAACG,eAAN,EAAuB;AACnB;AACAH,QAAAA,CAAC,CAACoF,YAAF;AACH;;AACDpF,MAAAA,CAAC,CAACqF,oBAAF;AACH,KA9VG;;AAgWJ;AACR;AACA;AACQD,IAAAA,YAAY,EAAE,YAAY;AACtB,UAAIhD,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgI,EAAP,CAAU,OAAV,CAAJ,EAAwB;AAAI;AACxB,YAAI,OAAOtH,CAAC,CAAC8B,EAAT,KAAgB,QAAhB,IAA4B,OAAO9B,CAAC,CAAC+B,KAAT,KAAmB,QAAnD,EAA6D;AACzD;AACA;AACA;AACH;;AACD,YAAIwF,UAAU,GAAG;AACb,0BAAgB,IADH;AAEb,gBAAMvH,CAAC,CAAC8B,EAFK;AAGb,mBAAS9B,CAAC,CAAC+B,KAHE;AAIb,mBAAS/B,CAAC,CAAC4B,KAJE;AAKb,oBAAU5B,CAAC,CAAC6B,MALC;AAMb,+BAAqB7B,CAAC,CAACG;AANV,SAAjB;;AAQA,YAAIH,CAAC,CAACI,QAAF,CAAW4F,MAAX,GAAoB,CAAxB,EAA2B;AACvB5D,UAAAA,CAAC,CAACoF,MAAF,CAASD,UAAT,EAAqB;AAAE,yBAAavH,CAAC,CAACI,QAAF,CAAWqH,QAAX;AAAf,WAArB;AACH;;AACD,YAAIzH,CAAC,CAACK,QAAF,CAAW2F,MAAX,GAAoB,CAAxB,EAA2B;AACvB5D,UAAAA,CAAC,CAACoF,MAAF,CAASD,UAAT,EAAqB;AAAE,yBAAavH,CAAC,CAACK,QAAF,CAAWoH,QAAX;AAAf,WAArB;AACH;;AACDrF,QAAAA,CAAC,CAACsF,IAAF,CAAO,6CAAP,EAAsDH,UAAtD,EAAkE,UAAUI,IAAV,EAAgB;AAC9E,cAAIA,IAAI,CAACC,OAAL,KAAiB,IAArB,EAA2B;AACvB,gBAAIC,QAAQ,GAAGzF,CAAC,CAACc,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAD,CAAhB;AACAD,YAAAA,QAAQ,CAACE,IAAT,CAAcJ,IAAI,CAACK,KAAnB;AACAH,YAAAA,QAAQ,CAACrF,QAAT,CAAkB,oBAAlB;AACAyF,YAAAA,SAAS,CAACC,eAAV,CAA0BL,QAA1B,EAAoC,KAApC;AACH;AACJ,SAPD;AAQH;AACJ,KAjYG;;AAmYJ;AACR;AACA;AACA;AACQxC,IAAAA,oBAAoB,EAAE,YAAY;AAC9B;AACA,UAAI8C,SAAS,GAAG,IAAhB;;AACA,WAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnH,CAAC,CAACI,QAAF,CAAW4F,MAA/B,EAAuCmB,CAAC,EAAxC,EAA4C;AACxC,YAAInH,CAAC,CAACI,QAAF,CAAW+G,CAAX,MAAkBA,CAAtB,EAAyB;AACrBgB,UAAAA,SAAS,GAAG,KAAZ;AACA;AACH;AACJ,OAR6B,CAS9B;;;AACA,UAAIC,WAAW,GAAGpI,CAAC,CAACO,mBAAF,KAA0B,CAA5C,CAV8B,CAW9B;;AACA,UAAI4H,SAAS,IAAIC,WAAjB,EAA8B;AAC1BhG,QAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,oBAAZ,EAAkCqD,IAAlC;AACH,OAFD,MAEO;AACHvD,QAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,oBAAZ,EAAkCiC,IAAlC;AACH;AACJ,KAxZG;;AA0ZJ;AACR;AACA;AACA;AACA;AACA;AACQ+D,IAAAA,UAAU,EAAE,YAAY;AACpB,UAAI7E,IAAI,GAAG,EAAX;;AACA,UAAI,CAACzD,CAAC,CAACyC,MAAH,IAAa,CAACzC,CAAC,CAACgE,UAApB,EAAgC;AAAM;AAClC,YAAIhE,CAAC,CAACO,mBAAF,GAAwB,CAA5B,EAA+B;AAC3BP,UAAAA,CAAC,CAACY,eAAF,GAAoB,IAApB;AACH;;AACD,YAAIwB,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,WAAV,EAAuB0D,MAAvB,GAAgC,CAApC,EAAuC;AACnChG,UAAAA,CAAC,CAACc,YAAF,GAAiB,IAAjB;AACH;;AACD,YAAId,CAAC,CAACa,YAAF,IAAkBb,CAAC,CAACS,QAAxB,EAAkC;AAC9BgD,UAAAA,IAAI,IAAIA,IAAI,CAACuC,MAAL,GAAc,CAAd,GAAkB,MAAlB,GAA2B,EAAnC;AACAvC,UAAAA,IAAI,IAAI,OAAOzD,CAAC,CAACS,QAAjB;AACH;;AACD,YAAIT,CAAC,CAACuI,iBAAF,IAAuBvI,CAAC,CAACwI,gBAA7B,EAA+C;AAC3C/E,UAAAA,IAAI,IAAIA,IAAI,CAACuC,MAAL,GAAc,CAAd,GAAkB,MAAlB,GAA2B,EAAnC;AACAvC,UAAAA,IAAI,IAAI,OAAOzD,CAAC,CAACwI,gBAAjB;AACH;;AACD,YAAIxI,CAAC,CAACc,YAAF,IACAd,CAAC,CAACU,QADF,IAEA,CAAEV,CAAC,CAACa,YAFJ,IAEoB;AACpBb,QAAAA,CAAC,CAACY,eAHF,IAIAZ,CAAC,CAACQ,WAJN,EAKE;AACEiD,UAAAA,IAAI,IAAIA,IAAI,CAACuC,MAAL,GAAc,CAAd,GAAkB,MAAlB,GAA2B,EAAnC;AACAvC,UAAAA,IAAI,IAAI,OAAOzD,CAAC,CAACQ,WAAjB;AACAiD,UAAAA,IAAI,IAAIA,IAAI,CAACuC,MAAL,GAAc,CAAd,GAAkB,MAAlB,GAA2B,EAAnC;AACAvC,UAAAA,IAAI,IAAI,OAAOzD,CAAC,CAACU,QAAjB;AACA+C,UAAAA,IAAI,IAAIA,IAAI,CAACuC,MAAL,GAAc,CAAd,GAAkB,MAAlB,GAA2B,EAAnC;AACAvC,UAAAA,IAAI,IAAI,OAAOzD,CAAC,CAACW,QAAjB;AACH;AACJ;;AACD,aAAO8C,IAAP;AACH,KAhcG;;AAkcJ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACQgF,IAAAA,SAAS,EAAE,UAAUtG,CAAV,EAAa;AACpB,UAAInC,CAAC,CAACK,QAAF,CAAW8B,CAAX,CAAJ,EAAmB;AACf;AACA,YAAInC,CAAC,CAACO,mBAAF,GAAwB,CAA5B,EAA+B;AAC3B6B,UAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBmD,IAAlB,CAAuB,YAAY;AAC/BrD,YAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCb,CAAhC,EACKuD,GADL,CACStD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAeiC,CAArC,CADT,EAEKwD,IAFL;AAGH,WAJD;AAKA3F,UAAAA,CAAC,CAACK,QAAF,CAAW8B,CAAX,IAAgB,CAAhB;AACAC,UAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCb,CAAhC,EAAmCG,IAAnC,CAAwC,OAAxC,EAAiDoG,IAAjD,CAAsD,SAAtD,EAAiE,KAAjE;AACH,SARD,MAQO;AACH;AACAtG,UAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCb,CAAhC,EAAmCG,IAAnC,CAAwC,OAAxC,EAAiDoG,IAAjD,CAAsD,SAAtD,EAAiE,IAAjE;AACA,iBAAO,KAAP;AACH;AACJ,OAfD,MAeO;AAAK;AACRtG,QAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBmD,IAAlB,CAAuB,YAAY;AAC/BrD,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,cAAb,EAA6BU,EAA7B,CAAgCb,CAAhC,EACKuD,GADL,CACStD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,IAAb,EAAmBU,EAAnB,CAAsBhD,CAAC,CAACE,UAAF,GAAeiC,CAArC,CADT,EAEKoC,IAFL;AAGH,SAJD;AAKAvE,QAAAA,CAAC,CAACK,QAAF,CAAW8B,CAAX,IAAgB,CAAhB;AACAC,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BU,EAA7B,CAAgCb,CAAhC,EAAmCG,IAAnC,CAAwC,OAAxC,EAAiDoG,IAAjD,CAAsD,SAAtD,EAAiE,IAAjE;AACH;;AACD,aAAO,IAAP;AACH,KApeG;;AAseJ;AACR;AACA;AACA;AACA;AACA;AACQC,IAAAA,cAAc,EAAE,YAAY;AACxB;AACA3I,MAAAA,CAAC,CAACgF,QAAF;AACAhF,MAAAA,CAAC,CAACiF,SAAF;AACAjF,MAAAA,CAAC,CAACoF,YAAF,GAJwB,CAMxB;;AACApF,MAAAA,CAAC,CAACO,mBAAF,GAAwB6B,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBuD,KAAlB,GAA0BvD,IAA1B,CAA+B,sBAA/B,EAAuD0D,MAA/E;AACAhG,MAAAA,CAAC,CAACqF,oBAAF,GARwB,CAUxB;;AACA,UAAIrF,CAAC,CAACO,mBAAF,IAAyB,CAA7B,EAAgC;AAC5B6B,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BmD,IAA7B,CAAkC,YAAY;AAC1CrD,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,wBAAb,EAAuCoG,IAAvC,CAA4C,UAA5C,EAAwD,IAAxD;AACH,SAFD;AAGH,OAJD,MAIO;AACH;AACAtG,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,WAAhB,EAA6BmD,IAA7B,CAAkC,YAAY;AAC1CrD,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,yBAAb,EAAwCoG,IAAxC,CAA6C,UAA7C,EAAyD,KAAzD;AACH,SAFD;AAGH;AACJ,KAjgBG;;AAmgBJ;AACR;AACA;AACA;AACA;AACQE,IAAAA,WAAW,EAAE,UAAU1G,GAAV,EAAe;AACxB;AACA,UAAI,CAAClC,CAAC,CAACyC,MAAH,IAAa,CAACzC,CAAC,CAACgE,UAApB,EAAgC;AAC5B,YAAI6E,GAAG,GAAGzG,CAAC,CAACF,GAAD,CAAD,CAAOW,QAAP,EAAV;AACAT,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWvD,GAAX,CAAe;AACXO,UAAAA,GAAG,EAAEkF,GAAG,CAAClF,GAAJ,GAAUvB,CAAC,CAACF,GAAD,CAAD,CAAO4G,WAAP,CAAmB,IAAnB;AADJ,SAAf,EAGKvE,IAHL;AAIAnC,QAAAA,CAAC,CAACF,GAAD,CAAD,CAAOM,QAAP,CAAgB,eAAhB;AACH;AACJ,KAlhBG;;AAohBJ;AACR;AACA;AACQuG,IAAAA,WAAW,EAAE,YAAY;AACrB3G,MAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWhB,IAAX;AACAvD,MAAAA,CAAC,CAACpC,CAAC,CAACgJ,KAAH,CAAD,CAAW1G,IAAX,CAAgB,gBAAhB,EAAkC4C,WAAlC,CAA8C,eAA9C;AACH,KA1hBG;;AA4hBJ;AACR;AACA;AACQD,IAAAA,SAAS,EAAE,YAAY;AACnB,UAAIgE,GAAG,GAAG7G,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,oBAAV,CAAV;;AACA,WAAK,IAAI6E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,GAAG,CAACjD,MAAxB,EAAgCmB,CAAC,EAAjC,EAAqC;AACjC,YAAI+B,GAAG,GAAG9G,CAAC,CAACpC,CAAC,CAACgJ,KAAH,CAAD,CAAW1G,IAAX,CAAgB,KAAhB,EAAuBU,EAAvB,CAA0BmE,CAA1B,CAAV,CADiC,CACS;;AAC1C,YAAI0B,GAAG,GAAGzG,CAAC,CAAC6G,GAAG,CAAC9B,CAAD,CAAJ,CAAD,CAAUtE,QAAV,EAAV;AACAqG,QAAAA,GAAG,CAAC9F,GAAJ,CAAQ;AACJN,UAAAA,IAAI,EAAE+F,GAAG,CAAC/F,IAAJ,GAAWV,CAAC,CAAC6G,GAAG,CAAC9B,CAAD,CAAJ,CAAD,CAAUtD,KAAV,EAAX,GAA+BqF,GAAG,CAACrF,KAAJ,EADjC;AAEJF,UAAAA,GAAG,EAAEkF,GAAG,CAAClF;AAFL,SAAR;AAIH;AACJ,KAziBG;;AA2iBJ;AACR;AACA;AACQwF,IAAAA,cAAc,EAAE,YAAY;AACxB,WAAK,IAAIhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnH,CAAC,CAACK,QAAF,CAAW2F,MAA/B,EAAuCmB,CAAC,EAAxC,EAA4C;AACxC,YAAI,CAACnH,CAAC,CAACK,QAAF,CAAW8G,CAAX,CAAL,EAAoB;AAChBnH,UAAAA,CAAC,CAACyI,SAAF,CAAYtB,CAAZ;AACH;AACJ;;AACDnH,MAAAA,CAAC,CAAC2I,cAAF;AACH,KArjBG;;AAujBJ;AACR;AACA;AACA;AACA;AACQS,IAAAA,YAAY,EAAE,UAAUC,IAAV,EAAgB;AAC1B,UAAIjH,CAAC,CAACiH,IAAD,CAAD,CAAQ/B,EAAR,CAAW,YAAX,KACA,CAACtH,CAAC,CAACyC,MADH,IACa,CAACzC,CAAC,CAACgE,UADpB,EACgC;AAC5B,YAAI,CAAChE,CAAC,CAACe,gBAAP,EAAyB;AACrB,cAAIuI,KAAK,GAAGlH,CAAC,CAACiH,IAAD,CAAb;;AAEA,cAAI,aAAaC,KAAK,CAACC,IAAN,CAAW,WAAX,CAAb,IACA,WAAWD,KAAK,CAACC,IAAN,CAAW,WAAX,CADX,IAEA,WAAWD,KAAK,CAACC,IAAN,CAAW,WAAX,CAFf,EAGE;AACEvJ,YAAAA,CAAC,CAACwJ,KAAF,GAAUxJ,CAAC,CAACyJ,aAAZ;AACH,WALD,MAKO;AACHzJ,YAAAA,CAAC,CAACwJ,KAAF,GAAUxJ,CAAC,CAAC0J,QAAZ;AACH,WAVoB,CAYrB;;;AACAtH,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,YAAhB,EAA8BqH,KAA9B,GAAsChE,IAAtC,GAbqB,CAcrB;;AACAvD,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWpG,GAAX,CAAe;AACXO,YAAAA,GAAG,EAAE2F,KAAK,CAACzG,QAAN,GAAiBc,GADX;AAEXb,YAAAA,IAAI,EAAEwG,KAAK,CAACzG,QAAN,GAAiBC;AAFZ,WAAf,EAIKyB,IAJL,GAKKjC,IALL,CAKU,WALV,EAMKc,GANL,CAMS;AACDS,YAAAA,KAAK,EAAEyF,KAAK,CAACrG,UAAN,EADN;AAEDW,YAAAA,MAAM,EAAE0F,KAAK,CAACR,WAAN;AAFP,WANT,EAfqB,CAyBrB;;AACA,cAAIc,KAAK,GAAG3B,SAAS,CAAC4B,YAAV,CAAuBR,IAAvB,CAAZ;;AACA,cAAIC,KAAK,CAACC,IAAN,CAAW,WAAX,MAA4B,MAA5B,IAAsCD,KAAK,CAAChC,EAAN,CAAS,YAAT,MAA2B,KAArE,EAA4E;AACxE,gBAAI;AACAsC,cAAAA,KAAK,GAAGE,IAAI,CAACC,SAAL,CAAeD,IAAI,CAACE,KAAL,CAAWJ,KAAX,CAAf,EAAkC,IAAlC,EAAwC,CAAxC,CAAR;AACH,aAFD,CAEE,OAAO3H,CAAP,EAAU,CACR;AACH;AACJ;;AACDG,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiCL,KAAjC;AAEA5J,UAAAA,CAAC,CAACiB,eAAF,GAAoBoI,IAApB;AACAjH,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B4H,OAA7B,CAAqC,OAArC;AACAC,UAAAA,eAAe,CAAC/H,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,CAAD,CAAf;AACAF,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,GAAhB,EAAqBoG,IAArB,CAA0B,UAA1B,EAAsC,KAAtC;AACH;AACJ;;AAED,eAASyB,eAAT,CAA0BC,KAA1B,EAAiC;AAC7B,YAAIC,aAAa,GAAGD,KAAK,CAACH,GAAN,EAApB;AACA,YAAIK,cAAc,GAAGD,aAAa,CAACrE,MAAnC;AACAoE,QAAAA,KAAK,CAACH,GAAN,CAAU,EAAV;AACAG,QAAAA,KAAK,CAACF,OAAN,CAAc,MAAd,EAAsBA,OAAtB,CAA8B,OAA9B,EAAuCD,GAAvC,CAA2CI,aAA3C;AACAD,QAAAA,KAAK,CAAC,CAAD,CAAL,CAASG,iBAAT,CAA2BD,cAA3B,EAA2CA,cAA3C;AACH;AACJ,KAjnBG;;AAmnBJ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQhH,IAAAA,YAAY,EAAE,UAAUkH,KAAV,EAAiB7C,IAAjB,EAAuB8C,KAAvB,EAA8BC,OAA9B,EAAuC;AACjD,UAAI1K,CAAC,CAACe,gBAAF,IAAsB,CAACyJ,KAA3B,EAAkC;AAC9B;AACA,YAAIE,OAAO,KAAK9K,SAAhB,EAA2B;AACvBI,UAAAA,CAAC,CAAC2K,oBAAF,CAAuBD,OAAvB;AACH,SAFD,MAEO;AACH1K,UAAAA,CAAC,CAAC2K,oBAAF;AACH;;AACD;AACH,OATgD,CAWjD;;;AACA,UAAI3K,CAAC,CAACyB,OAAF,KAAc,IAAlB,EAAwB;AACpBzB,QAAAA,CAAC,CAACyB,OAAF,CAAUmJ,KAAV;AACA5K,QAAAA,CAAC,CAACyB,OAAF,GAAY,IAAZ;AACH;;AAED,UAAIkG,IAAJ,EAAU;AACN,YAAI3H,CAAC,CAACiB,eAAN,EAAuB;AAAK;AACxB;AACA,cAAI4J,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,cAAI6J,MAAM,GAAGD,UAAU,CAAClD,IAAX,CAAgB,OAAhB,MAA6B,IAA1C;;AACA,cAAImD,MAAJ,EAAY;AACRD,YAAAA,UAAU,CAACvI,IAAX,CAAgB,MAAhB,EAAwByF,IAAxB,CAA6B,MAA7B;AACA8C,YAAAA,UAAU,CAACrI,QAAX,CAAoB,MAApB;AACH,WAHD,MAGO;AACHqI,YAAAA,UAAU,CAAC3F,WAAX,CAAuB,MAAvB;AACA,gBAAI0E,KAAK,GAAGjC,IAAI,CAACoD,eAAL,GACNpD,IAAI,CAACqD,qBADC,GAENH,UAAU,CAAClD,IAAX,CAAgB,OAAhB,CAFN,CAFG,CAMH;;AACAkD,YAAAA,UAAU,CAAC3F,WAAX,CAAuB,WAAvB;;AACA,gBAAI+F,YAAY,CAACC,GAAb,CAAiB,QAAjB,MAA+B,GAA/B,IAAsCtB,KAAK,CAAC5D,MAAN,GAAehG,CAAC,CAACqB,eAA3D,EAA4E;AACxEwJ,cAAAA,UAAU,CAACrI,QAAX,CAAoB,WAApB;AACAoH,cAAAA,KAAK,GAAGA,KAAK,CAACuB,SAAN,CAAgB,CAAhB,EAAmBnL,CAAC,CAACqB,eAArB,IAAwC,KAAhD;AACH,aAXE,CAaH;;;AACA,gBAAI+J,OAAO,GAAGnD,SAAS,CAACoD,UAAV,CAAqBzB,KAArB,CAAd;AACAwB,YAAAA,OAAO,GAAGA,OAAO,CAACE,OAAR,CAAgB,KAAhB,EAAuB,QAAvB,CAAV;AAEA,gBAAIC,QAAQ,GAAGC,QAAQ,CAACX,UAAU,CAACtB,IAAX,CAAgB,eAAhB,CAAD,CAAvB,CAjBG,CAmBH;;AACA,gBAAKgC,QAAQ,KAAK,CAAd,IAAqBV,UAAU,CAACtB,IAAX,CAAgB,WAAhB,EAA6BjD,OAA7B,CAAqC,MAArC,MAAiD,CAAC,CAA3E,EAA+E;AAC3E8E,cAAAA,OAAO,GAAGA,OAAO,CAACD,SAAR,CAAkB,CAAlB,EAAqBC,OAAO,CAAC9E,OAAR,CAAgB,GAAhB,CAArB,CAAV;AACH,aAtBE,CAwBH;;;AACA,gBAAKiF,QAAQ,GAAG,CAAZ,IAAmBV,UAAU,CAACtB,IAAX,CAAgB,WAAhB,EAA6BjD,OAA7B,CAAqC,MAArC,MAAiD,CAAC,CAAzE,EAA6E;AACzE8E,cAAAA,OAAO,GAAGA,OAAO,CAACD,SAAR,CAAkB,CAAlB,EAAqBC,OAAO,CAACpF,MAAR,IAAkB,IAAIuF,QAAtB,CAArB,CAAV;AACH;;AAED,gBAAIE,QAAQ,GAAG,MAAf;;AACA,gBAAIZ,UAAU,CAACtE,QAAX,CAAoB,KAApB,KAA8BsE,UAAU,CAACvI,IAAX,CAAgB,GAAhB,EAAqB0D,MAAvD,EAA+D;AAC3DyF,cAAAA,QAAQ,GAAG,GAAX;AACH,aAhCE,CAkCH;;;AACA,gBAAIC,OAAO,GAAGb,UAAU,CAACvI,IAAX,CAAgBmJ,QAAhB,CAAd;;AACA,gBAAI,CAACxD,SAAS,CAAC0D,UAAV,CAAqBD,OAArB,EAA8BN,OAA9B,EAAuCxB,KAAvC,CAAL,EAAoD;AAChD8B,cAAAA,OAAO,CAAC3D,IAAR,CAAaqD,OAAb;AACH;AACJ;;AACD,cAAIP,UAAU,CAACvD,EAAX,CAAc,MAAd,CAAJ,EAA2B;AACvBuD,YAAAA,UAAU,CAACvI,IAAX,CAAgB,MAAhB,EAAwBmB,IAAxB,CAA6BoH,UAAU,CAAClD,IAAX,CAAgB,OAAhB,CAA7B;AACH;AACJ;;AACD,YAAIA,IAAI,CAACiE,eAAL,KAAyBhM,SAA7B,EAAwC;AACpCwC,UAAAA,CAAC,CAACqD,IAAF,CAAOkC,IAAI,CAACiE,eAAZ,EAA6B,UAAUC,SAAV,EAAqBjC,KAArB,EAA4B;AACrD,gBAAIiB,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,cAAZ,EAA4BU,EAA5B,CAA+B6I,SAA/B,CAAjB;AACAhB,YAAAA,UAAU,CAACvI,IAAX,CAAgB,MAAhB,EAAwByF,IAAxB,CAA6B6B,KAA7B;AACH,WAHD;AAIH;;AACD,YAAIjC,IAAI,CAACmE,SAAL,KAAmBlM,SAAvB,EAAkC;AAC9BwC,UAAAA,CAAC,CAACqD,IAAF,CAAOkC,IAAI,CAACmE,SAAZ,EAAuB,UAAUD,SAAV,EAAqBjC,KAArB,EAA4B;AAC/C,gBAAIiB,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,cAAZ,EAA4BU,EAA5B,CAA+B6I,SAA/B,CAAjB;AACAhB,YAAAA,UAAU,CAACvI,IAAX,CAAgB,MAAhB,EAAwByF,IAAxB,CAA6B6B,KAA7B;AACH,WAHD;AAIH,SA/DK,CAiEN;;;AACA5J,QAAAA,CAAC,CAACgF,QAAF;AACAhF,QAAAA,CAAC,CAACiF,SAAF;AACH,OArFgD,CAuFjD;;;AACA7C,MAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAW7D,IAAX;AACAvD,MAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B4H,OAA7B,CAAqC,MAArC;AACAlK,MAAAA,CAAC,CAACe,gBAAF,GAAqB,KAArB;AACAf,MAAAA,CAAC,CAACiB,eAAF,GAAoB,IAApB,CA3FiD,CA4FjD;;AACA,UAAI8K,GAAG,GAAG3J,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,gBAAhB,CAAV;;AACA,UAAIyJ,GAAG,CAAC/F,MAAJ,GAAa,CAAjB,EAAoB;AAChB;AACA5D,QAAAA,CAAC,CAACc,QAAD,CAAD,CAAY8I,EAAZ,CAAe,WAAf,EAA4B5J,CAAC,CAAC6J,UAAF,CAAaC,mBAAzC;AACAH,QAAAA,GAAG,CAACE,UAAJ,CAAe,SAAf,EAHgB,CAIhB;AACA;;AACA7J,QAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6Bc,GAA7B,CAAiC,QAAjC,EAA2C,SAA3C;AACH;AACJ,KApuBG;;AAsuBJ;AACR;AACA;AACQ+I,IAAAA,YAAY,EAAE,YAAY;AACtB,UAAI,CAACnM,CAAC,CAACe,gBAAP,EAAyB;AAAI;AACzBf,QAAAA,CAAC,CAACe,gBAAF,GAAqB,IAArB;AACAf,QAAAA,CAAC,CAACgB,sBAAF,GAA2B,KAA3B;AACA;AAChB;AACA;;AACgB,YAAIoL,GAAG,GAAGhK,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAX;AACA;AAChB;AACA;;AACgB,YAAIoL,SAAS,GAAGjK,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,YAAhB,CAAhB;AACA;AAChB;AACA;;AACgB,YAAIgK,WAAW,GAAGF,GAAG,CAACG,MAAJ,CAAW,IAAX,EAAiBjK,IAAjB,CAAsB,eAAtB,EAAuC2H,GAAvC,EAAlB;AACA;AAChB;AACA;AACA;;AACgB,YAAIuC,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAAC9C,CAAD,CAAlB,EAAuB8M,GAAvB,CAAhB;AACA;AAChB;AACA;;AACgB,YAAIO,iBAAiB,GAAGP,GAAG,CAAC3I,IAAJ,EAAxB;AACA;AAChB;AACA;AACA;;AACgB,YAAImJ,0BAA0B,GAAGR,GAAG,CAAC9J,IAAJ,CAAS,GAAT,EAAciH,IAAd,CAAmB,OAAnB,CAAjC;AACA;AAChB;AACA;;AACgB,YAAIsD,SAAS,GAAGT,GAAG,CAAC9J,IAAJ,CAAS,MAAT,EAAiBmB,IAAjB,EAAhB,CAhCqB,CAkCrB;;AACA4I,QAAAA,SAAS,CAAC1C,KAAV,GAnCqB,CAqCrB;;AACA,YAAImB,MAAM,GAAGsB,GAAG,CAAC9E,EAAJ,CAAO,OAAP,CAAb,CAtCqB,CAwCrB;;AACA,YAAI8E,GAAG,CAAC9J,IAAJ,CAAS,GAAT,EAAc0D,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,cAAI8G,QAAQ,GAAG5J,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAf;AACAgF,UAAAA,QAAQ,CAACC,SAAT,GAAqB,WAArB;AACA3K,UAAAA,CAAC,CAAC0K,QAAD,CAAD,CAAYE,MAAZ,CAAmBhN,CAAC,CAACmB,YAAF,GAAiB,GAApC,EAAyC6L,MAAzC,CAAgDZ,GAAG,CAAC9J,IAAJ,CAAS,GAAT,EAAc2K,KAAd,EAAhD;AACAZ,UAAAA,SAAS,CAACW,MAAV,CAAiBF,QAAjB;AACH;;AAED9M,QAAAA,CAAC,CAACoB,iBAAF,GAAsB,KAAtB;;AACA,YAAIgL,GAAG,CAAC9E,EAAJ,CAAO,iBAAP,CAAJ,EAA+B;AAC3B;AACA+E,UAAAA,SAAS,CAACW,MAAV,CAAiB,yEAAjB;AAEA,cAAIE,SAAS,GAAGb,SAAS,CAAC/J,IAAV,CAAe,iBAAf,CAAhB,CAJ2B,CAK3B;;AACA,cAAIwI,MAAJ,EAAY;AACRoC,YAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,IAA1B;AACA1I,YAAAA,CAAC,CAACoB,iBAAF,GAAsB,IAAtB;AACH,WAT0B,CAW3B;;;AACA,cAAIgL,GAAG,CAAC9E,EAAJ,CAAO,aAAP,CAAJ,EAA2B;AACvB+E,YAAAA,SAAS,CAACL,EAAV,CAAa,QAAb,EAAuB,QAAvB,EAAiC,YAAY;AACzCkB,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD;AAGH,WAJD,MAIO,IAAI0D,GAAG,CAAC9E,EAAJ,CAAO,WAAP,CAAJ,EAAyB;AAC5B+E,YAAAA,SAAS,CAACL,EAAV,CAAa,QAAb,EAAuB,QAAvB,EAAiC,YAAY;AACzCkB,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD;AAGA2D,YAAAA,SAAS,CAACL,EAAV,CAAa,OAAb,EAAsB,iBAAtB,EAAyC,YAAY;AACjDkB,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD;AAGH,WAPM,MAOA;AACHtG,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWwC,EAAX,CAAc,uBAAd,EAAuC,WAAvC,EAAoD,YAAY;AAC5DkB,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD,EADG,CAIH;;AACAtG,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWwC,EAAX,CAAc,SAAd,EAAyB,WAAzB,EAAsC,UAAU/J,CAAV,EAAa;AAC/C,kBAAIA,CAAC,CAACkL,OAAF,IAAalL,CAAC,CAACmL,KAAF,KAAY,EAA7B,EAAiC;AAC7BF,gBAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH;AACJ,aAJD;AAKA2D,YAAAA,SAAS,CAACL,EAAV,CAAa,SAAb,EAAwB,UAAxB,EAAoC,YAAY;AAC5CkB,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD;AAGH,WApC0B,CAqC3B;;;AACAtG,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B0J,EAA7B,CAAgC,OAAhC,EAAyC,YAAY;AACjD,gBAAI5J,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,OAAuC,EAA3C,EAA+C;AAC3CiD,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,KAA1B;AACH,aAFD,MAEO;AACHwE,cAAAA,SAAS,CAACxE,IAAV,CAAe,SAAf,EAA0B,IAA1B;AACH;AACJ,WAND,EAtC2B,CA6C3B;;AACAwE,UAAAA,SAAS,CAAClB,EAAV,CAAa,OAAb,EAAsB,YAAY;AAC9B,gBAAII,GAAG,CAAC9E,EAAJ,CAAO,OAAP,CAAJ,EAAqB;AACjB+E,cAAAA,SAAS,CAAC/J,IAAV,CAAe,QAAf,EAAyB2H,GAAzB,CAA6B,EAA7B;AACH,aAFD,MAEO,IAAImC,GAAG,CAAC9E,EAAJ,CAAO,MAAP,CAAJ,EAAoB;AACvB+E,cAAAA,SAAS,CAAC/J,IAAV,CAAe,QAAf,EAAyBA,IAAzB,CAA8B,QAA9B,EAAwCmD,IAAxC,CAA6C,YAAY;AACrD,oBAAI4H,OAAO,GAAGjL,CAAC,CAAC,IAAD,CAAf;AACAiL,gBAAAA,OAAO,CAAC3E,IAAR,CAAa,UAAb,EAAyB,KAAzB;AACH,eAHD;AAIH,aALM,MAKA,IAAI0D,GAAG,CAAC9E,EAAJ,CAAO,WAAP,CAAJ,EAAyB;AAC5B;AACA,kBAAI+E,SAAS,CAAC/J,IAAV,CAAe,QAAf,EAAyB0D,MAAzB,GAAkC,CAAtC,EAAyC;AACrCqG,gBAAAA,SAAS,CAAC/J,IAAV,CAAe,QAAf,EAAyB2H,GAAzB,CAA6B,EAA7B;AACH;AACJ,aALM,MAKA;AACHoC,cAAAA,SAAS,CAAC/J,IAAV,CAAe,UAAf,EAA2B2H,GAA3B,CAA+B,EAA/B;AACH;;AACD7H,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC,EAAjC;AACH,WAjBD;AAkBH,SAjHoB,CAmHrB;;;AACA7H,QAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,YAAhB,EAA8Bc,GAA9B,CAAkC;AAAE,iBAAO,GAAT;AAAa,sBAAW;AAAxB,SAAlC;AAEA,YAAImE,UAAJ;;AACA,YAAI6E,GAAG,CAAC9E,EAAJ,CAAO,WAAP,CAAJ,EAAyB;AACrB;AACA+E,UAAAA,SAAS,CAAC7J,QAAV,CAAmB,mBAAnB,EAFqB,CAIrB;;AACA4J,UAAAA,GAAG,CAACzE,IAAJ,CAAS,eAAT,EAA0B,IAA1B;AAEA;AACpB;AACA;;AACoBJ,UAAAA,UAAU,GAAG;AACT,4BAAiB,IADR;AAET,sBAAWvH,CAAC,CAAC6B,MAFJ;AAGT,kBAAO7B,CAAC,CAAC8B,EAHA;AAIT,qBAAU9B,CAAC,CAAC+B,KAJH;AAKT,sBAAWyK,SALF;AAMT,0BAAeG,iBANN;AAOT,8CAAmCC;AAP1B,WAAb;AAUA5M,UAAAA,CAAC,CAACyB,OAAF,GAAYW,CAAC,CAACsF,IAAF,CAAO,4CAAP,EAAqDH,UAArD,EAAiE,UAAUI,IAAV,EAAgB;AACzF3H,YAAAA,CAAC,CAACyB,OAAF,GAAY,IAAZ;AACA4K,YAAAA,SAAS,CAACnH,WAAV,CAAsB,mBAAtB;;AACA,gBAAI9C,CAAC,CAACuF,IAAI,CAAC2F,QAAN,CAAD,CAAiBhG,EAAjB,CAAoB,QAApB,CAAJ,EAAmC;AAC/B;AACA,kBAAIsC,KAAK,GAAGxH,CAAC,CAACuF,IAAI,CAAC2F,QAAN,CAAD,CAAiBrD,GAAjB,EAAZ;AACAmC,cAAAA,GAAG,CAACzE,IAAJ,CAAS,eAAT,EAA0BiC,KAA1B,EAH+B,CAI/B;;AACAxH,cAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiCL,KAAjC;AACH;;AAEDyC,YAAAA,SAAS,CAACW,MAAV,CAAiBrF,IAAI,CAAC2F,QAAtB;AACAjB,YAAAA,SAAS,CAACW,MAAV,CAAiB,iCAAiChN,CAAC,CAACkB,YAAnC,GAAkD,QAAnE,EAZyF,CAczF;AACA;;AACAmL,YAAAA,SAAS,CAAC/J,IAAV,CAAe,iBAAf,EAAkCqD,IAAlC,GAhByF,CAiBzF;;AACA0G,YAAAA,SAAS,CAAC/J,IAAV,CAAe,iBAAf,EAAkC0J,EAAlC,CAAqC,QAArC,EAA+C,YAAY;AACvD5J,cAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC7H,CAAC,CAAC,IAAD,CAAD,CAAQqB,IAAR,EAAjC;AACH,aAFD;AAGH,WArBW,CAAZ,CApBqB,CAyCjB;;AAEJ4I,UAAAA,SAAS,CAAC9H,IAAV;AACA8H,UAAAA,SAAS,CAACL,EAAV,CAAa,QAAb,EAAuB,QAAvB,EAAiC,YAAY;AACzC5J,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC7H,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAAjC;AACH,WAFD;AAGAjK,UAAAA,CAAC,CAACgB,sBAAF,GAA2B,IAA3B;AACH,SAhDD,MAgDO,IAAIoL,GAAG,CAAC9E,EAAJ,CAAO,OAAP,CAAJ,EAAqB;AACxB;AACA+E,UAAAA,SAAS,CAAC7J,QAAV,CAAmB,mBAAnB;AAEA;AACpB;AACA;;AACoB+E,UAAAA,UAAU,GAAG;AACT,4BAAiB,IADR;AAET,sBAAWvH,CAAC,CAAC6B,MAFJ;AAGT,kBAAO7B,CAAC,CAAC8B,EAHA;AAIT,qBAAU9B,CAAC,CAAC+B,KAJH;AAKT,sBAAWyK,SALF;AAMT,0BAAeK;AANN,WAAb;AAQA7M,UAAAA,CAAC,CAACyB,OAAF,GAAYW,CAAC,CAACsF,IAAF,CAAO,sCAAP,EAA+CH,UAA/C,EAA2D,UAAUI,IAAV,EAAgB;AACnF3H,YAAAA,CAAC,CAACyB,OAAF,GAAY,IAAZ;;AACA,gBAAI,OAAOkG,IAAP,KAAgB,QAAhB,IAA4BA,IAAI,CAACC,OAAL,KAAiB,KAAjD,EAAwD;AACpDK,cAAAA,SAAS,CAACC,eAAV,CAA0BP,IAAI,CAACK,KAA/B,EAAsCpI,SAAtC,EAAiD,OAAjD;AACA;AACH;;AACDyM,YAAAA,SAAS,CAACnH,WAAV,CAAsB,mBAAtB;AACAmH,YAAAA,SAAS,CAACW,MAAV,CAAiBrF,IAAI,CAAC2F,QAAtB;AACAjB,YAAAA,SAAS,CAACW,MAAV,CAAiB,iCAAiChN,CAAC,CAACkB,YAAnC,GAAkD,QAAnE;AACH,WATW,CAAZ,CAfwB,CAwBpB;;AAEJmL,UAAAA,SAAS,CAAC9H,IAAV;AACA8H,UAAAA,SAAS,CAACL,EAAV,CAAa,QAAb,EAAuB,QAAvB,EAAiC,YAAY;AACzC5J,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC7H,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAAjC;AACH,WAFD;AAGH,SA9BM,MA8BA,IAAImC,GAAG,CAAC9E,EAAJ,CAAO,MAAP,CAAJ,EAAoB;AACvB;AACA+E,UAAAA,SAAS,CAAC7J,QAAV,CAAmB,mBAAnB,EAFuB,CAIvB;;AACA,cAAI4J,GAAG,CAAC9E,EAAJ,CAAO,YAAP,CAAJ,EAA0B;AACtBC,YAAAA,UAAU,GAAG;AACT,8BAAgB,IADP;AAET,wBAAUvH,CAAC,CAAC6B,MAFH;AAGT,oBAAM7B,CAAC,CAAC8B,EAHC;AAIT,uBAAS9B,CAAC,CAAC+B,KAJF;AAKT,wBAAUyK,SALD;AAMT,4BAAcK,SANL;AAOT,iCAAmB,IAPV;AAQT,8BAAgBP;AARP,aAAb;AAUH,WAXD,MAWO;AACH/E,YAAAA,UAAU,GAAG;AACT,8BAAgB,IADP;AAET,wBAAUvH,CAAC,CAAC6B,MAFH;AAGT,oBAAM7B,CAAC,CAAC8B,EAHC;AAIT,uBAAS9B,CAAC,CAAC+B,KAJF;AAKT,wBAAUyK,SALD;AAMT,4BAAcK;AANL,aAAb;AAQH;;AAED7M,UAAAA,CAAC,CAACyB,OAAF,GAAYW,CAAC,CAACsF,IAAF,CAAO,qCAAP,EAA8CH,UAA9C,EAA0D,UAAUI,IAAV,EAAgB;AAClF3H,YAAAA,CAAC,CAACyB,OAAF,GAAY,IAAZ;;AACA,gBAAI,OAAOkG,IAAP,KAAgB,QAAhB,IAA4BA,IAAI,CAACC,OAAL,KAAiB,KAAjD,EAAwD;AACpDK,cAAAA,SAAS,CAACC,eAAV,CAA0BP,IAAI,CAACK,KAA/B,EAAsCpI,SAAtC,EAAiD,OAAjD;AACA;AACH;;AACDyM,YAAAA,SAAS,CAACnH,WAAV,CAAsB,mBAAtB;AACAmH,YAAAA,SAAS,CAACW,MAAV,CAAiBrF,IAAI,CAAC4F,MAAtB;AACAnB,YAAAA,GAAG,CAACzE,IAAJ,CAAS,eAAT,EAA0BvF,CAAC,CAACuF,IAAI,CAAC4F,MAAN,CAAD,CAAetD,GAAf,GAAqBuD,IAArB,EAA1B;AACAnB,YAAAA,SAAS,CAACW,MAAV,CAAiB,iCAAiChN,CAAC,CAACkB,YAAnC,GAAkD,QAAnE;AACH,WAVW,CAAZ,CA3BuB,CAqCnB;;AAEJmL,UAAAA,SAAS,CAAC9H,IAAV;AACA8H,UAAAA,SAAS,CAACL,EAAV,CAAa,QAAb,EAAuB,QAAvB,EAAiC,YAAY;AACzC5J,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC7H,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAAjC;AACH,WAFD;AAGH,SA3CM,MA2CA,IAAImC,GAAG,CAAC9E,EAAJ,CAAO,0BAAP,CAAJ,EAAwC;AAC3C,cAAI8E,GAAG,CAAC9E,EAAJ,CAAO,cAAP,CAAJ,EAA4B;AAAI;AAC5B,gBAAIsC,KAAK,GAAGwC,GAAG,CAACzE,IAAJ,CAAS,OAAT,CAAZ;AACAvF,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiCL,KAAjC;AACAyC,YAAAA,SAAS,CAACW,MAAV,CAAiB,uBAAjB;AACAX,YAAAA,SAAS,CAAC/J,IAAV,CAAe,UAAf,EAA2B2H,GAA3B,CAA+BL,KAA/B;AACAyC,YAAAA,SAAS,CACJL,EADL,CACQ,OADR,EACiB,UADjB,EAC6B,YAAY;AACjC5J,cAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiC7H,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAAjC;AACH,aAHL;AAIA7H,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWwC,EAAX,CAAc,OAAd,EAAuB,WAAvB,EAAoC,YAAY;AAC5CK,cAAAA,SAAS,CAAC/J,IAAV,CAAe,UAAf,EAA2B2H,GAA3B,CAA+B7H,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAA/B;AACH,aAFD;AAGAoC,YAAAA,SAAS,CAACW,MAAV,CAAiB,iCAAiChN,CAAC,CAACkB,YAAnC,GAAkD,QAAnE;AACH,WAbD,MAaO;AACH;AACAmL,YAAAA,SAAS,CAAC7J,QAAV,CAAmB,mBAAnB,EAFG,CAIH;;AACA4J,YAAAA,GAAG,CAACzE,IAAJ,CAAS,eAAT,EAA0B,IAA1B;AAEA;AACxB;AACA;;AACwB,gBAAI8F,QAAQ,GAAG,aAAajB,SAAb,GAAyB,UAAzB,GAAsCxM,CAAC,CAAC+B,KAAxC,GAAgD,UAAhD,GAA6DuK,WAA5E,CAVG,CAYH;;AACAtM,YAAAA,CAAC,CAACyB,OAAF,GAAYW,CAAC,CAACsF,IAAF,CAAO,sBAAP,EAA+B;AACvC,wBAAW1H,CAAC,CAAC6B,MAD0B;AAEvC,oBAAO7B,CAAC,CAAC8B,EAF8B;AAGvC,8BAAiB,IAHsB;AAIvC,2BAAc2L,QAJyB;AAKvC,2BAAc;AALyB,aAA/B,EAMT,UAAU9F,IAAV,EAAgB;AACf3H,cAAAA,CAAC,CAACyB,OAAF,GAAY,IAAZ;AACA4K,cAAAA,SAAS,CAACnH,WAAV,CAAsB,mBAAtB;;AACA,kBAAI,OAAOyC,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;AACtD,oBAAIwE,GAAG,CAAC7C,IAAJ,CAAS,WAAT,MAA0B,MAA9B,EAAsC;AAClC,sBAAI;AACA5B,oBAAAA,IAAI,CAACiC,KAAL,GAAaE,IAAI,CAACC,SAAL,CAAeD,IAAI,CAACE,KAAL,CAAWrC,IAAI,CAACiC,KAAhB,CAAf,EAAuC,IAAvC,EAA6C,CAA7C,CAAb;AACH,mBAFD,CAEE,OAAO3H,CAAP,EAAU,CACR;AACH;AACJ;;AACDmK,gBAAAA,GAAG,CAACzE,IAAJ,CAAS,eAAT,EAA0BA,IAAI,CAACiC,KAA/B;AACAxH,gBAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,CAAiCtC,IAAI,CAACiC,KAAtC;AACH,eAVD,MAUO;AACH3B,gBAAAA,SAAS,CAACC,eAAV,CAA0BP,IAAI,CAACK,KAA/B,EAAsC,KAAtC;AACH;AACJ,aAtBW,CAAZ,CAbG,CAmCC;AACP;;AACDhI,UAAAA,CAAC,CAACgB,sBAAF,GAA2B,IAA3B;AACH,SApDM,MAoDA,IAAIoL,GAAG,CAAC9E,EAAJ,CAAO,yDAAP,CAAJ,EAAuE;AAC1E,cAAIoG,WAAW,GAAGtL,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,CAAlB,CAD0E,CAG1E;;AACA,cAAIqL,aAAa,GAAG,CAAC7C,MAAD,GAAU4C,WAAW,CAACzD,GAAZ,EAAV,GAA8B,EAAlD;AAEA,cAAI2D,YAAY,GAAG,KAAnB;AACA,cAAIC,YAAY,GAAG,KAAnB;AACA,cAAIC,UAAU,GAAG,UAAjB,CAR0E,CAS1E;;AACA,cAAK1B,GAAG,CAAC7C,IAAJ,CAAS,eAAT,IAA4B,CAA7B,IAAoC6C,GAAG,CAAC7C,IAAJ,CAAS,WAAT,EAAsBjD,OAAtB,CAA8B,MAA9B,MAA0C,CAAC,CAAnF,EAAuF;AACnF,gBAAIqH,aAAa,IAAIA,aAAa,CAACrH,OAAd,CAAsB,GAAtB,MAA+B,KAApD,EAA2D;AACvDqH,cAAAA,aAAa,IAAI,GAAjB;AACH;;AACD,gBAAIvB,GAAG,CAAC7C,IAAJ,CAAS,eAAT,IAA4B,CAAhC,EAAmC;AAC/BqE,cAAAA,YAAY,GAAG,IAAf;AACAC,cAAAA,YAAY,GAAG,IAAf;AACAC,cAAAA,UAAU,GAAG,aAAb;;AAEA,kBAAIH,aAAJ,EAAmB;AACfA,gBAAAA,aAAa,IAAI,QAAjB;AACAA,gBAAAA,aAAa,GAAGA,aAAa,CAACxC,SAAd,CAAwB,CAAxB,EAA2BwC,aAAa,CAACrH,OAAd,CAAsB,GAAtB,IAA6B,CAAxD,CAAhB;AACAoH,gBAAAA,WAAW,CAACzD,GAAZ,CAAgB0D,aAAhB;AACH;AACJ,aAVD,MAUO;AACHC,cAAAA,YAAY,GAAG,IAAf;AACAE,cAAAA,UAAU,GAAG,YAAb;;AAEA,kBAAIH,aAAJ,EAAmB;AACfA,gBAAAA,aAAa,IAAI,KAAjB;AACAA,gBAAAA,aAAa,GAAGA,aAAa,CAACxC,SAAd,CAAwB,CAAxB,EAA2BwC,aAAa,CAACrH,OAAd,CAAsB,GAAtB,IAA6B,CAAxD,CAAhB;AACAoH,gBAAAA,WAAW,CAACzD,GAAZ,CAAgB0D,aAAhB;AACH;AACJ;AACJ,WAlCyE,CAoC1E;;;AACA1F,UAAAA,SAAS,CAAC8F,aAAV,CAAwBL,WAAxB,EAAqCtB,GAAG,CAAC7C,IAAJ,CAAS,WAAT,CAArC,EAA4D;AACxDqE,YAAAA,YAAY,EAAEA,YAD0C;AAExDC,YAAAA,YAAY,EAAEA,YAF0C;AAGxDC,YAAAA,UAAU,EAAEA,UAH4C;AAIxDE,YAAAA,QAAQ,EAAEC;AAJ8C,WAA5D;AAOAP,UAAAA,WAAW,CAAC1B,EAAZ,CAAe,OAAf,EAAwB,UAAU/J,CAAV,EAAa;AACjC,gBAAIA,CAAC,CAACmL,KAAF,KAAY,EAAhB,EAAoB;AAChB;AACAnL,cAAAA,CAAC,CAACiM,cAAF;AACAjM,cAAAA,CAAC,CAACkM,eAAF;AACAnO,cAAAA,CAAC,CAAC2K,oBAAF;AACH,aALD,MAKO,IAAI1I,CAAC,CAACmL,KAAF,KAAY,EAAhB,EAAoB;AACvBnF,cAAAA,SAAS,CAACmG,yBAAV,CAAoChC,GAApC,EAAyCsB,WAAzC;AACH;AACJ,WATD;AAWAA,UAAAA,WAAW,CAACzB,UAAZ,CAAuB,MAAvB;AACAhE,UAAAA,SAAS,CAACmG,yBAAV,CAAoChC,GAApC,EAAyCsB,WAAzC,EAxD0E,CA0D1E;AACA;AACA;AACA;;AACAtL,UAAAA,CAAC,CAACc,QAAD,CAAD,CAAYmL,GAAZ,CAAgB,WAAhB,EAA6BjM,CAAC,CAAC6J,UAAF,CAAaC,mBAA1C,EA9D0E,CAgE1E;;AACA,cAAIoC,aAAa,GAAGlM,CAAC,CAAC,oBAAD,CAArB;AACAkM,UAAAA,aAAa,CAAClL,GAAd,CAAkB;AAAE,mBAAO,CAAT;AAAY,oBAAQ,CAApB;AAAuB,wBAAY;AAAnC,WAAlB;AACAhB,UAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWwD,MAAX,CAAkBsB,aAAlB,EAnE0E,CAqE1E;;AACAjC,UAAAA,SAAS,CAAC/J,IAAV,CAAe,KAAf,EAAsB0J,EAAtB,CAAyB,OAAzB,EAAkC,UAAU/J,CAAV,EAAa;AAC3CA,YAAAA,CAAC,CAACkM,eAAF;AACH,WAFD;AAIAnO,UAAAA,CAAC,CAACgB,sBAAF,GAA2B,IAA3B;AACH,SA3EM,MA2EA;AACHhB,UAAAA,CAAC,CAACgB,sBAAF,GAA2B,IAA3B,CADG,CAEH;;AACA,cAAIqL,SAAS,CAACkC,QAAV,GAAqBvI,MAArB,GAA8B,CAAlC,EAAqC;AACjCqG,YAAAA,SAAS,CAACW,MAAV,CAAiB,iCAAiChN,CAAC,CAACkB,YAAnC,GAAkD,QAAnE;AACH;AACJ;;AACD,YAAImL,SAAS,CAACkC,QAAV,GAAqBvI,MAArB,GAA8B,CAAlC,EAAqC;AACjCqG,UAAAA,SAAS,CAAC9H,IAAV;AACH;AACJ;AACJ,KApmCG;;AAsmCJ;AACR;AACA;AACA;AACA;AACA;AACQiK,IAAAA,cAAc,EAAE,UAAU9D,OAAV,EAAmB;AAC/B,UAAI1K,CAAC,CAAC0B,QAAN,EAAgB;AACZ;AACH;;AACD1B,MAAAA,CAAC,CAAC0B,QAAF,GAAa,IAAb;AACA;AACZ;AACA;;AACY,UAAI+M,cAAc,GAAG,EAArB;AACA;AACZ;AACA;;AACY,UAAIC,iBAAiB,GAAGtM,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,wCAAZ,EAAsD2H,GAAtD,EAAxB;AACA;AACZ;AACA;;AACY,UAAI0E,eAAe,GAAG,EAAtB;AACA;AACZ;AACA;;AACY,UAAIC,oBAAoB,GAAG,KAA3B;AACA;AACZ;AACA;;AACY,UAAIC,YAAY,GAAG,EAAnB;AACA;AACZ;AACA;;AACY,UAAIC,aAAa,GAAG,EAApB;AACA;AACZ;AACA;;AACY,UAAIC,mBAAmB,GAAG,EAA1B;AACA;AACZ;AACA;;AACY,UAAIC,eAAe,GAAG,EAAtB;AACA;AACZ;AACA;;AACY,UAAIC,QAAQ,GAAG7M,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,oBAAZ,EAAkCgF,EAAlC,CAAqC,YAArC,IAAqD,CAArD,GAAyD,CAAxE;AACA;AACZ;AACA;;AACY,UAAI4H,mBAAmB,GAAG,EAA1B;AACA,UAAIC,mBAAmB,GAAG,EAA1B;AACA,UAAIC,eAAe,GAAG,EAAtB;AACA,UAAIC,mBAAmB,GAAG,EAA1B,CA/C+B,CAiD/B;;AACA,UAAI,CAACJ,QAAL,EAAe;AACXK,QAAAA,KAAK,CAACtP,CAAC,CAAC2B,cAAH,CAAL;AACH,OApD8B,CAsD/B;;;AACAS,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,gBAAZ,EAA8B2E,OAA9B,CAAsC,IAAtC,EAA4CxB,IAA5C,CAAiD,YAAY;AACzD,YAAI8J,GAAG,GAAGnN,CAAC,CAAC,IAAD,CAAX;AACA,YAAIkK,WAAW,GAAGiD,GAAG,CAACjN,IAAJ,CAAS,eAAT,EAA0B2H,GAA1B,EAAlB;;AACA,YAAI,OAAOqC,WAAP,KAAuB,WAA3B,EAAwC;AACpCA,UAAAA,WAAW,GAAG,EAAd;AACH;;AACD0C,QAAAA,eAAe,CAACQ,IAAhB,CAAqBlD,WAArB;AACA,YAAImD,cAAc,GAAG3F,IAAI,CAACE,KAAL,CAAWuF,GAAG,CAACjN,IAAJ,CAAS,kBAAT,EAA6B2H,GAA7B,EAAX,CAArB;AAEA;AAChB;AACA;AACA;;AACgB,YAAIyF,UAAU,GAAG,EAAjB;AACA,YAAIC,UAAU,GAAG,EAAjB;AACA,YAAIC,MAAM,GAAG,EAAb;AACA,YAAIC,UAAU,GAAG,EAAjB,CAhByD,CAkBzD;;AACAN,QAAAA,GAAG,CAACjN,IAAJ,CAAS,cAAT,EAAyBmD,IAAzB,CAA8B,YAAY;AACtC;AACpB;AACA;AACoB,cAAIoF,UAAU,GAAGzI,CAAC,CAAC,IAAD,CAAlB;AAEA;AACpB;AACA;AACA;;AACoB,cAAIoK,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA;AACpB;AACA;;AACoB,cAAIiF,eAAe,GAAG,EAAtB;;AAEA,cAAIjF,UAAU,CAACvD,EAAX,CAAc,cAAd,CAAJ,EAAmC;AAC/BsH,YAAAA,oBAAoB,GAAI,IAAxB;AACH;;AACDkB,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6B3B,UAAU,CAAClD,IAAX,CAAgB,OAAhB,CAA7B;AAEA;AACpB;AACA;;AACoB,cAAImD,MAAM,GAAGgF,eAAe,CAACtD,SAAD,CAAf,KAA+B,IAA5C;AAEAkD,UAAAA,UAAU,CAACF,IAAX,CAAgBhD,SAAhB;;AAEA,cAAI1B,MAAJ,EAAY;AACR+E,YAAAA,UAAU,CAACL,IAAX,CAAgB,IAAhB;AACAI,YAAAA,MAAM,CAACJ,IAAP,CAAY,EAAZ;AACH,WAHD,MAGO;AACH,gBAAI3E,UAAU,CAACvD,EAAX,CAAc,MAAd,CAAJ,EAA2B;AACvBqI,cAAAA,UAAU,CAACH,IAAX,CAAgB,KAAhB;AACH,aAFD,MAEO,IAAI3E,UAAU,CAACtE,QAAX,CAAoB,KAApB,CAAJ,EAAgC;AACnCoJ,cAAAA,UAAU,CAACH,IAAX,CAAgB,KAAhB;AACH;;AACDK,YAAAA,UAAU,CAACL,IAAX,CAAgB,EAAhB;AACAI,YAAAA,MAAM,CAACJ,IAAP,CAAY3E,UAAU,CAAClD,IAAX,CAAgB,OAAhB,CAAZ;AAEA,gBAAIkE,SAAS,GAAGhB,UAAU,CAACtI,KAAX,CAAiB,cAAjB,CAAhB;;AACA,gBAAIsI,UAAU,CAACvD,EAAX,CAAc,oCAAd,CAAJ,EAAyD;AACrD,kBAAIuD,UAAU,CAACvD,EAAX,CAAc,cAAd,CAAJ,EAAmC;AAC/BqH,gBAAAA,eAAe,CAAC9C,SAAD,CAAf,GAA6B,EAA7B;AACAzJ,gBAAAA,CAAC,CAACoF,MAAF,CAASmH,eAAe,CAAC9C,SAAD,CAAxB,EAAqCiE,eAArC;AACH;AACJ,aALD,MAKO,IAAIjF,UAAU,CAACvD,EAAX,CAAc,WAAd,CAAJ,EAAgC;AACnCmH,cAAAA,cAAc,CAAC5C,SAAD,CAAd,GAA4B,EAA5B;AACAzJ,cAAAA,CAAC,CAACoF,MAAF,CAASiH,cAAc,CAAC5C,SAAD,CAAvB,EAAoCiE,eAApC;AACH;AACJ,WAnDqC,CAoDtC;;;AACA,cAAIxD,WAAW,CAAChG,OAAZ,CAAoBmG,GAAG,CAACsD,SAAJ,CAAcvD,SAAd,CAApB,IAAgD,CAAC,CAArD,EAAwD;AACpD,gBAAIwD,QAAQ,GAAG,MAAMhQ,CAAC,CAAC+B,KAAR,GAAgB,IAAhB,GAAuB,GAAvB,GAA6ByK,SAA7B,GAAyC,GAAxD;;AACA,iBAAK,IAAI/B,KAAT,IAAkBgF,cAAlB,EAAkC;AAC9B,kBAAIhF,KAAK,CAACnE,OAAN,CAAc0J,QAAd,IAA0B,CAAC,CAA/B,EAAkC;AAC9BP,gBAAAA,cAAc,CAAChF,KAAD,CAAd,GAAwBK,MAAM,GAAG,SAAH,GAAe,SAASgF,eAAe,CAACtD,SAAD,CAAf,CAA2BlB,OAA3B,CAAmC,IAAnC,EAAyC,MAAzC,CAAT,GAA4D,IAAzG;AACA;AACH;AACJ;AACJ;AACJ,SA9DD,EAnByD,CAiFrD;AAEJ;;AACA,YAAI2E,SAAS,GAAG,EAAhB;;AACA,aAAK,IAAIxF,KAAT,IAAkBgF,cAAlB,EAAkC;AAC9BQ,UAAAA,SAAS,IAAIxF,KAAK,GAAG,GAAR,GAAcgF,cAAc,CAAChF,KAAD,CAA5B,GAAsC,OAAnD;AACH;;AACDwF,QAAAA,SAAS,GAAGA,SAAS,CAAC9E,SAAV,CAAoB,CAApB,EAAuB8E,SAAS,CAACjK,MAAV,GAAmB,CAA1C,CAAZ,CAxFyD,CAwFC;;AAC1DuJ,QAAAA,GAAG,CAAC5H,IAAJ,CAAS,YAAT,EAAuBsI,SAAvB,EAzFyD,CA0FzD;;AACAV,QAAAA,GAAG,CAACjN,IAAJ,CAAS,kBAAT,EAA6B2H,GAA7B,CAAiCH,IAAI,CAACC,SAAL,CAAe0F,cAAf,CAAjC;AAEAP,QAAAA,mBAAmB,CAACM,IAApB,CAAyBE,UAAzB;AACAP,QAAAA,mBAAmB,CAACK,IAApB,CAAyBG,UAAzB;AACAP,QAAAA,eAAe,CAACI,IAAhB,CAAqBI,MAArB;AACAP,QAAAA,mBAAmB,CAACG,IAApB,CAAyBK,UAAzB;AACH,OAjGD,EAvD+B,CAwJ3B;;AAEJf,MAAAA,aAAa,GAAG1M,CAAC,CAAC8N,KAAF,CAAQzB,cAAR,CAAhB;AACAM,MAAAA,mBAAmB,GAAG3M,CAAC,CAAC8N,KAAF,CAAQvB,eAAR,CAAtB,CA3J+B,CA6J/B;;AACA;AACZ;AACA;;AACY,UAAIpH,UAAU,GAAG;AAAE,wBAAiB,IAAnB;AACb,qBAAcsH,YADD;AAEb,kBAAW7O,CAAC,CAAC6B,MAFA;AAGb,cAAO7B,CAAC,CAAC8B,EAHI;AAIb,iBAAU9B,CAAC,CAAC+B,KAJC;AAKb,4BAAqBkN,QALR;AAMb,wBAAiBD,eANJ;AAOb,8BAAuBI,eAPV;AAQb,mCAA4BF,mBARf;AASb,mCAA4BC,mBATf;AAUb,mCAA4BE,mBAVf;AAWb,2BAAoBP,aAXP;AAYb,8BAAuBF,oBAZV;AAab,iCAA0BG,mBAbb;AAcb,8BAAuBL,iBAdV;AAeb,gBAASyB,kBAAkB,CAAC,sBAAD,CAfd;AAgBb,uBAAgB;AAhBH,OAAjB;;AAmBA,UAAI,CAACnQ,CAAC,CAACsB,eAAP,EAAwB;AACpBc,QAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,GAAhB,EAAqBoG,IAArB,CAA0B,UAA1B,EAAsC,IAAtC;AACAtG,QAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6BE,QAA7B,CAAsC,kBAAtC;AACH,OAHD,MAGO;AACHJ,QAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,iBAAZ,EAA+BE,QAA/B,CAAwC,oBAAxC,EACKF,IADL,CACU,OADV,EACmBoG,IADnB,CACwB,UADxB,EACoC,IADpC,EADG,CAE2C;AACjD;;AAEDtG,MAAAA,CAAC,CAACgO,IAAF,CAAO;AACHC,QAAAA,IAAI,EAAE,MADH;AAEHC,QAAAA,GAAG,EAAE,gCAFF;AAGH3I,QAAAA,IAAI,EAAEJ,UAHH;AAIHK,QAAAA,OAAO,EACH,UAAUD,IAAV,EAAgB;AACZ3H,UAAAA,CAAC,CAAC0B,QAAF,GAAa,KAAb;;AACA,cAAI,CAAC1B,CAAC,CAACsB,eAAP,EAAwB;AACpBc,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,GAAhB,EAAqBoG,IAArB,CAA0B,UAA1B,EAAsC,KAAtC;AACAtG,YAAAA,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B4C,WAA7B,CAAyC,kBAAzC;AACH,WAHD,MAGO;AACH9C,YAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,iBAAZ,EAA+B4C,WAA/B,CAA2C,oBAA3C,EACK5C,IADL,CACU,OADV,EACmBoG,IADnB,CACwB,UADxB,EACoC,KADpC,EADG,CAE0C;AAChD;;AACD,cAAI,OAAOf,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;AACtD,gBAAI,OAAO8C,OAAP,KAAmB,WAAnB,IAAkC,CAAEA,OAAO,CAAC6F,IAAhD,EAAsD;AAClDtI,cAAAA,SAAS,CAACC,eAAV,CAA0BP,IAAI,CAAC6I,OAA/B;AACH,aAHqD,CAKtD;;;AACApO,YAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,gBAAZ,EAA8B2E,OAA9B,CAAsC,IAAtC,EAA4CxB,IAA5C,CAAiD,YAAY;AACzD,kBAAIwK,SAAS,GAAG7N,CAAC,CAAC,IAAD,CAAD,CAAQuF,IAAR,CAAa,YAAb,CAAhB;AACA,kBAAI8I,YAAY,GAAGrO,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,eAAb,CAAnB;AACA,kBAAIoO,SAAS,GAAGD,YAAY,CAACxG,GAAb,EAAhB;AACA,kBAAI0G,gBAAgB,GAAGD,SAAvB;AACA,kBAAIE,gBAAgB,GAAGX,SAAvB;AAEAQ,cAAAA,YAAY,CAACxG,GAAb,CAAiBgG,SAAjB,EAPyD,CAQzD;;AACA7N,cAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,GAAb,EAAkBmD,IAAlB,CAAuB,YAAY;AAC/BrD,gBAAAA,CAAC,CAAC,IAAD,CAAD,CAAQmH,IAAR,CAAa,MAAb,EAAqBnH,CAAC,CAAC,IAAD,CAAD,CAAQmH,IAAR,CAAa,MAAb,EAAqB+B,OAArB,CAA6BoF,SAA7B,EAAwCT,SAAxC,CAArB,EAD+B,CAE/B;;AACA,oBAAI7N,CAAC,CAAC,IAAD,CAAD,CAAQmH,IAAR,CAAa,MAAb,EAAqBjD,OAArB,CAA6B,QAA7B,IAAyC,CAAC,CAA9C,EAAiD;AAC7ClE,kBAAAA,CAAC,CAAC,IAAD,CAAD,CAAQyO,UAAR,CAAmB,SAAnB,EACKxC,GADL,CACS,OADT,EAEKrC,EAFL,CAEQ,OAFR,EAEiB,YAAY;AACrB,2BAAO/D,SAAS,CAAC6I,WAAV,CAAsB,IAAtB,EAA4B,kBAAkB9Q,CAAC,CAAC8B,EAApB,GAAyB,KAAzB,GAAiC9B,CAAC,CAAC+B,KAAnC,GAA2C,UAA3C,GAC5B6O,gBAD4B,IACR3B,QAAQ,GAAG,EAAH,GAAQ,UADR,CAA5B,CAAP;AAEH,mBALL;AAMH;AACJ,eAXD,EATyD,CAqBzD;;AACA7M,cAAAA,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,sBAAb,EAAqCmD,IAArC,CAA0C,YAAY;AAClD,oBAAIyH,SAAS,GAAG9K,CAAC,CAAC,IAAD,CAAjB;AACA,oBAAI2O,YAAY,GAAG7D,SAAS,CAAC3D,IAAV,CAAe,MAAf,CAAnB;AACA,oBAAIyH,aAAa,GAAG9D,SAAS,CAACjD,GAAV,EAApB;AAEAiD,gBAAAA,SAAS,CAAC3D,IAAV,CAAe,MAAf,EAAuBwH,YAAY,CAACzF,OAAb,CAAqBoF,SAArB,EAAgCT,SAAhC,CAAvB;AACA/C,gBAAAA,SAAS,CAACjD,GAAV,CAAc+G,aAAa,CAAC1F,OAAd,CAAsBqF,gBAAtB,EAAwCC,gBAAxC,CAAd;AACH,eAPD;AAQH,aA9BD,EANsD,CAqCtD;;AACA,gBAAI,OAAOjJ,IAAI,CAACsJ,SAAZ,KAA0B,WAA9B,EAA2C;AACvC;AACA,kBAAIC,YAAY,GAAG9O,CAAC,CAACA,CAAC,CAAC+O,SAAF,CAAYxJ,IAAI,CAACsJ,SAAjB,CAAD,CAApB;AACA,kBAAIG,QAAQ,GAAGF,YAAY,CAAC5O,IAAb,CAAkB,WAAlB,EAA+B+O,IAA/B,CAAoC,KAApC,EAA2C9E,MAA3C,GAAoDxE,IAApD,EAAf;AACA,kBAAIuJ,KAAK,GAAGJ,YAAY,CAAC5O,IAAb,CAAkB,QAAlB,EAA4B+O,IAA5B,CAAiC,KAAjC,EAAwC9E,MAAxC,GAAiDxE,IAAjD,EAAZ,CAJuC,CAKvC;;AACA,kBAAI,OAAOqJ,QAAP,KAAoB,WAApB,IAAmC,OAAOE,KAAP,KAAiB,WAAxD,EAAqE;AACjElP,gBAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,eAAZ,EAA6BiP,GAA7B,CAAiCnP,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,eAAZ,EAA6BkP,IAA7B,EAAjC,EAAsEC,MAAtE;AACA,oBAAIC,cAAc,GAAGtP,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,eAAZ,CAArB,CAFiE,CAGjE;;AACA,oBAAIoP,cAAc,CAACpP,IAAf,CAAoB,cAApB,EAAoC0D,MAApC,GAA6C,CAAjD,EAAoD;AAChD0L,kBAAAA,cAAc,CAACnD,QAAf,GAA0BvL,EAA1B,CAA6B,CAA7B,EAAgCyO,MAAhC;AACAC,kBAAAA,cAAc,CAACnD,QAAf,GAA0BvL,EAA1B,CAA6B,CAA7B,EAAgCyO,MAAhC;AACAC,kBAAAA,cAAc,CAAC1E,MAAf,CAAsBoE,QAAQ,GAAGE,KAAjC;AACH,iBAJD,MAIO;AACHI,kBAAAA,cAAc,CAAC1E,MAAf,CAAsBoE,QAAQ,GAAGE,KAAjC;AACH;;AACDrJ,gBAAAA,SAAS,CAAC0J,YAAV,CAAuBD,cAAvB;AACH;AACJ,aAzDqD,CA0DtD;;;AACA1R,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf,EAAqBqE,IAArB,EA3DsD,CA6DtD;;AACAvF,YAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,iBAAZ,EAA+BqD,IAA/B,GA9DsD,CA+DtD;;AACAvD,YAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,cAAZ,EACK4C,WADL,CACiB,aADjB,EAEKyC,IAFL,CAEU,OAFV,EAEmB,IAFnB,EAGKA,IAHL,CAGU,eAHV,EAG2B,IAH3B;AAKA3H,YAAAA,CAAC,CAACuB,YAAF,GAAiB,KAAjB;AACH,WAtED,MAsEO;AACH0G,YAAAA,SAAS,CAACC,eAAV,CAA0BP,IAAI,CAACK,KAA/B,EAAsC,KAAtC;;AACA,gBAAI,CAAChI,CAAC,CAACsB,eAAP,EAAwB;AACpBc,cAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,cAAZ,EACK4C,WADL,CACiB,aADjB;AAEH;AACJ;AACJ;AA3FF,OAAP,EA4FG0M,IA5FH,CA4FQ,YAAY;AAChB,YAAIlH,OAAO,KAAK9K,SAAZ,IAAyB8K,OAAO,CAAC6F,IAArC,EAA2C;AACvCvQ,UAAAA,CAAC,CAACoJ,YAAF,CAAesB,OAAO,CAACrB,IAAvB;AACH;AACJ,OAhGD,EA5L+B,CA4R3B;AACP,KAz4CG;;AA24CJ;AACR;AACA;AACA;AACA;AACQwI,IAAAA,cAAc,EAAE,YAAY;AACxB;AACZ;AACA;AACY,UAAIhH,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,UAAI6Q,YAAY,GAAG,EAAnB,CALwB,CAKD;;AAEvB,UAAIC,UAAU,GAAG,KAAjB;AAEA;AACZ;AACA;AACA;;AACY,UAAIvF,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA;AACZ;AACA;;AACY,UAAIiF,eAAe,GAAG,EAAtB;AAEA;AACZ;AACA;;AACY,UAAIhF,MAAM,GAAG1I,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,gBAAhB,EAAkCgF,EAAlC,CAAqC,UAArC,CAAb;;AAEA,UAAIlF,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,YAAhB,EAA8BgF,EAA9B,CAAiC,oBAAjC,CAAJ,EAA4D;AACxD;AACAyK,QAAAA,UAAU,GAAG,KAAb;AACH,OAHD,MAGO,IAAIjH,MAAJ,EAAY;AACf,YAAI,CAAC9K,CAAC,CAACoB,iBAAP,EAA0B;AACtB0O,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6B,IAA7B;AACAuF,UAAAA,UAAU,GAAG,IAAb;AACH;AACJ,OALM,MAKA;AACH,YAAIlH,UAAU,CAACvD,EAAX,CAAc,MAAd,CAAJ,EAA2B;AACvBwI,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BpK,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,EAA7B;AACH,SAFD,MAEO,IAAIY,UAAU,CAACvD,EAAX,CAAc,MAAd,CAAJ,EAA2B;AAC9BwK,UAAAA,YAAY,GAAG1P,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,QAAhB,CAAf;AACAwN,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BsF,YAAY,CAACE,GAAb,CAAiB,YAAY;AACtD,mBAAO5P,CAAC,CAAC,IAAD,CAAD,CAAQ6H,GAAR,EAAP;AACH,WAF4B,EAE1BiB,GAF0B,GAEpBsC,IAFoB,CAEf,GAFe,CAA7B;AAGH,SALM,MAKA,IAAI3C,UAAU,CAACvD,EAAX,CAAc,kBAAd,CAAJ,EAAuC;AAC1C;AACA;AACA;AACAwI,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BpK,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,EAA7B;AACH,SALM,MAKA,IAAIY,UAAU,CAACtE,QAAX,CAAoB,KAApB,CAAJ,EAAgC;AACnC,cAAInE,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,GAAmCgI,KAAnC,CAAyC,mBAAzC,MAAkE,IAAtE,EAA4E;AACxEnC,YAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BpK,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,EAA7B;AACH,WAFD,MAEO;AACH,gBAAIiI,QAAQ,GAAG,kDAAkDC,QAAQ,CAACC,gBAA3D,GAA8E,QAA7F;AACAnK,YAAAA,SAAS,CAACC,eAAV,CAA0BgK,QAA1B,EAAoC,KAApC;AACApC,YAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BvE,SAAS,CAAC4B,YAAV,CAAuB7J,CAAC,CAACiB,eAAzB,CAA7B;AACH;AACJ,SARM,MAQA;AACH6O,UAAAA,eAAe,CAACtD,SAAD,CAAf,GAA6BpK,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAAD,CAAWlH,IAAX,CAAgB,WAAhB,EAA6B2H,GAA7B,EAA7B;AACH;;AACD,YAAIjK,CAAC,CAACoB,iBAAF,IAAuB0O,eAAe,CAACtD,SAAD,CAAf,KAA+BvE,SAAS,CAAC4B,YAAV,CAAuB7J,CAAC,CAACiB,eAAzB,CAA1D,EAAqG;AACjG8Q,UAAAA,UAAU,GAAG,IAAb;AACH;AACJ;;AAED,UAAIA,UAAJ,EAAgB;AACZ3P,QAAAA,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAD,CAAqBuB,QAArB,CAA8B,aAA9B,EACKmF,IADL,CACU,OADV,EACmBmI,eAAe,CAACtD,SAAD,CADlC;;AAEA,YAAIxM,CAAC,CAACsB,eAAN,EAAuB;AACnBc,UAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,iBAAZ,EAA+BiC,IAA/B;AACH;;AACDvE,QAAAA,CAAC,CAACuB,YAAF,GAAiB,IAAjB;AACH;;AAED,aAAOwQ,UAAP;AACH,KAx9CG;;AA09CJ;AACR;AACA;AACA;AACA;AACA;AACQpH,IAAAA,oBAAoB,EAAE,UAAUD,OAAV,EAAmB;AACrC,UAAI2H,KAAK,GAAGrS,CAAC,CAAC6R,cAAF,EAAZ,CADqC,CAErC;;AACA,UAAI,CAAC7R,CAAC,CAACsB,eAAP,EAAwB;AACpB;AACA,YAAI+Q,KAAJ,EAAW;AACP;AACA,cAAI3H,OAAO,KAAK9K,SAAZ,IAAyB8K,OAAO,CAAC6F,IAArC,EAA2C;AACvCvQ,YAAAA,CAAC,CAACwO,cAAF,CAAiB9D,OAAjB;AACH,WAFD,MAEO;AACH1K,YAAAA,CAAC,CAACwO,cAAF;AACH,WANM,CAOX;;AACC,SARD,MAQO;AACH;AACA,cAAI9D,OAAO,KAAK9K,SAAZ,IAAyB8K,OAAO,CAAC6F,IAArC,EAA2C;AACvCvQ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf;AACAtD,YAAAA,CAAC,CAACoJ,YAAF,CAAesB,OAAO,CAACrB,IAAvB,EAFuC,CAG3C;AACC,WAJD,MAIO;AACHrJ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf;AACH;AACJ,SAnBmB,CAoBxB;;AACC,OArBD,MAqBO;AACH;AACA,YAAI+O,KAAJ,EAAW;AACP;AACA,cAAI3H,OAAO,KAAK9K,SAAZ,IAAyB8K,OAAO,CAAC6F,IAArC,EAA2C;AACvCvQ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf,EAAqB,IAArB,EAA2B,KAA3B,EAAkCoH,OAAlC;AACA1K,YAAAA,CAAC,CAACoJ,YAAF,CAAesB,OAAO,CAACrB,IAAvB,EAFuC,CAG3C;AACC,WAJD,MAIO;AACHrJ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf,EAAqB,IAArB;AACH;AACJ,SATD,MASO;AACH;AACA,cAAIoH,OAAO,KAAK9K,SAAZ,IAAyB8K,OAAO,CAAC6F,IAArC,EAA2C;AACvCvQ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf,EAAqB,KAArB,EAA4B,KAA5B,EAAmCoH,OAAnC;AACA1K,YAAAA,CAAC,CAACoJ,YAAF,CAAesB,OAAO,CAACrB,IAAvB,EAFuC,CAG3C;AACC,WAJD,MAIO;AACHrJ,YAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf;AACH;AACJ;AACJ;AACJ,KA9gDG;;AAghDJ;AACR;AACA;AACQgP,IAAAA,aAAa,EAAE,YAAY;AACvB;AACAtS,MAAAA,CAAC,CAACqC,IAAF,GAASa,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAT;AACA9H,MAAAA,CAAC,CAACqC,IAAF,CAAO0K,SAAP,GAAmB,MAAnB,CAHuB,CAKvB;;AACA,UAAInH,aAAa,GAAGxD,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBuD,KAAlB,GAA0BvD,IAA1B,CAA+B,cAA/B,CAApB,CANuB,CAQvB;;AACAsD,MAAAA,aAAa,CAACH,IAAd,CAAmB,YAAY;AAC3B,YAAI8M,EAAE,GAAGrP,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAT,CAD2B,CACa;;AACxC1F,QAAAA,CAAC,CAACmQ,EAAD,CAAD,CAAM/P,QAAN,CAAe,WAAf,EACKwJ,EADL,CACQ,WADR,EACqB,UAAU/J,CAAV,EAAa;AAC1BjC,UAAAA,CAAC,CAACgC,YAAF,CAAeC,CAAf,EAAkB,IAAlB;AACH,SAHL;AAIAG,QAAAA,CAAC,CAACpC,CAAC,CAACqC,IAAH,CAAD,CAAU2K,MAAV,CAAiBuF,EAAjB;AACH,OAPD;AAQAvS,MAAAA,CAAC,CAACgF,QAAF,GAjBuB,CAmBvB;;AACA5C,MAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUC,OAAV,CAAkBzS,CAAC,CAACqC,IAApB;AACH,KAxiDG;;AA0iDJ;AACR;AACA;AACQqQ,IAAAA,cAAc,EAAE,YAAY;AACxB1S,MAAAA,CAAC,CAACwD,IAAF,GAASN,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAT,CADwB,CACoB;;AAC5C9H,MAAAA,CAAC,CAAC8D,QAAF,GAAaZ,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAb,CAFwB,CAEoB;AAE5C;;AACA9H,MAAAA,CAAC,CAACwD,IAAF,CAAOuJ,SAAP,GAAmB,MAAnB;AACA3K,MAAAA,CAAC,CAACpC,CAAC,CAACwD,IAAH,CAAD,CAAUmC,IAAV,GANwB,CAQxB;;AACA3F,MAAAA,CAAC,CAAC8D,QAAF,CAAWiJ,SAAX,GAAuB,UAAvB;AACA3K,MAAAA,CAAC,CAACpC,CAAC,CAAC8D,QAAH,CAAD,CAAcV,GAAd,CAAkB,YAAlB,EAAgC,QAAhC,EAVwB,CAUoB;AAE5C;;AACApD,MAAAA,CAAC,CAACQ,WAAF,GAAgB2R,QAAQ,CAACQ,eAAzB,CAbwB,CAexB;;AACA,UAAI/M,aAAa,GAAGxD,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBuD,KAAlB,GAA0BvD,IAA1B,CAA+B,cAA/B,CAApB,CAhBwB,CAkBxB;;AACA,UAAIsQ,SAAS,GAAGxQ,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,YAAZ,CAAhB,CAnBwB,CAmBqB;;AAC7C,UAAI6E,CAAJ;;AACA,UAAIyL,SAAS,CAAC5M,MAAV,GAAmB,CAAvB,EAA0B;AACtBhG,QAAAA,CAAC,CAACI,QAAF,GAAawS,SAAS,CAAC3I,GAAV,GAAgB4I,KAAhB,CAAsB,GAAtB,CAAb;;AACA,aAAK1L,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGnH,CAAC,CAACI,QAAF,CAAW4F,MAA3B,EAAmCmB,CAAC,EAApC,EAAwC;AACpCnH,UAAAA,CAAC,CAACI,QAAF,CAAW+G,CAAX,IAAgBqE,QAAQ,CAACxL,CAAC,CAACI,QAAF,CAAW+G,CAAX,CAAD,EAAgB,EAAhB,CAAxB;AACH;AACJ,OALD,MAKO;AACHnH,QAAAA,CAAC,CAACI,QAAF,GAAa,EAAb;;AACA,aAAK+G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGvB,aAAa,CAACI,MAA9B,EAAsCmB,CAAC,EAAvC,EAA2C;AACvCnH,UAAAA,CAAC,CAACI,QAAF,CAAWoP,IAAX,CAAgBrI,CAAhB;AACH;AACJ,OA/BuB,CAiCxB;;;AACA/E,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,cAAZ,EACK0J,EADL,CACQ,WADR,EACqB,UAAU/J,CAAV,EAAa;AAC1BG,QAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO7F,QAAP,CAAgB,eAAhB;;AACA,YAAIxC,CAAC,CAACO,mBAAF,GAAwB,CAA5B,EAA+B;AAC3BP,UAAAA,CAAC,CAACuD,gBAAF,CAAmBtB,CAAnB,EAAsB,IAAtB;AACH;AACJ,OANL,EAOK+J,EAPL,CAOQ,YAPR,EAOsB,YAAY;AAC1B,YAAIhM,CAAC,CAACO,mBAAF,GAAwB,CAA5B,EAA+B;AAC3B6B,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,GAAR,CAAY,QAAZ,EAAsB,MAAtB;AACH,SAFD,MAEO;AACHhB,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,GAAR,CAAY,QAAZ,EAAsB,SAAtB;AACH;AACJ,OAbL,EAcK4I,EAdL,CAcQ,YAdR,EAcsB,YAAY;AAC1BhM,QAAAA,CAAC,CAACY,eAAF,GAAoB,KAApB;AACAwB,QAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ0Q,SAAR,CAAkB,QAAlB,EAA4B;AACxBC,UAAAA,OAAO,EAAE/S,CAAC,CAACsI,UAAF;AADe,SAA5B;AAGH,OAnBL,EAoBK0D,EApBL,CAoBQ,UApBR,EAoBoB,UAAU/J,CAAV,EAAa;AACzBA,QAAAA,CAAC,CAACiM,cAAF;AACA,YAAI8E,GAAG,GAAG/K,SAAS,CAACgL,eAAV,CAA0B7Q,CAAC,CAAC,IAAD,CAAD,CAAQuF,IAAR,CAAa,QAAb,CAA1B,CAAV;;AACA,YAAIqL,GAAJ,EAAS;AACL/K,UAAAA,SAAS,CAACC,eAAV,CAA0BiK,QAAQ,CAACe,oBAAnC,EAAyD,KAAzD,EAAgE,SAAhE;AACH,SAFD,MAEO;AACHjL,UAAAA,SAAS,CAACC,eAAV,CAA0BiK,QAAQ,CAACgB,oBAAnC,EAAyD,KAAzD,EAAgE,OAAhE;AACH;AACJ,OA5BL;AA6BA/Q,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,gBAAZ,EACK0J,EADL,CACQ,UADR,EACoB,UAAU/J,CAAV,EAAa;AACzBA,QAAAA,CAAC,CAACkM,eAAF;AACH,OAHL,EA/DwB,CAmExB;;AACA/L,MAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,oBAAZ,EAAkC0J,EAAlC,CAAqC,OAArC,EAA8C,YAAY;AACtDhM,QAAAA,CAAC,CAACkH,eAAF;AACH,OAFD,EApEwB,CAwExB;;AACA9E,MAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUxF,MAAV,CAAiBhN,CAAC,CAAC8D,QAAnB;AACA1B,MAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUxF,MAAV,CAAiBhN,CAAC,CAACwD,IAAnB,EA1EwB,CA4ExB;;AACApB,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,MAAZ,EAAoB0J,EAApB,CAAuB,WAAvB,EAAoC,YAAY;AAC5C,eAAO,KAAP;AACH,OAFD,EA7EwB,CAiFxB;;AACAhM,MAAAA,CAAC,CAACqF,oBAAF;AACH,KAhoDG;;AAkoDJ;AACR;AACA;AACQ+N,IAAAA,YAAY,EAAE,YAAY;AACtBpT,MAAAA,CAAC,CAACgJ,KAAF,GAAU9F,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAV,CADsB,CACsB;;AAC5C9H,MAAAA,CAAC,CAAC2G,KAAF,GAAUzD,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAV,CAFsB,CAEsB;AAE5C;;AACA9H,MAAAA,CAAC,CAACgJ,KAAF,CAAQ+D,SAAR,GAAoB,OAApB,CALsB,CAOtB;;AACA/M,MAAAA,CAAC,CAAC2G,KAAF,CAAQoG,SAAR,GAAoB,OAApB;AACA3K,MAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWhB,IAAX,GATsB,CAWtB;;AACA3F,MAAAA,CAAC,CAACM,cAAF,GAAmB6R,QAAQ,CAACkB,aAA5B,CAZsB,CActB;;AACA,UAAIzN,aAAa,GAAGxD,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,IAAZ,EAAkBuD,KAAlB,GAA0BvD,IAA1B,CAA+B,cAA/B,CAApB;AAEA,UAAI6E,CAAJ,CAjBsB,CAkBtB;;AACA,UAAImM,SAAS,GAAGlR,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,YAAZ,CAAhB,CAnBsB,CAmBuB;;AAC7C,UAAIgR,SAAS,CAACtN,MAAV,GAAmB,CAAvB,EAA0B;AACtBhG,QAAAA,CAAC,CAACK,QAAF,GAAaiT,SAAS,CAACrJ,GAAV,GAAgB4I,KAAhB,CAAsB,GAAtB,CAAb;;AACA,aAAK1L,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGnH,CAAC,CAACK,QAAF,CAAW2F,MAA3B,EAAmCmB,CAAC,EAApC,EAAwC;AACpCnH,UAAAA,CAAC,CAACK,QAAF,CAAW8G,CAAX,IAAgBqE,QAAQ,CAACxL,CAAC,CAACK,QAAF,CAAW8G,CAAX,CAAD,EAAgB,EAAhB,CAAxB;AACH;AACJ,OALD,MAKO;AACHnH,QAAAA,CAAC,CAACK,QAAF,GAAa,EAAb;;AACA,aAAK8G,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGvB,aAAa,CAACI,MAA9B,EAAsCmB,CAAC,EAAvC,EAA2C;AACvCnH,UAAAA,CAAC,CAACK,QAAF,CAAWmP,IAAX,CAAgB,CAAhB;AACH;AACJ,OA9BqB,CAgCtB;;;AACA,UAAI5J,aAAa,CAACI,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,YAAIuN,WAAW,GAAGnR,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,oBAAZ,EAAkCkR,KAAlC,CAAwC,CAAxC,EAA2C,CAA3C,CAAlB;AACAvL,QAAAA,SAAS,CAACwL,OAAV,CACIF,WADJ,EAEI,IAFJ,EAGIpB,QAAQ,CAACuB,eAHb,EAF0B,CAQ1B;;AACAH,QAAAA,WAAW,CAAC9N,IAAZ,CAAiB,YAAY;AACzB,cAAIkO,EAAE,GAAGzQ,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAT,CADyB,CACe;;AACxC1F,UAAAA,CAAC,CAACuR,EAAD,CAAD,CAAMnR,QAAN,CAAe,SAAf,EACKwJ,EADL,CACQ,OADR,EACiB,YAAY;AACrB,gBAAIhM,CAAC,CAAC2G,KAAF,CAAQiN,KAAR,CAAcC,OAAd,KAA0B,MAA9B,EAAsC;AAClC7T,cAAAA,CAAC,CAAC4I,WAAF,CAAc,IAAd;AACH,aAFD,MAEO;AACH5I,cAAAA,CAAC,CAAC+I,WAAF;AACH;AACJ,WAPL;AAQA3G,UAAAA,CAAC,CAACpC,CAAC,CAACgJ,KAAH,CAAD,CAAWgE,MAAX,CAAkB2G,EAAlB;AACH,SAXD,EAT0B,CAsB1B;;AACA3T,QAAAA,CAAC,CAAC2G,KAAF,CAAQmN,SAAR,GAAoB,0BAApB;AACA,YAAIC,QAAQ,GAAG3R,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWrE,IAAX,CAAgB,KAAhB,CAAf;;AAEA,YAAI0R,SAAS,GAAG,YAAY;AACxB,cAAIhU,CAAC,CAACyI,SAAF,CAAYrG,CAAC,CAAC,IAAD,CAAD,CAAQG,KAAR,EAAZ,CAAJ,EAAkC;AAC9BvC,YAAAA,CAAC,CAAC2I,cAAF;AACH;AACJ,SAJD;;AAMA,aAAKxB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGvB,aAAa,CAACI,MAA9B,EAAsCmB,CAAC,EAAvC,EAA2C;AACvC,cAAI8M,UAAU,GAAGrO,aAAa,CAACuB,CAAD,CAA9B;AACA,cAAI+M,QAAQ,GAAGhR,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAf;AACA1F,UAAAA,CAAC,CAAC8R,QAAD,CAAD,CAAYzQ,IAAZ,CAAiBrB,CAAC,CAAC6R,UAAD,CAAD,CAAcxQ,IAAd,EAAjB,EACKgP,OADL,CACa,6BAA6BzS,CAAC,CAACK,QAAF,CAAW8G,CAAX,IAAgB,oBAAhB,GAAuC,EAApE,IAA0E,GADvF;AAEA4M,UAAAA,QAAQ,CAAC/G,MAAT,CAAgBkH,QAAhB,EALuC,CAMvC;;AACA9R,UAAAA,CAAC,CAAC8R,QAAD,CAAD,CAAYlI,EAAZ,CAAe,OAAf,EAAwBgI,SAAxB;AACH,SAxCyB,CAyC1B;;;AACA,YAAIG,OAAO,GAAGjR,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAd;AACA1F,QAAAA,CAAC,CAAC+R,OAAD,CAAD,CAAW3R,QAAX,CAAoB,eAApB,EACKiB,IADL,CACUzD,CAAC,CAACM,cADZ;AAEA8B,QAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAWqG,MAAX,CAAkBmH,OAAlB;AACA/R,QAAAA,CAAC,CAAC+R,OAAD,CAAD,CAAWnI,EAAX,CAAc,OAAd,EAAuB,YAAY;AAC/BhM,UAAAA,CAAC,CAACmJ,cAAF;AACH,SAFD,EA9C0B,CAiD1B;;AACA,YAAIvD,aAAa,CAACI,MAAd,GAAuB,EAA3B,EAA+B;AAC3B,cAAIiH,KAAK,GAAGkH,OAAO,CAACC,SAAR,CAAkB,IAAlB,CAAZ;AACAhS,UAAAA,CAAC,CAACpC,CAAC,CAAC2G,KAAH,CAAD,CAAW8L,OAAX,CAAmBxF,KAAnB;AACA7K,UAAAA,CAAC,CAAC6K,KAAD,CAAD,CAASjB,EAAT,CAAY,OAAZ,EAAqB,YAAY;AAC7BhM,YAAAA,CAAC,CAACmJ,cAAF;AACH,WAFD;AAGH;AACJ,OA1FqB,CA4FtB;;;AACA/G,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,kBAAZ,EAAgC0J,EAAhC,CAAmC,YAAnC,EAAiD,YAAY;AACzDhM,QAAAA,CAAC,CAAC+I,WAAF;AACH,OAFD,EA7FsB,CAiGtB;;AACA,UAAIsL,OAAO,GAAGjS,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,iBAAZ,CAAd;AACAF,MAAAA,CAAC,CAACiS,OAAD,CAAD,CAAWrH,MAAX,CAAkBhN,CAAC,CAACgJ,KAApB;AACA5G,MAAAA,CAAC,CAACiS,OAAD,CAAD,CAAWrH,MAAX,CAAkBhN,CAAC,CAAC2G,KAApB,EApGsB,CAsGtB;;AACA3G,MAAAA,CAAC,CAACiF,SAAF;AACH,KA7uDG;;AA+uDJ;AACR;AACA;AACA;AACA;AACA;AACQqP,IAAAA,MAAM,EAAE,UAAUrS,CAAV,EAAa;AACjBA,MAAAA,CAAC,CAACiM,cAAF;AACA,UAAIrD,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,UAAIuL,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA,UAAIyB,WAAW,GAAGzB,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCvD,IAAjC,CAAsC,eAAtC,EAAuD2H,GAAvD,EAAlB;;AACA,UAAI,OAAOqC,WAAP,KAAuB,WAA3B,EAAwC;AACpCA,QAAAA,WAAW,GAAG,EAAd;AACH;;AACD,UAAIiI,KAAK,GAAG,KAAZ;AACA,UAAIC,QAAJ;AAEA3J,MAAAA,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCoB,OAAjC,CAAyC,OAAzC,EAAkDsH,QAAlD,GAA6D9I,IAA7D,CAAkE,YAAY;AAC1E,YAAIrD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,eAAb,EAA8B2H,GAA9B,OAAwCqC,WAA5C,EAAyD;AACrDiI,UAAAA,KAAK,GAAG,IAAR;AACH;;AACD,YAAI,CAACA,KAAL,EAAY;AACRC,UAAAA,QAAQ,GAAGpS,CAAC,CAAC,IAAD,CAAZ;AACH;AACJ,OAPD;AASA,UAAIqS,OAAJ;;AAEA,UAAIF,KAAK,IAAIC,QAAb,EAAuB;AACnBA,QAAAA,QAAQ,CAACjG,QAAT,CAAkB,IAAlB,EAAwB9I,IAAxB,CAA6B,YAAY;AACrC,cAAIgH,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyB8C,CAAC,CAAC,IAAD,CAA1B,MAAsCoK,SAA1C,EAAqD;AACjDiI,YAAAA,OAAO,GAAG,IAAV;AACH;AACJ,SAJD;AAKH;;AAED,UAAIA,OAAJ,EAAa;AACTzU,QAAAA,CAAC,CAACsD,YAAF,CAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC;AAAEiN,UAAAA,IAAI,EAAG,IAAT;AAAelH,UAAAA,IAAI,EAAGoL;AAAtB,SAApC;AACH;AACJ,KAvxDG;;AAyxDJ;AACR;AACA;AACA;AACA;AACA;AACQC,IAAAA,QAAQ,EAAE,UAAUzS,CAAV,EAAa;AACnBA,MAAAA,CAAC,CAACiM,cAAF;AAEA,UAAIrD,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,UAAIuL,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA,UAAIyB,WAAW,GAAGzB,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCvD,IAAjC,CAAsC,eAAtC,EAAuD2H,GAAvD,EAAlB;;AACA,UAAI,OAAOqC,WAAP,KAAuB,WAA3B,EAAwC;AACpCA,QAAAA,WAAW,GAAG,EAAd;AACH;;AACD,UAAIiI,KAAK,GAAG,KAAZ;AACA,UAAII,QAAJ;AACA,UAAItN,CAAC,GAAG,CAAR;AACA,UAAIuN,YAAY,GAAG,KAAnB;AACA/J,MAAAA,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCoB,OAAjC,CAAyC,OAAzC,EAAkDsH,QAAlD,GAA6D9I,IAA7D,CAAkE,YAAY;AAC1E,YAAIrD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,eAAb,EAA8B2H,GAA9B,OAAwCqC,WAA5C,EAAyD;AACrDiI,UAAAA,KAAK,GAAG,IAAR;AACH;;AACD,YAAIA,KAAJ,EAAW;AACP,cAAIlN,CAAC,IAAI,CAAL,IAAU,CAAEuN,YAAhB,EAA8B;AAC1BD,YAAAA,QAAQ,GAAGvS,CAAC,CAAC,IAAD,CAAZ;AACAwS,YAAAA,YAAY,GAAG,IAAf;AACH,WAHD,MAGO;AACHvN,YAAAA,CAAC;AACJ;AACJ;AACJ,OAZD;AAcA,UAAIoN,OAAJ;;AACA,UAAIF,KAAK,IAAII,QAAb,EAAuB;AACnBA,QAAAA,QAAQ,CAACpG,QAAT,CAAkB,IAAlB,EAAwB9I,IAAxB,CAA6B,YAAY;AACrC,cAAIgH,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyB8C,CAAC,CAAC,IAAD,CAA1B,MAAsCoK,SAA1C,EAAqD;AACjDiI,YAAAA,OAAO,GAAG,IAAV;AACH;AACJ,SAJD;AAKH;;AAED,UAAIA,OAAJ,EAAa;AACTzU,QAAAA,CAAC,CAACsD,YAAF,CAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC;AAAEiN,UAAAA,IAAI,EAAG,IAAT;AAAelH,UAAAA,IAAI,EAAGoL;AAAtB,SAApC;AACH;AACJ,KAv0DG;;AAy0DJ;AACR;AACA;AACA;AACA;AACA;AACQI,IAAAA,QAAQ,EAAE,UAAU5S,CAAV,EAAa;AACnBA,MAAAA,CAAC,CAACiM,cAAF;AAEA,UAAIrD,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,UAAIuL,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA,UAAIyB,WAAW,GAAGzB,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCvD,IAAjC,CAAsC,eAAtC,EAAuD2H,GAAvD,EAAlB;;AACA,UAAI,OAAOqC,WAAP,KAAuB,WAA3B,EAAwC;AACpCA,QAAAA,WAAW,GAAG,EAAd;AACH;;AACD,UAAIiI,KAAK,GAAG,KAAZ;AACA,UAAIO,SAAJ;AACAjK,MAAAA,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCoB,OAAjC,CAAyC,OAAzC,EAAkDsH,QAAlD,GAA6D9I,IAA7D,CAAkE,YAAY;AAC1E,YAAIrD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,eAAb,EAA8B2H,GAA9B,OAAwCqC,WAA5C,EAAyD;AACrDiI,UAAAA,KAAK,GAAG,IAAR;AACAO,UAAAA,SAAS,GAAG1S,CAAC,CAAC,IAAD,CAAb;AACH;AACJ,OALD;AAOA,UAAI2S,QAAJ;AACA,UAAIC,SAAS,GAAG,KAAhB;;AACA,UAAIT,KAAJ,EAAW;AACPO,QAAAA,SAAS,CAACvG,QAAV,CAAmB,cAAnB,EAAmC9I,IAAnC,CAAwC,YAAY;AAChD,cAAIgH,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyB8C,CAAC,CAAC,IAAD,CAA1B,MAAsCoK,SAA1C,EAAqD;AACjDwI,YAAAA,SAAS,GAAG,IAAZ;AACH;;AACD,cAAI,CAACA,SAAL,EAAgB;AACZD,YAAAA,QAAQ,GAAG,IAAX;AACH;AACJ,SAPD;AAQH;;AAED,UAAIA,QAAJ,EAAc;AACV/U,QAAAA,CAAC,CAACsD,YAAF,CAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC;AAAEiN,UAAAA,IAAI,EAAG,IAAT;AAAelH,UAAAA,IAAI,EAAG0L;AAAtB,SAApC;AACH;AACJ,KAl3DG;;AAo3DJ;AACR;AACA;AACA;AACA;AACA;AACQE,IAAAA,SAAS,EAAE,UAAUhT,CAAV,EAAa;AACpBA,MAAAA,CAAC,CAACiM,cAAF;AAEA,UAAIrD,UAAU,GAAGzI,CAAC,CAACpC,CAAC,CAACiB,eAAH,CAAlB;AACA,UAAIuL,SAAS,GAAGC,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyBuL,UAAzB,CAAhB;AAEA,UAAIyB,WAAW,GAAGzB,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCvD,IAAjC,CAAsC,eAAtC,EAAuD2H,GAAvD,EAAlB;;AACA,UAAI,OAAOqC,WAAP,KAAuB,WAA3B,EAAwC;AACpCA,QAAAA,WAAW,GAAG,EAAd;AACH;;AACD,UAAIiI,KAAK,GAAG,KAAZ;AACA,UAAIO,SAAJ;AACA,UAAIzN,CAAC,GAAG,CAAR;AACAwD,MAAAA,UAAU,CAAC5D,OAAX,CAAmB,IAAnB,EAAyBpB,KAAzB,GAAiCoB,OAAjC,CAAyC,OAAzC,EAAkDsH,QAAlD,GAA6D9I,IAA7D,CAAkE,YAAY;AAC1E,YAAIrD,CAAC,CAAC,IAAD,CAAD,CAAQE,IAAR,CAAa,eAAb,EAA8B2H,GAA9B,OAAwCqC,WAA5C,EAAyD;AACrDiI,UAAAA,KAAK,GAAG,IAAR;AACAO,UAAAA,SAAS,GAAG1S,CAAC,CAAC,IAAD,CAAb;AACH;AACJ,OALD;AAOA,UAAI8S,SAAJ;AACA,UAAIF,SAAS,GAAG,KAAhB;AACA,UAAIG,aAAa,GAAG,KAApB;;AACA,UAAIZ,KAAJ,EAAW;AACPO,QAAAA,SAAS,CAACvG,QAAV,CAAmB,cAAnB,EAAmC9I,IAAnC,CAAwC,YAAY;AAChD,cAAIgH,GAAG,CAACC,YAAJ,CAAiBtK,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAlB,EAAyB8C,CAAC,CAAC,IAAD,CAA1B,MAAsCoK,SAA1C,EAAqD;AACjDwI,YAAAA,SAAS,GAAG,IAAZ;AACH;;AACD,cAAIA,SAAJ,EAAe;AACX,gBAAI3N,CAAC,IAAI,CAAL,IAAU,CAAE8N,aAAhB,EAA+B;AAC3BD,cAAAA,SAAS,GAAG,IAAZ;AACAC,cAAAA,aAAa,GAAG,IAAhB;AACH,aAHD,MAGO;AACH9N,cAAAA,CAAC;AACJ;AACJ;AACJ,SAZD;AAaH;;AAED,UAAI6N,SAAJ,EAAe;AACXlV,QAAAA,CAAC,CAACsD,YAAF,CAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC;AAAEiN,UAAAA,IAAI,EAAG,IAAT;AAAelH,UAAAA,IAAI,EAAG6L;AAAtB,SAApC;AACH;AACJ,KAp6DG;;AAs6DJ;AACR;AACA;AACQE,IAAAA,YAAY,EAAE,YAAY;AACtB,eAASC,gBAAT,CAA2BpT,CAA3B,EAA8BoH,IAA9B,EAAoC;AAChC,YAAIrJ,CAAC,CAACe,gBAAN,EAAwB;AACpBf,UAAAA,CAAC,CAAC2K,oBAAF;AACH,SAFD,MAEO;AACH3K,UAAAA,CAAC,CAACoJ,YAAF,CAAeC,IAAf;AACH;;AACDpH,QAAAA,CAAC,CAACkM,eAAF;AACH;;AAED,eAASmH,oBAAT,CAA+BrT,CAA/B,EAAkC;AAC9B,YAAKA,CAAC,CAACkL,OAAF,IAAalL,CAAC,CAACmL,KAAF,KAAY,EAA1B,IAAkCnL,CAAC,CAACsT,MAAF,IAAYtT,CAAC,CAACmL,KAAF,KAAY,EAA9D,EAAmE;AAC/DpN,UAAAA,CAAC,CAACsU,MAAF,CAASrS,CAAT;AACH,SAFD,MAEO,IAAKA,CAAC,CAACkL,OAAF,IAAalL,CAAC,CAACmL,KAAF,KAAY,EAA1B,IAAmCnL,CAAC,CAACsT,MAAF,IAAYtT,CAAC,CAACmL,KAAF,KAAY,EAA/D,EAAoE;AACvEpN,UAAAA,CAAC,CAAC0U,QAAF,CAAWzS,CAAX;AACH,SAFM,MAEA,IAAKA,CAAC,CAACkL,OAAF,IAAalL,CAAC,CAACmL,KAAF,KAAY,EAA1B,IAAkCnL,CAAC,CAACsT,MAAF,IAAYtT,CAAC,CAACmL,KAAF,KAAY,EAA9D,EAAmE;AACtEpN,UAAAA,CAAC,CAAC6U,QAAF,CAAW5S,CAAX;AACH,SAFM,MAEA,IAAKA,CAAC,CAACkL,OAAF,IAAalL,CAAC,CAACmL,KAAF,KAAY,EAA1B,IAAmCnL,CAAC,CAACsT,MAAF,IAAYtT,CAAC,CAACmL,KAAF,KAAY,EAA/D,EAAoE;AACvEpN,UAAAA,CAAC,CAACiV,SAAF,CAAYhT,CAAZ;AACH;AACJ,OApBqB,CAsBtB;;;AACAjC,MAAAA,CAAC,CAAC0J,QAAF,GAAaxG,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAb;AACA9H,MAAAA,CAAC,CAACwJ,KAAF,GAAUxJ,CAAC,CAAC0J,QAAZ;AACA1J,MAAAA,CAAC,CAACyJ,aAAF,GAAkBvG,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAlB,CAzBsB,CA2BtB;;AACA9H,MAAAA,CAAC,CAAC0J,QAAF,CAAWqD,SAAX,GAAuB,OAAvB;AACA3K,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAc3B,IAAd,CAAmB,gEAAnB;AACA3F,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAc/D,IAAd,GA9BsB,CAgCtB;;AACA3F,MAAAA,CAAC,CAACyJ,aAAF,CAAgBsD,SAAhB,GAA4B,OAA5B;AACA3K,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmB1B,IAAnB,CAAwB,8EAAxB;AACA3F,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmB9D,IAAnB,GAnCsB,CAqCtB;;AACA3F,MAAAA,CAAC,CAACkB,YAAF,GAAiBiR,QAAQ,CAACqD,eAA1B;AACAxV,MAAAA,CAAC,CAACwB,eAAF,GAAoB2Q,QAAQ,CAACsD,kBAA7B;AACAzV,MAAAA,CAAC,CAAC2B,cAAF,GAAmBwQ,QAAQ,CAACuD,iBAA5B;AACA1V,MAAAA,CAAC,CAACmB,YAAF,GAAiBgR,QAAQ,CAACwD,WAA1B,CAzCsB,CA2CtB;;AACA3V,MAAAA,CAAC,CAACsB,eAAF,GAAoBc,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,qBAAZ,EAAmC2H,GAAnC,EAApB;AACAjK,MAAAA,CAAC,CAACqB,eAAF,GAAoB4J,YAAY,CAACC,GAAb,CAAiB,YAAjB,CAApB,CA7CsB,CA+CtB;;AACA9I,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,gBAAZ,EACK0J,EADL,CACQ,OADR,EACiB,UAAU/J,CAAV,EAAa;AACtBoT,QAAAA,gBAAgB,CAACpT,CAAD,EAAI,IAAJ,CAAhB,CADsB,CAEtB;;AACA,YAAIG,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAD,CAAYtO,EAAZ,CAAe,cAAf,CAAJ,EAAoC;AAChCrF,UAAAA,CAAC,CAACiM,cAAF;AACH;AACJ,OAPL;AASA9L,MAAAA,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,gBAAZ,EACK0J,EADL,CACQ,OADR,EACiB,UAAU/J,CAAV,EAAa;AACtB,YAAIqH,KAAK,GAAGlH,CAAC,CAAC,IAAD,CAAb,CADsB,CAEtB;AACA;;AACA,YAAIyT,KAAK,GAAGzT,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAb;;AACA,YAAIC,KAAK,CAACvO,EAAN,CAAS,uBAAT,CAAJ,EAAuC;AACnCrF,UAAAA,CAAC,CAACiM,cAAF,GADmC,CAEnC;;AACA,cAAI4H,MAAM,GAAGxM,KAAK,CAAC3B,IAAN,CAAW,QAAX,CAAb;AACAmO,UAAAA,MAAM,GAAI,OAAOA,MAAP,KAAkB,WAAnB,GAAkC,CAAlC,GAAsCA,MAAM,GAAG,CAAxD;;AAEA,cAAIA,MAAM,KAAK,CAAf,EAAkB;AACd;AACA;AACA,gBAAIC,KAAK,GAAGC,UAAU,CAAC,YAAY;AAC/B;AACA;AACAH,cAAAA,KAAK,CAAC3Q,WAAN,CAAkB,MAAlB;AACA+Q,cAAAA,IAAI,CAACC,cAAL,CAAoBC,IAApB,CAAyBN,KAAK,CAAC,CAAD,CAA9B;AACAA,cAAAA,KAAK,CAACrT,QAAN,CAAe,MAAf;AACA8G,cAAAA,KAAK,CAAC3B,IAAN,CAAW,QAAX,EAAqB,CAArB;AACH,aAPqB,EAOnB,GAPmB,CAAtB;AAQA2B,YAAAA,KAAK,CAAC3B,IAAN,CAAW,QAAX,EAAqBmO,MAArB;AACAxM,YAAAA,KAAK,CAAC3B,IAAN,CAAW,OAAX,EAAoBoO,KAApB;AACH,WAbD,MAaO;AAAC;AACJ;AACA;AACAK,YAAAA,YAAY,CAAC9M,KAAK,CAAC3B,IAAN,CAAW,OAAX,CAAD,CAAZ;AACA2B,YAAAA,KAAK,CAAC3B,IAAN,CAAW,QAAX,EAAqB,CAArB,EAJG,CAKH;;AACA0N,YAAAA,gBAAgB,CAACpT,CAAD,EAAI,IAAJ,CAAhB;AACH;AACJ;AACJ,OAlCL,EAmCK+J,EAnCL,CAmCQ,UAnCR,EAmCoB,UAAU/J,CAAV,EAAa;AACzB,YAAIG,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAD,CAAYtO,EAAZ,CAAe,cAAf,CAAJ,EAAoC;AAChCrF,UAAAA,CAAC,CAACiM,cAAF;AACH,SAFD,MAEO;AACHmH,UAAAA,gBAAgB,CAACpT,CAAD,EAAI,IAAJ,CAAhB;AACH;AACJ,OAzCL;AA2CAG,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAcsC,EAAd,CAAiB,SAAjB,EAA4B,wBAA5B,EAAsDsJ,oBAAtD;AAEAlT,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAcpH,IAAd,CAAmB,WAAnB,EAAgC0J,EAAhC,CAAmC,OAAnC,EAA4C,YAAY;AACpDhM,QAAAA,CAAC,CAACmM,YAAF;AACH,OAFD;AAGA/J,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAcsC,EAAd,CAAiB,SAAjB,EAA4B,mBAA5B,EAAiD,UAAU/J,CAAV,EAAa;AAC1D,YAAIA,CAAC,CAACmL,KAAF,KAAY,EAAhB,EAAoB;AAChB;AACAnL,UAAAA,CAAC,CAACiM,cAAF;AACAlO,UAAAA,CAAC,CAAC2K,oBAAF;AACH;AACJ,OAND;AAOAvI,MAAAA,CAAC,CAACpC,CAAC,CAAC0J,QAAH,CAAD,CAAcsC,EAAd,CAAiB,SAAjB,EAA4B,UAAU/J,CAAV,EAAa;AACrC,YAAI,CAACjC,CAAC,CAACgB,sBAAP,EAA+B;AAC3B;AACAiB,UAAAA,CAAC,CAACiM,cAAF;AACH;AACJ,OALD;AAOA9L,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmBuC,EAAnB,CAAsB,SAAtB,EAAiC,2BAAjC,EAA8DsJ,oBAA9D;AAEAlT,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmBnH,IAAnB,CAAwB,WAAxB,EAAqC0J,EAArC,CAAwC,OAAxC,EAAiD,YAAY;AACzDhM,QAAAA,CAAC,CAACmM,YAAF;AACH,OAFD;AAGA/J,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmBuC,EAAnB,CAAsB,SAAtB,EAAiC,mBAAjC,EAAsD,UAAU/J,CAAV,EAAa;AAC/D,YAAIA,CAAC,CAACmL,KAAF,KAAY,EAAZ,IAAkB,CAACnL,CAAC,CAACoU,QAAzB,EAAmC;AAC/B;AACApU,UAAAA,CAAC,CAACiM,cAAF;AACAlO,UAAAA,CAAC,CAAC2K,oBAAF;AACH;AACJ,OAND;AAOAvI,MAAAA,CAAC,CAACpC,CAAC,CAACyJ,aAAH,CAAD,CAAmBuC,EAAnB,CAAsB,SAAtB,EAAiC,UAAU/J,CAAV,EAAa;AAC1C,YAAI,CAACjC,CAAC,CAACgB,sBAAP,EAA+B;AAC3B;AACAiB,UAAAA,CAAC,CAACiM,cAAF;AACH;AACJ,OALD;AAMA9L,MAAAA,CAAC,CAAC,MAAD,CAAD,CAAU4J,EAAV,CAAa,OAAb,EAAsB,UAAU/J,CAAV,EAAa;AAC/B;AACA,YAAIG,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAD,CAAY3O,OAAZ,GAAsB1E,KAAtB,CAA4BH,CAAC,CAACpC,CAAC,CAACwJ,KAAH,CAA7B,MAA4C,CAAC,CAA7C,IACA,CAACpH,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAD,CAAY3O,OAAZ,CAAoB,uBAApB,EAA6CjB,MAD9C,IAEA,CAAC5D,CAAC,CAAC,yCAAD,CAAD,CAA6C4D,MAF9C,IAGA,CAAC5D,CAAC,CAACH,CAAC,CAAC2T,MAAH,CAAD,CAAYU,OAAZ,CAAoB,cAApB,EAAoCtQ,MAHzC,EAIE;AACEhG,UAAAA,CAAC,CAACsD,YAAF;AACH;AACJ,OATD,EASG0I,EATH,CASM,SATN,EASiB,UAAU/J,CAAV,EAAa;AAC1B,YAAIA,CAAC,CAACmL,KAAF,KAAY,EAAZ,IAAkBpN,CAAC,CAACe,gBAAxB,EAA0C;AACtC;AACAf,UAAAA,CAAC,CAACsD,YAAF,CAAe,IAAf;AACH;AACJ,OAdD;AAeAlB,MAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,iBAAZ,EAA+B0J,EAA/B,CAAkC,OAAlC,EAA2C,YAAY;AACnDhM,QAAAA,CAAC,CAACsD,YAAF;AACAtD,QAAAA,CAAC,CAACwO,cAAF;AACH,OAHD;AAIApM,MAAAA,CAAC,CAACmU,MAAD,CAAD,CAAUvK,EAAV,CAAa,cAAb,EAA6B,YAAY;AACrC,YAAIhM,CAAC,CAACuB,YAAN,EAAoB;AAChB,iBAAOvB,CAAC,CAACwB,eAAT;AACH;AACJ,OAJD,EA5JsB,CAkKtB;;AACAY,MAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUxF,MAAV,CAAiBhN,CAAC,CAAC0J,QAAnB;AACAtH,MAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUxF,MAAV,CAAiBhN,CAAC,CAACyJ,aAAnB,EApKsB,CAsKtB;;AACA,UAAI0I,QAAQ,CAACqE,sBAAT,KAAoC5W,SAAxC,EAAmD;AAC/CqI,QAAAA,SAAS,CAACwL,OAAV,CACIrR,CAAC,CAACpC,CAAC,CAACV,CAAH,CAAD,CAAOgD,IAAP,CAAY,oBAAZ,CADJ,EAEI,GAFJ,EAGI6P,QAAQ,CAACqE,sBAHb;AAKH;AACJ;AAvlEG,GAAR;AA0lEA;AACJ;AACA;AAEI;AACA;;AACApU,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,mCAAV,EACKmU,SADL,CACe,YAAY;AACnB,WAAO,kBAAkBtE,QAAQ,CAACuE,iBAA3B,GAA+C,GAA/C,GACHtU,CAAC,CAAC,IAAD,CAAD,CAAQuF,IAAR,CAAa,gBAAb,CADG,GAC8B,WADrC;AAEH,GAJL,EAtmEkF,CA4mElF;;AACAvF,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,wBAAV,EACKmU,SADL,CACe,eADf,EA7mEkF,CAgnElF;;AACAzW,EAAAA,CAAC,CAACwS,IAAF,GAAStP,QAAQ,CAAC4E,aAAT,CAAuB,KAAvB,CAAT,CAjnEkF,CAinEtC;AAE5C;;AACA9H,EAAAA,CAAC,CAACV,CAAF,GAAMA,CAAN,CApnEkF,CAsnElF;;AACAU,EAAAA,CAAC,CAACqI,CAAF,GAAMjG,CAAC,CAAC9C,CAAD,CAAD,CAAK2H,OAAL,CAAa,kBAAb,CAAN,CAvnEkF,CAynElF;;AACA,MAAIrB,aAAa,GAAGxD,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,IAAV,EAAgBuD,KAAhB,GAAwBvD,IAAxB,CAA6B,cAA7B,CAApB,CA1nEkF,CA4nElF;;AACAtC,EAAAA,CAAC,CAACO,mBAAF,GAAwBqF,aAAa,CAAC+Q,MAAd,CAAqB,UAArB,EAAiC3Q,MAAzD,CA7nEkF,CA+nElF;;AACA,MAAI,CAAE5D,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,IAAV,EAAgBuD,KAAhB,GAAwBvD,IAAxB,CAA6B,IAA7B,EAAmCuD,KAAnC,GAA2CU,QAA3C,CAAoD,WAApD,CAAN,EAAwE;AAAG;AACvEvG,IAAAA,CAAC,CAACE,UAAF,GAAekC,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,IAAV,EAAgBuD,KAAhB,GAAwBvD,IAAxB,CAA6B,IAA7B,EAAmCuD,KAAnC,GAA2C6C,IAA3C,CAAgD,SAAhD,CAAf;AACH,GAFD,MAEO;AACH1I,IAAAA,CAAC,CAACE,UAAF,GAAe,CAAf;AACH,GApoEiF,CAsoElF;AACA;;;AACAF,EAAAA,CAAC,CAACG,eAAF,GAAoBiC,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,oBAAZ,EAAkC2H,GAAlC,EAApB,CAxoEkF,CA0oElF;;AACAjK,EAAAA,CAAC,CAACS,QAAF,GAAa0R,QAAQ,CAACyE,WAAtB;AACA5W,EAAAA,CAAC,CAACwI,gBAAF,GAAqB2J,QAAQ,CAAC3J,gBAA9B;AACAxI,EAAAA,CAAC,CAACU,QAAF,GAAayR,QAAQ,CAAC0E,cAAtB;AACA7W,EAAAA,CAAC,CAACW,QAAF,GAAawR,QAAQ,CAAC2E,kBAAtB,CA9oEkF,CAgpElF;;AACA,MAAIC,mBAAmB,GAAG3U,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,0BAAZ,CAA1B;AACAtC,EAAAA,CAAC,CAAC6B,MAAF,GAAWkV,mBAAmB,CAACzU,IAApB,CAAyB,oBAAzB,EAA+C2H,GAA/C,EAAX;AACAjK,EAAAA,CAAC,CAAC8B,EAAF,GAAOiV,mBAAmB,CAACzU,IAApB,CAAyB,gBAAzB,EAA2C2H,GAA3C,EAAP;AACAjK,EAAAA,CAAC,CAAC+B,KAAF,GAAUgV,mBAAmB,CAACzU,IAApB,CAAyB,mBAAzB,EAA8C2H,GAA9C,EAAV,CAppEkF,CAspElF;;AACA7H,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKkD,QAAL,CAAc,WAAd,EAvpEkF,CAypElF;;AACAJ,EAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUpP,GAAV,CAAc,UAAd,EAA0B,UAA1B,EA1pEkF,CA4pElF;;AACAhB,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKmH,MAAL,CAAYzG,CAAC,CAACwS,IAAd;AACApQ,EAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUxF,MAAV,CAAiB1N,CAAjB,EA9pEkF,CAgqElF;;AACA,MAAIK,eAAJ,EAAqB;AACjBK,IAAAA,CAAC,CAACsS,aAAF;AACH,GAnqEiF,CAoqElF;;;AACA,MAAIzS,gBAAgB,IAChBuC,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAO/F,IAAP,CAAY,kBAAZ,EAAgC0D,MAAhC,GAAyC,CAD7C,EACgD;AAC5ChG,IAAAA,CAAC,CAAC0S,cAAF;AACH;;AACD,MAAI5S,cAAJ,EAAoB;AAChBE,IAAAA,CAAC,CAACoT,YAAF;AACH,GA3qEiF,CA4qElF;;;AACA,MAAIrT,iBAAiB,IACjBqC,CAAC,CAAC9C,CAAD,CAAD,CAAKgI,EAAL,CAAQ,OAAR,CADJ,EACsB;AAClBtH,IAAAA,CAAC,CAACoV,YAAF;AACH,GAhrEiF,CAkrElF;;;AACAnN,EAAAA,SAAS,CAACwL,OAAV,CACIrR,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,cAAV,CADJ,EAEI,IAFJ,EAGItC,CAAC,CAACsI,UAAF,EAHJ,EAnrEkF,CAyrElF;;AACAlG,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,gBAAV,EACK0J,EADL,CACQ,YADR,EACsB,YAAY;AAC1BhM,IAAAA,CAAC,CAACa,YAAF,GAAiB,IAAjB;AACAb,IAAAA,CAAC,CAACuI,iBAAF,GAAsB,IAAtB;AACAnG,IAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,cAAV,EAA0BwQ,SAA1B,CAAoC,QAApC,EAA8C;AAC1CC,MAAAA,OAAO,EAAE/S,CAAC,CAACsI,UAAF;AADiC,KAA9C;AAGH,GAPL,EAQK0D,EARL,CAQQ,YARR,EAQsB,YAAY;AAC1BhM,IAAAA,CAAC,CAACa,YAAF,GAAiB,KAAjB;AACAb,IAAAA,CAAC,CAACuI,iBAAF,GAAsB,KAAtB;AACAnG,IAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAKgD,IAAL,CAAU,cAAV,EAA0BwQ,SAA1B,CAAoC,QAApC,EAA8C;AAC1CC,MAAAA,OAAO,EAAE/S,CAAC,CAACsI,UAAF;AADiC,KAA9C;AAGH,GAdL,EA1rEkF,CA0sElF;;AACA,MAAI3I,eAAe,IAAIE,gBAAvB,EAAyC;AACrCuC,IAAAA,CAAC,CAACc,QAAD,CAAD,CAAY8I,EAAZ,CAAe,WAAf,EAA4B,UAAU/J,CAAV,EAAa;AACrCjC,MAAAA,CAAC,CAACqE,QAAF,CAAWpC,CAAX;AACH,KAFD;AAGAG,IAAAA,CAAC,CAACc,QAAD,CAAD,CAAY8I,EAAZ,CAAe,SAAf,EAA0B,UAAU/J,CAAV,EAAa;AACnCG,MAAAA,CAAC,CAACpC,CAAC,CAACqI,CAAH,CAAD,CAAOnD,WAAP,CAAmB,eAAnB;AACAlF,MAAAA,CAAC,CAAC6E,OAAF,CAAU5C,CAAV;AACH,KAHD;AAIH,GAntEiF,CAqtElF;;;AACAG,EAAAA,CAAC,CAAC9C,CAAD,CAAD,CAAK4F,WAAL,CAAiB,MAAjB;AACA9C,EAAAA,CAAC,CAACpC,CAAC,CAACwS,IAAH,CAAD,CAAUhQ,QAAV,CAAmB,MAAnB;AACH,CAxtED;AA0tEA;AACA;AACA;;;AACC,WAAUJ,CAAV,EAAa;AACVA,EAAAA,CAAC,CAAC4U,EAAF,CAAK3T,QAAL,GAAgB,UAAU4T,CAAV,EAAa;AAAE;AAC3B,QAAIC,OAAO,GAAID,CAAC,KAAK,IAAP,GAAe,IAAf,GAAsBA,CAApC;AACA;;AACA,QAAIE,MAAM,GAAGhR,SAAS,CAACC,SAAV,CAAoBE,OAApB,CAA4B,MAA5B,IAAsC,CAAC,CAAvC,IAA4C,CAAC,CAACiQ,MAAM,CAACpQ,SAAP,CAAiBC,SAAjB,CAA2B6L,KAA3B,CAAiC,kBAAjC,CAA3D;AACA,QAAImF,SAAS,GAAGjR,SAAS,CAACC,SAAV,CAAoBE,OAApB,CAA4B,SAA5B,IAAyC,CAAC,CAA1D;AACA,QAAI+Q,QAAQ,GAAGlR,SAAS,CAACC,SAAV,CAAoBE,OAApB,CAA4B,QAA5B,IAAwC,CAAC,CAAxD;AACA,QAAIgR,OAAO,GAAGnR,SAAS,CAACC,SAAV,CAAoBE,OAApB,CAA4B,QAA5B,IAAwC,CAAC,CAAvD;AACA;;AACA,QAAI4Q,OAAJ,EAAa;AACT,aAAO,KAAKzR,IAAL,CAAU,YAAY;AACzB,YAAI0R,MAAM,IAAIE,QAAd,EAAwB;AACpBjV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ4J,EAAR,CAAW,aAAX,EAA0B,KAA1B;AACH,SAFD,MAEO,IAAIoL,SAAJ,EAAe;AAClBhV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,GAAR,CAAY,eAAZ,EAA6B,MAA7B;AACAhB,UAAAA,CAAC,CAAC,MAAD,CAAD,CAAU8H,OAAV,CAAkB,OAAlB;AACH,SAHM,MAGA,IAAIoN,OAAJ,EAAa;AAChBlV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ4J,EAAR,CAAW,WAAX,EAAwB,KAAxB;AACH,SAFM,MAEA;AACH5J,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQmH,IAAR,CAAa,cAAb,EAA6B,IAA7B;AACH;AACJ,OAXM,CAAP;AAYH,KAbD,MAaO;AACH,aAAO,KAAK9D,IAAL,CAAU,YAAY;AACzB,YAAI0R,MAAM,IAAIE,QAAd,EAAwB;AACpBjV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQiM,GAAR,CAAY,aAAZ;AACH,SAFD,MAEO,IAAI+I,SAAJ,EAAe;AAClBhV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQgB,GAAR,CAAY,eAAZ,EAA6B,SAA7B;AACH,SAFM,MAEA,IAAIkU,OAAJ,EAAa;AAChBlV,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQiM,GAAR,CAAY,WAAZ;AACH,SAFM,MAEA;AACHjM,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQyO,UAAR,CAAmB,cAAnB;AACH;AACJ,OAVM,CAAP;AAWH;AACJ,GAlCD,CADU,CAmCP;;AACN,CApCA,EAoCC0G,MApCD,CAAD,C","sources":["webpack://phpmyadmin/./js/src/makegrid.js"],"sourcesContent":["/* global firstDayOfCalendar */ // templates/javascript/variables.twig\n\n/**\n * Create advanced table (resize, reorder, and show/hide columns; and also grid editing).\n * This function is designed mainly for table DOM generated from browsing a table in the database.\n * For using this function in other table DOM, you may need to:\n * - add \"draggable\" class in the table header <th>, in order to make it resizable, sortable or hidable\n * - have at least one non-\"draggable\" header in the table DOM for placing column visibility drop-down arrow\n * - pass the value \"false\" for the parameter \"enableGridEdit\"\n * - adjust other parameter value, to select which features that will be enabled\n *\n * @param t the table DOM element\n * @param enableResize Optional, if false, column resizing feature will be disabled\n * @param enableReorder Optional, if false, column reordering feature will be disabled\n * @param enableVisib Optional, if false, show/hide column feature will be disabled\n * @param enableGridEdit Optional, if false, grid editing feature will be disabled\n */\n// eslint-disable-next-line no-unused-vars\nvar makeGrid = function (t, enableResize, enableReorder, enableVisib, enableGridEdit) {\n    var isResizeEnabled = enableResize === undefined ? true : enableResize;\n    var isReorderEnabled = enableReorder === undefined ? true : enableReorder;\n    var isVisibEnabled = enableVisib === undefined ? true : enableVisib;\n    var isGridEditEnabled = enableGridEdit === undefined ? true : enableGridEdit;\n\n    var g = {\n        /** *********\n         * Constant\n         ***********/\n        minColWidth: 15,\n\n\n        /** *********\n         * Variables, assigned with default value, changed later\n         ***********/\n        actionSpan: 5,              // number of colspan in Actions header in a table\n        tableCreateTime: null,      // table creation time, used for saving column order and visibility to server, only available in \"Browse tab\"\n\n        // Column reordering variables\n        colOrder: [],      // array of column order\n\n        // Column visibility variables\n        colVisib: [],      // array of column visibility\n        showAllColText: '',         // string, text for \"show all\" button under column visibility list\n        visibleHeadersCount: 0,     // number of visible data headers\n\n        // Table hint variables\n        reorderHint: '',            // string, hint for column reordering\n        sortHint: '',               // string, hint for column sorting\n        markHint: '',               // string, hint for column marking\n        copyHint: '',               // string, hint for copy column name\n        showReorderHint: false,\n        showSortHint: false,\n        showMarkHint: false,\n\n        // Grid editing\n        isCellEditActive: false,    // true if current focus is in edit cell\n        isEditCellTextEditable: false,  // true if current edit cell is editable in the text input box (not textarea)\n        currentEditCell: null,      // reference to <td> that currently being edited\n        cellEditHint: '',           // hint shown when doing grid edit\n        gotoLinkText: '',           // \"Go to link\" text\n        wasEditedCellNull: false,   // true if last value of the edited cell was NULL\n        maxTruncatedLen: 0,         // number of characters that can be displayed in a cell\n        saveCellsAtOnce: false,     // $cfg[saveCellsAtOnce]\n        isCellEdited: false,        // true if at least one cell has been edited\n        saveCellWarning: '',        // string, warning text when user want to leave a page with unsaved edited data\n        lastXHR : null,             // last XHR object used in AJAX request\n        isSaving: false,            // true when currently saving edited data, used to handle double posting caused by pressing ENTER in grid edit text box in Chrome browser\n        alertNonUnique: '',         // string, alert shown when saving edited nonunique table\n\n        // Common hidden inputs\n        token: null,\n        server: null,\n        db: null,\n        table: null,\n\n\n        /** **********\n         * Functions\n         ************/\n\n        /**\n         * Start to resize column. Called when clicking on column separator.\n         *\n         * @param e event\n         * @param obj dragged div object\n         */\n        dragStartRsz: function (e, obj) {\n            var n = $(g.cRsz).find('div').index(obj);    // get the index of separator (i.e., column index)\n            $(obj).addClass('colborder_active');\n            g.colRsz = {\n                x0: e.pageX,\n                n: n,\n                obj: obj,\n                objLeft: $(obj).position().left,\n                objWidth: $(g.t).find('th.draggable:visible').eq(n).find('span').outerWidth()\n            };\n            // eslint-disable-next-line compat/compat\n            $(document.body).css('cursor', 'col-resize').noSelect();\n            if (g.isCellEditActive) {\n                g.hideEditCell();\n            }\n        },\n\n        /**\n         * Start to reorder column. Called when clicking on table header.\n         *\n         * @param e event\n         * @param obj table header object\n         */\n        dragStartReorder: function (e, obj) {\n            // prepare the cCpy (column copy) and cPointer (column pointer) from the dragged column\n            $(g.cCpy).text($(obj).text());\n            var objPos = $(obj).position();\n            $(g.cCpy).css({\n                top: objPos.top + 20,\n                left: objPos.left,\n                height: $(obj).height(),\n                width: $(obj).width()\n            });\n            $(g.cPointer).css({\n                top: objPos.top\n            });\n\n            // get the column index, zero-based\n            var n = g.getHeaderIdx(obj);\n\n            g.colReorder = {\n                x0: e.pageX,\n                y0: e.pageY,\n                n: n,\n                newn: n,\n                obj: obj,\n                objTop: objPos.top,\n                objLeft: objPos.left\n            };\n\n            // eslint-disable-next-line compat/compat\n            $(document.body).css('cursor', 'move').noSelect();\n            if (g.isCellEditActive) {\n                g.hideEditCell();\n            }\n        },\n\n        /**\n         * Handle mousemove event when dragging.\n         *\n         * @param e event\n         */\n        dragMove: function (e) {\n            var dx;\n            if (g.colRsz) {\n                dx = e.pageX - g.colRsz.x0;\n                if (g.colRsz.objWidth + dx > g.minColWidth) {\n                    $(g.colRsz.obj).css('left', g.colRsz.objLeft + dx + 'px');\n                }\n            } else if (g.colReorder) {\n                // dragged column animation\n                dx = e.pageX - g.colReorder.x0;\n                $(g.cCpy)\n                    .css('left', g.colReorder.objLeft + dx)\n                    .show();\n\n                // pointer animation\n                var hoveredCol = g.getHoveredCol(e);\n                if (hoveredCol) {\n                    var newn = g.getHeaderIdx(hoveredCol);\n                    g.colReorder.newn = newn;\n                    if (newn !== g.colReorder.n) {\n                        // show the column pointer in the right place\n                        var colPos = $(hoveredCol).position();\n                        var newleft = newn < g.colReorder.n ?\n                            colPos.left :\n                            colPos.left + $(hoveredCol).outerWidth();\n                        $(g.cPointer)\n                            .css({\n                                left: newleft,\n                                visibility: 'visible'\n                            });\n                    } else {\n                        // no movement to other column, hide the column pointer\n                        $(g.cPointer).css('visibility', 'hidden');\n                    }\n                }\n            }\n        },\n\n        /**\n         * Stop the dragging action.\n         *\n         * @param e event\n         */\n        dragEnd: function (e) {\n            if (g.colRsz) {\n                var dx = e.pageX - g.colRsz.x0;\n                var nw = g.colRsz.objWidth + dx;\n                if (nw < g.minColWidth) {\n                    nw = g.minColWidth;\n                }\n                var n = g.colRsz.n;\n                // do the resizing\n                g.resize(n, nw);\n\n                g.reposRsz();\n                g.reposDrop();\n                g.colRsz = false;\n                $(g.cRsz).find('div').removeClass('colborder_active');\n            } else if (g.colReorder) {\n                // shift columns\n                if (g.colReorder.newn !== g.colReorder.n) {\n                    g.shiftCol(g.colReorder.n, g.colReorder.newn);\n                    // assign new position\n                    var objPos = $(g.colReorder.obj).position();\n                    g.colReorder.objTop = objPos.top;\n                    g.colReorder.objLeft = objPos.left;\n                    g.colReorder.n = g.colReorder.newn;\n                    // send request to server to remember the column order\n                    if (g.tableCreateTime) {\n                        g.sendColPrefs();\n                    }\n                    g.refreshRestoreButton();\n                }\n\n                // animate new column position\n                $(g.cCpy).stop(true, true)\n                    .animate({\n                        top: g.colReorder.objTop,\n                        left: g.colReorder.objLeft\n                    }, 'fast')\n                    .fadeOut();\n                $(g.cPointer).css('visibility', 'hidden');\n\n                g.colReorder = false;\n            }\n            // eslint-disable-next-line compat/compat\n            $(document.body).css('cursor', 'inherit').noSelect(false);\n        },\n\n        /**\n         * Resize column n to new width \"nw\"\n         *\n         * @param n zero-based column index\n         * @param nw new width of the column in pixel\n         */\n        resize: function (n, nw) {\n            $(g.t).find('tr').each(function () {\n                $(this).find('th.draggable:visible').eq(n).find('span')\n                    .add($(this).find('td:visible').eq(g.actionSpan + n).find('span'))\n                    .css('width', nw);\n            });\n        },\n\n        /**\n         * Reposition column resize bars.\n         */\n        reposRsz: function () {\n            $(g.cRsz).find('div').hide();\n            var $firstRowCols = $(g.t).find('tr').first().find('th.draggable:visible');\n            var $resizeHandles = $(g.cRsz).find('div').removeClass('condition');\n            $(g.t).find('table.pma_table').find('thead th').first().removeClass('before-condition');\n            for (var n = 0, l = $firstRowCols.length; n < l; n++) {\n                var $col = $($firstRowCols[n]);\n                var colWidth;\n                if (navigator.userAgent.toLowerCase().indexOf('safari') !== -1) {\n                    colWidth = $col.outerWidth();\n                } else {\n                    colWidth = $col.outerWidth(true);\n                }\n                $($resizeHandles[n]).css('left', $col.position().left + colWidth)\n                    .show();\n                if ($col.hasClass('condition')) {\n                    $($resizeHandles[n]).addClass('condition');\n                    if (n > 0) {\n                        $($resizeHandles[n - 1]).addClass('condition');\n                    }\n                }\n            }\n            if ($($resizeHandles[0]).hasClass('condition')) {\n                $(g.t).find('thead th').first().addClass('before-condition');\n            }\n            $(g.cRsz).css('height', $(g.t).height());\n        },\n\n        /**\n         * Shift column from index oldn to newn.\n         *\n         * @param oldn old zero-based column index\n         * @param newn new zero-based column index\n         */\n        shiftCol: function (oldn, newn) {\n            $(g.t).find('tr').each(function () {\n                if (newn < oldn) {\n                    $(this).find('th.draggable').eq(newn)\n                        .add($(this).find('td').eq(g.actionSpan + newn))\n                        .before($(this).find('th.draggable').eq(oldn)\n                            .add($(this).find('td').eq(g.actionSpan + oldn)));\n                } else {\n                    $(this).find('th.draggable').eq(newn)\n                        .add($(this).find('td').eq(g.actionSpan + newn))\n                        .after($(this).find('th.draggable').eq(oldn)\n                            .add($(this).find('td').eq(g.actionSpan + oldn)));\n                }\n            });\n            // reposition the column resize bars\n            g.reposRsz();\n\n            // adjust the column visibility list\n            if (newn < oldn) {\n                $(g.cList).find('.lDiv div').eq(newn)\n                    .before($(g.cList).find('.lDiv div').eq(oldn));\n            } else {\n                $(g.cList).find('.lDiv div').eq(newn)\n                    .after($(g.cList).find('.lDiv div').eq(oldn));\n            }\n            // adjust the colOrder\n            var tmp = g.colOrder[oldn];\n            g.colOrder.splice(oldn, 1);\n            g.colOrder.splice(newn, 0, tmp);\n            // adjust the colVisib\n            if (g.colVisib.length > 0) {\n                tmp = g.colVisib[oldn];\n                g.colVisib.splice(oldn, 1);\n                g.colVisib.splice(newn, 0, tmp);\n            }\n        },\n\n        /**\n         * Find currently hovered table column's header (excluding actions column).\n         *\n         * @param e event\n         * @return {object|undefined} the hovered column's th object or undefined if no hovered column found.\n         */\n        getHoveredCol: function (e) {\n            var hoveredCol;\n            var $headers = $(g.t).find('th.draggable:visible');\n            $headers.each(function () {\n                var left = $(this).offset().left;\n                var right = left + $(this).outerWidth();\n                if (left <= e.pageX && e.pageX <= right) {\n                    hoveredCol = this;\n                }\n            });\n            return hoveredCol;\n        },\n\n        /**\n         * Get a zero-based index from a <th class=\"draggable\"> tag in a table.\n         *\n         * @param obj table header <th> object\n         * @return {number} zero-based index of the specified table header in the set of table headers (visible or not)\n         */\n        getHeaderIdx: function (obj) {\n            return $(obj).parents('tr').find('th.draggable').index(obj);\n        },\n\n        /**\n         * Reposition the columns back to normal order.\n         */\n        restoreColOrder: function () {\n            // use insertion sort, since we already have shiftCol function\n            for (var i = 1; i < g.colOrder.length; i++) {\n                var x = g.colOrder[i];\n                var j = i - 1;\n                while (j >= 0 && x < g.colOrder[j]) {\n                    j--;\n                }\n                if (j !== i - 1) {\n                    g.shiftCol(i, j + 1);\n                }\n            }\n            if (g.tableCreateTime) {\n                // send request to server to remember the column order\n                g.sendColPrefs();\n            }\n            g.refreshRestoreButton();\n        },\n\n        /**\n         * Send column preferences (column order and visibility) to the server.\n         */\n        sendColPrefs: function () {\n            if ($(g.t).is('.ajax')) {   // only send preferences if ajax class\n                if (typeof g.db !== 'string' && typeof g.table !== 'string') {\n                    // The server has nothing to do with it\n                    // Issue: https://github.com/phpmyadmin/phpmyadmin/issues/15658\n                    return;\n                }\n                var postParams = {\n                    'ajax_request': true,\n                    'db': g.db,\n                    'table': g.table,\n                    'token': g.token,\n                    'server': g.server,\n                    'table_create_time': g.tableCreateTime\n                };\n                if (g.colOrder.length > 0) {\n                    $.extend(postParams, { 'col_order': g.colOrder.toString() });\n                }\n                if (g.colVisib.length > 0) {\n                    $.extend(postParams, { 'col_visib': g.colVisib.toString() });\n                }\n                $.post('index.php?route=/sql/set-column-preferences', postParams, function (data) {\n                    if (data.success !== true) {\n                        var $tempDiv = $(document.createElement('div'));\n                        $tempDiv.html(data.error);\n                        $tempDiv.addClass('alert alert-danger');\n                        Functions.ajaxShowMessage($tempDiv, false);\n                    }\n                });\n            }\n        },\n\n        /**\n         * Refresh restore button state.\n         * Make restore button disabled if the table is similar with initial state.\n         */\n        refreshRestoreButton: function () {\n            // check if table state is as initial state\n            var isInitial = true;\n            for (var i = 0; i < g.colOrder.length; i++) {\n                if (g.colOrder[i] !== i) {\n                    isInitial = false;\n                    break;\n                }\n            }\n            // check if only one visible column left\n            var isOneColumn = g.visibleHeadersCount === 1;\n            // enable or disable restore button\n            if (isInitial || isOneColumn) {\n                $(g.o).find('div.restore_column').hide();\n            } else {\n                $(g.o).find('div.restore_column').show();\n            }\n        },\n\n        /**\n         * Update current hint using the boolean values (showReorderHint, showSortHint, etc.).\n         *\n         * @return {string}\n         *\n         */\n        updateHint: function () {\n            var text = '';\n            if (!g.colRsz && !g.colReorder) {     // if not resizing or dragging\n                if (g.visibleHeadersCount > 1) {\n                    g.showReorderHint = true;\n                }\n                if ($(t).find('th.marker').length > 0) {\n                    g.showMarkHint = true;\n                }\n                if (g.showSortHint && g.sortHint) {\n                    text += text.length > 0 ? '<br>' : '';\n                    text += '- ' + g.sortHint;\n                }\n                if (g.showMultiSortHint && g.strMultiSortHint) {\n                    text += text.length > 0 ? '<br>' : '';\n                    text += '- ' + g.strMultiSortHint;\n                }\n                if (g.showMarkHint &&\n                    g.markHint &&\n                    ! g.showSortHint && // we do not show mark hint, when sort hint is shown\n                    g.showReorderHint &&\n                    g.reorderHint\n                ) {\n                    text += text.length > 0 ? '<br>' : '';\n                    text += '- ' + g.reorderHint;\n                    text += text.length > 0 ? '<br>' : '';\n                    text += '- ' + g.markHint;\n                    text += text.length > 0 ? '<br>' : '';\n                    text += '- ' + g.copyHint;\n                }\n            }\n            return text;\n        },\n\n        /**\n         * Toggle column's visibility.\n         * After calling this function and it returns true, afterToggleCol() must be called.\n         *\n         * @param {number} n\n         *\n         * @return {boolean} True if the column is toggled successfully.\n         */\n        toggleCol: function (n) {\n            if (g.colVisib[n]) {\n                // can hide if more than one column is visible\n                if (g.visibleHeadersCount > 1) {\n                    $(g.t).find('tr').each(function () {\n                        $(this).find('th.draggable').eq(n)\n                            .add($(this).find('td').eq(g.actionSpan + n))\n                            .hide();\n                    });\n                    g.colVisib[n] = 0;\n                    $(g.cList).find('.lDiv div').eq(n).find('input').prop('checked', false);\n                } else {\n                    // cannot hide, force the checkbox to stay checked\n                    $(g.cList).find('.lDiv div').eq(n).find('input').prop('checked', true);\n                    return false;\n                }\n            } else {    // column n is not visible\n                $(g.t).find('tr').each(function () {\n                    $(this).find('th.draggable').eq(n)\n                        .add($(this).find('td').eq(g.actionSpan + n))\n                        .show();\n                });\n                g.colVisib[n] = 1;\n                $(g.cList).find('.lDiv div').eq(n).find('input').prop('checked', true);\n            }\n            return true;\n        },\n\n        /**\n         * This must be called if toggleCol() returns is true.\n         *\n         * This function is separated from toggleCol because, sometimes, we want to toggle\n         * some columns together at one time and do just one adjustment after it, e.g. in showAllColumns().\n         */\n        afterToggleCol: function () {\n            // some adjustments after hiding column\n            g.reposRsz();\n            g.reposDrop();\n            g.sendColPrefs();\n\n            // check visible first row headers count\n            g.visibleHeadersCount = $(g.t).find('tr').first().find('th.draggable:visible').length;\n            g.refreshRestoreButton();\n\n            // Display minimum of one column - disable checkbox for hiding last column\n            if (g.visibleHeadersCount <= 1) {\n                $(g.cList).find('.lDiv div').each(function () {\n                    $(this).find('input:checkbox:checked').prop('disabled', true);\n                });\n            } else {\n                // Remove disabled property if showing more than one column\n                $(g.cList).find('.lDiv div').each(function () {\n                    $(this).find('input:checkbox:disabled').prop('disabled', false);\n                });\n            }\n        },\n\n        /**\n         * Show columns' visibility list.\n         *\n         * @param obj The drop down arrow of column visibility list\n         */\n        showColList: function (obj) {\n            // only show when not resizing or reordering\n            if (!g.colRsz && !g.colReorder) {\n                var pos = $(obj).position();\n                $(g.cList).css({\n                    top: pos.top + $(obj).outerHeight(true)\n                })\n                    .show();\n                $(obj).addClass('coldrop-hover');\n            }\n        },\n\n        /**\n         * Hide columns' visibility list.\n         */\n        hideColList: function () {\n            $(g.cList).hide();\n            $(g.cDrop).find('.coldrop-hover').removeClass('coldrop-hover');\n        },\n\n        /**\n         * Reposition the column visibility drop-down arrow.\n         */\n        reposDrop: function () {\n            var $th = $(t).find('th:not(.draggable)');\n            for (var i = 0; i < $th.length; i++) {\n                var $cd = $(g.cDrop).find('div').eq(i);   // column drop-down arrow\n                var pos = $($th[i]).position();\n                $cd.css({\n                    left: pos.left + $($th[i]).width() - $cd.width(),\n                    top: pos.top\n                });\n            }\n        },\n\n        /**\n         * Show all hidden columns.\n         */\n        showAllColumns: function () {\n            for (var i = 0; i < g.colVisib.length; i++) {\n                if (!g.colVisib[i]) {\n                    g.toggleCol(i);\n                }\n            }\n            g.afterToggleCol();\n        },\n\n        /**\n         * Show edit cell, if it can be shown\n         *\n         * @param cell <td> element to be edited\n         */\n        showEditCell: function (cell) {\n            if ($(cell).is('.grid_edit') &&\n                !g.colRsz && !g.colReorder) {\n                if (!g.isCellEditActive) {\n                    var $cell = $(cell);\n\n                    if ('string' === $cell.attr('data-type') ||\n                        'blob' === $cell.attr('data-type') ||\n                        'json' === $cell.attr('data-type')\n                    ) {\n                        g.cEdit = g.cEditTextarea;\n                    } else {\n                        g.cEdit = g.cEditStd;\n                    }\n\n                    // remove all edit area and hide it\n                    $(g.cEdit).find('.edit_area').empty().hide();\n                    // reposition the cEdit element\n                    $(g.cEdit).css({\n                        top: $cell.position().top,\n                        left: $cell.position().left\n                    })\n                        .show()\n                        .find('.edit_box')\n                        .css({\n                            width: $cell.outerWidth(),\n                            height: $cell.outerHeight()\n                        });\n                    // fill the cell edit with text from <td>\n                    var value = Functions.getCellValue(cell);\n                    if ($cell.attr('data-type') === 'json' && $cell.is('.truncated') === false) {\n                        try {\n                            value = JSON.stringify(JSON.parse(value), null, 4);\n                        } catch (e) {\n                            // Show as is\n                        }\n                    }\n                    $(g.cEdit).find('.edit_box').val(value);\n\n                    g.currentEditCell = cell;\n                    $(g.cEdit).find('.edit_box').trigger('focus');\n                    moveCursorToEnd($(g.cEdit).find('.edit_box'));\n                    $(g.cEdit).find('*').prop('disabled', false);\n                }\n            }\n\n            function moveCursorToEnd (input) {\n                var originalValue = input.val();\n                var originallength = originalValue.length;\n                input.val('');\n                input.trigger('blur').trigger('focus').val(originalValue);\n                input[0].setSelectionRange(originallength, originallength);\n            }\n        },\n\n        /**\n         * Remove edit cell and the edit area, if it is shown.\n         *\n         * @param force Optional, force to hide edit cell without saving edited field.\n         * @param data  Optional, data from the POST AJAX request to save the edited field\n         *              or just specify \"true\", if we want to replace the edited field with the new value.\n         * @param field Optional, the edited <td>. If not specified, the function will\n         *              use currently edited <td> from g.currentEditCell.\n         * @param options Optional, this object contains a boolean named move (true, if called from move* functions)\n         *                and a <td> to which the grid_edit should move\n         */\n        hideEditCell: function (force, data, field, options) {\n            if (g.isCellEditActive && !force) {\n                // cell is being edited, save or post the edited data\n                if (options !== undefined) {\n                    g.saveOrPostEditedCell(options);\n                } else {\n                    g.saveOrPostEditedCell();\n                }\n                return;\n            }\n\n            // cancel any previous request\n            if (g.lastXHR !== null) {\n                g.lastXHR.abort();\n                g.lastXHR = null;\n            }\n\n            if (data) {\n                if (g.currentEditCell) {    // save value of currently edited cell\n                    // replace current edited field with the new value\n                    var $thisField = $(g.currentEditCell);\n                    var isNull = $thisField.data('value') === null;\n                    if (isNull) {\n                        $thisField.find('span').html('NULL');\n                        $thisField.addClass('null');\n                    } else {\n                        $thisField.removeClass('null');\n                        var value = data.isNeedToRecheck\n                            ? data.truncatableFieldValue\n                            : $thisField.data('value');\n\n                        // Truncates the text.\n                        $thisField.removeClass('truncated');\n                        if (CommonParams.get('pftext') === 'P' && value.length > g.maxTruncatedLen) {\n                            $thisField.addClass('truncated');\n                            value = value.substring(0, g.maxTruncatedLen) + '...';\n                        }\n\n                        // Add <br> before carriage return.\n                        var newHtml = Functions.escapeHtml(value);\n                        newHtml = newHtml.replace(/\\n/g, '<br>\\n');\n\n                        var decimals = parseInt($thisField.attr('data-decimals'));\n\n                        // remove decimal places if column type not supported\n                        if ((decimals === 0) && ($thisField.attr('data-type').indexOf('time') !== -1)) {\n                            newHtml = newHtml.substring(0, newHtml.indexOf('.'));\n                        }\n\n                        // remove additional decimal places\n                        if ((decimals > 0) && ($thisField.attr('data-type').indexOf('time') !== -1)) {\n                            newHtml = newHtml.substring(0, newHtml.length - (6 - decimals));\n                        }\n\n                        var selector = 'span';\n                        if ($thisField.hasClass('hex') && $thisField.find('a').length) {\n                            selector = 'a';\n                        }\n\n                        // Updates the code keeping highlighting (if any).\n                        var $target = $thisField.find(selector);\n                        if (!Functions.updateCode($target, newHtml, value)) {\n                            $target.html(newHtml);\n                        }\n                    }\n                    if ($thisField.is('.bit')) {\n                        $thisField.find('span').text($thisField.data('value'));\n                    }\n                }\n                if (data.transformations !== undefined) {\n                    $.each(data.transformations, function (cellIndex, value) {\n                        var $thisField = $(g.t).find('.to_be_saved').eq(cellIndex);\n                        $thisField.find('span').html(value);\n                    });\n                }\n                if (data.relations !== undefined) {\n                    $.each(data.relations, function (cellIndex, value) {\n                        var $thisField = $(g.t).find('.to_be_saved').eq(cellIndex);\n                        $thisField.find('span').html(value);\n                    });\n                }\n\n                // refresh the grid\n                g.reposRsz();\n                g.reposDrop();\n            }\n\n            // hide the cell editing area\n            $(g.cEdit).hide();\n            $(g.cEdit).find('.edit_box').trigger('blur');\n            g.isCellEditActive = false;\n            g.currentEditCell = null;\n            // destroy datepicker in edit area, if exist\n            var $dp = $(g.cEdit).find('.hasDatepicker');\n            if ($dp.length > 0) {\n                // eslint-disable-next-line no-underscore-dangle\n                $(document).on('mousedown', $.datepicker._checkExternalClick);\n                $dp.datepicker('destroy');\n                // change the cursor in edit box back to normal\n                // (the cursor become a hand pointer when we add datepicker)\n                $(g.cEdit).find('.edit_box').css('cursor', 'inherit');\n            }\n        },\n\n        /**\n         * Show drop-down edit area when edit cell is focused.\n         */\n        showEditArea: function () {\n            if (!g.isCellEditActive) {   // make sure the edit area has not been shown\n                g.isCellEditActive = true;\n                g.isEditCellTextEditable = false;\n                /**\n                 * @var $td current edited cell\n                 */\n                var $td = $(g.currentEditCell);\n                /**\n                 * @var $editArea the editing area\n                 */\n                var $editArea = $(g.cEdit).find('.edit_area');\n                /**\n                 * @var whereClause WHERE clause for the edited cell\n                 */\n                var whereClause = $td.parent('tr').find('.where_clause').val();\n                /**\n                 * @var fieldName  String containing the name of this field.\n                 * @see Sql.getFieldName()\n                 */\n                var fieldName = Sql.getFieldName($(t), $td);\n                /**\n                 * @var relationCurrValue String current value of the field (for fields that are foreign keyed).\n                 */\n                var relationCurrValue = $td.text();\n                /**\n                 * @var relationKeyOrDisplayColumn String relational key if in 'Relational display column' mode,\n                 * relational display column if in 'Relational key' mode (for fields that are foreign keyed).\n                 */\n                var relationKeyOrDisplayColumn = $td.find('a').attr('title');\n                /**\n                 * @var currValue String current value of the field (for fields that are of type enum or set).\n                 */\n                var currValue = $td.find('span').text();\n\n                // empty all edit area, then rebuild it based on $td classes\n                $editArea.empty();\n\n                // remember this instead of testing more than once\n                var isNull = $td.is('.null');\n\n                // add goto link, if this cell contains a link\n                if ($td.find('a').length > 0) {\n                    var gotoLink = document.createElement('div');\n                    gotoLink.className = 'goto_link';\n                    $(gotoLink).append(g.gotoLinkText + ' ').append($td.find('a').clone());\n                    $editArea.append(gotoLink);\n                }\n\n                g.wasEditedCellNull = false;\n                if ($td.is(':not(.not_null)')) {\n                    // append a null checkbox\n                    $editArea.append('<div class=\"null_div\"><label>NULL:<input type=\"checkbox\"></label></div>');\n\n                    var $checkbox = $editArea.find('.null_div input');\n                    // check if current <td> is NULL\n                    if (isNull) {\n                        $checkbox.prop('checked', true);\n                        g.wasEditedCellNull = true;\n                    }\n\n                    // if the select/editor is changed un-check the 'checkbox_null_<field_name>_<row_index>'.\n                    if ($td.is('.enum, .set')) {\n                        $editArea.on('change', 'select', function () {\n                            $checkbox.prop('checked', false);\n                        });\n                    } else if ($td.is('.relation')) {\n                        $editArea.on('change', 'select', function () {\n                            $checkbox.prop('checked', false);\n                        });\n                        $editArea.on('click', '.browse_foreign', function () {\n                            $checkbox.prop('checked', false);\n                        });\n                    } else {\n                        $(g.cEdit).on('keypress change paste', '.edit_box', function () {\n                            $checkbox.prop('checked', false);\n                        });\n                        // Capture ctrl+v (on IE and Chrome)\n                        $(g.cEdit).on('keydown', '.edit_box', function (e) {\n                            if (e.ctrlKey && e.which === 86) {\n                                $checkbox.prop('checked', false);\n                            }\n                        });\n                        $editArea.on('keydown', 'textarea', function () {\n                            $checkbox.prop('checked', false);\n                        });\n                    }\n                    // if some text is written in textbox automatically unmark the null checkbox and if it is emptied again mark the checkbox.\n                    $(g.cEdit).find('.edit_box').on('input', function () {\n                        if ($(g.cEdit).find('.edit_box').val() !== '') {\n                            $checkbox.prop('checked', false);\n                        } else {\n                            $checkbox.prop('checked', true);\n                        }\n                    });\n                    // if null checkbox is clicked empty the corresponding select/editor.\n                    $checkbox.on('click', function () {\n                        if ($td.is('.enum')) {\n                            $editArea.find('select').val('');\n                        } else if ($td.is('.set')) {\n                            $editArea.find('select').find('option').each(function () {\n                                var $option = $(this);\n                                $option.prop('selected', false);\n                            });\n                        } else if ($td.is('.relation')) {\n                            // if the dropdown is there to select the foreign value\n                            if ($editArea.find('select').length > 0) {\n                                $editArea.find('select').val('');\n                            }\n                        } else {\n                            $editArea.find('textarea').val('');\n                        }\n                        $(g.cEdit).find('.edit_box').val('');\n                    });\n                }\n\n                // reset the position of the edit_area div after closing datetime picker\n                $(g.cEdit).find('.edit_area').css({ 'top' :'0','position':'' });\n\n                var postParams;\n                if ($td.is('.relation')) {\n                    // handle relations\n                    $editArea.addClass('edit_area_loading');\n\n                    // initialize the original data\n                    $td.data('original_data', null);\n\n                    /**\n                     * @var postParams Object containing parameters for the POST request\n                     */\n                    postParams = {\n                        'ajax_request' : true,\n                        'server' : g.server,\n                        'db' : g.db,\n                        'table' : g.table,\n                        'column' : fieldName,\n                        'curr_value' : relationCurrValue,\n                        'relation_key_or_display_column' : relationKeyOrDisplayColumn\n                    };\n\n                    g.lastXHR = $.post('index.php?route=/sql/get-relational-values', postParams, function (data) {\n                        g.lastXHR = null;\n                        $editArea.removeClass('edit_area_loading');\n                        if ($(data.dropdown).is('select')) {\n                            // save original_data\n                            var value = $(data.dropdown).val();\n                            $td.data('original_data', value);\n                            // update the text input field, in case where the \"Relational display column\" is checked\n                            $(g.cEdit).find('.edit_box').val(value);\n                        }\n\n                        $editArea.append(data.dropdown);\n                        $editArea.append('<div class=\"cell_edit_hint\">' + g.cellEditHint + '</div>');\n\n                        // for 'Browse foreign values' options,\n                        // hide the value next to 'Browse foreign values' link\n                        $editArea.find('span.curr_value').hide();\n                        // handle update for new values selected from new window\n                        $editArea.find('span.curr_value').on('change', function () {\n                            $(g.cEdit).find('.edit_box').val($(this).text());\n                        });\n                    }); // end $.post()\n\n                    $editArea.show();\n                    $editArea.on('change', 'select', function () {\n                        $(g.cEdit).find('.edit_box').val($(this).val());\n                    });\n                    g.isEditCellTextEditable = true;\n                } else if ($td.is('.enum')) {\n                    // handle enum fields\n                    $editArea.addClass('edit_area_loading');\n\n                    /**\n                     * @var postParams Object containing parameters for the POST request\n                     */\n                    postParams = {\n                        'ajax_request' : true,\n                        'server' : g.server,\n                        'db' : g.db,\n                        'table' : g.table,\n                        'column' : fieldName,\n                        'curr_value' : currValue\n                    };\n                    g.lastXHR = $.post('index.php?route=/sql/get-enum-values', postParams, function (data) {\n                        g.lastXHR = null;\n                        if (typeof data === 'object' && data.success === false) {\n                            Functions.ajaxShowMessage(data.error, undefined, 'error');\n                            return;\n                        }\n                        $editArea.removeClass('edit_area_loading');\n                        $editArea.append(data.dropdown);\n                        $editArea.append('<div class=\"cell_edit_hint\">' + g.cellEditHint + '</div>');\n                    }); // end $.post()\n\n                    $editArea.show();\n                    $editArea.on('change', 'select', function () {\n                        $(g.cEdit).find('.edit_box').val($(this).val());\n                    });\n                } else if ($td.is('.set')) {\n                    // handle set fields\n                    $editArea.addClass('edit_area_loading');\n\n                    // if the data is truncated, get the full data\n                    if ($td.is('.truncated')) {\n                        postParams = {\n                            'ajax_request': true,\n                            'server': g.server,\n                            'db': g.db,\n                            'table': g.table,\n                            'column': fieldName,\n                            'curr_value': currValue,\n                            'get_full_values': true,\n                            'where_clause': whereClause\n                        };\n                    } else {\n                        postParams = {\n                            'ajax_request': true,\n                            'server': g.server,\n                            'db': g.db,\n                            'table': g.table,\n                            'column': fieldName,\n                            'curr_value': currValue\n                        };\n                    }\n\n                    g.lastXHR = $.post('index.php?route=/sql/get-set-values', postParams, function (data) {\n                        g.lastXHR = null;\n                        if (typeof data === 'object' && data.success === false) {\n                            Functions.ajaxShowMessage(data.error, undefined, 'error');\n                            return;\n                        }\n                        $editArea.removeClass('edit_area_loading');\n                        $editArea.append(data.select);\n                        $td.data('original_data', $(data.select).val().join());\n                        $editArea.append('<div class=\"cell_edit_hint\">' + g.cellEditHint + '</div>');\n                    }); // end $.post()\n\n                    $editArea.show();\n                    $editArea.on('change', 'select', function () {\n                        $(g.cEdit).find('.edit_box').val($(this).val());\n                    });\n                } else if ($td.is('.truncated, .transformed')) {\n                    if ($td.is('.to_be_saved')) {   // cell has been edited\n                        var value = $td.data('value');\n                        $(g.cEdit).find('.edit_box').val(value);\n                        $editArea.append('<textarea></textarea>');\n                        $editArea.find('textarea').val(value);\n                        $editArea\n                            .on('keyup', 'textarea', function () {\n                                $(g.cEdit).find('.edit_box').val($(this).val());\n                            });\n                        $(g.cEdit).on('keyup', '.edit_box', function () {\n                            $editArea.find('textarea').val($(this).val());\n                        });\n                        $editArea.append('<div class=\"cell_edit_hint\">' + g.cellEditHint + '</div>');\n                    } else {\n                        // handle truncated/transformed values values\n                        $editArea.addClass('edit_area_loading');\n\n                        // initialize the original data\n                        $td.data('original_data', null);\n\n                        /**\n                         * @var sqlQuery   String containing the SQL query used to retrieve value of truncated/transformed data\n                         */\n                        var sqlQuery = 'SELECT `' + fieldName + '` FROM `' + g.table + '` WHERE ' + whereClause;\n\n                        // Make the Ajax call and get the data, wrap it and insert it\n                        g.lastXHR = $.post('index.php?route=/sql', {\n                            'server' : g.server,\n                            'db' : g.db,\n                            'ajax_request' : true,\n                            'sql_query' : sqlQuery,\n                            'grid_edit' : true\n                        }, function (data) {\n                            g.lastXHR = null;\n                            $editArea.removeClass('edit_area_loading');\n                            if (typeof data !== 'undefined' && data.success === true) {\n                                if ($td.attr('data-type') === 'json') {\n                                    try {\n                                        data.value = JSON.stringify(JSON.parse(data.value), null, 4);\n                                    } catch (e) {\n                                        // Show as is\n                                    }\n                                }\n                                $td.data('original_data', data.value);\n                                $(g.cEdit).find('.edit_box').val(data.value);\n                            } else {\n                                Functions.ajaxShowMessage(data.error, false);\n                            }\n                        }); // end $.post()\n                    }\n                    g.isEditCellTextEditable = true;\n                } else if ($td.is('.timefield, .datefield, .datetimefield, .timestampfield')) {\n                    var $inputField = $(g.cEdit).find('.edit_box');\n\n                    // remember current datetime value in $input_field, if it is not null\n                    var datetimeValue = !isNull ? $inputField.val() : '';\n\n                    var showMillisec = false;\n                    var showMicrosec = false;\n                    var timeFormat = 'HH:mm:ss';\n                    // check for decimal places of seconds\n                    if (($td.attr('data-decimals') > 0) && ($td.attr('data-type').indexOf('time') !== -1)) {\n                        if (datetimeValue && datetimeValue.indexOf('.') === false) {\n                            datetimeValue += '.';\n                        }\n                        if ($td.attr('data-decimals') > 3) {\n                            showMillisec = true;\n                            showMicrosec = true;\n                            timeFormat = 'HH:mm:ss.lc';\n\n                            if (datetimeValue) {\n                                datetimeValue += '000000';\n                                datetimeValue = datetimeValue.substring(0, datetimeValue.indexOf('.') + 7);\n                                $inputField.val(datetimeValue);\n                            }\n                        } else {\n                            showMillisec = true;\n                            timeFormat = 'HH:mm:ss.l';\n\n                            if (datetimeValue) {\n                                datetimeValue += '000';\n                                datetimeValue = datetimeValue.substring(0, datetimeValue.indexOf('.') + 4);\n                                $inputField.val(datetimeValue);\n                            }\n                        }\n                    }\n\n                    // add datetime picker\n                    Functions.addDatepicker($inputField, $td.attr('data-type'), {\n                        showMillisec: showMillisec,\n                        showMicrosec: showMicrosec,\n                        timeFormat: timeFormat,\n                        firstDay: firstDayOfCalendar\n                    });\n\n                    $inputField.on('keyup', function (e) {\n                        if (e.which === 13) {\n                            // post on pressing \"Enter\"\n                            e.preventDefault();\n                            e.stopPropagation();\n                            g.saveOrPostEditedCell();\n                        } else if (e.which !== 27) {\n                            Functions.toggleDatepickerIfInvalid($td, $inputField);\n                        }\n                    });\n\n                    $inputField.datepicker('show');\n                    Functions.toggleDatepickerIfInvalid($td, $inputField);\n\n                    // unbind the mousedown event to prevent the problem of\n                    // datepicker getting closed, needs to be checked for any\n                    // change in names when updating\n                    // eslint-disable-next-line no-underscore-dangle\n                    $(document).off('mousedown', $.datepicker._checkExternalClick);\n\n                    // move ui-datepicker-div inside cEdit div\n                    var datepickerDiv = $('#ui-datepicker-div');\n                    datepickerDiv.css({ 'top': 0, 'left': 0, 'position': 'relative' });\n                    $(g.cEdit).append(datepickerDiv);\n\n                    // cancel any click on the datepicker element\n                    $editArea.find('> *').on('click', function (e) {\n                        e.stopPropagation();\n                    });\n\n                    g.isEditCellTextEditable = true;\n                } else {\n                    g.isEditCellTextEditable = true;\n                    // only append edit area hint if there is a null checkbox\n                    if ($editArea.children().length > 0) {\n                        $editArea.append('<div class=\"cell_edit_hint\">' + g.cellEditHint + '</div>');\n                    }\n                }\n                if ($editArea.children().length > 0) {\n                    $editArea.show();\n                }\n            }\n        },\n\n        /**\n         * Post the content of edited cell.\n         *\n         * @param options Optional, this object contains a boolean named move (true, if called from move* functions)\n         *                and a <td> to which the grid_edit should move\n         */\n        postEditedCell: function (options) {\n            if (g.isSaving) {\n                return;\n            }\n            g.isSaving = true;\n            /**\n             * @var relationFields Array containing the name/value pairs of relational fields\n             */\n            var relationFields = {};\n            /**\n             * @var relationalDisplay string 'K' if relational key, 'D' if relational display column\n             */\n            var relationalDisplay = $(g.o).find('input[name=relational_display]:checked').val();\n            /**\n             * @var transformFields    Array containing the name/value pairs for transformed fields\n             */\n            var transformFields = {};\n            /**\n             * @var transformationFields   Boolean, if there are any transformed fields in the edited cells\n             */\n            var transformationFields = false;\n            /**\n             * @var fullSqlQuery String containing the complete SQL query to update this table\n             */\n            var fullSqlQuery = '';\n            /**\n             * @var relFieldsList  String, url encoded representation of {@link relations_fields}\n             */\n            var relFieldsList = '';\n            /**\n             * @var transformFieldsList  String, url encoded representation of {@link transformFields}\n             */\n            var transformFieldsList = '';\n            /**\n             * @var fullWhereClause Array containing where clause for updated fields\n             */\n            var fullWhereClause = [];\n            /**\n             * @var isUnique   Boolean, whether the rows in this table is unique or not\n             */\n            var isUnique = $(g.t).find('td.edit_row_anchor').is('.nonunique') ? 0 : 1;\n            /**\n             * multi edit variables\n             */\n            var multiEditFieldsName = [];\n            var multiEditFieldsType = [];\n            var multiEditFields = [];\n            var multiEditFieldsNull = [];\n\n            // alert user if edited table is not unique\n            if (!isUnique) {\n                alert(g.alertNonUnique);\n            }\n\n            // loop each edited row\n            $(g.t).find('td.to_be_saved').parents('tr').each(function () {\n                var $tr = $(this);\n                var whereClause = $tr.find('.where_clause').val();\n                if (typeof whereClause === 'undefined') {\n                    whereClause = '';\n                }\n                fullWhereClause.push(whereClause);\n                var conditionArray = JSON.parse($tr.find('.condition_array').val());\n\n                /**\n                 * multi edit variables, for current row\n                 * @TODO array indices are still not correct, they should be md5 of field's name\n                 */\n                var fieldsName = [];\n                var fieldsType = [];\n                var fields = [];\n                var fieldsNull = [];\n\n                // loop each edited cell in a row\n                $tr.find('.to_be_saved').each(function () {\n                    /**\n                     * @var $thisField    Object referring to the td that is being edited\n                     */\n                    var $thisField = $(this);\n\n                    /**\n                     * @var fieldName  String containing the name of this field.\n                     * @see Sql.getFieldName()\n                     */\n                    var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n                    /**\n                     * @var thisFieldParams   Array temporary storage for the name/value of current field\n                     */\n                    var thisFieldParams = {};\n\n                    if ($thisField.is('.transformed')) {\n                        transformationFields =  true;\n                    }\n                    thisFieldParams[fieldName] = $thisField.data('value');\n\n                    /**\n                     * @var isNull String capturing whether 'checkbox_null_<field_name>_<row_index>' is checked.\n                     */\n                    var isNull = thisFieldParams[fieldName] === null;\n\n                    fieldsName.push(fieldName);\n\n                    if (isNull) {\n                        fieldsNull.push('on');\n                        fields.push('');\n                    } else {\n                        if ($thisField.is('.bit')) {\n                            fieldsType.push('bit');\n                        } else if ($thisField.hasClass('hex')) {\n                            fieldsType.push('hex');\n                        }\n                        fieldsNull.push('');\n                        fields.push($thisField.data('value'));\n\n                        var cellIndex = $thisField.index('.to_be_saved');\n                        if ($thisField.is(':not(.relation, .enum, .set, .bit)')) {\n                            if ($thisField.is('.transformed')) {\n                                transformFields[cellIndex] = {};\n                                $.extend(transformFields[cellIndex], thisFieldParams);\n                            }\n                        } else if ($thisField.is('.relation')) {\n                            relationFields[cellIndex] = {};\n                            $.extend(relationFields[cellIndex], thisFieldParams);\n                        }\n                    }\n                    // check if edited field appears in WHERE clause\n                    if (whereClause.indexOf(Sql.urlEncode(fieldName)) > -1) {\n                        var fieldStr = '`' + g.table + '`.' + '`' + fieldName + '`';\n                        for (var field in conditionArray) {\n                            if (field.indexOf(fieldStr) > -1) {\n                                conditionArray[field] = isNull ? 'IS NULL' : '= \\'' + thisFieldParams[fieldName].replace(/'/g, '\\'\\'') + '\\'';\n                                break;\n                            }\n                        }\n                    }\n                }); // end of loop for every edited cells in a row\n\n                // save new_clause\n                var newClause = '';\n                for (var field in conditionArray) {\n                    newClause += field + ' ' + conditionArray[field] + ' AND ';\n                }\n                newClause = newClause.substring(0, newClause.length - 5); // remove the last AND\n                $tr.data('new_clause', newClause);\n                // save condition_array\n                $tr.find('.condition_array').val(JSON.stringify(conditionArray));\n\n                multiEditFieldsName.push(fieldsName);\n                multiEditFieldsType.push(fieldsType);\n                multiEditFields.push(fields);\n                multiEditFieldsNull.push(fieldsNull);\n            }); // end of loop for every edited rows\n\n            relFieldsList = $.param(relationFields);\n            transformFieldsList = $.param(transformFields);\n\n            // Make the Ajax post after setting all parameters\n            /**\n             * @var postParams Object containing parameters for the POST request\n             */\n            var postParams = { 'ajax_request' : true,\n                'sql_query' : fullSqlQuery,\n                'server' : g.server,\n                'db' : g.db,\n                'table' : g.table,\n                'clause_is_unique' : isUnique,\n                'where_clause' : fullWhereClause,\n                'fields[multi_edit]' : multiEditFields,\n                'fields_name[multi_edit]' : multiEditFieldsName,\n                'fields_type[multi_edit]' : multiEditFieldsType,\n                'fields_null[multi_edit]' : multiEditFieldsNull,\n                'rel_fields_list' : relFieldsList,\n                'do_transformations' : transformationFields,\n                'transform_fields_list' : transformFieldsList,\n                'relational_display' : relationalDisplay,\n                'goto' : encodeURIComponent('index.php?route=/sql'),\n                'submit_type' : 'save'\n            };\n\n            if (!g.saveCellsAtOnce) {\n                $(g.cEdit).find('*').prop('disabled', true);\n                $(g.cEdit).find('.edit_box').addClass('edit_box_posting');\n            } else {\n                $(g.o).find('div.save_edited').addClass('saving_edited_data')\n                    .find('input').prop('disabled', true);    // disable the save button\n            }\n\n            $.ajax({\n                type: 'POST',\n                url: 'index.php?route=/table/replace',\n                data: postParams,\n                success:\n                    function (data) {\n                        g.isSaving = false;\n                        if (!g.saveCellsAtOnce) {\n                            $(g.cEdit).find('*').prop('disabled', false);\n                            $(g.cEdit).find('.edit_box').removeClass('edit_box_posting');\n                        } else {\n                            $(g.o).find('div.save_edited').removeClass('saving_edited_data')\n                                .find('input').prop('disabled', false);  // enable the save button back\n                        }\n                        if (typeof data !== 'undefined' && data.success === true) {\n                            if (typeof options === 'undefined' || ! options.move) {\n                                Functions.ajaxShowMessage(data.message);\n                            }\n\n                            // update where_clause related data in each edited row\n                            $(g.t).find('td.to_be_saved').parents('tr').each(function () {\n                                var newClause = $(this).data('new_clause');\n                                var $whereClause = $(this).find('.where_clause');\n                                var oldClause = $whereClause.val();\n                                var decodedOldClause = oldClause;\n                                var decodedNewClause = newClause;\n\n                                $whereClause.val(newClause);\n                                // update Edit, Copy, and Delete links also\n                                $(this).find('a').each(function () {\n                                    $(this).attr('href', $(this).attr('href').replace(oldClause, newClause));\n                                    // update delete confirmation in Delete link\n                                    if ($(this).attr('href').indexOf('DELETE') > -1) {\n                                        $(this).removeAttr('onclick')\n                                            .off('click')\n                                            .on('click', function () {\n                                                return Functions.confirmLink(this, 'DELETE FROM `' + g.db + '`.`' + g.table + '` WHERE ' +\n                                                       decodedNewClause + (isUnique ? '' : ' LIMIT 1'));\n                                            });\n                                    }\n                                });\n                                // update the multi edit checkboxes\n                                $(this).find('input[type=checkbox]').each(function () {\n                                    var $checkbox = $(this);\n                                    var checkboxName = $checkbox.attr('name');\n                                    var checkboxValue = $checkbox.val();\n\n                                    $checkbox.attr('name', checkboxName.replace(oldClause, newClause));\n                                    $checkbox.val(checkboxValue.replace(decodedOldClause, decodedNewClause));\n                                });\n                            });\n                            // update the display of executed SQL query command\n                            if (typeof data.sql_query !== 'undefined') {\n                                // extract query box\n                                var $resultQuery = $($.parseHTML(data.sql_query));\n                                var sqlOuter = $resultQuery.find('.sqlOuter').wrap('<p>').parent().html();\n                                var tools = $resultQuery.find('.tools').wrap('<p>').parent().html();\n                                // sqlOuter and tools will not be present if 'Show SQL queries' configuration is off\n                                if (typeof sqlOuter !== 'undefined' && typeof tools !== 'undefined') {\n                                    $(g.o).find('.result_query').not($(g.o).find('.result_query').last()).remove();\n                                    var $existingQuery = $(g.o).find('.result_query');\n                                    // If two query box exists update query in second else add a second box\n                                    if ($existingQuery.find('div.sqlOuter').length > 1) {\n                                        $existingQuery.children().eq(3).remove();\n                                        $existingQuery.children().eq(3).remove();\n                                        $existingQuery.append(sqlOuter + tools);\n                                    } else {\n                                        $existingQuery.append(sqlOuter + tools);\n                                    }\n                                    Functions.highlightSql($existingQuery);\n                                }\n                            }\n                            // hide and/or update the successfully saved cells\n                            g.hideEditCell(true, data);\n\n                            // remove the \"Save edited cells\" button\n                            $(g.o).find('div.save_edited').hide();\n                            // update saved fields\n                            $(g.t).find('.to_be_saved')\n                                .removeClass('to_be_saved')\n                                .data('value', null)\n                                .data('original_data', null);\n\n                            g.isCellEdited = false;\n                        } else {\n                            Functions.ajaxShowMessage(data.error, false);\n                            if (!g.saveCellsAtOnce) {\n                                $(g.t).find('.to_be_saved')\n                                    .removeClass('to_be_saved');\n                            }\n                        }\n                    }\n            }).done(function () {\n                if (options !== undefined && options.move) {\n                    g.showEditCell(options.cell);\n                }\n            }); // end $.ajax()\n        },\n\n        /**\n         * Save edited cell, so it can be posted later.\n         *\n         * @return {bool}\n         */\n        saveEditedCell: function () {\n            /**\n             * @var $thisField    Object referring to the td that is being edited\n             */\n            var $thisField = $(g.currentEditCell);\n            var $testElement = ''; // to test the presence of a element\n\n            var needToPost = false;\n\n            /**\n             * @var fieldName  String containing the name of this field.\n             * @see Sql.getFieldName()\n             */\n            var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n            /**\n             * @var thisFieldParams   Array temporary storage for the name/value of current field\n             */\n            var thisFieldParams = {};\n\n            /**\n             * @var isNull String capturing whether 'checkbox_null_<field_name>_<row_index>' is checked.\n             */\n            var isNull = $(g.cEdit).find('input:checkbox').is(':checked');\n\n            if ($(g.cEdit).find('.edit_area').is('.edit_area_loading')) {\n                // the edit area is still loading (retrieving cell data), no need to post\n                needToPost = false;\n            } else if (isNull) {\n                if (!g.wasEditedCellNull) {\n                    thisFieldParams[fieldName] = null;\n                    needToPost = true;\n                }\n            } else {\n                if ($thisField.is('.bit')) {\n                    thisFieldParams[fieldName] = $(g.cEdit).find('.edit_box').val();\n                } else if ($thisField.is('.set')) {\n                    $testElement = $(g.cEdit).find('select');\n                    thisFieldParams[fieldName] = $testElement.map(function () {\n                        return $(this).val();\n                    }).get().join(',');\n                } else if ($thisField.is('.relation, .enum')) {\n                    // for relation and enumeration, take the results from edit box value,\n                    // because selected value from drop-down, new window or multiple\n                    // selection list will always be updated to the edit box\n                    thisFieldParams[fieldName] = $(g.cEdit).find('.edit_box').val();\n                } else if ($thisField.hasClass('hex')) {\n                    if ($(g.cEdit).find('.edit_box').val().match(/^(0x)?[a-f0-9]*$/i) !== null) {\n                        thisFieldParams[fieldName] = $(g.cEdit).find('.edit_box').val();\n                    } else {\n                        var hexError = '<div class=\"alert alert-danger\" role=\"alert\">' + Messages.strEnterValidHex + '</div>';\n                        Functions.ajaxShowMessage(hexError, false);\n                        thisFieldParams[fieldName] = Functions.getCellValue(g.currentEditCell);\n                    }\n                } else {\n                    thisFieldParams[fieldName] = $(g.cEdit).find('.edit_box').val();\n                }\n                if (g.wasEditedCellNull || thisFieldParams[fieldName] !== Functions.getCellValue(g.currentEditCell)) {\n                    needToPost = true;\n                }\n            }\n\n            if (needToPost) {\n                $(g.currentEditCell).addClass('to_be_saved')\n                    .data('value', thisFieldParams[fieldName]);\n                if (g.saveCellsAtOnce) {\n                    $(g.o).find('div.save_edited').show();\n                }\n                g.isCellEdited = true;\n            }\n\n            return needToPost;\n        },\n\n        /**\n         * Save or post currently edited cell, depending on the \"saveCellsAtOnce\" configuration.\n         *\n         * @param options Optional, this object contains a boolean named move (true, if called from move* functions)\n         *                and a <td> to which the grid_edit should move\n         */\n        saveOrPostEditedCell: function (options) {\n            var saved = g.saveEditedCell();\n            // Check if $cfg['SaveCellsAtOnce'] is false\n            if (!g.saveCellsAtOnce) {\n                // Check if need_to_post is true\n                if (saved) {\n                    // Check if this function called from 'move' functions\n                    if (options !== undefined && options.move) {\n                        g.postEditedCell(options);\n                    } else {\n                        g.postEditedCell();\n                    }\n                // need_to_post is false\n                } else {\n                    // Check if this function called from 'move' functions\n                    if (options !== undefined && options.move) {\n                        g.hideEditCell(true);\n                        g.showEditCell(options.cell);\n                    // NOT called from 'move' functions\n                    } else {\n                        g.hideEditCell(true);\n                    }\n                }\n            // $cfg['SaveCellsAtOnce'] is true\n            } else {\n                // If need_to_post\n                if (saved) {\n                    // If this function called from 'move' functions\n                    if (options !== undefined && options.move) {\n                        g.hideEditCell(true, true, false, options);\n                        g.showEditCell(options.cell);\n                    // NOT called from 'move' functions\n                    } else {\n                        g.hideEditCell(true, true);\n                    }\n                } else {\n                    // If this function called from 'move' functions\n                    if (options !== undefined && options.move) {\n                        g.hideEditCell(true, false, false, options);\n                        g.showEditCell(options.cell);\n                    // NOT called from 'move' functions\n                    } else {\n                        g.hideEditCell(true);\n                    }\n                }\n            }\n        },\n\n        /**\n         * Initialize column resize feature.\n         */\n        initColResize: function () {\n            // create column resizer div\n            g.cRsz = document.createElement('div');\n            g.cRsz.className = 'cRsz';\n\n            // get data columns in the first row of the table\n            var $firstRowCols = $(g.t).find('tr').first().find('th.draggable');\n\n            // create column borders\n            $firstRowCols.each(function () {\n                var cb = document.createElement('div'); // column border\n                $(cb).addClass('colborder')\n                    .on('mousedown', function (e) {\n                        g.dragStartRsz(e, this);\n                    });\n                $(g.cRsz).append(cb);\n            });\n            g.reposRsz();\n\n            // attach to global div\n            $(g.gDiv).prepend(g.cRsz);\n        },\n\n        /**\n         * Initialize column reordering feature.\n         */\n        initColReorder: function () {\n            g.cCpy = document.createElement('div');     // column copy, to store copy of dragged column header\n            g.cPointer = document.createElement('div'); // column pointer, used when reordering column\n\n            // adjust g.cCpy\n            g.cCpy.className = 'cCpy';\n            $(g.cCpy).hide();\n\n            // adjust g.cPointer\n            g.cPointer.className = 'cPointer';\n            $(g.cPointer).css('visibility', 'hidden');  // set visibility to hidden instead of calling hide() to force browsers to cache the image in cPointer class\n\n            // assign column reordering hint\n            g.reorderHint = Messages.strColOrderHint;\n\n            // get data columns in the first row of the table\n            var $firstRowCols = $(g.t).find('tr').first().find('th.draggable');\n\n            // initialize column order\n            var $colOrder = $(g.o).find('.col_order');   // check if column order is passed from PHP\n            var i;\n            if ($colOrder.length > 0) {\n                g.colOrder = $colOrder.val().split(',');\n                for (i = 0; i < g.colOrder.length; i++) {\n                    g.colOrder[i] = parseInt(g.colOrder[i], 10);\n                }\n            } else {\n                g.colOrder = [];\n                for (i = 0; i < $firstRowCols.length; i++) {\n                    g.colOrder.push(i);\n                }\n            }\n\n            // register events\n            $(g.t).find('th.draggable')\n                .on('mousedown', function (e) {\n                    $(g.o).addClass('turnOffSelect');\n                    if (g.visibleHeadersCount > 1) {\n                        g.dragStartReorder(e, this);\n                    }\n                })\n                .on('mouseenter', function () {\n                    if (g.visibleHeadersCount > 1) {\n                        $(this).css('cursor', 'move');\n                    } else {\n                        $(this).css('cursor', 'inherit');\n                    }\n                })\n                .on('mouseleave', function () {\n                    g.showReorderHint = false;\n                    $(this).uiTooltip('option', {\n                        content: g.updateHint()\n                    });\n                })\n                .on('dblclick', function (e) {\n                    e.preventDefault();\n                    var res = Functions.copyToClipboard($(this).data('column'));\n                    if (res) {\n                        Functions.ajaxShowMessage(Messages.strCopyColumnSuccess, false, 'success');\n                    } else {\n                        Functions.ajaxShowMessage(Messages.strCopyColumnFailure, false, 'error');\n                    }\n                });\n            $(g.t).find('th.draggable a')\n                .on('dblclick', function (e) {\n                    e.stopPropagation();\n                });\n            // restore column order when the restore button is clicked\n            $(g.o).find('div.restore_column').on('click', function () {\n                g.restoreColOrder();\n            });\n\n            // attach to global div\n            $(g.gDiv).append(g.cPointer);\n            $(g.gDiv).append(g.cCpy);\n\n            // prevent default \"dragstart\" event when dragging a link\n            $(g.t).find('th a').on('dragstart', function () {\n                return false;\n            });\n\n            // refresh the restore column button state\n            g.refreshRestoreButton();\n        },\n\n        /**\n         * Initialize column visibility feature.\n         */\n        initColVisib: function () {\n            g.cDrop = document.createElement('div');    // column drop-down arrows\n            g.cList = document.createElement('div');    // column visibility list\n\n            // adjust g.cDrop\n            g.cDrop.className = 'cDrop';\n\n            // adjust g.cList\n            g.cList.className = 'cList';\n            $(g.cList).hide();\n\n            // assign column visibility related hints\n            g.showAllColText = Messages.strShowAllCol;\n\n            // get data columns in the first row of the table\n            var $firstRowCols = $(g.t).find('tr').first().find('th.draggable');\n\n            var i;\n            // initialize column visibility\n            var $colVisib = $(g.o).find('.col_visib');   // check if column visibility is passed from PHP\n            if ($colVisib.length > 0) {\n                g.colVisib = $colVisib.val().split(',');\n                for (i = 0; i < g.colVisib.length; i++) {\n                    g.colVisib[i] = parseInt(g.colVisib[i], 10);\n                }\n            } else {\n                g.colVisib = [];\n                for (i = 0; i < $firstRowCols.length; i++) {\n                    g.colVisib.push(1);\n                }\n            }\n\n            // make sure we have more than one column\n            if ($firstRowCols.length > 1) {\n                var $colVisibTh = $(g.t).find('th:not(.draggable)').slice(0, 1);\n                Functions.tooltip(\n                    $colVisibTh,\n                    'th',\n                    Messages.strColVisibHint\n                );\n\n                // create column visibility drop-down arrow(s)\n                $colVisibTh.each(function () {\n                    var cd = document.createElement('div'); // column drop-down arrow\n                    $(cd).addClass('coldrop')\n                        .on('click', function () {\n                            if (g.cList.style.display === 'none') {\n                                g.showColList(this);\n                            } else {\n                                g.hideColList();\n                            }\n                        });\n                    $(g.cDrop).append(cd);\n                });\n\n                // add column visibility control\n                g.cList.innerHTML = '<div class=\"lDiv\"></div>';\n                var $listDiv = $(g.cList).find('div');\n\n                var tempClick = function () {\n                    if (g.toggleCol($(this).index())) {\n                        g.afterToggleCol();\n                    }\n                };\n\n                for (i = 0; i < $firstRowCols.length; i++) {\n                    var currHeader = $firstRowCols[i];\n                    var listElmt = document.createElement('div');\n                    $(listElmt).text($(currHeader).text())\n                        .prepend('<input type=\"checkbox\" ' + (g.colVisib[i] ? 'checked=\"checked\" ' : '') + '>');\n                    $listDiv.append(listElmt);\n                    // add event on click\n                    $(listElmt).on('click', tempClick);\n                }\n                // add \"show all column\" button\n                var showAll = document.createElement('div');\n                $(showAll).addClass('showAllColBtn')\n                    .text(g.showAllColText);\n                $(g.cList).append(showAll);\n                $(showAll).on('click', function () {\n                    g.showAllColumns();\n                });\n                // prepend \"show all column\" button at top if the list is too long\n                if ($firstRowCols.length > 10) {\n                    var clone = showAll.cloneNode(true);\n                    $(g.cList).prepend(clone);\n                    $(clone).on('click', function () {\n                        g.showAllColumns();\n                    });\n                }\n            }\n\n            // hide column visibility list if we move outside the list\n            $(g.t).find('td, th.draggable').on('mouseenter', function () {\n                g.hideColList();\n            });\n\n            // attach to first row first col of the grid\n            var thFirst = $(g.t).find('th.d-print-none');\n            $(thFirst).append(g.cDrop);\n            $(thFirst).append(g.cList);\n\n            // some adjustment\n            g.reposDrop();\n        },\n\n        /**\n         * Move currently Editing Cell to Up\n         *\n         * @param e\n         *\n         */\n        moveUp: function (e) {\n            e.preventDefault();\n            var $thisField = $(g.currentEditCell);\n            var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n            var whereClause = $thisField.parents('tr').first().find('.where_clause').val();\n            if (typeof whereClause === 'undefined') {\n                whereClause = '';\n            }\n            var found = false;\n            var $prevRow;\n\n            $thisField.parents('tr').first().parents('tbody').children().each(function () {\n                if ($(this).find('.where_clause').val() === whereClause) {\n                    found = true;\n                }\n                if (!found) {\n                    $prevRow = $(this);\n                }\n            });\n\n            var newCell;\n\n            if (found && $prevRow) {\n                $prevRow.children('td').each(function () {\n                    if (Sql.getFieldName($(g.t), $(this)) === fieldName) {\n                        newCell = this;\n                    }\n                });\n            }\n\n            if (newCell) {\n                g.hideEditCell(false, false, false, { move : true, cell : newCell });\n            }\n        },\n\n        /**\n         * Move currently Editing Cell to Down\n         *\n         * @param e\n         *\n         */\n        moveDown: function (e) {\n            e.preventDefault();\n\n            var $thisField = $(g.currentEditCell);\n            var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n            var whereClause = $thisField.parents('tr').first().find('.where_clause').val();\n            if (typeof whereClause === 'undefined') {\n                whereClause = '';\n            }\n            var found = false;\n            var $nextRow;\n            var j = 0;\n            var nextRowFound = false;\n            $thisField.parents('tr').first().parents('tbody').children().each(function () {\n                if ($(this).find('.where_clause').val() === whereClause) {\n                    found = true;\n                }\n                if (found) {\n                    if (j >= 1 && ! nextRowFound) {\n                        $nextRow = $(this);\n                        nextRowFound = true;\n                    } else {\n                        j++;\n                    }\n                }\n            });\n\n            var newCell;\n            if (found && $nextRow) {\n                $nextRow.children('td').each(function () {\n                    if (Sql.getFieldName($(g.t), $(this)) === fieldName) {\n                        newCell = this;\n                    }\n                });\n            }\n\n            if (newCell) {\n                g.hideEditCell(false, false, false, { move : true, cell : newCell });\n            }\n        },\n\n        /**\n         * Move currently Editing Cell to Left\n         *\n         * @param e\n         *\n         */\n        moveLeft: function (e) {\n            e.preventDefault();\n\n            var $thisField = $(g.currentEditCell);\n            var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n            var whereClause = $thisField.parents('tr').first().find('.where_clause').val();\n            if (typeof whereClause === 'undefined') {\n                whereClause = '';\n            }\n            var found = false;\n            var $foundRow;\n            $thisField.parents('tr').first().parents('tbody').children().each(function () {\n                if ($(this).find('.where_clause').val() === whereClause) {\n                    found = true;\n                    $foundRow = $(this);\n                }\n            });\n\n            var leftCell;\n            var cellFound = false;\n            if (found) {\n                $foundRow.children('td.grid_edit').each(function () {\n                    if (Sql.getFieldName($(g.t), $(this)) === fieldName) {\n                        cellFound = true;\n                    }\n                    if (!cellFound) {\n                        leftCell = this;\n                    }\n                });\n            }\n\n            if (leftCell) {\n                g.hideEditCell(false, false, false, { move : true, cell : leftCell });\n            }\n        },\n\n        /**\n         * Move currently Editing Cell to Right\n         *\n         * @param e\n         *\n         */\n        moveRight: function (e) {\n            e.preventDefault();\n\n            var $thisField = $(g.currentEditCell);\n            var fieldName = Sql.getFieldName($(g.t), $thisField);\n\n            var whereClause = $thisField.parents('tr').first().find('.where_clause').val();\n            if (typeof whereClause === 'undefined') {\n                whereClause = '';\n            }\n            var found = false;\n            var $foundRow;\n            var j = 0;\n            $thisField.parents('tr').first().parents('tbody').children().each(function () {\n                if ($(this).find('.where_clause').val() === whereClause) {\n                    found = true;\n                    $foundRow = $(this);\n                }\n            });\n\n            var rightCell;\n            var cellFound = false;\n            var nextCellFound = false;\n            if (found) {\n                $foundRow.children('td.grid_edit').each(function () {\n                    if (Sql.getFieldName($(g.t), $(this)) === fieldName) {\n                        cellFound = true;\n                    }\n                    if (cellFound) {\n                        if (j >= 1 && ! nextCellFound) {\n                            rightCell = this;\n                            nextCellFound = true;\n                        } else {\n                            j++;\n                        }\n                    }\n                });\n            }\n\n            if (rightCell) {\n                g.hideEditCell(false, false, false, { move : true, cell : rightCell });\n            }\n        },\n\n        /**\n         * Initialize grid editing feature.\n         */\n        initGridEdit: function () {\n            function startGridEditing (e, cell) {\n                if (g.isCellEditActive) {\n                    g.saveOrPostEditedCell();\n                } else {\n                    g.showEditCell(cell);\n                }\n                e.stopPropagation();\n            }\n\n            function handleCtrlNavigation (e) {\n                if ((e.ctrlKey && e.which === 38) || (e.altKey && e.which === 38)) {\n                    g.moveUp(e);\n                } else if ((e.ctrlKey && e.which === 40)  || (e.altKey && e.which === 40)) {\n                    g.moveDown(e);\n                } else if ((e.ctrlKey && e.which === 37) || (e.altKey && e.which === 37)) {\n                    g.moveLeft(e);\n                } else if ((e.ctrlKey && e.which === 39)  || (e.altKey && e.which === 39)) {\n                    g.moveRight(e);\n                }\n            }\n\n            // create cell edit wrapper element\n            g.cEditStd = document.createElement('div');\n            g.cEdit = g.cEditStd;\n            g.cEditTextarea = document.createElement('div');\n\n            // adjust g.cEditStd\n            g.cEditStd.className = 'cEdit';\n            $(g.cEditStd).html('<input class=\"edit_box\" rows=\"1\"><div class=\"edit_area\"></div>');\n            $(g.cEditStd).hide();\n\n            // adjust g.cEdit\n            g.cEditTextarea.className = 'cEdit';\n            $(g.cEditTextarea).html('<textarea class=\"edit_box\" rows=\"1\"></textarea><div class=\"edit_area\"></div>');\n            $(g.cEditTextarea).hide();\n\n            // assign cell editing hint\n            g.cellEditHint = Messages.strCellEditHint;\n            g.saveCellWarning = Messages.strSaveCellWarning;\n            g.alertNonUnique = Messages.strAlertNonUnique;\n            g.gotoLinkText = Messages.strGoToLink;\n\n            // initialize cell editing configuration\n            g.saveCellsAtOnce = $(g.o).find('.save_cells_at_once').val();\n            g.maxTruncatedLen = CommonParams.get('LimitChars');\n\n            // register events\n            $(g.t).find('td.data.click1')\n                .on('click', function (e) {\n                    startGridEditing(e, this);\n                    // prevent default action when clicking on \"link\" in a table\n                    if ($(e.target).is('.grid_edit a')) {\n                        e.preventDefault();\n                    }\n                });\n\n            $(g.t).find('td.data.click2')\n                .on('click', function (e) {\n                    var $cell = $(this);\n                    // In the case of relational link, We want single click on the link\n                    // to goto the link and double click to start grid-editing.\n                    var $link = $(e.target);\n                    if ($link.is('.grid_edit.relation a')) {\n                        e.preventDefault();\n                        // get the click count and increase\n                        var clicks = $cell.data('clicks');\n                        clicks = (typeof clicks === 'undefined') ? 1 : clicks + 1;\n\n                        if (clicks === 1) {\n                            // if there are no previous clicks,\n                            // start the single click timer\n                            var timer = setTimeout(function () {\n                                // temporarily remove ajax class so the page loader will not handle it,\n                                // submit and then add it back\n                                $link.removeClass('ajax');\n                                AJAX.requestHandler.call($link[0]);\n                                $link.addClass('ajax');\n                                $cell.data('clicks', 0);\n                            }, 700);\n                            $cell.data('clicks', clicks);\n                            $cell.data('timer', timer);\n                        } else {// When double clicking a link, switch to edit mode\n                            // this is a double click, cancel the single click timer\n                            // and make the click count 0\n                            clearTimeout($cell.data('timer'));\n                            $cell.data('clicks', 0);\n                            // start grid-editing\n                            startGridEditing(e, this);\n                        }\n                    }\n                })\n                .on('dblclick', function (e) {\n                    if ($(e.target).is('.grid_edit a')) {\n                        e.preventDefault();\n                    } else {\n                        startGridEditing(e, this);\n                    }\n                });\n\n            $(g.cEditStd).on('keydown', 'input.edit_box, select', handleCtrlNavigation);\n\n            $(g.cEditStd).find('.edit_box').on('focus', function () {\n                g.showEditArea();\n            });\n            $(g.cEditStd).on('keydown', '.edit_box, select', function (e) {\n                if (e.which === 13) {\n                    // post on pressing \"Enter\"\n                    e.preventDefault();\n                    g.saveOrPostEditedCell();\n                }\n            });\n            $(g.cEditStd).on('keydown', function (e) {\n                if (!g.isEditCellTextEditable) {\n                    // prevent text editing\n                    e.preventDefault();\n                }\n            });\n\n            $(g.cEditTextarea).on('keydown', 'textarea.edit_box, select', handleCtrlNavigation);\n\n            $(g.cEditTextarea).find('.edit_box').on('focus', function () {\n                g.showEditArea();\n            });\n            $(g.cEditTextarea).on('keydown', '.edit_box, select', function (e) {\n                if (e.which === 13 && !e.shiftKey) {\n                    // post on pressing \"Enter\"\n                    e.preventDefault();\n                    g.saveOrPostEditedCell();\n                }\n            });\n            $(g.cEditTextarea).on('keydown', function (e) {\n                if (!g.isEditCellTextEditable) {\n                    // prevent text editing\n                    e.preventDefault();\n                }\n            });\n            $('html').on('click', function (e) {\n                // hide edit cell if the click is not fromDat edit area\n                if ($(e.target).parents().index($(g.cEdit)) === -1 &&\n                    !$(e.target).parents('.ui-datepicker-header').length &&\n                    !$('.browse_foreign_modal.ui-dialog:visible').length &&\n                    !$(e.target).closest('.dismissable').length\n                ) {\n                    g.hideEditCell();\n                }\n            }).on('keydown', function (e) {\n                if (e.which === 27 && g.isCellEditActive) {\n                    // cancel on pressing \"Esc\"\n                    g.hideEditCell(true);\n                }\n            });\n            $(g.o).find('div.save_edited').on('click', function () {\n                g.hideEditCell();\n                g.postEditedCell();\n            });\n            $(window).on('beforeunload', function () {\n                if (g.isCellEdited) {\n                    return g.saveCellWarning;\n                }\n            });\n\n            // attach to global div\n            $(g.gDiv).append(g.cEditStd);\n            $(g.gDiv).append(g.cEditTextarea);\n\n            // add hint for grid editing feature when hovering \"Edit\" link in each table row\n            if (Messages.strGridEditFeatureHint !== undefined) {\n                Functions.tooltip(\n                    $(g.t).find('.edit_row_anchor a'),\n                    'a',\n                    Messages.strGridEditFeatureHint\n                );\n            }\n        }\n    };\n\n    /** ****************\n     * Initialize grid\n     ******************/\n\n    // wrap all truncated data cells with span indicating the original length\n    // todo update the original length after a grid edit\n    $(t).find('td.data.truncated:not(:has(span))')\n        .wrapInner(function () {\n            return '<span title=\"' + Messages.strOriginalLength + ' ' +\n                $(this).data('originallength') + '\"></span>';\n        });\n\n    // wrap remaining cells, except actions cell, with span\n    $(t).find('th, td:not(:has(span))')\n        .wrapInner('<span></span>');\n\n    // create grid elements\n    g.gDiv = document.createElement('div');     // create global div\n\n    // initialize the table variable\n    g.t = t;\n\n    // enclosing .sqlqueryresults div\n    g.o = $(t).parents('.sqlqueryresults');\n\n    // get data columns in the first row of the table\n    var $firstRowCols = $(t).find('tr').first().find('th.draggable');\n\n    // initialize visible headers count\n    g.visibleHeadersCount = $firstRowCols.filter(':visible').length;\n\n    // assign first column (actions) span\n    if (! $(t).find('tr').first().find('th').first().hasClass('draggable')) {  // action header exist\n        g.actionSpan = $(t).find('tr').first().find('th').first().prop('colspan');\n    } else {\n        g.actionSpan = 0;\n    }\n\n    // assign table create time\n    // table_create_time will only available if we are in \"Browse\" tab\n    g.tableCreateTime = $(g.o).find('.table_create_time').val();\n\n    // assign the hints\n    g.sortHint = Messages.strSortHint;\n    g.strMultiSortHint = Messages.strMultiSortHint;\n    g.markHint = Messages.strColMarkHint;\n    g.copyHint = Messages.strColNameCopyHint;\n\n    // assign common hidden inputs\n    var $commonHiddenInputs = $(g.o).find('div.common_hidden_inputs');\n    g.server = $commonHiddenInputs.find('input[name=server]').val();\n    g.db = $commonHiddenInputs.find('input[name=db]').val();\n    g.table = $commonHiddenInputs.find('input[name=table]').val();\n\n    // add table class\n    $(t).addClass('pma_table');\n\n    // add relative position to global div so that resize handlers are correctly positioned\n    $(g.gDiv).css('position', 'relative');\n\n    // link the global div\n    $(t).before(g.gDiv);\n    $(g.gDiv).append(t);\n\n    // FEATURES\n    if (isResizeEnabled) {\n        g.initColResize();\n    }\n    // disable reordering for result from EXPLAIN or SHOW syntax, which do not have a table navigation panel\n    if (isReorderEnabled &&\n        $(g.o).find('table.navigation').length > 0) {\n        g.initColReorder();\n    }\n    if (isVisibEnabled) {\n        g.initColVisib();\n    }\n    // make sure we have the ajax class\n    if (isGridEditEnabled &&\n        $(t).is('.ajax')) {\n        g.initGridEdit();\n    }\n\n    // create tooltip for each <th> with draggable class\n    Functions.tooltip(\n        $(t).find('th.draggable'),\n        'th',\n        g.updateHint()\n    );\n\n    // register events for hint tooltip (anchors inside draggable th)\n    $(t).find('th.draggable a')\n        .on('mouseenter', function () {\n            g.showSortHint = true;\n            g.showMultiSortHint = true;\n            $(t).find('th.draggable').uiTooltip('option', {\n                content: g.updateHint()\n            });\n        })\n        .on('mouseleave', function () {\n            g.showSortHint = false;\n            g.showMultiSortHint = false;\n            $(t).find('th.draggable').uiTooltip('option', {\n                content: g.updateHint()\n            });\n        });\n\n    // register events for dragging-related feature\n    if (isResizeEnabled || isReorderEnabled) {\n        $(document).on('mousemove', function (e) {\n            g.dragMove(e);\n        });\n        $(document).on('mouseup', function (e) {\n            $(g.o).removeClass('turnOffSelect');\n            g.dragEnd(e);\n        });\n    }\n\n    // some adjustment\n    $(t).removeClass('data');\n    $(g.gDiv).addClass('data');\n};\n\n/**\n * jQuery plugin to cancel selection in HTML code.\n */\n(function ($) {\n    $.fn.noSelect = function (p) { // no select plugin by Paulo P.Marinas\n        var prevent = (p === null) ? true : p;\n        /* eslint-disable compat/compat */\n        var isMsie = navigator.userAgent.indexOf('MSIE') > -1 || !!window.navigator.userAgent.match(/Trident.*rv:11\\./);\n        var isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\n        var isSafari = navigator.userAgent.indexOf('Safari') > -1;\n        var isOpera = navigator.userAgent.indexOf('Presto') > -1;\n        /* eslint-enable compat/compat */\n        if (prevent) {\n            return this.each(function () {\n                if (isMsie || isSafari) {\n                    $(this).on('selectstart', false);\n                } else if (isFirefox) {\n                    $(this).css('MozUserSelect', 'none');\n                    $('body').trigger('focus');\n                } else if (isOpera) {\n                    $(this).on('mousedown', false);\n                } else {\n                    $(this).attr('unselectable', 'on');\n                }\n            });\n        } else {\n            return this.each(function () {\n                if (isMsie || isSafari) {\n                    $(this).off('selectstart');\n                } else if (isFirefox) {\n                    $(this).css('MozUserSelect', 'inherit');\n                } else if (isOpera) {\n                    $(this).off('mousedown');\n                } else {\n                    $(this).removeAttr('unselectable');\n                }\n            });\n        }\n    }; // end noSelect\n}(jQuery));\n"],"names":["makeGrid","t","enableResize","enableReorder","enableVisib","enableGridEdit","isResizeEnabled","undefined","isReorderEnabled","isVisibEnabled","isGridEditEnabled","g","minColWidth","actionSpan","tableCreateTime","colOrder","colVisib","showAllColText","visibleHeadersCount","reorderHint","sortHint","markHint","copyHint","showReorderHint","showSortHint","showMarkHint","isCellEditActive","isEditCellTextEditable","currentEditCell","cellEditHint","gotoLinkText","wasEditedCellNull","maxTruncatedLen","saveCellsAtOnce","isCellEdited","saveCellWarning","lastXHR","isSaving","alertNonUnique","token","server","db","table","dragStartRsz","e","obj","n","$","cRsz","find","index","addClass","colRsz","x0","pageX","objLeft","position","left","objWidth","eq","outerWidth","document","body","css","noSelect","hideEditCell","dragStartReorder","cCpy","text","objPos","top","height","width","cPointer","getHeaderIdx","colReorder","y0","pageY","newn","objTop","dragMove","dx","show","hoveredCol","getHoveredCol","colPos","newleft","visibility","dragEnd","nw","resize","reposRsz","reposDrop","removeClass","shiftCol","sendColPrefs","refreshRestoreButton","stop","animate","fadeOut","each","add","hide","$firstRowCols","first","$resizeHandles","l","length","$col","colWidth","navigator","userAgent","toLowerCase","indexOf","hasClass","oldn","before","after","cList","tmp","splice","$headers","offset","right","parents","restoreColOrder","i","x","j","is","postParams","extend","toString","post","data","success","$tempDiv","createElement","html","error","Functions","ajaxShowMessage","isInitial","isOneColumn","o","updateHint","showMultiSortHint","strMultiSortHint","toggleCol","prop","afterToggleCol","showColList","pos","outerHeight","hideColList","cDrop","$th","$cd","showAllColumns","showEditCell","cell","$cell","attr","cEdit","cEditTextarea","cEditStd","empty","value","getCellValue","JSON","stringify","parse","val","trigger","moveCursorToEnd","input","originalValue","originallength","setSelectionRange","force","field","options","saveOrPostEditedCell","abort","$thisField","isNull","isNeedToRecheck","truncatableFieldValue","CommonParams","get","substring","newHtml","escapeHtml","replace","decimals","parseInt","selector","$target","updateCode","transformations","cellIndex","relations","$dp","on","datepicker","_checkExternalClick","showEditArea","$td","$editArea","whereClause","parent","fieldName","Sql","getFieldName","relationCurrValue","relationKeyOrDisplayColumn","currValue","gotoLink","className","append","clone","$checkbox","ctrlKey","which","$option","dropdown","select","join","sqlQuery","$inputField","datetimeValue","showMillisec","showMicrosec","timeFormat","addDatepicker","firstDay","firstDayOfCalendar","preventDefault","stopPropagation","toggleDatepickerIfInvalid","off","datepickerDiv","children","postEditedCell","relationFields","relationalDisplay","transformFields","transformationFields","fullSqlQuery","relFieldsList","transformFieldsList","fullWhereClause","isUnique","multiEditFieldsName","multiEditFieldsType","multiEditFields","multiEditFieldsNull","alert","$tr","push","conditionArray","fieldsName","fieldsType","fields","fieldsNull","thisFieldParams","urlEncode","fieldStr","newClause","param","encodeURIComponent","ajax","type","url","move","message","$whereClause","oldClause","decodedOldClause","decodedNewClause","removeAttr","confirmLink","checkboxName","checkboxValue","sql_query","$resultQuery","parseHTML","sqlOuter","wrap","tools","not","last","remove","$existingQuery","highlightSql","done","saveEditedCell","$testElement","needToPost","map","match","hexError","Messages","strEnterValidHex","saved","initColResize","cb","gDiv","prepend","initColReorder","strColOrderHint","$colOrder","split","uiTooltip","content","res","copyToClipboard","strCopyColumnSuccess","strCopyColumnFailure","initColVisib","strShowAllCol","$colVisib","$colVisibTh","slice","tooltip","strColVisibHint","cd","style","display","innerHTML","$listDiv","tempClick","currHeader","listElmt","showAll","cloneNode","thFirst","moveUp","found","$prevRow","newCell","moveDown","$nextRow","nextRowFound","moveLeft","$foundRow","leftCell","cellFound","moveRight","rightCell","nextCellFound","initGridEdit","startGridEditing","handleCtrlNavigation","altKey","strCellEditHint","strSaveCellWarning","strAlertNonUnique","strGoToLink","target","$link","clicks","timer","setTimeout","AJAX","requestHandler","call","clearTimeout","shiftKey","closest","window","strGridEditFeatureHint","wrapInner","strOriginalLength","filter","strSortHint","strColMarkHint","strColNameCopyHint","$commonHiddenInputs","fn","p","prevent","isMsie","isFirefox","isSafari","isOpera","jQuery"],"sourceRoot":""}