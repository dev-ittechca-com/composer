{"version":3,"file":"setup/scripts.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/setup/scripts.js"],"sourcesContent":["/**\n * Functions used in Setup configuration forms\n */\n\n/* global displayErrors, getAllValues, getIdPrefix, validators */ // js/config.js\n\n// show this window in top frame\nif (top !== self) {\n    window.top.location.href = location;\n}\n\n// ------------------------------------------------------------------\n// Messages\n//\n\n$(function () {\n    if (window.location.protocol === 'https:') {\n        $('#no_https').remove();\n    } else {\n        $('#no_https a').on('click', function () {\n            var oldLocation = window.location;\n            window.location.href = 'https:' + oldLocation.href.substring(oldLocation.protocol.length);\n            return false;\n        });\n    }\n\n    var hiddenMessages = $('.hiddenmessage');\n\n    if (hiddenMessages.length > 0) {\n        hiddenMessages.hide();\n        var link = $('#show_hidden_messages');\n        link.on('click', function (e) {\n            e.preventDefault();\n            hiddenMessages.show();\n            $(this).remove();\n        });\n        link.html(link.html().replace('#MSG_COUNT', hiddenMessages.length));\n        link.show();\n    }\n});\n\n// set document width\n$(function () {\n    var width = 0;\n    $('ul.tabs li').each(function () {\n        width += $(this).width() + 10;\n    });\n    var contentWidth = width;\n    width += 250;\n    $('body').css('min-width', width);\n    $('.tabs_contents').css('min-width', contentWidth);\n});\n\n//\n// END: Messages\n// ------------------------------------------------------------------\n\n// ------------------------------------------------------------------\n// Form validation and field operations\n//\n\n/**\n * Calls server-side validation procedures\n *\n * @param {Element} parent  input field in <fieldset> or <fieldset>\n * @param {String}  id      validator id\n * @param {object}  values  values hash {element1_id: value, ...}\n *\n * @return {bool|void}\n */\nfunction ajaxValidate (parent, id, values) {\n    var $parent = $(parent);\n    // ensure that parent is a fieldset\n    if ($parent.attr('tagName') !== 'FIELDSET') {\n        $parent = $parent.closest('fieldset');\n        if ($parent.length === 0) {\n            return false;\n        }\n    }\n\n    if ($parent.data('ajax') !== null) {\n        $parent.data('ajax').abort();\n    }\n\n    $parent.data('ajax', $.ajax({\n        url: 'validate.php',\n        cache: false,\n        type: 'POST',\n        data: {\n            token: $parent.closest('form').find('input[name=token]').val(),\n            id: id,\n            values: JSON.stringify(values)\n        },\n        success: function (response) {\n            if (response === null) {\n                return;\n            }\n\n            var error = {};\n            if (typeof response !== 'object') {\n                error[$parent.id] = [response];\n            } else if (typeof response.error !== 'undefined') {\n                error[$parent.id] = [response.error];\n            } else {\n                for (var key in response) {\n                    var value = response[key];\n                    error[key] = Array.isArray(value) ? value : [value];\n                }\n            }\n            displayErrors(error);\n        },\n        complete: function () {\n            $parent.removeData('ajax');\n        }\n    }));\n\n    return true;\n}\n\n/**\n * Automatic form submission on change.\n */\n$(document).on('change', '.autosubmit', function (e) {\n    e.target.form.submit();\n});\n\n$.extend(true, validators, {\n    // field validators\n    field: {\n        /**\n         * hide_db field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        hide_db: function (isKeyUp) { // eslint-disable-line camelcase\n            if (!isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'Servers/1/hide_db', data);\n            }\n            return true;\n        },\n        /**\n         * TrustedProxies field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        TrustedProxies: function (isKeyUp) {\n            if (!isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'TrustedProxies', data);\n            }\n            return true;\n        }\n    },\n    // fieldset validators\n    fieldset: {\n        /**\n         * Validates Server fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server: function (isKeyUp) {\n            if (!isKeyUp) {\n                ajaxValidate(this, 'Server', getAllValues());\n            }\n            return true;\n        },\n        /**\n         * Validates Server_login_options fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_login_options: function (isKeyUp) { // eslint-disable-line camelcase\n            return validators.fieldset.Server.apply(this, [isKeyUp]);\n        },\n        /**\n         * Validates Server_pmadb fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_pmadb: function (isKeyUp) { // eslint-disable-line camelcase\n            if (isKeyUp) {\n                return true;\n            }\n\n            var prefix = getIdPrefix($(this).find('input'));\n            if ($('#' + prefix + 'pmadb').val() !== '') {\n                ajaxValidate(this, 'Server_pmadb', getAllValues());\n            }\n\n            return true;\n        }\n    }\n});\n\n//\n// END: Form validation and field operations\n// ------------------------------------------------------------------\n\n// ------------------------------------------------------------------\n// User preferences allow/disallow UI\n//\n\n$(function () {\n    $('.userprefs-allow').on('click', function (e) {\n        if (this !== e.target) {\n            return;\n        }\n        var el = $(this).find('input');\n        if (el.prop('disabled')) {\n            return;\n        }\n        el.prop('checked', !el.prop('checked'));\n    });\n});\n\n//\n// END: User preferences allow/disallow UI\n// ------------------------------------------------------------------\n\n$(function () {\n    $('.delete-server').on('click', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        $.post($this.attr('href'), $this.attr('data-post'), function () {\n            window.location.replace('index.php');\n        });\n    });\n});\n"],"names":["top","self","window","location","href","$","protocol","remove","on","oldLocation","substring","length","hiddenMessages","hide","link","e","preventDefault","show","html","replace","width","each","contentWidth","css","ajaxValidate","parent","id","values","$parent","attr","closest","data","abort","ajax","url","cache","type","token","find","val","JSON","stringify","success","response","error","key","value","Array","isArray","displayErrors","complete","removeData","document","target","form","submit","extend","validators","field","hide_db","isKeyUp","TrustedProxies","fieldset","Server","getAllValues","Server_login_options","apply","Server_pmadb","prefix","getIdPrefix","el","prop","$this","post"],"sourceRoot":""}