{"version":3,"file":"setup/scripts.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/setup/scripts.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { Config } from '../modules/config.js';\n\n/**\n * Functions used in Setup configuration forms\n */\n\n// show this window in top frame\nif (top !== self) {\n    window.top.location.href = location;\n}\n\n// ------------------------------------------------------------------\n// Messages\n//\n\n$(function () {\n    if (window.location.protocol === 'https:') {\n        $('#no_https').remove();\n    } else {\n        $('#no_https a').on('click', function () {\n            var oldLocation = window.location;\n            window.location.href = 'https:' + oldLocation.href.substring(oldLocation.protocol.length);\n            return false;\n        });\n    }\n\n    var hiddenMessages = $('.hiddenmessage');\n\n    if (hiddenMessages.length > 0) {\n        hiddenMessages.hide();\n        var link = $('#show_hidden_messages');\n        link.on('click', function (e) {\n            e.preventDefault();\n            hiddenMessages.show();\n            $(this).remove();\n        });\n        link.html(link.html().replace('#MSG_COUNT', hiddenMessages.length));\n        link.show();\n    }\n});\n\n// set document width\n$(function () {\n    var width = 0;\n    $('ul.tabs li').each(function () {\n        width += $(this).width() + 10;\n    });\n    var contentWidth = width;\n    width += 250;\n    $('body').css('min-width', width);\n    $('.tabs_contents').css('min-width', contentWidth);\n});\n\n//\n// END: Messages\n// ------------------------------------------------------------------\n\n// ------------------------------------------------------------------\n// Form validation and field operations\n//\n\n/**\n * Calls server-side validation procedures\n *\n * @param {Element} parent  input field in <fieldset> or <fieldset>\n * @param {String}  id      validator id\n * @param {object}  values  values hash {element1_id: value, ...}\n *\n * @return {boolean|void}\n */\nfunction ajaxValidate (parent, id, values) {\n    var $parent = $(parent);\n    // ensure that parent is a fieldset\n    if ($parent.attr('tagName') !== 'FIELDSET') {\n        $parent = $parent.closest('fieldset');\n        if ($parent.length === 0) {\n            return false;\n        }\n    }\n\n    if ($parent.data('ajax') !== null) {\n        $parent.data('ajax').abort();\n    }\n\n    $parent.data('ajax', $.ajax({\n        url: '../setup/index.php?route=/setup/validate',\n        cache: false,\n        type: 'POST',\n        data: {\n            token: $parent.closest('form').find('input[name=token]').val(),\n            id: id,\n            values: JSON.stringify(values)\n        },\n        success: function (response) {\n            if (response === null) {\n                return;\n            }\n\n            var error = {};\n            if (typeof response !== 'object') {\n                error[$parent.id] = [response];\n            } else if (typeof response.error !== 'undefined') {\n                error[$parent.id] = [response.error];\n            } else {\n                for (var key in response) {\n                    var value = response[key];\n                    error[key] = Array.isArray(value) ? value : [value];\n                }\n            }\n            Config.displayErrors(error);\n        },\n        complete: function () {\n            $parent.removeData('ajax');\n        }\n    }));\n\n    return true;\n}\n\n/**\n * Automatic form submission on change.\n */\n$(document).on('change', '.autosubmit', function (e) {\n    e.target.form.submit();\n});\n\n$.extend(true, window.validators, {\n    // field validators\n    field: {\n        /**\n         * hide_db field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        hide_db: function (isKeyUp) { // eslint-disable-line camelcase\n            if (! isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'Servers/1/hide_db', data);\n            }\n            return true;\n        },\n        /**\n         * TrustedProxies field\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        TrustedProxies: function (isKeyUp) {\n            if (! isKeyUp && this.value !== '') {\n                var data = {};\n                data[this.id] = this.value;\n                ajaxValidate(this, 'TrustedProxies', data);\n            }\n            return true;\n        }\n    },\n    // fieldset validators\n    fieldset: {\n        /**\n         * Validates Server fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server: function (isKeyUp) {\n            if (! isKeyUp) {\n                ajaxValidate(this, 'Server', Config.getAllValues());\n            }\n            return true;\n        },\n        /**\n         * Validates Server_login_options fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_login_options: function (isKeyUp) { // eslint-disable-line camelcase\n            return window.validators.fieldset.Server.apply(this, [isKeyUp]);\n        },\n        /**\n         * Validates Server_pmadb fieldset\n         *\n         * @param {boolean} isKeyUp\n         *\n         * @return {true}\n         */\n        Server_pmadb: function (isKeyUp) { // eslint-disable-line camelcase\n            if (isKeyUp) {\n                return true;\n            }\n\n            var prefix = Config.getIdPrefix($(this).find('input'));\n            if ($('#' + prefix + 'pmadb').val() !== '') {\n                ajaxValidate(this, 'Server_pmadb', Config.getAllValues());\n            }\n\n            return true;\n        }\n    }\n});\n\n//\n// END: Form validation and field operations\n// ------------------------------------------------------------------\n\n// ------------------------------------------------------------------\n// User preferences allow/disallow UI\n//\n\n$(function () {\n    $('.userprefs-allow').on('click', function (e) {\n        if (this !== e.target) {\n            return;\n        }\n        var el = $(this).find('input');\n        if (el.prop('disabled')) {\n            return;\n        }\n        el.prop('checked', ! el.prop('checked'));\n    });\n});\n\n//\n// END: User preferences allow/disallow UI\n// ------------------------------------------------------------------\n\n$(function () {\n    $('.delete-server').on('click', function (e) {\n        e.preventDefault();\n        var $this = $(this);\n        $.post($this.attr('href'), $this.attr('data-post'), function () {\n            window.location.replace('../setup/index.php?route=/setup');\n        });\n    });\n});\n"],"names":["$","Config","top","self","window","location","href","protocol","remove","on","oldLocation","substring","length","hiddenMessages","hide","link","e","preventDefault","show","html","replace","width","each","contentWidth","css","ajaxValidate","parent","id","values","$parent","attr","closest","data","abort","ajax","url","cache","type","token","find","val","JSON","stringify","success","response","error","key","value","Array","isArray","displayErrors","complete","removeData","document","target","form","submit","extend","validators","field","hide_db","isKeyUp","TrustedProxies","fieldset","Server","getAllValues","Server_login_options","apply","Server_pmadb","prefix","getIdPrefix","el","prop","$this","post"],"sourceRoot":""}