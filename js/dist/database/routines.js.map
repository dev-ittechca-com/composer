{"version":3,"file":"database/routines.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/database/routines.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\n\n/* global Navigation */\n\nwindow.AJAX.registerTeardown('database/routines.js', function () {\n    $(document).off('click', 'a.ajax.add_anchor');\n    $(document).off('click', 'a.ajax.edit_anchor');\n    $(document).off('click', 'a.ajax.exec_anchor');\n    $(document).off('click', 'a.ajax.export_anchor');\n    $(document).off('click', '#bulkActionExportButton');\n    $(document).off('click', 'a.ajax.drop_anchor');\n    $(document).off('click', '#bulkActionDropButton');\n    $(document).off('change', 'select[name=item_type]');\n    $(document).off('change', 'select[name^=item_param_type]');\n    $(document).off('change', 'select[name=item_returntype]');\n    $(document).off('click', 'input[name=routine_addparameter]');\n    $(document).off('click', 'a.routine_param_remove_anchor');\n});\n\nconst DatabaseRoutines = {\n    /**\n     * @var {string} paramTemplate Template for a row in the routine editor\n     */\n    paramTemplate: '',\n    /**\n     * @var $ajaxDialog Query object containing the reference to the\n     *                  dialog that contains the editor\n     */\n    $ajaxDialog: null,\n    /**\n     * @var syntaxHiglighter Reference to the codemirror editor\n     */\n    syntaxHiglighter: null,\n    /**\n     * Validate editor form fields.\n     *\n     * @return {bool}\n     */\n    validate: function () {\n        /**\n         * @var $elm a jQuery object containing the reference\n         *           to an element that is being validated\n         */\n        var $elm = null;\n        // Common validation. At the very least the name\n        // and the definition must be provided for an item\n        $elm = $('table.rte_table').last().find('input[name=item_name]');\n        if ($elm.val() === '') {\n            $elm.trigger('focus');\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        $elm = $('table.rte_table').find('textarea[name=item_definition]');\n        if ($elm.val() === '') {\n            if (this.syntaxHiglighter !== null) {\n                this.syntaxHiglighter.focus();\n            } else {\n                $('textarea[name=item_definition]').last().trigger('focus');\n            }\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        // The validation has so far passed, so now\n        // we can validate item-specific fields.\n        return this.validateCustom();\n    },\n\n    exportDialog: function ($this) {\n        var $msg = Functions.ajaxShowMessage();\n        if ($this.attr('id') === 'bulkActionExportButton') {\n            var combined = {\n                success: true,\n                title: window.Messages.strExport,\n                message: '',\n                error: ''\n            };\n            // export anchors of all selected rows\n            var exportAnchors = $('input.checkall:checked').parents('tr').find('.export_anchor');\n            var count = exportAnchors.length;\n            var returnCount = 0;\n\n            // No routine is exportable (due to privilege issues)\n            if (count === 0) {\n                Functions.ajaxShowMessage(window.Messages.NoExportable);\n            }\n            var p = $.when();\n            exportAnchors.each(function () {\n                var h = $(this).attr('href');\n                p = p.then(function () {\n                    return $.get(h, { 'ajax_request': true }, function (data) {\n                        returnCount++;\n                        if (data.success === true) {\n                            combined.message += '\\n' + data.message + '\\n';\n                            if (returnCount === count) {\n                                showExport(combined);\n                            }\n                        } else {\n                            // complain even if one export is failing\n                            combined.success = false;\n                            combined.error += '\\n' + data.error + '\\n';\n                            if (returnCount === count) {\n                                showExport(combined);\n                            }\n                        }\n                    });\n                });\n            });\n        } else {\n            $.get($this.attr('href'), { 'ajax_request': true }, showExport);\n        }\n        Functions.ajaxRemoveMessage($msg);\n\n        function showExport (data) {\n            if (data.success === true) {\n                Functions.ajaxRemoveMessage($msg);\n                /**\n                 * @var buttonOptions Object containing options\n                 *                     for jQueryUI dialog buttons\n                 */\n                var buttonOptions = {\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-primary',\n                        click: function () {\n                            $(this).dialog('close').remove();\n                        }\n                    },\n                };\n                /**\n                 * Display the dialog to the user\n                 */\n                data.message = '<textarea cols=\"40\" rows=\"15\" class=\"w-100\">' + data.message + '</textarea>';\n                var $ajaxDialog = $('<div>' + data.message + '</div>').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    width: 500,\n                    buttons: buttonOptions,\n                    title: data.title\n                });\n                // Attach syntax highlighted editor to export dialog\n                /**\n                 * @var $elm jQuery object containing the reference\n                 *           to the Export textarea.\n                 */\n                var $elm = $ajaxDialog.find('textarea');\n                Functions.getSqlEditor($elm);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        } // end showExport()\n    },  // end exportDialog()\n    editorDialog: function (isNew, $this) {\n        var that = this;\n        /**\n         * @var $edit_row jQuery object containing the reference to\n         *                the row of the the item being edited\n         *                from the list of items\n         */\n        var $editRow = null;\n        if ($this.hasClass('edit_anchor')) {\n            // Remember the row of the item being edited for later,\n            // so that if the edit is successful, we can replace the\n            // row with info about the modified item.\n            $editRow = $this.parents('tr');\n        }\n        /**\n         * @var $msg jQuery object containing the reference to\n         *           the AJAX message shown to the user\n         */\n        var $msg = Functions.ajaxShowMessage();\n        $.get($this.attr('href'), { 'ajax_request': true }, function (data) {\n            if (data.success === true) {\n                var buttonOptions = {\n                    [window.Messages.strGo]: {\n                        text: window.Messages.strGo,\n                        class: 'btn btn-primary',\n                    },\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-secondary',\n                    },\n                };\n                // We have successfully fetched the editor form\n                Functions.ajaxRemoveMessage($msg);\n                // Now define the function that is called when\n                // the user presses the \"Go\" button\n                buttonOptions[window.Messages.strGo].click = function () {\n                    // Move the data from the codemirror editor back to the\n                    // textarea, where it can be used in the form submission.\n                    if (typeof window.CodeMirror !== 'undefined') {\n                        that.syntaxHiglighter.save();\n                    }\n                    // Validate editor and submit request, if passed.\n                    if (that.validate()) {\n                        /**\n                         * @var data Form data to be sent in the AJAX request\n                         */\n                        var data = $('form.rte_form').last().serialize();\n                        $msg = Functions.ajaxShowMessage(\n                            window.Messages.strProcessingRequest\n                        );\n                        var url = $('form.rte_form').last().attr('action');\n                        $.post(url, data, function (data) {\n                            if (data.success === true) {\n                                // Item created successfully\n                                Functions.ajaxRemoveMessage($msg);\n                                Functions.slidingMessage(data.message);\n                                that.$ajaxDialog.dialog('close');\n\n                                var tableId = '#' + data.tableType + 'Table';\n                                // If we are in 'edit' mode, we must\n                                // remove the reference to the old row.\n                                if (mode === 'edit' && $editRow !== null) {\n                                    $editRow.remove();\n                                }\n                                // Sometimes, like when moving a trigger from\n                                // a table to another one, the new row should\n                                // not be inserted into the list. In this case\n                                // \"data.insert\" will be set to false.\n                                if (data.insert) {\n                                    // Insert the new row at the correct\n                                    // location in the list of items\n                                    /**\n                                     * @var text Contains the name of an item from\n                                     *           the list that is used in comparisons\n                                     *           to find the correct location where\n                                     *           to insert a new row.\n                                     */\n                                    var text = '';\n                                    /**\n                                     * @var inserted Whether a new item has been\n                                     *               inserted in the list or not\n                                     */\n                                    var inserted = false;\n                                    $(tableId + '.data').find('tr').each(function () {\n                                        text = $(this)\n                                            .children('td')\n                                            .eq(0)\n                                            .find('strong')\n                                            .text()\n                                            .toUpperCase()\n                                            .trim();\n                                        if (text !== '' && text > data.name) {\n                                            $(this).before(data.new_row);\n                                            inserted = true;\n                                            return false;\n                                        }\n                                    });\n                                    if (! inserted) {\n                                        // If we didn't manage to insert the row yet,\n                                        // it must belong at the end of the list,\n                                        // so we insert it there.\n                                        $(tableId + '.data').append(data.new_row);\n                                    }\n                                    // Fade-in the new row\n                                    $('tr.ajaxInsert')\n                                        .show('slow')\n                                        .removeClass('ajaxInsert');\n                                } else if ($(tableId + '.data').find('tr').has('td').length === 0) {\n                                    // If we are not supposed to insert the new row,\n                                    // we will now check if the table is empty and\n                                    // needs to be hidden. This will be the case if\n                                    // we were editing the only item in the list,\n                                    // which we removed and will not be inserting\n                                    // something else in its place.\n                                    $(tableId + '.data').hide('slow', function () {\n                                        $('#nothing2display').show('slow');\n                                    });\n                                }\n                                // Now we have inserted the row at the correct\n                                // position, but surely at least some row classes\n                                // are wrong now. So we will iterate through\n                                // all rows and assign correct classes to them\n                                /**\n                                 * @var ct Count of processed rows\n                                 */\n                                var ct = 0;\n                                /**\n                                 * @var rowclass Class to be attached to the row\n                                 *               that is being processed\n                                 */\n                                var rowclass = '';\n                                $(tableId + '.data').find('tr').has('td').each(function () {\n                                    rowclass = (ct % 2 === 0) ? 'odd' : 'even';\n                                    $(this).removeClass('odd even').addClass(rowclass);\n                                    ct++;\n                                });\n                                // If this is the first item being added, remove\n                                // the \"No items\" message and show the list.\n                                if ($(tableId + '.data').find('tr').has('td').length > 0 &&\n                                    $('#nothing2display').is(':visible')\n                                ) {\n                                    $('#nothing2display').hide('slow', function () {\n                                        $(tableId + '.data').show('slow');\n                                    });\n                                }\n                                Navigation.reload();\n                            } else {\n                                Functions.ajaxShowMessage(data.error, false);\n                            }\n                        }); // end $.post()\n                    } // end \"if (that.validate())\"\n                }; // end of function that handles the submission of the Editor\n                buttonOptions[window.Messages.strClose].click = function () {\n                    $(this).dialog('close');\n                };\n                /**\n                 * Display the dialog to the user\n                 */\n                that.$ajaxDialog = $('<div id=\"rteDialog\">' + data.message + '</div>').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    height: 400,\n                    width: 700,\n                    minWidth: 500,\n                    buttons: buttonOptions,\n                    // Issue #15810 - use button titles for modals (eg: new procedure)\n                    // Respect the order: title on href tag, href content, title sent in response\n                    title: $this.attr('title') || $this.text() || $(data.title).text(),\n                    modal: true,\n                    open: function () {\n                        $('#rteDialog').dialog('option', 'max-height', $(window).height());\n                        if ($('#rteDialog').parents('.ui-dialog').height() > $(window).height()) {\n                            $('#rteDialog').dialog('option', 'height', $(window).height());\n                        }\n                        $(this).find('input[name=item_name]').trigger('focus');\n                        $(this).find('input.datefield').each(function () {\n                            Functions.addDatepicker($(this).css('width', '95%'), 'date');\n                        });\n                        $(this).find('input.datetimefield').each(function () {\n                            Functions.addDatepicker($(this).css('width', '95%'), 'datetime');\n                        });\n                        $.datepicker.initialized = false;\n                    },\n                    close: function () {\n                        $(this).remove();\n                    }\n                });\n                /**\n                 * @var mode Used to remember whether the editor is in\n                 *           \"Edit\" or \"Add\" mode\n                 */\n                var mode = 'add';\n                if ($('input[name=editor_process_edit]').length > 0) {\n                    mode = 'edit';\n                }\n                // Attach syntax highlighted editor to the definition\n                /**\n                 * @var elm jQuery object containing the reference to\n                 *                 the Definition textarea.\n                 */\n                var $elm = $('textarea[name=item_definition]').last();\n                var linterOptions = {};\n                linterOptions.routineEditor = true;\n                that.syntaxHiglighter = Functions.getSqlEditor($elm, {}, 'both', linterOptions);\n\n                // Execute item-specific code\n                that.postDialogShow(data);\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }); // end $.get()\n    },\n\n    dropDialog: function ($this) {\n        /**\n         * @var $curr_row Object containing reference to the current row\n         */\n        var $currRow = $this.parents('tr');\n        /**\n         * @var question String containing the question to be asked for confirmation\n         */\n        var question = $('<div></div>').text(\n            $currRow.children('td').children('.drop_sql').html()\n        );\n        // We ask for confirmation first here, before submitting the ajax request\n        $this.confirm(question, $this.attr('href'), function (url) {\n            /**\n             * @var msg jQuery object containing the reference to\n             *          the AJAX message shown to the user\n             */\n            var $msg = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n            var params = Functions.getJsConfirmCommonParam(this, $this.getPostData());\n            $.post(url, params, function (data) {\n                if (data.success === true) {\n                    /**\n                     * @var $table Object containing reference\n                     *             to the main list of elements\n                     */\n                    var $table = $currRow.parent().parent();\n                    // Check how many rows will be left after we remove\n                    // the one that the user has requested us to remove\n                    if ($table.find('tr').length === 3) {\n                        // If there are two rows left, it means that they are\n                        // the header of the table and the rows that we are\n                        // about to remove, so after the removal there will be\n                        // nothing to show in the table, so we hide it.\n                        $table.hide('slow', function () {\n                            $(this).find('tr.even, tr.odd').remove();\n                            $('.withSelected').remove();\n                            $('#nothing2display').show('slow');\n                        });\n                    } else {\n                        $currRow.hide('slow', function () {\n                            $(this).remove();\n                            // Now we have removed the row from the list, but maybe\n                            // some row classes are wrong now. So we will iterate\n                            // through all rows and assign correct classes to them.\n                            /**\n                             * @var ct Count of processed rows\n                             */\n                            var ct = 0;\n                            /**\n                             * @var rowclass Class to be attached to the row\n                             *               that is being processed\n                             */\n                            var rowclass = '';\n                            $table.find('tr').has('td').each(function () {\n                                rowclass = (ct % 2 === 1) ? 'odd' : 'even';\n                                $(this).removeClass('odd even').addClass(rowclass);\n                                ct++;\n                            });\n                        });\n                    }\n                    // Get rid of the \"Loading\" message\n                    Functions.ajaxRemoveMessage($msg);\n                    // Show the query that we just executed\n                    Functions.slidingMessage(data.sql_query);\n                    Navigation.reload();\n                } else {\n                    Functions.ajaxShowMessage(data.error, false);\n                }\n            }); // end $.post()\n        });\n    },\n\n    dropMultipleDialog: function ($this) {\n        // We ask for confirmation here\n        $this.confirm(window.Messages.strDropRTEitems, '', function () {\n            /**\n             * @var msg jQuery object containing the reference to\n             *          the AJAX message shown to the user\n             */\n            var $msg = Functions.ajaxShowMessage(window.Messages.strProcessingRequest);\n\n            // drop anchors of all selected rows\n            var dropAnchors = $('input.checkall:checked').parents('tr').find('.drop_anchor');\n            var success = true;\n            var count = dropAnchors.length;\n            var returnCount = 0;\n\n            dropAnchors.each(function () {\n                var $anchor = $(this);\n                /**\n                 * @var $curr_row Object containing reference to the current row\n                 */\n                var $currRow = $anchor.parents('tr');\n                var params = Functions.getJsConfirmCommonParam(this, $anchor.getPostData());\n                $.post($anchor.attr('href'), params, function (data) {\n                    returnCount++;\n                    if (data.success === true) {\n                        /**\n                         * @var $table Object containing reference\n                         *             to the main list of elements\n                         */\n                        var $table = $currRow.parent().parent();\n                        // Check how many rows will be left after we remove\n                        // the one that the user has requested us to remove\n                        if ($table.find('tr').length === 3) {\n                            // If there are two rows left, it means that they are\n                            // the header of the table and the rows that we are\n                            // about to remove, so after the removal there will be\n                            // nothing to show in the table, so we hide it.\n                            $table.hide('slow', function () {\n                                $(this).find('tr.even, tr.odd').remove();\n                                $('.withSelected').remove();\n                                $('#nothing2display').show('slow');\n                            });\n                        } else {\n                            $currRow.hide('fast', function () {\n                                // we will iterate\n                                // through all rows and assign correct classes to them.\n                                /**\n                                 * @var ct Count of processed rows\n                                 */\n                                var ct = 0;\n                                /**\n                                 * @var rowclass Class to be attached to the row\n                                 *               that is being processed\n                                 */\n                                var rowclass = '';\n                                $table.find('tr').has('td').each(function () {\n                                    rowclass = (ct % 2 === 1) ? 'odd' : 'even';\n                                    $(this).removeClass('odd even').addClass(rowclass);\n                                    ct++;\n                                });\n                            });\n                            $currRow.remove();\n                        }\n                        if (returnCount === count) {\n                            if (success) {\n                                // Get rid of the \"Loading\" message\n                                Functions.ajaxRemoveMessage($msg);\n                                $('#rteListForm_checkall').prop({ checked: false, indeterminate: false });\n                            }\n                            Navigation.reload();\n                        }\n                    } else {\n                        Functions.ajaxShowMessage(data.error, false);\n                        success = false;\n                        if (returnCount === count) {\n                            Navigation.reload();\n                        }\n                    }\n                }); // end $.post()\n            }); // end drop_anchors.each()\n        });\n    },\n\n    /**\n     * Execute some code after the ajax dialog for the editor is shown.\n     *\n     * @param data JSON-encoded data from the ajax request\n     */\n    postDialogShow: function (data) {\n        // Cache the template for a parameter table row\n        DatabaseRoutines.paramTemplate = data.paramTemplate;\n        var that = this;\n        // Make adjustments in the dialog to make it AJAX compatible\n        $('td.routine_param_remove').show();\n        $('input[name=routine_removeparameter]').remove();\n        $('input[name=routine_addparameter]').css('width', '100%');\n        // Enable/disable the 'options' dropdowns for parameters as necessary\n        $('table.routine_params_table').last().find('th[colspan=2]').attr('colspan', '1');\n        $('table.routine_params_table').last().find('tr').has('td').each(function () {\n            that.setOptionsForParameter(\n                $(this).find('select[name^=item_param_type]'),\n                $(this).find('input[name^=item_param_length]'),\n                $(this).find('select[name^=item_param_opts_text]'),\n                $(this).find('select[name^=item_param_opts_num]')\n            );\n        });\n        // Enable/disable the 'options' dropdowns for\n        // function return value as necessary\n        this.setOptionsForParameter(\n            $('table.rte_table').last().find('select[name=item_returntype]'),\n            $('table.rte_table').last().find('input[name=item_returnlength]'),\n            $('table.rte_table').last().find('select[name=item_returnopts_text]'),\n            $('table.rte_table').last().find('select[name=item_returnopts_num]')\n        );\n        // Allow changing parameter order\n        $('.routine_params_table tbody').sortable({\n            containment: '.routine_params_table tbody',\n            handle: '.dragHandle',\n            stop: function () {\n                that.reindexParameters();\n            },\n        });\n    },\n    /**\n     * Reindexes the parameters after dropping a parameter or reordering parameters\n     */\n    reindexParameters: function () {\n        /**\n         * @var index Counter used for reindexing the input\n         *            fields in the routine parameters table\n         */\n        var index = 0;\n        $('table.routine_params_table tbody').find('tr').each(function () {\n            $(this).find(':input').each(function () {\n                /**\n                 * @var inputname The value of the name attribute of\n                 *                the input field being reindexed\n                 */\n                var inputname = $(this).attr('name');\n                if (inputname.startsWith('item_param_dir')) {\n                    $(this).attr('name', inputname.substring(0, 14) + '[' + index + ']');\n                } else if (inputname.startsWith('item_param_name')) {\n                    $(this).attr('name', inputname.substring(0, 15) + '[' + index + ']');\n                } else if (inputname.startsWith('item_param_type')) {\n                    $(this).attr('name', inputname.substring(0, 15) + '[' + index + ']');\n                } else if (inputname.startsWith('item_param_length')) {\n                    $(this).attr('name', inputname.substring(0, 17) + '[' + index + ']');\n                    $(this).attr('id', 'item_param_length_' + index);\n                } else if (inputname.startsWith('item_param_opts_text')) {\n                    $(this).attr('name', inputname.substring(0, 20) + '[' + index + ']');\n                } else if (inputname.startsWith('item_param_opts_num')) {\n                    $(this).attr('name', inputname.substring(0, 19) + '[' + index + ']');\n                }\n            });\n            index++;\n        });\n    },\n    /**\n     * Validate custom editor form fields.\n     *\n     * @return {bool}\n     */\n    validateCustom: function () {\n        /**\n         * @var isSuccess Stores the outcome of the validation\n         */\n        var isSuccess = true;\n        /**\n         * @var inputname The value of the \"name\" attribute for\n         *                the field that is being processed\n         */\n        var inputname = '';\n        this.$ajaxDialog.find('table.routine_params_table').last().find('tr').each(function () {\n            // Every parameter of a routine must have\n            // a non-empty direction, name and type\n            if (isSuccess) {\n                $(this).find(':input').each(function () {\n                    inputname = $(this).attr('name');\n                    if (inputname.startsWith('item_param_dir') ||\n                        inputname.startsWith('item_param_name') ||\n                        inputname.startsWith('item_param_type')) {\n                        if ($(this).val() === '') {\n                            $(this).trigger('focus');\n                            isSuccess = false;\n                            return false;\n                        }\n                    }\n                });\n            } else {\n                return false;\n            }\n        });\n        if (! isSuccess) {\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        this.$ajaxDialog.find('table.routine_params_table').last().find('tr').each(function () {\n            // SET, ENUM, VARCHAR and VARBINARY fields must have length/values\n            var $inputtyp = $(this).find('select[name^=item_param_type]');\n            var $inputlen = $(this).find('input[name^=item_param_length]');\n            if ($inputtyp.length && $inputlen.length) {\n                if (($inputtyp.val() === 'ENUM' || $inputtyp.val() === 'SET' || $inputtyp.val().startsWith('VAR')) &&\n                    $inputlen.val() === ''\n                ) {\n                    $inputlen.trigger('focus');\n                    isSuccess = false;\n                    return false;\n                }\n            }\n        });\n        if (! isSuccess) {\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        if (this.$ajaxDialog.find('select[name=item_type]').find(':selected').val() === 'FUNCTION') {\n            // The length/values of return variable for functions must\n            // be set, if the type is SET, ENUM, VARCHAR or VARBINARY.\n            var $returntyp = this.$ajaxDialog.find('select[name=item_returntype]');\n            var $returnlen = this.$ajaxDialog.find('input[name=item_returnlength]');\n            if (($returntyp.val() === 'ENUM' || $returntyp.val() === 'SET' || $returntyp.val().startsWith('VAR')) &&\n                $returnlen.val() === ''\n            ) {\n                $returnlen.trigger('focus');\n                alert(window.Messages.strFormEmpty);\n                return false;\n            }\n        }\n        if ($('select[name=item_type]').find(':selected').val() === 'FUNCTION') {\n            // A function must contain a RETURN statement in its definition\n            if (this.$ajaxDialog.find('table.rte_table').find('textarea[name=item_definition]').val().toUpperCase().indexOf('RETURN') < 0) {\n                this.syntaxHiglighter.focus();\n                alert(window.Messages.MissingReturn);\n                return false;\n            }\n        }\n        return true;\n    },\n    /**\n     * Enable/disable the \"options\" dropdown and \"length\" input for\n     * parameters and the return variable in the routine editor\n     * as necessary.\n     *\n     * @param $type a jQuery object containing the reference\n     *              to the \"Type\" dropdown box\n     * @param $len  a jQuery object containing the reference\n     *              to the \"Length\" input box\n     * @param $text a jQuery object containing the reference\n     *              to the dropdown box with options for\n     *              parameters of text type\n     * @param $num  a jQuery object containing the reference\n     *              to the dropdown box with options for\n     *              parameters of numeric type\n     */\n    setOptionsForParameter: function ($type, $len, $text, $num) {\n        /**\n         * @var no_opts a jQuery object containing the reference\n         *              to an element to be displayed when no\n         *              options are available\n         */\n        var $noOpts = $text.parent().parent().find('.no_opts');\n        /**\n         * @var no_len a jQuery object containing the reference\n         *             to an element to be displayed when no\n         *             \"length/values\" field is available\n         */\n        var $noLen  = $len.parent().parent().find('.no_len');\n\n        // Process for parameter options\n        switch ($type.val()) {\n        case 'TINYINT':\n        case 'SMALLINT':\n        case 'MEDIUMINT':\n        case 'INT':\n        case 'BIGINT':\n        case 'DECIMAL':\n        case 'FLOAT':\n        case 'DOUBLE':\n        case 'REAL':\n            $text.parent().hide();\n            $num.parent().show();\n            $noOpts.hide();\n            break;\n        case 'TINYTEXT':\n        case 'TEXT':\n        case 'MEDIUMTEXT':\n        case 'LONGTEXT':\n        case 'CHAR':\n        case 'VARCHAR':\n        case 'SET':\n        case 'ENUM':\n            $text.parent().show();\n            $num.parent().hide();\n            $noOpts.hide();\n            break;\n        default:\n            $text.parent().hide();\n            $num.parent().hide();\n            $noOpts.show();\n            break;\n        }\n        // Process for parameter length\n        switch ($type.val()) {\n        case 'DATE':\n        case 'TINYBLOB':\n        case 'TINYTEXT':\n        case 'BLOB':\n        case 'TEXT':\n        case 'MEDIUMBLOB':\n        case 'MEDIUMTEXT':\n        case 'LONGBLOB':\n        case 'LONGTEXT':\n            $text.closest('tr').find('a').first().hide();\n            $len.parent().hide();\n            $noLen.show();\n            break;\n        default:\n            if ($type.val() === 'ENUM' || $type.val() === 'SET') {\n                $text.closest('tr').find('a').first().show();\n            } else {\n                $text.closest('tr').find('a').first().hide();\n            }\n            $len.parent().show();\n            $noLen.hide();\n            break;\n        }\n    },\n    executeDialog: function ($this) {\n        /**\n         * @var msg jQuery object containing the reference to\n         *          the AJAX message shown to the user\n         */\n        var $msg = Functions.ajaxShowMessage();\n        var params = Functions.getJsConfirmCommonParam($this[0], $this.getPostData());\n        $.post($this.attr('href'), params, function (data) {\n            if (data.success === true) {\n                Functions.ajaxRemoveMessage($msg);\n                // If 'data.dialog' is true we show a dialog with a form\n                // to get the input parameters for routine, otherwise\n                // we just show the results of the query\n                if (data.dialog) {\n                    var buttonOptions = {\n                        [window.Messages.strGo]: {\n                            text: window.Messages.strGo,\n                            class: 'btn btn-primary',\n                        },\n                        [window.Messages.strClose]: {\n                            text: window.Messages.strClose,\n                            class: 'btn btn-secondary',\n                        },\n                    };\n                    // Define the function that is called when\n                    // the user presses the \"Go\" button\n                    buttonOptions[window.Messages.strGo].click = function () {\n                        /**\n                         * @var data Form data to be sent in the AJAX request\n                         */\n                        var data = $('form.rte_form').last().serialize();\n                        $msg = Functions.ajaxShowMessage(\n                            window.Messages.strProcessingRequest\n                        );\n                        $.post('index.php?route=/database/routines', data, function (data) {\n                            if (data.success === true) {\n                                // Routine executed successfully\n                                Functions.ajaxRemoveMessage($msg);\n                                Functions.slidingMessage(data.message);\n                                $ajaxDialog.dialog('close');\n                            } else {\n                                Functions.ajaxShowMessage(data.error, false);\n                            }\n                        });\n                    };\n                    buttonOptions[window.Messages.strClose].click = function () {\n                        $(this).dialog('close');\n                    };\n                    /**\n                     * Display the dialog to the user\n                     */\n                    var $ajaxDialog = $('<div>' + data.message + '</div>').dialog({\n                        classes: {\n                            'ui-dialog-titlebar-close': 'btn-close'\n                        },\n                        width: 650,\n                        buttons: buttonOptions,\n                        title: data.title,\n                        modal: true,\n                        close: function () {\n                            $(this).remove();\n                        }\n                    });\n                    $ajaxDialog.find('input[name^=params]').first().trigger('focus');\n                    /**\n                     * Attach the datepickers to the relevant form fields\n                     */\n                    $ajaxDialog.find('input.datefield, input.datetimefield').each(function () {\n                        Functions.addDatepicker($(this).css('width', '95%'));\n                    });\n                    /*\n                    * Define the function if the user presses enter\n                    */\n                    $('form.rte_form').on('keyup', function (event) {\n                        event.preventDefault();\n                        if (event.keyCode === 13) {\n                            /**\n                             * @var data Form data to be sent in the AJAX request\n                             */\n                            var data = $(this).serialize();\n                            $msg = Functions.ajaxShowMessage(\n                                window.Messages.strProcessingRequest\n                            );\n                            var url = $(this).attr('action');\n                            $.post(url, data, function (data) {\n                                if (data.success === true) {\n                                    // Routine executed successfully\n                                    Functions.ajaxRemoveMessage($msg);\n                                    Functions.slidingMessage(data.message);\n                                    $('form.rte_form').off('keyup');\n                                    $ajaxDialog.remove();\n                                } else {\n                                    Functions.ajaxShowMessage(data.error, false);\n                                }\n                            });\n                        }\n                    });\n                } else {\n                    // Routine executed successfully\n                    Functions.slidingMessage(data.message);\n                }\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }); // end $.post()\n    }\n};\n\nwindow.AJAX.registerOnload('database/routines.js', function () {\n    $(document).on('click', 'a.ajax.add_anchor', function (event) {\n        event.preventDefault();\n        $.datepicker.initialized = false;\n        DatabaseRoutines.editorDialog(true, $(this));\n    });\n    $(document).on('click', 'a.ajax.edit_anchor', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.editorDialog(false, $(this));\n    });\n    $(document).on('click', 'a.ajax.exec_anchor', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.executeDialog($(this));\n    });\n\n    $(document).on('click', 'a.ajax.export_anchor', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.exportDialog($(this));\n    });\n    $(document).on('click', '#bulkActionExportButton', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.exportDialog($(this));\n    });\n\n    $(document).on('click', 'a.ajax.drop_anchor', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.dropDialog($(this));\n    });\n    $(document).on('click', '#bulkActionDropButton', function (event) {\n        event.preventDefault();\n        DatabaseRoutines.dropMultipleDialog($(this));\n    });\n\n    $(document).on('change', 'select[name=item_type]', function () {\n        $(this).closest('table').find('tr.routine_return_row, .routine_direction_cell').toggle();\n    });\n\n    $(document).on('change', 'select[name^=item_param_type]', function () {\n        const $row = $(this).parents('tr').first();\n        DatabaseRoutines.setOptionsForParameter(\n            $row.find('select[name^=item_param_type]'),\n            $row.find('input[name^=item_param_length]'),\n            $row.find('select[name^=item_param_opts_text]'),\n            $row.find('select[name^=item_param_opts_num]')\n        );\n    });\n\n    $(document).on('change', 'select[name=item_returntype]', function () {\n        const $table = $(this).closest('table.rte_table');\n        DatabaseRoutines.setOptionsForParameter(\n            $table.find('select[name=item_returntype]'),\n            $table.find('input[name=item_returnlength]'),\n            $table.find('select[name=item_returnopts_text]'),\n            $table.find('select[name=item_returnopts_num]')\n        );\n    });\n\n    $(document).on('click', 'input[name=routine_addparameter]', function (event) {\n        event.preventDefault();\n        /**\n         * @var routine_params_table jQuery object containing the reference\n         *                           to the routine parameters table\n         */\n        const $routineParamsTable = $(this).closest('div.ui-dialog').find('.routine_params_table');\n        /**\n         * @var new_param_row A string containing the HTML code for the\n         *                    new row for the routine parameters table\n         */\n        const newParamRow = DatabaseRoutines.paramTemplate.replace(/%s/g, $routineParamsTable.find('tr').length - 1);\n        // Append the new row to the parameters table\n        $routineParamsTable.append(newParamRow);\n        // Make sure that the row is correctly shown according to the type of routine\n        if ($(this).closest('div.ui-dialog').find('table.rte_table select[name=item_type]').val() === 'FUNCTION') {\n            $('tr.routine_return_row').show();\n            $('td.routine_direction_cell').hide();\n        }\n        /**\n         * @var newrow jQuery object containing the reference to the newly\n         *             inserted row in the routine parameters table\n         */\n        const $newrow = $(this).closest('div.ui-dialog').find('table.routine_params_table').find('tr').has('td').last();\n        // Enable/disable the 'options' dropdowns for parameters as necessary\n        DatabaseRoutines.setOptionsForParameter(\n            $newrow.find('select[name^=item_param_type]'),\n            $newrow.find('input[name^=item_param_length]'),\n            $newrow.find('select[name^=item_param_opts_text]'),\n            $newrow.find('select[name^=item_param_opts_num]')\n        );\n    });\n\n    $(document).on('click', 'a.routine_param_remove_anchor', function (event) {\n        event.preventDefault();\n        $(this).parent().parent().remove();\n        // After removing a parameter, the indices of the name attributes in\n        // the input fields lose the correct order and need to be reordered.\n        DatabaseRoutines.reindexParameters();\n    });\n});\n"],"names":["$","window","AJAX","registerTeardown","document","off","DatabaseRoutines","paramTemplate","$ajaxDialog","syntaxHiglighter","validate","$elm","last","find","val","trigger","alert","Messages","strFormEmpty","focus","validateCustom","exportDialog","$this","$msg","Functions","ajaxShowMessage","attr","combined","success","title","strExport","message","error","exportAnchors","parents","count","length","returnCount","NoExportable","p","when","each","h","then","get","data","showExport","ajaxRemoveMessage","buttonOptions","strClose","text","class","click","dialog","remove","classes","width","buttons","getSqlEditor","editorDialog","isNew","that","$editRow","hasClass","strGo","CodeMirror","save","serialize","strProcessingRequest","url","post","slidingMessage","tableId","tableType","mode","insert","inserted","children","eq","toUpperCase","trim","name","before","new_row","append","show","removeClass","has","hide","ct","rowclass","addClass","is","Navigation","reload","height","minWidth","modal","open","addDatepicker","css","datepicker","initialized","close","linterOptions","routineEditor","postDialogShow","dropDialog","$currRow","question","html","confirm","params","getJsConfirmCommonParam","getPostData","$table","parent","sql_query","dropMultipleDialog","strDropRTEitems","dropAnchors","$anchor","prop","checked","indeterminate","setOptionsForParameter","sortable","containment","handle","stop","reindexParameters","index","inputname","startsWith","substring","isSuccess","$inputtyp","$inputlen","$returntyp","$returnlen","indexOf","MissingReturn","$type","$len","$text","$num","$noOpts","$noLen","closest","first","executeDialog","on","event","preventDefault","keyCode","registerOnload","toggle","$row","$routineParamsTable","newParamRow","replace","$newrow"],"sourceRoot":""}