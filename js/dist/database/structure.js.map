{"version":3,"file":"database/structure.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/database/structure.js"],"sourcesContent":["/**\n * @fileoverview    functions used on the database structure page\n * @name            Database Structure\n *\n * @requires    jQuery\n * @requires    jQueryUI\n * @required    js/functions.js\n */\n\nvar DatabaseStructure = {};\n\n/**\n * AJAX scripts for /database/structure\n *\n * Actions ajaxified here:\n * Drop Database\n * Truncate Table\n * Drop Table\n *\n */\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('database/structure.js', function () {\n    $(document).off('click', 'a.truncate_table_anchor.ajax');\n    $(document).off('click', 'a.drop_table_anchor.ajax');\n    $(document).off('click', '#real_end_input');\n    $(document).off('click', 'a.favorite_table_anchor.ajax');\n    $('a.real_row_count').off('click');\n    $('a.row_count_sum').off('click');\n    $('select[name=submit_mult]').off('change');\n});\n\n/**\n * Adjust number of rows and total size in the summary\n * when truncating, creating, dropping or inserting into a table\n */\nDatabaseStructure.adjustTotals = function () {\n    var byteUnits = [\n        Messages.strB,\n        Messages.strKiB,\n        Messages.strMiB,\n        Messages.strGiB,\n        Messages.strTiB,\n        Messages.strPiB,\n        Messages.strEiB\n    ];\n    /**\n     * @var $allTr jQuery object that references all the rows in the list of tables\n     */\n    var $allTr = $('#tablesForm').find('table.data tbody').first().find('tr');\n    // New summary values for the table\n    var tableSum = $allTr.length;\n    var rowsSum = 0;\n    var sizeSum = 0;\n    var overheadSum = 0;\n    var rowSumApproximated = false;\n\n    $allTr.each(function () {\n        var $this = $(this);\n        var i;\n        var tmpVal;\n        // Get the number of rows for this SQL table\n        var strRows = $this.find('.tbl_rows').text();\n        // If the value is approximated\n        if (strRows.indexOf('~') === 0) {\n            rowSumApproximated = true;\n            // The approximated value contains a preceding ~ (Eg 100 --> ~100)\n            strRows = strRows.substring(1, strRows.length);\n        }\n        strRows = strRows.replace(/[,.\\s]/g, '');\n        var intRow = parseInt(strRows, 10);\n        if (! isNaN(intRow)) {\n            rowsSum += intRow;\n        }\n        // Extract the size and overhead\n        var valSize         = 0;\n        var valOverhead     = 0;\n        var strSize         = $this.find('.tbl_size span:not(.unit)').text().trim();\n        var strSizeUnit     = $this.find('.tbl_size span.unit').text().trim();\n        var strOverhead     = $this.find('.tbl_overhead span:not(.unit)').text().trim();\n        var strOverheadUnit = $this.find('.tbl_overhead span.unit').text().trim();\n        // Given a value and a unit, such as 100 and KiB, for the table size\n        // and overhead calculate their numeric values in bytes, such as 102400\n        for (i = 0; i < byteUnits.length; i++) {\n            if (strSizeUnit === byteUnits[i]) {\n                tmpVal = parseFloat(strSize);\n                valSize = tmpVal * Math.pow(1024, i);\n                break;\n            }\n        }\n        for (i = 0; i < byteUnits.length; i++) {\n            if (strOverheadUnit === byteUnits[i]) {\n                tmpVal = parseFloat(strOverhead);\n                valOverhead = tmpVal * Math.pow(1024, i);\n                break;\n            }\n        }\n        sizeSum += valSize;\n        overheadSum += valOverhead;\n    });\n    // Add some commas for readability:\n    // 1000000 becomes 1,000,000\n    var strRowSum = rowsSum + '';\n    var regex = /(\\d+)(\\d{3})/;\n    while (regex.test(strRowSum)) {\n        strRowSum = strRowSum.replace(regex, '$1' + ',' + '$2');\n    }\n    // If approximated total value add ~ in front\n    if (rowSumApproximated) {\n        strRowSum = '~' + strRowSum;\n    }\n    // Calculate the magnitude for the size and overhead values\n    var sizeMagnitude = 0;\n    var overheadMagnitude = 0;\n    while (sizeSum >= 1024) {\n        sizeSum /= 1024;\n        sizeMagnitude++;\n    }\n    while (overheadSum >= 1024) {\n        overheadSum /= 1024;\n        overheadMagnitude++;\n    }\n\n    sizeSum = Math.round(sizeSum * 10) / 10;\n    overheadSum = Math.round(overheadSum * 10) / 10;\n\n    // Update summary with new data\n    var $summary = $('#tbl_summary_row');\n    $summary.find('.tbl_num').text(Functions.sprintf(Messages.strNTables, tableSum));\n    if (rowSumApproximated) {\n        $summary.find('.row_count_sum').text(strRowSum);\n    } else {\n        $summary.find('.tbl_rows').text(strRowSum);\n    }\n    $summary.find('.tbl_size').text(sizeSum + ' ' + byteUnits[sizeMagnitude]);\n    $summary.find('.tbl_overhead').text(overheadSum + ' ' + byteUnits[overheadMagnitude]);\n};\n\n/**\n * Gets the real row count for a table or DB.\n * @param {object} $target Target for appending the real count value.\n */\nDatabaseStructure.fetchRealRowCount = function ($target) {\n    var $throbber = $('#pma_navigation').find('.throbber')\n        .first()\n        .clone()\n        .css({ visibility: 'visible', display: 'inline-block' })\n        .on('click', false);\n    $target.html($throbber);\n    $.ajax({\n        type: 'GET',\n        url: $target.attr('href'),\n        cache: false,\n        dataType: 'json',\n        success: function (response) {\n            if (response.success) {\n                // If to update all row counts for a DB.\n                if (response.real_row_count_all) {\n                    $.each(JSON.parse(response.real_row_count_all),\n                        function (index, table) {\n                            // Update each table row count.\n                            $('table.data td[data-table*=\"' + table.table + '\"]')\n                                .text(table.row_count);\n                        }\n                    );\n                }\n                // If to update a particular table's row count.\n                if (response.real_row_count) {\n                    // Append the parent cell with real row count.\n                    $target.parent().text(response.real_row_count);\n                }\n                // Adjust the 'Sum' displayed at the bottom.\n                DatabaseStructure.adjustTotals();\n            } else {\n                Functions.ajaxShowMessage(Messages.strErrorRealRowCount);\n            }\n        },\n        error: function () {\n            Functions.ajaxShowMessage(Messages.strErrorRealRowCount);\n        }\n    });\n};\n\nAJAX.registerOnload('database/structure.js', function () {\n    /**\n     * Event handler on select of \"Make consistent with central list\"\n     */\n    $('select[name=submit_mult]').on('change', function (event) {\n        var url = 'index.php?route=/database/structure';\n        var action = $(this).val();\n\n        if (action === 'make_consistent_with_central_list') {\n            event.preventDefault();\n            event.stopPropagation();\n\n            $('#makeConsistentWithCentralListModal').modal('show').on('shown.bs.modal', function () {\n                $('#makeConsistentWithCentralListContinue').on('click', function () {\n                    const $form = $('#tablesForm');\n                    const argSep = CommonParams.get('arg_separator');\n                    const data = $form.serialize() + argSep + 'ajax_request=true' + argSep + 'ajax_page_request=true';\n\n                    Functions.ajaxShowMessage();\n                    AJAX.source = $form;\n\n                    $.post(\n                        'index.php?route=/database/structure/central-columns/make-consistent',\n                        data,\n                        AJAX.responseHandler\n                    );\n\n                    $('#makeConsistentWithCentralListModal').modal('hide');\n                });\n            });\n\n            return;\n        }\n\n        if (action === 'copy_tbl' ||\n            action === 'add_prefix_tbl' ||\n            action === 'replace_prefix_tbl' ||\n            action === 'copy_tbl_change_prefix'\n        ) {\n            event.preventDefault();\n            event.stopPropagation();\n            if ($('input[name=\"selected_tbl[]\"]:checked').length === 0) {\n                return false;\n            }\n            var formData = $('#tablesForm').serialize();\n            var modalTitle = '';\n            if (action === 'copy_tbl') {\n                url = 'index.php?route=/database/structure/copy-form';\n                modalTitle = Messages.strCopyTablesTo;\n            } else if (action === 'add_prefix_tbl') {\n                url = 'index.php?route=/database/structure/add-prefix';\n                modalTitle = Messages.strAddPrefix;\n            } else if (action === 'replace_prefix_tbl') {\n                url = 'index.php?route=/database/structure/change-prefix-form';\n                modalTitle = Messages.strReplacePrefix;\n            } else if (action === 'copy_tbl_change_prefix') {\n                url = 'index.php?route=/database/structure/change-prefix-form';\n                modalTitle = Messages.strCopyPrefix;\n            }\n            $.ajax({\n                type: 'POST',\n                url: url,\n                dataType: 'html',\n                data: formData\n            }).done(function (modalBody) {\n                const bulkActionModal = $('#bulkActionModal');\n                bulkActionModal.on('show.bs.modal', function () {\n                    this.querySelector('.modal-title').innerText = modalTitle;\n                    this.querySelector('.modal-body').innerHTML = modalBody;\n                });\n                bulkActionModal.modal('show').on('shown.bs.modal', function () {\n                    $('#bulkActionContinue').on('click', function () {\n                        $('#ajax_form').trigger('submit');\n                        $('#bulkActionModal').modal('hide');\n                    });\n                });\n            });\n\n            return;\n        }\n\n        if (action === 'analyze_tbl') {\n            url = 'index.php?route=/table/maintenance/analyze';\n        } else if (action === 'sync_unique_columns_central_list') {\n            url = 'index.php?route=/database/structure/central-columns/add';\n        } else if (action === 'delete_unique_columns_central_list') {\n            url = 'index.php?route=/database/structure/central-columns/remove';\n        } else if (action === 'check_tbl') {\n            url = 'index.php?route=/table/maintenance/check';\n        } else if (action === 'checksum_tbl') {\n            url = 'index.php?route=/table/maintenance/checksum';\n        } else if (action === 'drop_tbl') {\n            url = 'index.php?route=/database/structure/drop-form';\n        } else if (action === 'empty_tbl') {\n            url = 'index.php?route=/database/structure/empty-form';\n        } else if (action === 'export') {\n            url = 'index.php?route=/export/tables';\n        } else if (action === 'optimize_tbl') {\n            url = 'index.php?route=/table/maintenance/optimize';\n        } else if (action === 'repair_tbl') {\n            url = 'index.php?route=/table/maintenance/repair';\n        } else if (action === 'show_create') {\n            url = 'index.php?route=/database/structure/show-create';\n        } else {\n            $('#tablesForm').trigger('submit');\n\n            return;\n        }\n\n        var $form = $(this).parents('form');\n        var argsep = CommonParams.get('arg_separator');\n        var data = $form.serialize() + argsep + 'ajax_request=true' + argsep + 'ajax_page_request=true';\n\n        Functions.ajaxShowMessage();\n        AJAX.source = $form;\n\n        $.post(url, data, AJAX.responseHandler);\n    });\n\n    /**\n     * Ajax Event handler for 'Truncate Table'\n     */\n    $(document).on('click', 'a.truncate_table_anchor.ajax', function (event) {\n        event.preventDefault();\n\n        /**\n         * @var $this_anchor Object  referring to the anchor clicked\n         */\n        var $thisAnchor = $(this);\n\n        // extract current table name and build the question string\n        /**\n         * @var curr_table_name String containing the name of the table to be truncated\n         */\n        var currTableName = $thisAnchor.parents('tr').children('th').children('a').text();\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question = Messages.strTruncateTableStrongWarning + ' ' +\n            Functions.sprintf(Messages.strDoYouReally, 'TRUNCATE `' + Functions.escapeHtml(currTableName) + '`') +\n            Functions.getForeignKeyCheckboxLoader();\n\n        $thisAnchor.confirm(question, $thisAnchor.attr('href'), function (url) {\n            Functions.ajaxShowMessage(Messages.strProcessingRequest);\n\n            var params = Functions.getJsConfirmCommonParam(this, $thisAnchor.getPostData());\n\n            $.post(url, params, function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    Functions.ajaxShowMessage(data.message);\n                    // Adjust table statistics\n                    var $tr = $thisAnchor.closest('tr');\n                    $tr.find('.tbl_rows').text('0');\n                    $tr.find('.tbl_size, .tbl_overhead').text('-');\n                    DatabaseStructure.adjustTotals();\n                } else {\n                    Functions.ajaxShowMessage(Messages.strErrorProcessingRequest + ' : ' + data.error, false);\n                }\n            }); // end $.post()\n        }, Functions.loadForeignKeyCheckbox);\n    }); // end of Truncate Table Ajax action\n\n    /**\n     * Ajax Event handler for 'Drop Table' or 'Drop View'\n     */\n    $(document).on('click', 'a.drop_table_anchor.ajax', function (event) {\n        event.preventDefault();\n\n        var $thisAnchor = $(this);\n\n        // extract current table name and build the question string\n        /**\n         * @var $curr_row    Object containing reference to the current row\n         */\n        var $currRow = $thisAnchor.parents('tr');\n        /**\n         * @var curr_table_name String containing the name of the table to be truncated\n         */\n        var currTableName = $currRow.children('th').children('a').text();\n        /**\n         * @var is_view Boolean telling if we have a view\n         */\n        var isView = $currRow.hasClass('is_view') || $thisAnchor.hasClass('view');\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question;\n        if (! isView) {\n            question = Messages.strDropTableStrongWarning + ' ' +\n                Functions.sprintf(Messages.strDoYouReally, 'DROP TABLE `' + Functions.escapeHtml(currTableName) + '`');\n        } else {\n            question =\n                Functions.sprintf(Messages.strDoYouReally, 'DROP VIEW `' + Functions.escapeHtml(currTableName) + '`');\n        }\n        question += Functions.getForeignKeyCheckboxLoader();\n\n        $thisAnchor.confirm(question, $thisAnchor.attr('href'), function (url) {\n            var $msg = Functions.ajaxShowMessage(Messages.strProcessingRequest);\n\n            var params = Functions.getJsConfirmCommonParam(this, $thisAnchor.getPostData());\n\n            $.post(url, params, function (data) {\n                if (typeof data !== 'undefined' && data.success === true) {\n                    Functions.ajaxShowMessage(data.message);\n                    $currRow.hide('medium').remove();\n                    DatabaseStructure.adjustTotals();\n                    Navigation.reload();\n                    Functions.ajaxRemoveMessage($msg);\n                } else {\n                    Functions.ajaxShowMessage(Messages.strErrorProcessingRequest + ' : ' + data.error, false);\n                }\n            }); // end $.post()\n        }, Functions.loadForeignKeyCheckbox);\n    }); // end of Drop Table Ajax action\n\n    // Calculate Real End for InnoDB\n    /**\n     * Ajax Event handler for calculating the real end for a InnoDB table\n     *\n     */\n    $(document).on('click', '#real_end_input', function (event) {\n        event.preventDefault();\n\n        /**\n         * @var question    String containing the question to be asked for confirmation\n         */\n        var question = Messages.strOperationTakesLongTime;\n\n        $(this).confirm(question, '', function () {\n            return true;\n        });\n        return false;\n    }); // end Calculate Real End for InnoDB\n\n    // Add tooltip to favorite icons.\n    $('.favorite_table_anchor').each(function () {\n        Functions.tooltip(\n            $(this),\n            'a',\n            $(this).attr('title')\n        );\n    });\n\n    // Get real row count via Ajax.\n    $('a.real_row_count').on('click', function (event) {\n        event.preventDefault();\n        DatabaseStructure.fetchRealRowCount($(this));\n    });\n    // Get all real row count.\n    $('a.row_count_sum').on('click', function (event) {\n        event.preventDefault();\n        DatabaseStructure.fetchRealRowCount($(this));\n    });\n});\n"],"names":["DatabaseStructure","AJAX","registerTeardown","$","document","off","adjustTotals","byteUnits","Messages","strB","strKiB","strMiB","strGiB","strTiB","strPiB","strEiB","$allTr","find","first","tableSum","length","rowsSum","sizeSum","overheadSum","rowSumApproximated","each","$this","i","tmpVal","strRows","text","indexOf","substring","replace","intRow","parseInt","isNaN","valSize","valOverhead","strSize","trim","strSizeUnit","strOverhead","strOverheadUnit","parseFloat","Math","pow","strRowSum","regex","test","sizeMagnitude","overheadMagnitude","round","$summary","Functions","sprintf","strNTables","fetchRealRowCount","$target","$throbber","clone","css","visibility","display","on","html","ajax","type","url","attr","cache","dataType","success","response","real_row_count_all","JSON","parse","index","table","row_count","real_row_count","parent","ajaxShowMessage","strErrorRealRowCount","error","registerOnload","event","action","val","preventDefault","stopPropagation","modal","$form","argSep","CommonParams","get","data","serialize","source","post","responseHandler","formData","modalTitle","strCopyTablesTo","strAddPrefix","strReplacePrefix","strCopyPrefix","done","modalBody","bulkActionModal","querySelector","innerText","innerHTML","trigger","parents","argsep","$thisAnchor","currTableName","children","question","strTruncateTableStrongWarning","strDoYouReally","escapeHtml","getForeignKeyCheckboxLoader","confirm","strProcessingRequest","params","getJsConfirmCommonParam","getPostData","message","$tr","closest","strErrorProcessingRequest","loadForeignKeyCheckbox","$currRow","isView","hasClass","strDropTableStrongWarning","$msg","hide","remove","Navigation","reload","ajaxRemoveMessage","strOperationTakesLongTime","tooltip"],"sourceRoot":""}