{"version":3,"file":"database/triggers.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/database/triggers.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from '../modules/ajax.js';\nimport { Functions } from '../modules/functions.js';\nimport { Navigation } from '../modules/navigation.js';\nimport { ajaxRemoveMessage, ajaxShowMessage } from '../modules/ajax-message.js';\nimport getJsConfirmCommonParam from '../modules/functions/getJsConfirmCommonParam.js';\n\nAJAX.registerTeardown('database/triggers.js', function () {\n    $(document).off('click', 'a.ajax.add_anchor, a.ajax.edit_anchor');\n    $(document).off('click', 'a.ajax.export_anchor');\n    $(document).off('click', '#bulkActionExportButton');\n    $(document).off('click', 'a.ajax.drop_anchor');\n    $(document).off('click', '#bulkActionDropButton');\n});\n\nconst DatabaseTriggers = {\n    /**\n     * @var $ajaxDialog Query object containing the reference to the\n     *                  dialog that contains the editor\n     */\n    $ajaxDialog: null,\n    /**\n     * @var syntaxHiglighter Reference to the codemirror editor\n     */\n    syntaxHiglighter: null,\n    /**\n     * Validate editor form fields.\n     *\n     * @return {boolean}\n     */\n    validate: function () {\n        /**\n         * @var $elm a jQuery object containing the reference\n         *           to an element that is being validated\n         */\n        var $elm = null;\n        // Common validation. At the very least the name\n        // and the definition must be provided for an item\n        $elm = $('table.rte_table').last().find('input[name=item_name]');\n        if ($elm.val() === '') {\n            $elm.trigger('focus');\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        $elm = $('table.rte_table').find('textarea[name=item_definition]');\n        if ($elm.val() === '') {\n            if (this.syntaxHiglighter !== null) {\n                this.syntaxHiglighter.focus();\n            } else {\n                $('textarea[name=item_definition]').last().trigger('focus');\n            }\n            alert(window.Messages.strFormEmpty);\n            return false;\n        }\n        // The validation has so far passed, so now\n        // we can validate item-specific fields.\n        return this.validateCustom();\n    }, // end validate()\n    /**\n     * Validate custom editor form fields.\n     * This function can be overridden by\n     * other files in this folder\n     *\n     * @return {boolean}\n     */\n    validateCustom: function () {\n        return true;\n    }, // end validateCustom()\n\n    exportDialog: function ($this) {\n        var $msg = ajaxShowMessage();\n        if ($this.attr('id') === 'bulkActionExportButton') {\n            var combined = {\n                success: true,\n                title: window.Messages.strExport,\n                message: '',\n                error: ''\n            };\n            // export anchors of all selected rows\n            var exportAnchors = $('input.checkall:checked').parents('tr').find('.export_anchor');\n            var count = exportAnchors.length;\n            var returnCount = 0;\n            var p = $.when();\n            exportAnchors.each(function () {\n                var h = $(this).attr('href');\n                p = p.then(function () {\n                    return $.get(h, { 'ajax_request': true }, function (data) {\n                        returnCount++;\n                        if (data.success === true) {\n                            combined.message += '\\n' + data.message + '\\n';\n                            if (returnCount === count) {\n                                showExport(combined);\n                            }\n                        } else {\n                            // complain even if one export is failing\n                            combined.success = false;\n                            combined.error += '\\n' + data.error + '\\n';\n                            if (returnCount === count) {\n                                showExport(combined);\n                            }\n                        }\n                    });\n                });\n            });\n        } else {\n            $.get($this.attr('href'), { 'ajax_request': true }, showExport);\n        }\n        ajaxRemoveMessage($msg);\n\n        function showExport (data) {\n            if (data.success === true) {\n                ajaxRemoveMessage($msg);\n                /**\n                 * @var buttonOptions Object containing options\n                 *                     for jQueryUI dialog buttons\n                 */\n                var buttonOptions = {\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-primary',\n                    },\n                };\n                buttonOptions[window.Messages.strClose].click = function () {\n                    $(this).dialog('close').remove();\n                };\n                /**\n                 * Display the dialog to the user\n                 */\n                data.message = '<textarea cols=\"40\" rows=\"15\" class=\"w-100\">' + data.message + '</textarea>';\n                var $ajaxDialog = $('<div>' + data.message + '</div>').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    width: 500,\n                    buttons: buttonOptions,\n                    title: data.title\n                });\n                // Attach syntax highlighted editor to export dialog\n                /**\n                 * @var $elm jQuery object containing the reference\n                 *           to the Export textarea.\n                 */\n                var $elm = $ajaxDialog.find('textarea');\n                Functions.getSqlEditor($elm);\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        } // end showExport()\n    },  // end exportDialog()\n    editorDialog: function (isNew, $this) {\n        var that = this;\n        /**\n         * @var $edit_row jQuery object containing the reference to\n         *                the row of the the item being edited\n         *                from the list of items\n         */\n        var $editRow = null;\n        if ($this.hasClass('edit_anchor')) {\n            // Remember the row of the item being edited for later,\n            // so that if the edit is successful, we can replace the\n            // row with info about the modified item.\n            $editRow = $this.parents('tr');\n        }\n        /**\n         * @var $msg jQuery object containing the reference to\n         *           the AJAX message shown to the user\n         */\n        var $msg = ajaxShowMessage();\n        $.get($this.attr('href'), { 'ajax_request': true }, function (data) {\n            if (data.success === true) {\n                var buttonOptions = {\n                    [window.Messages.strGo]: {\n                        text: window.Messages.strGo,\n                        class: 'btn btn-primary',\n                    },\n                    [window.Messages.strClose]: {\n                        text: window.Messages.strClose,\n                        class: 'btn btn-secondary',\n                    },\n                };\n                // We have successfully fetched the editor form\n                ajaxRemoveMessage($msg);\n                // Now define the function that is called when\n                // the user presses the \"Go\" button\n                buttonOptions[window.Messages.strGo].click = function () {\n                    // Move the data from the codemirror editor back to the\n                    // textarea, where it can be used in the form submission.\n                    if (typeof window.CodeMirror !== 'undefined') {\n                        that.syntaxHiglighter.save();\n                    }\n                    // Validate editor and submit request, if passed.\n                    if (that.validate()) {\n                        /**\n                         * @var data Form data to be sent in the AJAX request\n                         */\n                        var data = $('form.rte_form').last().serialize();\n                        $msg = ajaxShowMessage(\n                            window.Messages.strProcessingRequest\n                        );\n                        var url = $('form.rte_form').last().attr('action');\n                        $.post(url, data, function (data) {\n                            if (data.success === true) {\n                                // Item created successfully\n                                ajaxRemoveMessage($msg);\n                                Functions.slidingMessage(data.message);\n                                that.$ajaxDialog.dialog('close');\n                                // If we are in 'edit' mode, we must\n                                // remove the reference to the old row.\n                                if (mode === 'edit' && $editRow !== null) {\n                                    $editRow.remove();\n                                }\n                                // Sometimes, like when moving a trigger from\n                                // a table to another one, the new row should\n                                // not be inserted into the list. In this case\n                                // \"data.insert\" will be set to false.\n                                if (data.insert) {\n                                    // Insert the new row at the correct\n                                    // location in the list of items\n                                    /**\n                                     * @var text Contains the name of an item from\n                                     *           the list that is used in comparisons\n                                     *           to find the correct location where\n                                     *           to insert a new row.\n                                     */\n                                    var text = '';\n                                    /**\n                                     * @var inserted Whether a new item has been\n                                     *               inserted in the list or not\n                                     */\n                                    var inserted = false;\n                                    $('table.data').find('tr').each(function () {\n                                        text = $(this)\n                                            .children('td')\n                                            .eq(0)\n                                            .find('strong')\n                                            .text()\n                                            .toUpperCase()\n                                            .trim();\n                                        if (text !== '' && text > data.name) {\n                                            $(this).before(data.new_row);\n                                            inserted = true;\n                                            return false;\n                                        }\n                                    });\n                                    if (! inserted) {\n                                        // If we didn't manage to insert the row yet,\n                                        // it must belong at the end of the list,\n                                        // so we insert it there.\n                                        $('table.data').append(data.new_row);\n                                    }\n                                    // Fade-in the new row\n                                    $('tr.ajaxInsert')\n                                        .show('slow')\n                                        .removeClass('ajaxInsert');\n                                } else if ($('table.data').find('tr').has('td').length === 0) {\n                                    // If we are not supposed to insert the new row,\n                                    // we will now check if the table is empty and\n                                    // needs to be hidden. This will be the case if\n                                    // we were editing the only item in the list,\n                                    // which we removed and will not be inserting\n                                    // something else in its place.\n                                    $('table.data').hide('slow', function () {\n                                        $('#nothing2display').show('slow');\n                                    });\n                                }\n                                // Now we have inserted the row at the correct\n                                // position, but surely at least some row classes\n                                // are wrong now. So we will iterate through\n                                // all rows and assign correct classes to them\n                                /**\n                                 * @var ct Count of processed rows\n                                 */\n                                var ct = 0;\n                                /**\n                                 * @var rowclass Class to be attached to the row\n                                 *               that is being processed\n                                 */\n                                var rowclass = '';\n                                $('table.data').find('tr').has('td').each(function () {\n                                    rowclass = (ct % 2 === 0) ? 'odd' : 'even';\n                                    $(this).removeClass().addClass(rowclass);\n                                    ct++;\n                                });\n                                // If this is the first item being added, remove\n                                // the \"No items\" message and show the list.\n                                if ($('table.data').find('tr').has('td').length > 0 &&\n                                    $('#nothing2display').is(':visible')\n                                ) {\n                                    $('#nothing2display').hide('slow', function () {\n                                        $('table.data').show('slow');\n                                    });\n                                }\n                                Navigation.reload();\n                            } else {\n                                ajaxShowMessage(data.error, false);\n                            }\n                        }); // end $.post()\n                    } // end \"if (that.validate())\"\n                }; // end of function that handles the submission of the Editor\n                buttonOptions[window.Messages.strClose].click = function () {\n                    $(this).dialog('close');\n                };\n                /**\n                 * Display the dialog to the user\n                 */\n                that.$ajaxDialog = $('<div id=\"rteDialog\">' + data.message + '</div>').dialog({\n                    classes: {\n                        'ui-dialog-titlebar-close': 'btn-close'\n                    },\n                    width: 700,\n                    minWidth: 500,\n                    buttons: buttonOptions,\n                    // Issue #15810 - use button titles for modals (eg: new procedure)\n                    // Respect the order: title on href tag, href content, title sent in response\n                    title: $this.attr('title') || $this.text() || $(data.title).text(),\n                    modal: true,\n                    open: function () {\n                        $('#rteDialog').dialog('option', 'max-height', $(window).height());\n                        if ($('#rteDialog').parents('.ui-dialog').height() > $(window).height()) {\n                            $('#rteDialog').dialog('option', 'height', $(window).height());\n                        }\n                        $(this).find('input[name=item_name]').trigger('focus');\n                        $(this).find('input.datefield').each(function () {\n                            Functions.addDatepicker($(this).css('width', '95%'), 'date');\n                        });\n                        $(this).find('input.datetimefield').each(function () {\n                            Functions.addDatepicker($(this).css('width', '95%'), 'datetime');\n                        });\n                        $.datepicker.initialized = false;\n                    },\n                    close: function () {\n                        $(this).remove();\n                    }\n                });\n                /**\n                 * @var mode Used to remember whether the editor is in\n                 *           \"Edit\" or \"Add\" mode\n                 */\n                var mode = 'add';\n                if ($('input[name=editor_process_edit]').length > 0) {\n                    mode = 'edit';\n                }\n                // Attach syntax highlighted editor to the definition\n                /**\n                 * @var elm jQuery object containing the reference to\n                 *                 the Definition textarea.\n                 */\n                var $elm = $('textarea[name=item_definition]').last();\n                var linterOptions = {};\n                linterOptions.triggerEditor = true;\n                that.syntaxHiglighter = Functions.getSqlEditor($elm, {}, 'both', linterOptions);\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }); // end $.get()\n    },\n\n    dropDialog: function ($this) {\n        /**\n         * @var $curr_row Object containing reference to the current row\n         */\n        var $currRow = $this.parents('tr');\n        /**\n         * @var question String containing the question to be asked for confirmation\n         */\n        var question = $('<div></div>').text(\n            $currRow.children('td').children('.drop_sql').html()\n        );\n        // We ask for confirmation first here, before submitting the ajax request\n        $this.confirm(question, $this.attr('href'), function (url) {\n            /**\n             * @var msg jQuery object containing the reference to\n             *          the AJAX message shown to the user\n             */\n            var $msg = ajaxShowMessage(window.Messages.strProcessingRequest);\n            var params = getJsConfirmCommonParam(this, $this.getPostData());\n            $.post(url, params, function (data) {\n                if (data.success === true) {\n                    /**\n                     * @var $table Object containing reference\n                     *             to the main list of elements\n                     */\n                    var $table = $currRow.parent();\n                    // Check how many rows will be left after we remove\n                    // the one that the user has requested us to remove\n                    if ($table.find('tr').length === 3) {\n                        // If there are two rows left, it means that they are\n                        // the header of the table and the rows that we are\n                        // about to remove, so after the removal there will be\n                        // nothing to show in the table, so we hide it.\n                        $table.hide('slow', function () {\n                            $(this).find('tr.even, tr.odd').remove();\n                            $('.withSelected').remove();\n                            $('#nothing2display').show('slow');\n                        });\n                    } else {\n                        $currRow.hide('slow', function () {\n                            $(this).remove();\n                            // Now we have removed the row from the list, but maybe\n                            // some row classes are wrong now. So we will iterate\n                            // through all rows and assign correct classes to them.\n                            /**\n                             * @var ct Count of processed rows\n                             */\n                            var ct = 0;\n                            /**\n                             * @var rowclass Class to be attached to the row\n                             *               that is being processed\n                             */\n                            var rowclass = '';\n                            $table.find('tr').has('td').each(function () {\n                                rowclass = (ct % 2 === 1) ? 'odd' : 'even';\n                                $(this).removeClass().addClass(rowclass);\n                                ct++;\n                            });\n                        });\n                    }\n                    // Get rid of the \"Loading\" message\n                    ajaxRemoveMessage($msg);\n                    // Show the query that we just executed\n                    Functions.slidingMessage(data.sql_query);\n                    Navigation.reload();\n                } else {\n                    ajaxShowMessage(data.error, false);\n                }\n            }); // end $.post()\n        });\n    },\n\n    dropMultipleDialog: function ($this) {\n        // We ask for confirmation here\n        $this.confirm(window.Messages.strDropRTEitems, '', function () {\n            /**\n             * @var msg jQuery object containing the reference to\n             *          the AJAX message shown to the user\n             */\n            var $msg = ajaxShowMessage(window.Messages.strProcessingRequest);\n\n            // drop anchors of all selected rows\n            var dropAnchors = $('input.checkall:checked').parents('tr').find('.drop_anchor');\n            var success = true;\n            var count = dropAnchors.length;\n            var returnCount = 0;\n\n            dropAnchors.each(function () {\n                var $anchor = $(this);\n                /**\n                 * @var $curr_row Object containing reference to the current row\n                 */\n                var $currRow = $anchor.parents('tr');\n                var params = getJsConfirmCommonParam(this, $anchor.getPostData());\n                $.post($anchor.attr('href'), params, function (data) {\n                    returnCount++;\n                    if (data.success === true) {\n                        /**\n                         * @var $table Object containing reference\n                         *             to the main list of elements\n                         */\n                        var $table = $currRow.parent();\n                        // Check how many rows will be left after we remove\n                        // the one that the user has requested us to remove\n                        if ($table.find('tr').length === 3) {\n                            // If there are two rows left, it means that they are\n                            // the header of the table and the rows that we are\n                            // about to remove, so after the removal there will be\n                            // nothing to show in the table, so we hide it.\n                            $table.hide('slow', function () {\n                                $(this).find('tr.even, tr.odd').remove();\n                                $('.withSelected').remove();\n                                $('#nothing2display').show('slow');\n                            });\n                        } else {\n                            $currRow.hide('fast', function () {\n                                // we will iterate\n                                // through all rows and assign correct classes to them.\n                                /**\n                                 * @var ct Count of processed rows\n                                 */\n                                var ct = 0;\n                                /**\n                                 * @var rowclass Class to be attached to the row\n                                 *               that is being processed\n                                 */\n                                var rowclass = '';\n                                $table.find('tr').has('td').each(function () {\n                                    rowclass = (ct % 2 === 1) ? 'odd' : 'even';\n                                    $(this).removeClass().addClass(rowclass);\n                                    ct++;\n                                });\n                            });\n                            $currRow.remove();\n                        }\n                        if (returnCount === count) {\n                            if (success) {\n                                // Get rid of the \"Loading\" message\n                                ajaxRemoveMessage($msg);\n                                $('#rteListForm_checkall').prop({ checked: false, indeterminate: false });\n                            }\n                            Navigation.reload();\n                        }\n                    } else {\n                        ajaxShowMessage(data.error, false);\n                        success = false;\n                        if (returnCount === count) {\n                            Navigation.reload();\n                        }\n                    }\n                }); // end $.post()\n            }); // end drop_anchors.each()\n        });\n    }\n};\n\nAJAX.registerOnload('database/triggers.js', function () {\n    /**\n     * Attach Ajax event handlers for the Add/Edit functionality.\n     */\n    $(document).on('click', 'a.ajax.add_anchor, a.ajax.edit_anchor', function (event) {\n        event.preventDefault();\n\n        if ($(this).hasClass('add_anchor')) {\n            $.datepicker.initialized = false;\n        }\n\n        DatabaseTriggers.editorDialog($(this).hasClass('add_anchor'), $(this));\n    });\n\n    /**\n     * Attach Ajax event handlers for Export\n     */\n    $(document).on('click', 'a.ajax.export_anchor', function (event) {\n        event.preventDefault();\n        DatabaseTriggers.exportDialog($(this));\n    });\n\n    $(document).on('click', '#bulkActionExportButton', function (event) {\n        event.preventDefault();\n        DatabaseTriggers.exportDialog($(this));\n    });\n\n    /**\n     * Attach Ajax event handlers for Drop functionality\n     */\n    $(document).on('click', 'a.ajax.drop_anchor', function (event) {\n        event.preventDefault();\n        DatabaseTriggers.dropDialog($(this));\n    });\n\n    $(document).on('click', '#bulkActionDropButton', function (event) {\n        event.preventDefault();\n        DatabaseTriggers.dropMultipleDialog($(this));\n    });\n});\n"],"names":["$","AJAX","Functions","Navigation","ajaxRemoveMessage","ajaxShowMessage","getJsConfirmCommonParam","registerTeardown","document","off","DatabaseTriggers","$ajaxDialog","syntaxHiglighter","validate","$elm","last","find","val","trigger","alert","window","Messages","strFormEmpty","focus","validateCustom","exportDialog","$this","$msg","attr","combined","success","title","strExport","message","error","exportAnchors","parents","count","length","returnCount","p","when","each","h","then","get","data","showExport","buttonOptions","strClose","text","class","click","dialog","remove","classes","width","buttons","getSqlEditor","editorDialog","isNew","that","$editRow","hasClass","strGo","CodeMirror","save","serialize","strProcessingRequest","url","post","slidingMessage","mode","insert","inserted","children","eq","toUpperCase","trim","name","before","new_row","append","show","removeClass","has","hide","ct","rowclass","addClass","is","reload","minWidth","modal","open","height","addDatepicker","css","datepicker","initialized","close","linterOptions","triggerEditor","dropDialog","$currRow","question","html","confirm","params","getPostData","$table","parent","sql_query","dropMultipleDialog","strDropRTEitems","dropAnchors","$anchor","prop","checked","indeterminate","registerOnload","on","event","preventDefault"],"sourceRoot":""}