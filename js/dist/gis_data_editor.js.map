{"version":3,"file":"gis_data_editor.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/gis_data_editor.js"],"sourcesContent":["/**\n * @fileoverview    functions used in GIS data editor\n *\n * @requires    jQuery\n *\n */\n\n/* global addZoomPanControllers, storeGisSvgRef, selectVisualization, styleOSM, zoomAndPan */ // js/table/gis_visualization.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\n// eslint-disable-next-line no-unused-vars\nvar gisEditorLoaded = false;\n\n/**\n * Closes the GIS data editor and perform necessary clean up work.\n */\nfunction closeGISEditor () {\n    $('#popup_background').fadeOut('fast');\n    $('#gis_editor').fadeOut('fast', function () {\n        $(this).empty();\n    });\n}\n\n/**\n * Prepares the HTML received via AJAX.\n */\nfunction prepareJSVersion () {\n    // Change the text on the submit button\n    $('#gis_editor').find('input[name=\\'gis_data[save]\\']')\n        .val(Messages.strCopy)\n        .insertAfter($('#gis_data_textarea'))\n        .before('<br><br>');\n\n    // Add close and cancel links\n    $('#gis_data_editor').prepend('<a class=\"close_gis_editor\" href=\"#\">' + Messages.strClose + '</a>');\n    $('<a class=\"cancel_gis_editor\" href=\"#\"> ' + Messages.strCancel + '</a>')\n        .insertAfter($('input[name=\\'gis_data[save]\\']'));\n\n    // Remove the unnecessary text\n    $('div#gis_data_output p').remove();\n\n    // Remove 'add' buttons and add links\n    $('#gis_editor').find('input.add').each(function () {\n        var $button = $(this);\n        $button.addClass('addJs').removeClass('add');\n        var classes = $button.attr('class');\n        $button.replaceWith(\n            '<a class=\"' + classes +\n            '\" name=\"' + $button.attr('name') +\n            '\" href=\"#\">+ ' + $button.val() + '</a>'\n        );\n    });\n}\n\n/**\n * Returns the HTML for a data point.\n *\n * @param {number} pointNumber point number\n * @param {string} prefix      prefix of the name\n * @return {string} the HTML for a data point\n */\nfunction addDataPoint (pointNumber, prefix) {\n    return '<br>' +\n        Functions.sprintf(Messages.strPointN, (pointNumber + 1)) + ': ' +\n        '<label for=\"x\">' + Messages.strX + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][x]\" value=\"\">' +\n        '<label for=\"y\">' + Messages.strY + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][y]\" value=\"\">';\n}\n\n/**\n * Initialize the visualization in the GIS data editor.\n */\nfunction initGISEditorVisualization () {\n    storeGisSvgRef();\n    // Loads either SVG or OSM visualization based on the choice\n    selectVisualization();\n    // Adds necessary styles to the div that contains the openStreetMap\n    styleOSM();\n    // Adds controllers for zooming and panning\n    addZoomPanControllers();\n    zoomAndPan();\n}\n\n/**\n * Loads JavaScript files and the GIS editor.\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n * @param token      token\n */\n// eslint-disable-next-line no-unused-vars\nfunction loadJSAndGISEditor (value, field, type, inputName) {\n    var head = document.getElementsByTagName('head')[0];\n    var script;\n\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = 'js/dist/table/gis_visualization.js';\n    head.appendChild(script);\n\n    // OpenLayers.js is BIG and takes time. So asynchronous loading would not work.\n    // Load the JS and do a callback to load the content for the GIS Editor.\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onreadystatechange = function () {\n        if (this.readyState === 'complete') {\n            loadGISEditor(value, field, type, inputName);\n        }\n    };\n    script.onload = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n    script.onerror = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n\n    script.src = 'js/vendor/openlayers/OpenLayers.js';\n    head.appendChild(script);\n\n    gisEditorLoaded = true;\n}\n\n/**\n * Loads the GIS editor via AJAX\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n */\nfunction loadGISEditor (value, field, type, inputName) {\n    var $gisEditor = $('#gis_editor');\n    $.post('index.php?route=/gis-data-editor', {\n        'field' : field,\n        'value' : value,\n        'type' : type,\n        'input_name' : inputName,\n        'get_gis_editor' : true,\n        'ajax_request': true,\n        'server': CommonParams.get('server')\n    }, function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $gisEditor.html(data.gis_editor);\n            initGISEditorVisualization();\n            prepareJSVersion();\n        } else {\n            Functions.ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n}\n\n/**\n * Opens up the dialog for the GIS data editor.\n */\n// eslint-disable-next-line no-unused-vars\nfunction openGISEditor () {\n    // Center the popup\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    var popupWidth = windowWidth * 0.9;\n    var popupHeight = windowHeight * 0.9;\n    var popupOffsetTop = windowHeight / 2 - popupHeight / 2;\n    var popupOffsetLeft = windowWidth / 2 - popupWidth / 2;\n\n    var $gisEditor = $('#gis_editor');\n    var $background = $('#popup_background');\n\n    $gisEditor.css({ 'top': popupOffsetTop, 'left': popupOffsetLeft, 'width': popupWidth, 'height': popupHeight });\n    $background.css({ 'opacity' : '0.7' });\n\n    $gisEditor.append(\n        '<div id=\"gis_data_editor\">' +\n        '<img class=\"ajaxIcon\" id=\"loadingMonitorIcon\" src=\"' +\n        themeImagePath + 'ajax_clock_small.gif\" alt=\"\">' +\n        '</div>'\n    );\n\n    // Make it appear\n    $background.fadeIn('fast');\n    $gisEditor.fadeIn('fast');\n}\n\n/**\n * Prepare and insert the GIS data in Well Known Text format\n * to the input field.\n */\nfunction insertDataAndClose () {\n    var $form = $('form#gis_data_editor_form');\n    var inputName = $form.find('input[name=\\'input_name\\']').val();\n\n    var argsep = CommonParams.get('arg_separator');\n    $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $('input[name=\\'' + inputName + '\\']').val(data.result);\n        } else {\n            Functions.ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n    closeGISEditor();\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('gis_data_editor.js', function () {\n    $(document).off('click', '#gis_editor input[name=\\'gis_data[save]\\']');\n    $(document).off('submit', '#gis_editor');\n    $(document).off('change', '#gis_editor input[type=\\'text\\']');\n    $(document).off('change', '#gis_editor select.gis_type');\n    $(document).off('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor');\n    $(document).off('click', '#gis_editor a.addJs.addPoint');\n    $(document).off('click', '#gis_editor a.addLine.addJs');\n    $(document).off('click', '#gis_editor a.addJs.addPolygon');\n    $(document).off('click', '#gis_editor a.addJs.addGeom');\n});\n\nAJAX.registerOnload('gis_data_editor.js', function () {\n    /**\n     * Prepares and insert the GIS data to the input field on clicking 'copy'.\n     */\n    $(document).on('click', '#gis_editor input[name=\\'gis_data[save]\\']', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Prepares and insert the GIS data to the input field on pressing 'enter'.\n     */\n    $(document).on('submit', '#gis_editor', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Trigger asynchronous calls on data change and update the output.\n     */\n    $(document).on('change', '#gis_editor input[type=\\'text\\']', function () {\n        var $form = $('form#gis_data_editor_form');\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $('#gis_data_textarea').val(data.result);\n                $('#placeholder').empty().removeClass('hasSVG').html(data.visualization);\n                $('#openlayersmap').empty();\n                /* TODO: the gis_data_editor should rather return JSON than JS code to eval */\n                // eslint-disable-next-line no-eval\n                eval(data.openLayers);\n                initGISEditorVisualization();\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Update the form on change of the GIS type.\n     */\n    $(document).on('change', '#gis_editor select.gis_type', function () {\n        var $gisEditor = $('#gis_editor');\n        var $form = $('form#gis_data_editor_form');\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'get_gis_editor=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $gisEditor.html(data.gis_editor);\n                initGISEditorVisualization();\n                prepareJSVersion();\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Handles closing of the GIS data editor.\n     */\n    $(document).on('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor', function () {\n        closeGISEditor();\n    });\n\n    /**\n     * Handles adding data points\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPoint', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOINT][add_point] => prefix = gis_data[0][MULTIPOINT]\n        var prefix = name.substring(0, name.length - 11);\n        // Find the number of points\n        var $noOfPointsInput = $('input[name=\\'' + prefix + '[no_of_points]' + '\\']');\n        var noOfPoints = parseInt($noOfPointsInput.val(), 10);\n        // Add the new data point\n        var html = addDataPoint(noOfPoints, prefix);\n        $a.before(html);\n        $noOfPointsInput.val(noOfPoints + 1);\n    });\n\n    /**\n     * Handles adding linestrings and inner rings\n     */\n    $(document).on('click', '#gis_editor a.addLine.addJs', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n\n        // Eg. name = gis_data[0][MULTILINESTRING][add_line] => prefix = gis_data[0][MULTILINESTRING]\n        var prefix = name.substring(0, name.length - 10);\n        var type = prefix.slice(prefix.lastIndexOf('[') + 1, prefix.lastIndexOf(']'));\n\n        // Find the number of lines\n        var $noOfLinesInput = $('input[name=\\'' + prefix + '[no_of_lines]' + '\\']');\n        var noOfLines = parseInt($noOfLinesInput.val(), 10);\n\n        // Add the new linesting of inner ring based on the type\n        var html = '<br>';\n        var noOfPoints;\n        if (type === 'MULTILINESTRING') {\n            html += Messages.strLineString + ' ' + (noOfLines + 1) + ':';\n            noOfPoints = 2;\n        } else {\n            html += Messages.strInnerRing + ' ' + noOfLines + ':';\n            noOfPoints = 4;\n        }\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfLines + '][no_of_points]\" value=\"' + noOfPoints + '\">';\n        for (var i = 0; i < noOfPoints; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfLines + ']'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfLines + '][add_point]\" href=\"#\">+ ' +\n            Messages.strAddPoint + '</a><br>';\n\n        $a.before(html);\n        $noOfLinesInput.val(noOfLines + 1);\n    });\n\n    /**\n     * Handles adding polygons\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPolygon', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOLYGON][add_polygon] => prefix = gis_data[0][MULTIPOLYGON]\n        var prefix = name.substring(0, name.length - 13);\n        // Find the number of polygons\n        var $noOfPolygonsInput = $('input[name=\\'' + prefix + '[no_of_polygons]' + '\\']');\n        var noOfPolygons = parseInt($noOfPolygonsInput.val(), 10);\n\n        // Add the new polygon\n        var html = Messages.strPolygon + ' ' + (noOfPolygons + 1) + ':<br>';\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][no_of_lines]\" value=\"1\">' +\n            '<br>' + Messages.strOuterRing + ':' +\n            '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][0][no_of_points]\" value=\"4\">';\n        for (var i = 0; i < 4; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfPolygons + '][0]'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfPolygons + '][0][add_point]\" href=\"#\">+ ' +\n            Messages.strAddPoint + '</a><br>' +\n            '<a class=\"addLine addJs\" name=\"' + prefix + '[' + noOfPolygons + '][add_line]\" href=\"#\">+ ' +\n            Messages.strAddInnerRing + '</a><br><br>';\n\n        $a.before(html);\n        $noOfPolygonsInput.val(noOfPolygons + 1);\n    });\n\n    /**\n     * Handles adding geoms\n     */\n    $(document).on('click', '#gis_editor a.addJs.addGeom', function () {\n        var $a = $(this);\n        var prefix = 'gis_data[GEOMETRYCOLLECTION]';\n        // Find the number of geoms\n        var $noOfGeomsInput = $('input[name=\\'' + prefix + '[geom_count]' + '\\']');\n        var noOfGeoms = parseInt($noOfGeomsInput.val(), 10);\n\n        var html1 = Messages.strGeometry + ' ' + (noOfGeoms + 1) + ':<br>';\n        var $geomType = $('select[name=\\'gis_data[' + (noOfGeoms - 1) + '][gis_type]\\']').clone();\n        $geomType.attr('name', 'gis_data[' + noOfGeoms + '][gis_type]').val('POINT');\n        var html2 = '<br>' + Messages.strPoint + ' :' +\n            '<label for=\"x\"> ' + Messages.strX + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][x]\" value=\"\">' +\n            '<label for=\"y\"> ' + Messages.strY + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][y]\" value=\"\">' +\n            '<br><br>';\n\n        $a.before(html1);\n        $geomType.insertBefore($a);\n        $a.before(html2);\n        $noOfGeomsInput.val(noOfGeoms + 1);\n    });\n});\n"],"names":["gisEditorLoaded","closeGISEditor","$","fadeOut","empty","prepareJSVersion","find","val","Messages","strCopy","insertAfter","before","prepend","strClose","strCancel","remove","each","$button","addClass","removeClass","classes","attr","replaceWith","addDataPoint","pointNumber","prefix","Functions","sprintf","strPointN","strX","strY","initGISEditorVisualization","storeGisSvgRef","selectVisualization","styleOSM","addZoomPanControllers","zoomAndPan","loadJSAndGISEditor","value","field","type","inputName","head","document","getElementsByTagName","script","createElement","src","appendChild","onreadystatechange","readyState","loadGISEditor","onload","onerror","$gisEditor","post","CommonParams","get","data","success","html","gis_editor","ajaxShowMessage","error","openGISEditor","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","popupWidth","popupHeight","popupOffsetTop","popupOffsetLeft","$background","css","append","themeImagePath","fadeIn","insertDataAndClose","$form","argsep","serialize","result","AJAX","registerTeardown","off","registerOnload","on","event","preventDefault","visualization","eval","openLayers","$a","name","substring","length","$noOfPointsInput","noOfPoints","parseInt","slice","lastIndexOf","$noOfLinesInput","noOfLines","strLineString","strInnerRing","i","strAddPoint","$noOfPolygonsInput","noOfPolygons","strPolygon","strOuterRing","strAddInnerRing","$noOfGeomsInput","noOfGeoms","html1","strGeometry","$geomType","clone","html2","strPoint","insertBefore"],"sourceRoot":""}