{"version":3,"file":"gis_data_editor.js","mappings":"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","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/gis_data_editor.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { CommonParams } from './modules/common.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\n\n/**\n * @fileoverview    functions used in GIS data editor\n *\n * @requires    jQuery\n *\n */\n\n/* global addZoomPanControllers, storeGisSvgRef, selectVisualization, styleOSM, zoomAndPan */ // js/table/gis_visualization.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nwindow.gisEditorLoaded = false;\n\n/**\n * Closes the GIS data editor and perform necessary clean up work.\n */\nfunction closeGISEditor () {\n    $('#popup_background').fadeOut('fast');\n    $('#gis_editor').fadeOut('fast', function () {\n        $(this).empty();\n    });\n}\n\n/**\n * Prepares the HTML received via AJAX.\n */\nfunction prepareJSVersion () {\n    // Change the text on the submit button\n    $('#gis_editor').find('input[name=\\'gis_data[save]\\']')\n        .val(window.Messages.strCopy)\n        .insertAfter($('#gis_data_textarea'))\n        .before('<br><br>');\n\n    // Add close and cancel links\n    $('#gis_data_editor').prepend('<a class=\"close_gis_editor\" href=\"#\">' + window.Messages.strClose + '</a>');\n    $('<a class=\"cancel_gis_editor\" href=\"#\"> ' + window.Messages.strCancel + '</a>')\n        .insertAfter($('input[name=\\'gis_data[save]\\']'));\n\n    // Remove the unnecessary text\n    $('div#gis_data_output p').remove();\n\n    // Remove 'add' buttons and add links\n    $('#gis_editor').find('input.add').each(function () {\n        var $button = $(this);\n        $button.addClass('addJs').removeClass('add');\n        var classes = $button.attr('class');\n        $button.replaceWith(\n            '<a class=\"' + classes +\n            '\" name=\"' + $button.attr('name') +\n            '\" href=\"#\">+ ' + $button.val() + '</a>'\n        );\n    });\n}\n\n/**\n * Returns the HTML for a data point.\n *\n * @param {number} pointNumber point number\n * @param {string} prefix      prefix of the name\n * @return {string} the HTML for a data point\n */\nfunction addDataPoint (pointNumber, prefix) {\n    return '<br>' +\n        window.sprintf(window.Messages.strPointN, (pointNumber + 1)) + ': ' +\n        '<label for=\"x\">' + window.Messages.strX + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][x]\" value=\"\">' +\n        '<label for=\"y\">' + window.Messages.strY + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][y]\" value=\"\">';\n}\n\n/**\n * Initialize the visualization in the GIS data editor.\n */\nfunction initGISEditorVisualization () {\n    storeGisSvgRef();\n    // Loads either SVG or OSM visualization based on the choice\n    selectVisualization();\n    // Adds necessary styles to the div that contains the openStreetMap\n    styleOSM();\n    // Adds controllers for zooming and panning\n    addZoomPanControllers();\n    zoomAndPan();\n}\n\n/**\n * Loads JavaScript files and the GIS editor.\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n * @param token      token\n */\nfunction loadJSAndGISEditor (value, field, type, inputName) {\n    var head = document.getElementsByTagName('head')[0];\n    var script;\n\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = 'js/dist/table/gis_visualization.js';\n    head.appendChild(script);\n\n    // OpenLayers.js is BIG and takes time. So asynchronous loading would not work.\n    // Load the JS and do a callback to load the content for the GIS Editor.\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onreadystatechange = function () {\n        if (this.readyState === 'complete') {\n            loadGISEditor(value, field, type, inputName);\n        }\n    };\n    script.onload = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n    script.onerror = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n\n    script.src = 'js/vendor/openlayers/OpenLayers.js';\n    head.appendChild(script);\n\n    window.gisEditorLoaded = true;\n}\n\nwindow.loadJSAndGISEditor = loadJSAndGISEditor;\n\n/**\n * Loads the GIS editor via AJAX\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n */\nfunction loadGISEditor (value, field, type, inputName) {\n    var $gisEditor = $('#gis_editor');\n    $.post('index.php?route=/gis-data-editor', {\n        'field': field,\n        'value': value,\n        'type': type,\n        'input_name': inputName,\n        'get_gis_editor': true,\n        'ajax_request': true,\n        'server': CommonParams.get('server')\n    }, function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $gisEditor.html(data.gis_editor);\n            initGISEditorVisualization();\n            prepareJSVersion();\n        } else {\n            ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n}\n\nwindow.loadGISEditor = loadGISEditor;\n\n/**\n * Opens up the dialog for the GIS data editor.\n */\nfunction openGISEditor () {\n    // Center the popup\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    var popupWidth = windowWidth * 0.9;\n    var popupHeight = windowHeight * 0.9;\n    var popupOffsetTop = windowHeight / 2 - popupHeight / 2;\n    var popupOffsetLeft = windowWidth / 2 - popupWidth / 2;\n\n    var $gisEditor = $('#gis_editor');\n    var $background = $('#popup_background');\n\n    $gisEditor.css({ 'top': popupOffsetTop, 'left': popupOffsetLeft, 'width': popupWidth, 'height': popupHeight });\n    $background.css({ 'opacity': '0.7' });\n\n    $gisEditor.append(\n        '<div id=\"gis_data_editor\">' +\n        '<img class=\"ajaxIcon\" id=\"loadingMonitorIcon\" src=\"' +\n        themeImagePath + 'ajax_clock_small.gif\" alt=\"\">' +\n        '</div>'\n    );\n\n    // Make it appear\n    $background.fadeIn('fast');\n    $gisEditor.fadeIn('fast');\n}\n\nwindow.openGISEditor = openGISEditor;\n\n/**\n * Prepare and insert the GIS data in Well Known Text format\n * to the input field.\n */\nfunction insertDataAndClose () {\n    var $form = $('form#gis_data_editor_form');\n    var inputName = $form.find('input[name=\\'input_name\\']').val();\n\n    var argsep = CommonParams.get('arg_separator');\n    $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $('input[name=\\'' + inputName + '\\']').val(data.result);\n        } else {\n            ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n    closeGISEditor();\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('gis_data_editor.js', function () {\n    $(document).off('click', '#gis_editor input[name=\\'gis_data[save]\\']');\n    $(document).off('submit', '#gis_editor');\n    $(document).off('change', '#gis_editor input[type=\\'text\\']');\n    $(document).off('change', '#gis_editor select.gis_type');\n    $(document).off('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor');\n    $(document).off('click', '#gis_editor a.addJs.addPoint');\n    $(document).off('click', '#gis_editor a.addLine.addJs');\n    $(document).off('click', '#gis_editor a.addJs.addPolygon');\n    $(document).off('click', '#gis_editor a.addJs.addGeom');\n});\n\nAJAX.registerOnload('gis_data_editor.js', function () {\n    /**\n     * Prepares and insert the GIS data to the input field on clicking 'copy'.\n     */\n    $(document).on('click', '#gis_editor input[name=\\'gis_data[save]\\']', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Prepares and insert the GIS data to the input field on pressing 'enter'.\n     */\n    $(document).on('submit', '#gis_editor', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Trigger asynchronous calls on data change and update the output.\n     */\n    $(document).on('change', '#gis_editor input[type=\\'text\\']', function () {\n        var $form = $('form#gis_data_editor_form');\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $('#gis_data_textarea').val(data.result);\n                $('#placeholder').empty().removeClass('hasSVG').html(data.visualization);\n                $('#openlayersmap').empty();\n                /* TODO: the gis_data_editor should rather return JSON than JS code to eval */\n                // eslint-disable-next-line no-eval\n                eval(data.openLayers);\n                initGISEditorVisualization();\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Update the form on change of the GIS type.\n     */\n    $(document).on('change', '#gis_editor select.gis_type', function () {\n        var $gisEditor = $('#gis_editor');\n        var $form = $('form#gis_data_editor_form');\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'get_gis_editor=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $gisEditor.html(data.gis_editor);\n                initGISEditorVisualization();\n                prepareJSVersion();\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Handles closing of the GIS data editor.\n     */\n    $(document).on('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor', function () {\n        closeGISEditor();\n    });\n\n    /**\n     * Handles adding data points\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPoint', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOINT][add_point] => prefix = gis_data[0][MULTIPOINT]\n        var prefix = name.substring(0, name.length - 11);\n        // Find the number of points\n        var $noOfPointsInput = $('input[name=\\'' + prefix + '[no_of_points]' + '\\']');\n        var noOfPoints = parseInt($noOfPointsInput.val(), 10);\n        // Add the new data point\n        var html = addDataPoint(noOfPoints, prefix);\n        $a.before(html);\n        $noOfPointsInput.val(noOfPoints + 1);\n    });\n\n    /**\n     * Handles adding linestrings and inner rings\n     */\n    $(document).on('click', '#gis_editor a.addLine.addJs', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n\n        // Eg. name = gis_data[0][MULTILINESTRING][add_line] => prefix = gis_data[0][MULTILINESTRING]\n        var prefix = name.substring(0, name.length - 10);\n        var type = prefix.slice(prefix.lastIndexOf('[') + 1, prefix.lastIndexOf(']'));\n\n        // Find the number of lines\n        var $noOfLinesInput = $('input[name=\\'' + prefix + '[no_of_lines]' + '\\']');\n        var noOfLines = parseInt($noOfLinesInput.val(), 10);\n\n        // Add the new linesting of inner ring based on the type\n        var html = '<br>';\n        var noOfPoints;\n        if (type === 'MULTILINESTRING') {\n            html += window.Messages.strLineString + ' ' + (noOfLines + 1) + ':';\n            noOfPoints = 2;\n        } else {\n            html += window.Messages.strInnerRing + ' ' + noOfLines + ':';\n            noOfPoints = 4;\n        }\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfLines + '][no_of_points]\" value=\"' + noOfPoints + '\">';\n        for (var i = 0; i < noOfPoints; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfLines + ']'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfLines + '][add_point]\" href=\"#\">+ ' +\n            window.Messages.strAddPoint + '</a><br>';\n\n        $a.before(html);\n        $noOfLinesInput.val(noOfLines + 1);\n    });\n\n    /**\n     * Handles adding polygons\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPolygon', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOLYGON][add_polygon] => prefix = gis_data[0][MULTIPOLYGON]\n        var prefix = name.substring(0, name.length - 13);\n        // Find the number of polygons\n        var $noOfPolygonsInput = $('input[name=\\'' + prefix + '[no_of_polygons]' + '\\']');\n        var noOfPolygons = parseInt($noOfPolygonsInput.val(), 10);\n\n        // Add the new polygon\n        var html = window.Messages.strPolygon + ' ' + (noOfPolygons + 1) + ':<br>';\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][no_of_lines]\" value=\"1\">' +\n            '<br>' + window.Messages.strOuterRing + ':' +\n            '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][0][no_of_points]\" value=\"4\">';\n        for (var i = 0; i < 4; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfPolygons + '][0]'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfPolygons + '][0][add_point]\" href=\"#\">+ ' +\n            window.Messages.strAddPoint + '</a><br>' +\n            '<a class=\"addLine addJs\" name=\"' + prefix + '[' + noOfPolygons + '][add_line]\" href=\"#\">+ ' +\n            window.Messages.strAddInnerRing + '</a><br><br>';\n\n        $a.before(html);\n        $noOfPolygonsInput.val(noOfPolygons + 1);\n    });\n\n    /**\n     * Handles adding geoms\n     */\n    $(document).on('click', '#gis_editor a.addJs.addGeom', function () {\n        var $a = $(this);\n        var prefix = 'gis_data[GEOMETRYCOLLECTION]';\n        // Find the number of geoms\n        var $noOfGeomsInput = $('input[name=\\'' + prefix + '[geom_count]' + '\\']');\n        var noOfGeoms = parseInt($noOfGeomsInput.val(), 10);\n\n        var html1 = window.Messages.strGeometry + ' ' + (noOfGeoms + 1) + ':<br>';\n        var $geomType = $('select[name=\\'gis_data[' + (noOfGeoms - 1) + '][gis_type]\\']').clone();\n        $geomType.attr('name', 'gis_data[' + noOfGeoms + '][gis_type]').val('POINT');\n        var html2 = '<br>' + window.Messages.strPoint + ' :' +\n            '<label for=\"x\"> ' + window.Messages.strX + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][x]\" value=\"\">' +\n            '<label for=\"y\"> ' + window.Messages.strY + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][y]\" value=\"\">' +\n            '<br><br>';\n\n        $a.before(html1);\n        $geomType.insertBefore($a);\n        $a.before(html2);\n        $noOfGeomsInput.val(noOfGeoms + 1);\n    });\n});\n"],"names":["$","AJAX","CommonParams","ajaxShowMessage","window","gisEditorLoaded","closeGISEditor","fadeOut","empty","prepareJSVersion","find","val","Messages","strCopy","insertAfter","before","prepend","strClose","strCancel","remove","each","$button","addClass","removeClass","classes","attr","replaceWith","addDataPoint","pointNumber","prefix","sprintf","strPointN","strX","strY","initGISEditorVisualization","storeGisSvgRef","selectVisualization","styleOSM","addZoomPanControllers","zoomAndPan","loadJSAndGISEditor","value","field","type","inputName","head","document","getElementsByTagName","script","createElement","src","appendChild","onreadystatechange","readyState","loadGISEditor","onload","onerror","$gisEditor","post","get","data","success","html","gis_editor","error","openGISEditor","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","popupWidth","popupHeight","popupOffsetTop","popupOffsetLeft","$background","css","append","themeImagePath","fadeIn","insertDataAndClose","$form","argsep","serialize","result","registerTeardown","off","registerOnload","on","event","preventDefault","visualization","eval","openLayers","$a","name","substring","length","$noOfPointsInput","noOfPoints","parseInt","slice","lastIndexOf","$noOfLinesInput","noOfLines","strLineString","strInnerRing","i","strAddPoint","$noOfPolygonsInput","noOfPolygons","strPolygon","strOuterRing","strAddInnerRing","$noOfGeomsInput","noOfGeoms","html1","strGeometry","$geomType","clone","html2","strPoint","insertBefore"],"sourceRoot":""}