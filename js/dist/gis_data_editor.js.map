{"version":3,"file":"gis_data_editor.js","mappings":";;;;;;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAA8F;;AAC9F;AAA4B;;AAE5BI,MAAM,CAACC,eAAP,GAAyB,KAAzB;AAEA;AACA;AACA;;AACA,SAASC,cAAT,GAA2B;EACvBN,mCAAC,CAAC,mBAAD,CAAD,CAAuBO,OAAvB,CAA+B,MAA/B;EACAP,mCAAC,CAAC,aAAD,CAAD,CAAiBO,OAAjB,CAAyB,MAAzB,EAAiC,YAAY;IACzCP,mCAAC,CAAC,IAAD,CAAD,CAAQQ,KAAR;EACH,CAFD;AAGH;AAED;AACA;AACA;;;AACA,SAASC,gBAAT,GAA6B;EACzB;EACAT,mCAAC,CAAC,aAAD,CAAD,CAAiBU,IAAjB,CAAsB,gCAAtB,EACKC,GADL,CACSP,MAAM,CAACQ,QAAP,CAAgBC,OADzB,EAEKC,WAFL,CAEiBd,mCAAC,CAAC,oBAAD,CAFlB,EAGKe,MAHL,CAGY,UAHZ,EAFyB,CAOzB;;EACAf,mCAAC,CAAC,kBAAD,CAAD,CAAsBgB,OAAtB,CAA8B,0CAA0CZ,MAAM,CAACQ,QAAP,CAAgBK,QAA1D,GAAqE,MAAnG;EACAjB,mCAAC,CAAC,4CAA4CI,MAAM,CAACQ,QAAP,CAAgBM,SAA5D,GAAwE,MAAzE,CAAD,CACKJ,WADL,CACiBd,mCAAC,CAAC,gCAAD,CADlB,EATyB,CAYzB;;EACAA,mCAAC,CAAC,uBAAD,CAAD,CAA2BmB,MAA3B,GAbyB,CAezB;;EACAnB,mCAAC,CAAC,aAAD,CAAD,CAAiBU,IAAjB,CAAsB,WAAtB,EAAmCU,IAAnC,CAAwC,YAAY;IAChD,IAAIC,OAAO,GAAGrB,mCAAC,CAAC,IAAD,CAAf;IACAqB,OAAO,CAACC,QAAR,CAAiB,OAAjB,EAA0BC,WAA1B,CAAsC,KAAtC;IACA,IAAIC,OAAO,GAAGH,OAAO,CAACI,IAAR,CAAa,OAAb,CAAd;IACAJ,OAAO,CAACK,WAAR,CACI,eAAeF,OAAf,GACA,UADA,GACaH,OAAO,CAACI,IAAR,CAAa,MAAb,CADb,GAEA,eAFA,GAEkBJ,OAAO,CAACV,GAAR,EAFlB,GAEkC,MAHtC;EAKH,CATD;AAUH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASgB,YAAT,CAAuBC,WAAvB,EAAoCC,MAApC,EAA4C;EACxC,OAAO,SACHzB,MAAM,CAAC0B,OAAP,CAAe1B,MAAM,CAACQ,QAAP,CAAgBmB,SAA/B,EAA2CH,WAAW,GAAG,CAAzD,CADG,GAC4D,IAD5D,GAEH,iBAFG,GAEiBxB,MAAM,CAACQ,QAAP,CAAgBoB,IAFjC,GAEwC,UAFxC,GAGH,2BAHG,GAG2BH,MAH3B,GAGoC,GAHpC,GAG0CD,WAH1C,GAGwD,iBAHxD,GAIH,iBAJG,GAIiBxB,MAAM,CAACQ,QAAP,CAAgBqB,IAJjC,GAIwC,UAJxC,GAKH,2BALG,GAK2BJ,MAL3B,GAKoC,GALpC,GAK0CD,WAL1C,GAKwD,iBAL/D;AAMH;AAED;AACA;AACA;;;AACA,SAASM,0BAAT,GAAuC;EACnCC,cAAc,GADqB,CAEnC;;EACAC,mBAAmB,GAHgB,CAInC;;EACAC,QAAQ,GAL2B,CAMnC;;EACAC,qBAAqB;EACrBC,UAAU;AACb;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,kBAAT,CAA6BC,KAA7B,EAAoCC,KAApC,EAA2CC,IAA3C,EAAiDC,SAAjD,EAA4D;EACxD,IAAIC,IAAI,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAX;EACA,IAAIC,MAAJ;EAEAA,MAAM,GAAGF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAT;EACAD,MAAM,CAACL,IAAP,GAAc,iBAAd;EACAK,MAAM,CAACE,GAAP,GAAa,oCAAb;EACAL,IAAI,CAACM,WAAL,CAAiBH,MAAjB,EAPwD,CASxD;EACA;;EACAA,MAAM,GAAGF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAT;EACAD,MAAM,CAACL,IAAP,GAAc,iBAAd;;EAEAK,MAAM,CAACI,kBAAP,GAA4B,YAAY;IACpC,IAAI,KAAKC,UAAL,KAAoB,UAAxB,EAAoC;MAChCC,aAAa,CAACb,KAAD,EAAQC,KAAR,EAAeC,IAAf,EAAqBC,SAArB,CAAb;IACH;EACJ,CAJD;;EAKAI,MAAM,CAACO,MAAP,GAAgB,YAAY;IACxBD,aAAa,CAACb,KAAD,EAAQC,KAAR,EAAeC,IAAf,EAAqBC,SAArB,CAAb;EACH,CAFD;;EAGAI,MAAM,CAACQ,OAAP,GAAiB,YAAY;IACzBF,aAAa,CAACb,KAAD,EAAQC,KAAR,EAAeC,IAAf,EAAqBC,SAArB,CAAb;EACH,CAFD;;EAIAI,MAAM,CAACE,GAAP,GAAa,oCAAb;EACAL,IAAI,CAACM,WAAL,CAAiBH,MAAjB;EAEA5C,MAAM,CAACC,eAAP,GAAyB,IAAzB;AACH;;AAEDD,MAAM,CAACoC,kBAAP,GAA4BA,kBAA5B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASc,aAAT,CAAwBb,KAAxB,EAA+BC,KAA/B,EAAsCC,IAAtC,EAA4CC,SAA5C,EAAuD;EACnD,IAAIa,UAAU,GAAGzD,mCAAC,CAAC,aAAD,CAAlB;EACAA,wCAAA,CAAO,kCAAP,EAA2C;IACvC,SAAS0C,KAD8B;IAEvC,SAASD,KAF8B;IAGvC,QAAQE,IAH+B;IAIvC,cAAcC,SAJyB;IAKvC,kBAAkB,IALqB;IAMvC,gBAAgB,IANuB;IAOvC,UAAU1C,gEAAA,CAAiB,QAAjB;EAP6B,CAA3C,EAQG,UAAU0D,IAAV,EAAgB;IACf,IAAI,OAAOA,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;MACtDJ,UAAU,CAACK,IAAX,CAAgBF,IAAI,CAACG,UAArB;MACA7B,0BAA0B;MAC1BzB,gBAAgB;IACnB,CAJD,MAIO;MACHN,yEAAe,CAACyD,IAAI,CAACI,KAAN,EAAa,KAAb,CAAf;IACH;EACJ,CAhBD,EAgBG,MAhBH;AAiBH;;AAED5D,MAAM,CAACkD,aAAP,GAAuBA,aAAvB;AAEA;AACA;AACA;;AACA,SAASW,aAAT,GAA0B;EACtB;EACA,IAAIC,WAAW,GAAGpB,QAAQ,CAACqB,eAAT,CAAyBC,WAA3C;EACA,IAAIC,YAAY,GAAGvB,QAAQ,CAACqB,eAAT,CAAyBG,YAA5C;EACA,IAAIC,UAAU,GAAGL,WAAW,GAAG,GAA/B;EACA,IAAIM,WAAW,GAAGH,YAAY,GAAG,GAAjC;EACA,IAAII,cAAc,GAAGJ,YAAY,GAAG,CAAf,GAAmBG,WAAW,GAAG,CAAtD;EACA,IAAIE,eAAe,GAAGR,WAAW,GAAG,CAAd,GAAkBK,UAAU,GAAG,CAArD;EAEA,IAAId,UAAU,GAAGzD,mCAAC,CAAC,aAAD,CAAlB;EACA,IAAI2E,WAAW,GAAG3E,mCAAC,CAAC,mBAAD,CAAnB;EAEAyD,UAAU,CAACmB,GAAX,CAAe;IAAE,OAAOH,cAAT;IAAyB,QAAQC,eAAjC;IAAkD,SAASH,UAA3D;IAAuE,UAAUC;EAAjF,CAAf;EACAG,WAAW,CAACC,GAAZ,CAAgB;IAAE,WAAW;EAAb,CAAhB;EAEAnB,UAAU,CAACoB,MAAX,CACI,+BACA,qDADA,GAEAC,cAFA,GAEiB,+BAFjB,GAGA,QAJJ,EAfsB,CAsBtB;;EACAH,WAAW,CAACI,MAAZ,CAAmB,MAAnB;EACAtB,UAAU,CAACsB,MAAX,CAAkB,MAAlB;AACH;;AAED3E,MAAM,CAAC6D,aAAP,GAAuBA,aAAvB;AAEA;AACA;AACA;AACA;;AACA,SAASe,kBAAT,GAA+B;EAC3B,IAAIC,KAAK,GAAGjF,mCAAC,CAAC,2BAAD,CAAb;EACA,IAAI4C,SAAS,GAAGqC,KAAK,CAACvE,IAAN,CAAW,4BAAX,EAAyCC,GAAzC,EAAhB;EAEA,IAAIuE,MAAM,GAAGhF,gEAAA,CAAiB,eAAjB,CAAb;EACAF,wCAAA,CAAO,kCAAP,EAA2CiF,KAAK,CAACE,SAAN,KAAoBD,MAApB,GAA6B,eAA7B,GAA+CA,MAA/C,GAAwD,mBAAnG,EAAwH,UAAUtB,IAAV,EAAgB;IACpI,IAAI,OAAOA,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;MACtD7D,mCAAC,CAAC,kBAAkB4C,SAAlB,GAA8B,KAA/B,CAAD,CAAuCjC,GAAvC,CAA2CiD,IAAI,CAACwB,MAAhD;IACH,CAFD,MAEO;MACHjF,yEAAe,CAACyD,IAAI,CAACI,KAAN,EAAa,KAAb,CAAf;IACH;EACJ,CAND,EAMG,MANH;EAOA1D,cAAc;AACjB;AAED;AACA;AACA;;;AACAL,mEAAA,CAAsB,oBAAtB,EAA4C,YAAY;EACpDD,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,4CAAzB;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,QAAhB,EAA0B,aAA1B;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,QAAhB,EAA0B,kCAA1B;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,QAAhB,EAA0B,6BAA1B;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,iEAAzB;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,8BAAzB;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,6BAAzB;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,gCAAzB;EACAtF,mCAAC,CAAC8C,QAAD,CAAD,CAAYwC,GAAZ,CAAgB,OAAhB,EAAyB,6BAAzB;AACH,CAVD;AAYArF,iEAAA,CAAoB,oBAApB,EAA0C,YAAY;EAClD;AACJ;AACA;EACID,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,4CAAxB,EAAsE,UAAUC,KAAV,EAAiB;IACnFA,KAAK,CAACC,cAAN;IACAV,kBAAkB;EACrB,CAHD;EAKA;AACJ;AACA;;EACIhF,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,QAAf,EAAyB,aAAzB,EAAwC,UAAUC,KAAV,EAAiB;IACrDA,KAAK,CAACC,cAAN;IACAV,kBAAkB;EACrB,CAHD;EAKA;AACJ;AACA;;EACIhF,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,QAAf,EAAyB,kCAAzB,EAA6D,YAAY;IACrE,IAAIP,KAAK,GAAGjF,mCAAC,CAAC,2BAAD,CAAb;IACA,IAAIkF,MAAM,GAAGhF,gEAAA,CAAiB,eAAjB,CAAb;IACAF,wCAAA,CAAO,kCAAP,EAA2CiF,KAAK,CAACE,SAAN,KAAoBD,MAApB,GAA6B,eAA7B,GAA+CA,MAA/C,GAAwD,mBAAnG,EAAwH,UAAUtB,IAAV,EAAgB;MACpI,IAAI,OAAOA,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;QACtD7D,mCAAC,CAAC,oBAAD,CAAD,CAAwBW,GAAxB,CAA4BiD,IAAI,CAACwB,MAAjC;QACApF,mCAAC,CAAC,cAAD,CAAD,CAAkBQ,KAAlB,GAA0Be,WAA1B,CAAsC,QAAtC,EAAgDuC,IAAhD,CAAqDF,IAAI,CAAC+B,aAA1D;QACA3F,mCAAC,CAAC,gBAAD,CAAD,CAAoBQ,KAApB;QACA;QACA;;QACAoF,IAAI,CAAChC,IAAI,CAACiC,UAAN,CAAJ;QACA3D,0BAA0B;MAC7B,CARD,MAQO;QACH/B,yEAAe,CAACyD,IAAI,CAACI,KAAN,EAAa,KAAb,CAAf;MACH;IACJ,CAZD,EAYG,MAZH;EAaH,CAhBD;EAkBA;AACJ;AACA;;EACIhE,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,QAAf,EAAyB,6BAAzB,EAAwD,YAAY;IAChE,IAAI/B,UAAU,GAAGzD,mCAAC,CAAC,aAAD,CAAlB;IACA,IAAIiF,KAAK,GAAGjF,mCAAC,CAAC,2BAAD,CAAb;IAEA,IAAIkF,MAAM,GAAGhF,gEAAA,CAAiB,eAAjB,CAAb;IACAF,wCAAA,CAAO,kCAAP,EAA2CiF,KAAK,CAACE,SAAN,KAAoBD,MAApB,GAA6B,qBAA7B,GAAqDA,MAArD,GAA8D,mBAAzG,EAA8H,UAAUtB,IAAV,EAAgB;MAC1I,IAAI,OAAOA,IAAP,KAAgB,WAAhB,IAA+BA,IAAI,CAACC,OAAL,KAAiB,IAApD,EAA0D;QACtDJ,UAAU,CAACK,IAAX,CAAgBF,IAAI,CAACG,UAArB;QACA7B,0BAA0B;QAC1BzB,gBAAgB;MACnB,CAJD,MAIO;QACHN,yEAAe,CAACyD,IAAI,CAACI,KAAN,EAAa,KAAb,CAAf;MACH;IACJ,CARD,EAQG,MARH;EASH,CAdD;EAgBA;AACJ;AACA;;EACIhE,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,iEAAxB,EAA2F,YAAY;IACnGlF,cAAc;EACjB,CAFD;EAIA;AACJ;AACA;;EACIN,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,8BAAxB,EAAwD,YAAY;IAChE,IAAIM,EAAE,GAAG9F,mCAAC,CAAC,IAAD,CAAV;IACA,IAAI+F,IAAI,GAAGD,EAAE,CAACrE,IAAH,CAAQ,MAAR,CAAX,CAFgE,CAGhE;;IACA,IAAII,MAAM,GAAGkE,IAAI,CAACC,SAAL,CAAe,CAAf,EAAkBD,IAAI,CAACE,MAAL,GAAc,EAAhC,CAAb,CAJgE,CAKhE;;IACA,IAAIC,gBAAgB,GAAGlG,mCAAC,CAAC,kBAAkB6B,MAAlB,GAA2B,gBAA3B,GAA8C,KAA/C,CAAxB;IACA,IAAIsE,UAAU,GAAGC,QAAQ,CAACF,gBAAgB,CAACvF,GAAjB,EAAD,EAAyB,EAAzB,CAAzB,CAPgE,CAQhE;;IACA,IAAImD,IAAI,GAAGnC,YAAY,CAACwE,UAAD,EAAatE,MAAb,CAAvB;IACAiE,EAAE,CAAC/E,MAAH,CAAU+C,IAAV;IACAoC,gBAAgB,CAACvF,GAAjB,CAAqBwF,UAAU,GAAG,CAAlC;EACH,CAZD;EAcA;AACJ;AACA;;EACInG,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,6BAAxB,EAAuD,YAAY;IAC/D,IAAIM,EAAE,GAAG9F,mCAAC,CAAC,IAAD,CAAV;IACA,IAAI+F,IAAI,GAAGD,EAAE,CAACrE,IAAH,CAAQ,MAAR,CAAX,CAF+D,CAI/D;;IACA,IAAII,MAAM,GAAGkE,IAAI,CAACC,SAAL,CAAe,CAAf,EAAkBD,IAAI,CAACE,MAAL,GAAc,EAAhC,CAAb;IACA,IAAItD,IAAI,GAAGd,MAAM,CAACwE,KAAP,CAAaxE,MAAM,CAACyE,WAAP,CAAmB,GAAnB,IAA0B,CAAvC,EAA0CzE,MAAM,CAACyE,WAAP,CAAmB,GAAnB,CAA1C,CAAX,CAN+D,CAQ/D;;IACA,IAAIC,eAAe,GAAGvG,mCAAC,CAAC,kBAAkB6B,MAAlB,GAA2B,eAA3B,GAA6C,KAA9C,CAAvB;IACA,IAAI2E,SAAS,GAAGJ,QAAQ,CAACG,eAAe,CAAC5F,GAAhB,EAAD,EAAwB,EAAxB,CAAxB,CAV+D,CAY/D;;IACA,IAAImD,IAAI,GAAG,MAAX;IACA,IAAIqC,UAAJ;;IACA,IAAIxD,IAAI,KAAK,iBAAb,EAAgC;MAC5BmB,IAAI,IAAI1D,MAAM,CAACQ,QAAP,CAAgB6F,aAAhB,GAAgC,GAAhC,IAAuCD,SAAS,GAAG,CAAnD,IAAwD,GAAhE;MACAL,UAAU,GAAG,CAAb;IACH,CAHD,MAGO;MACHrC,IAAI,IAAI1D,MAAM,CAACQ,QAAP,CAAgB8F,YAAhB,GAA+B,GAA/B,GAAqCF,SAArC,GAAiD,GAAzD;MACAL,UAAU,GAAG,CAAb;IACH;;IACDrC,IAAI,IAAI,gCAAgCjC,MAAhC,GAAyC,GAAzC,GAA+C2E,SAA/C,GAA2D,0BAA3D,GAAwFL,UAAxF,GAAqG,IAA7G;;IACA,KAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,UAApB,EAAgCQ,CAAC,EAAjC,EAAqC;MACjC7C,IAAI,IAAInC,YAAY,CAACgF,CAAD,EAAK9E,MAAM,GAAG,GAAT,GAAe2E,SAAf,GAA2B,GAAhC,CAApB;IACH;;IACD1C,IAAI,IAAI,qCAAqCjC,MAArC,GAA8C,GAA9C,GAAoD2E,SAApD,GAAgE,2BAAhE,GACJpG,MAAM,CAACQ,QAAP,CAAgBgG,WADZ,GAC0B,UADlC;IAGAd,EAAE,CAAC/E,MAAH,CAAU+C,IAAV;IACAyC,eAAe,CAAC5F,GAAhB,CAAoB6F,SAAS,GAAG,CAAhC;EACH,CA/BD;EAiCA;AACJ;AACA;;EACIxG,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,gCAAxB,EAA0D,YAAY;IAClE,IAAIM,EAAE,GAAG9F,mCAAC,CAAC,IAAD,CAAV;IACA,IAAI+F,IAAI,GAAGD,EAAE,CAACrE,IAAH,CAAQ,MAAR,CAAX,CAFkE,CAGlE;;IACA,IAAII,MAAM,GAAGkE,IAAI,CAACC,SAAL,CAAe,CAAf,EAAkBD,IAAI,CAACE,MAAL,GAAc,EAAhC,CAAb,CAJkE,CAKlE;;IACA,IAAIY,kBAAkB,GAAG7G,mCAAC,CAAC,kBAAkB6B,MAAlB,GAA2B,kBAA3B,GAAgD,KAAjD,CAA1B;IACA,IAAIiF,YAAY,GAAGV,QAAQ,CAACS,kBAAkB,CAAClG,GAAnB,EAAD,EAA2B,EAA3B,CAA3B,CAPkE,CASlE;;IACA,IAAImD,IAAI,GAAG1D,MAAM,CAACQ,QAAP,CAAgBmG,UAAhB,GAA6B,GAA7B,IAAoCD,YAAY,GAAG,CAAnD,IAAwD,OAAnE;IACAhD,IAAI,IAAI,gCAAgCjC,MAAhC,GAAyC,GAAzC,GAA+CiF,YAA/C,GAA8D,4BAA9D,GACJ,MADI,GACK1G,MAAM,CAACQ,QAAP,CAAgBoG,YADrB,GACoC,GADpC,GAEJ,6BAFI,GAE4BnF,MAF5B,GAEqC,GAFrC,GAE2CiF,YAF3C,GAE0D,gCAFlE;;IAGA,KAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;MACxB7C,IAAI,IAAInC,YAAY,CAACgF,CAAD,EAAK9E,MAAM,GAAG,GAAT,GAAeiF,YAAf,GAA8B,MAAnC,CAApB;IACH;;IACDhD,IAAI,IAAI,qCAAqCjC,MAArC,GAA8C,GAA9C,GAAoDiF,YAApD,GAAmE,8BAAnE,GACJ1G,MAAM,CAACQ,QAAP,CAAgBgG,WADZ,GAC0B,UAD1B,GAEJ,iCAFI,GAEgC/E,MAFhC,GAEyC,GAFzC,GAE+CiF,YAF/C,GAE8D,0BAF9D,GAGJ1G,MAAM,CAACQ,QAAP,CAAgBqG,eAHZ,GAG8B,cAHtC;IAKAnB,EAAE,CAAC/E,MAAH,CAAU+C,IAAV;IACA+C,kBAAkB,CAAClG,GAAnB,CAAuBmG,YAAY,GAAG,CAAtC;EACH,CAxBD;EA0BA;AACJ;AACA;;EACI9G,mCAAC,CAAC8C,QAAD,CAAD,CAAY0C,EAAZ,CAAe,OAAf,EAAwB,6BAAxB,EAAuD,YAAY;IAC/D,IAAIM,EAAE,GAAG9F,mCAAC,CAAC,IAAD,CAAV;IACA,IAAI6B,MAAM,GAAG,8BAAb,CAF+D,CAG/D;;IACA,IAAIqF,eAAe,GAAGlH,mCAAC,CAAC,kBAAkB6B,MAAlB,GAA2B,cAA3B,GAA4C,KAA7C,CAAvB;IACA,IAAIsF,SAAS,GAAGf,QAAQ,CAACc,eAAe,CAACvG,GAAhB,EAAD,EAAwB,EAAxB,CAAxB;IAEA,IAAIyG,KAAK,GAAGhH,MAAM,CAACQ,QAAP,CAAgByG,WAAhB,GAA8B,GAA9B,IAAqCF,SAAS,GAAG,CAAjD,IAAsD,OAAlE;IACA,IAAIG,SAAS,GAAGtH,mCAAC,CAAC,6BAA6BmH,SAAS,GAAG,CAAzC,IAA8C,gBAA/C,CAAD,CAAkEI,KAAlE,EAAhB;IACAD,SAAS,CAAC7F,IAAV,CAAe,MAAf,EAAuB,cAAc0F,SAAd,GAA0B,aAAjD,EAAgExG,GAAhE,CAAoE,OAApE;IACA,IAAI6G,KAAK,GAAG,SAASpH,MAAM,CAACQ,QAAP,CAAgB6G,QAAzB,GAAoC,IAApC,GACR,kBADQ,GACarH,MAAM,CAACQ,QAAP,CAAgBoB,IAD7B,GACoC,WADpC,GAER,oCAFQ,GAE+BmF,SAF/B,GAE2C,wBAF3C,GAGR,kBAHQ,GAGa/G,MAAM,CAACQ,QAAP,CAAgBqB,IAH7B,GAGoC,WAHpC,GAIR,oCAJQ,GAI+BkF,SAJ/B,GAI2C,wBAJ3C,GAKR,UALJ;IAOArB,EAAE,CAAC/E,MAAH,CAAUqG,KAAV;IACAE,SAAS,CAACI,YAAV,CAAuB5B,EAAvB;IACAA,EAAE,CAAC/E,MAAH,CAAUyG,KAAV;IACAN,eAAe,CAACvG,GAAhB,CAAoBwG,SAAS,GAAG,CAAhC;EACH,CArBD;AAsBH,CA3KD","sources":["webpack://phpmyadmin/external var \"jQuery\"","webpack://phpmyadmin/./js/src/gis_data_editor.js"],"sourcesContent":["module.exports = jQuery;","import $ from 'jquery';\nimport { AJAX } from './modules/ajax.js';\nimport { CommonParams } from './modules/common.js';\nimport { ajaxShowMessage } from './modules/ajax-message.js';\n\n/**\n * @fileoverview    functions used in GIS data editor\n *\n * @requires    jQuery\n *\n */\n\n/* global addZoomPanControllers, storeGisSvgRef, selectVisualization, styleOSM, zoomAndPan */ // js/table/gis_visualization.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\nwindow.gisEditorLoaded = false;\n\n/**\n * Closes the GIS data editor and perform necessary clean up work.\n */\nfunction closeGISEditor () {\n    $('#popup_background').fadeOut('fast');\n    $('#gis_editor').fadeOut('fast', function () {\n        $(this).empty();\n    });\n}\n\n/**\n * Prepares the HTML received via AJAX.\n */\nfunction prepareJSVersion () {\n    // Change the text on the submit button\n    $('#gis_editor').find('input[name=\\'gis_data[save]\\']')\n        .val(window.Messages.strCopy)\n        .insertAfter($('#gis_data_textarea'))\n        .before('<br><br>');\n\n    // Add close and cancel links\n    $('#gis_data_editor').prepend('<a class=\"close_gis_editor\" href=\"#\">' + window.Messages.strClose + '</a>');\n    $('<a class=\"cancel_gis_editor\" href=\"#\"> ' + window.Messages.strCancel + '</a>')\n        .insertAfter($('input[name=\\'gis_data[save]\\']'));\n\n    // Remove the unnecessary text\n    $('div#gis_data_output p').remove();\n\n    // Remove 'add' buttons and add links\n    $('#gis_editor').find('input.add').each(function () {\n        var $button = $(this);\n        $button.addClass('addJs').removeClass('add');\n        var classes = $button.attr('class');\n        $button.replaceWith(\n            '<a class=\"' + classes +\n            '\" name=\"' + $button.attr('name') +\n            '\" href=\"#\">+ ' + $button.val() + '</a>'\n        );\n    });\n}\n\n/**\n * Returns the HTML for a data point.\n *\n * @param {number} pointNumber point number\n * @param {string} prefix      prefix of the name\n * @return {string} the HTML for a data point\n */\nfunction addDataPoint (pointNumber, prefix) {\n    return '<br>' +\n        window.sprintf(window.Messages.strPointN, (pointNumber + 1)) + ': ' +\n        '<label for=\"x\">' + window.Messages.strX + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][x]\" value=\"\">' +\n        '<label for=\"y\">' + window.Messages.strY + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][y]\" value=\"\">';\n}\n\n/**\n * Initialize the visualization in the GIS data editor.\n */\nfunction initGISEditorVisualization () {\n    storeGisSvgRef();\n    // Loads either SVG or OSM visualization based on the choice\n    selectVisualization();\n    // Adds necessary styles to the div that contains the openStreetMap\n    styleOSM();\n    // Adds controllers for zooming and panning\n    addZoomPanControllers();\n    zoomAndPan();\n}\n\n/**\n * Loads JavaScript files and the GIS editor.\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n * @param token      token\n */\nfunction loadJSAndGISEditor (value, field, type, inputName) {\n    var head = document.getElementsByTagName('head')[0];\n    var script;\n\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = 'js/dist/table/gis_visualization.js';\n    head.appendChild(script);\n\n    // OpenLayers.js is BIG and takes time. So asynchronous loading would not work.\n    // Load the JS and do a callback to load the content for the GIS Editor.\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onreadystatechange = function () {\n        if (this.readyState === 'complete') {\n            loadGISEditor(value, field, type, inputName);\n        }\n    };\n    script.onload = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n    script.onerror = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n\n    script.src = 'js/vendor/openlayers/OpenLayers.js';\n    head.appendChild(script);\n\n    window.gisEditorLoaded = true;\n}\n\nwindow.loadJSAndGISEditor = loadJSAndGISEditor;\n\n/**\n * Loads the GIS editor via AJAX\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n */\nfunction loadGISEditor (value, field, type, inputName) {\n    var $gisEditor = $('#gis_editor');\n    $.post('index.php?route=/gis-data-editor', {\n        'field': field,\n        'value': value,\n        'type': type,\n        'input_name': inputName,\n        'get_gis_editor': true,\n        'ajax_request': true,\n        'server': CommonParams.get('server')\n    }, function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $gisEditor.html(data.gis_editor);\n            initGISEditorVisualization();\n            prepareJSVersion();\n        } else {\n            ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n}\n\nwindow.loadGISEditor = loadGISEditor;\n\n/**\n * Opens up the dialog for the GIS data editor.\n */\nfunction openGISEditor () {\n    // Center the popup\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    var popupWidth = windowWidth * 0.9;\n    var popupHeight = windowHeight * 0.9;\n    var popupOffsetTop = windowHeight / 2 - popupHeight / 2;\n    var popupOffsetLeft = windowWidth / 2 - popupWidth / 2;\n\n    var $gisEditor = $('#gis_editor');\n    var $background = $('#popup_background');\n\n    $gisEditor.css({ 'top': popupOffsetTop, 'left': popupOffsetLeft, 'width': popupWidth, 'height': popupHeight });\n    $background.css({ 'opacity': '0.7' });\n\n    $gisEditor.append(\n        '<div id=\"gis_data_editor\">' +\n        '<img class=\"ajaxIcon\" id=\"loadingMonitorIcon\" src=\"' +\n        themeImagePath + 'ajax_clock_small.gif\" alt=\"\">' +\n        '</div>'\n    );\n\n    // Make it appear\n    $background.fadeIn('fast');\n    $gisEditor.fadeIn('fast');\n}\n\nwindow.openGISEditor = openGISEditor;\n\n/**\n * Prepare and insert the GIS data in Well Known Text format\n * to the input field.\n */\nfunction insertDataAndClose () {\n    var $form = $('form#gis_data_editor_form');\n    var inputName = $form.find('input[name=\\'input_name\\']').val();\n\n    var argsep = CommonParams.get('arg_separator');\n    $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $('input[name=\\'' + inputName + '\\']').val(data.result);\n        } else {\n            ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n    closeGISEditor();\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('gis_data_editor.js', function () {\n    $(document).off('click', '#gis_editor input[name=\\'gis_data[save]\\']');\n    $(document).off('submit', '#gis_editor');\n    $(document).off('change', '#gis_editor input[type=\\'text\\']');\n    $(document).off('change', '#gis_editor select.gis_type');\n    $(document).off('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor');\n    $(document).off('click', '#gis_editor a.addJs.addPoint');\n    $(document).off('click', '#gis_editor a.addLine.addJs');\n    $(document).off('click', '#gis_editor a.addJs.addPolygon');\n    $(document).off('click', '#gis_editor a.addJs.addGeom');\n});\n\nAJAX.registerOnload('gis_data_editor.js', function () {\n    /**\n     * Prepares and insert the GIS data to the input field on clicking 'copy'.\n     */\n    $(document).on('click', '#gis_editor input[name=\\'gis_data[save]\\']', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Prepares and insert the GIS data to the input field on pressing 'enter'.\n     */\n    $(document).on('submit', '#gis_editor', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Trigger asynchronous calls on data change and update the output.\n     */\n    $(document).on('change', '#gis_editor input[type=\\'text\\']', function () {\n        var $form = $('form#gis_data_editor_form');\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $('#gis_data_textarea').val(data.result);\n                $('#placeholder').empty().removeClass('hasSVG').html(data.visualization);\n                $('#openlayersmap').empty();\n                /* TODO: the gis_data_editor should rather return JSON than JS code to eval */\n                // eslint-disable-next-line no-eval\n                eval(data.openLayers);\n                initGISEditorVisualization();\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Update the form on change of the GIS type.\n     */\n    $(document).on('change', '#gis_editor select.gis_type', function () {\n        var $gisEditor = $('#gis_editor');\n        var $form = $('form#gis_data_editor_form');\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'get_gis_editor=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $gisEditor.html(data.gis_editor);\n                initGISEditorVisualization();\n                prepareJSVersion();\n            } else {\n                ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Handles closing of the GIS data editor.\n     */\n    $(document).on('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor', function () {\n        closeGISEditor();\n    });\n\n    /**\n     * Handles adding data points\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPoint', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOINT][add_point] => prefix = gis_data[0][MULTIPOINT]\n        var prefix = name.substring(0, name.length - 11);\n        // Find the number of points\n        var $noOfPointsInput = $('input[name=\\'' + prefix + '[no_of_points]' + '\\']');\n        var noOfPoints = parseInt($noOfPointsInput.val(), 10);\n        // Add the new data point\n        var html = addDataPoint(noOfPoints, prefix);\n        $a.before(html);\n        $noOfPointsInput.val(noOfPoints + 1);\n    });\n\n    /**\n     * Handles adding linestrings and inner rings\n     */\n    $(document).on('click', '#gis_editor a.addLine.addJs', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n\n        // Eg. name = gis_data[0][MULTILINESTRING][add_line] => prefix = gis_data[0][MULTILINESTRING]\n        var prefix = name.substring(0, name.length - 10);\n        var type = prefix.slice(prefix.lastIndexOf('[') + 1, prefix.lastIndexOf(']'));\n\n        // Find the number of lines\n        var $noOfLinesInput = $('input[name=\\'' + prefix + '[no_of_lines]' + '\\']');\n        var noOfLines = parseInt($noOfLinesInput.val(), 10);\n\n        // Add the new linesting of inner ring based on the type\n        var html = '<br>';\n        var noOfPoints;\n        if (type === 'MULTILINESTRING') {\n            html += window.Messages.strLineString + ' ' + (noOfLines + 1) + ':';\n            noOfPoints = 2;\n        } else {\n            html += window.Messages.strInnerRing + ' ' + noOfLines + ':';\n            noOfPoints = 4;\n        }\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfLines + '][no_of_points]\" value=\"' + noOfPoints + '\">';\n        for (var i = 0; i < noOfPoints; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfLines + ']'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfLines + '][add_point]\" href=\"#\">+ ' +\n            window.Messages.strAddPoint + '</a><br>';\n\n        $a.before(html);\n        $noOfLinesInput.val(noOfLines + 1);\n    });\n\n    /**\n     * Handles adding polygons\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPolygon', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOLYGON][add_polygon] => prefix = gis_data[0][MULTIPOLYGON]\n        var prefix = name.substring(0, name.length - 13);\n        // Find the number of polygons\n        var $noOfPolygonsInput = $('input[name=\\'' + prefix + '[no_of_polygons]' + '\\']');\n        var noOfPolygons = parseInt($noOfPolygonsInput.val(), 10);\n\n        // Add the new polygon\n        var html = window.Messages.strPolygon + ' ' + (noOfPolygons + 1) + ':<br>';\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][no_of_lines]\" value=\"1\">' +\n            '<br>' + window.Messages.strOuterRing + ':' +\n            '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][0][no_of_points]\" value=\"4\">';\n        for (var i = 0; i < 4; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfPolygons + '][0]'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfPolygons + '][0][add_point]\" href=\"#\">+ ' +\n            window.Messages.strAddPoint + '</a><br>' +\n            '<a class=\"addLine addJs\" name=\"' + prefix + '[' + noOfPolygons + '][add_line]\" href=\"#\">+ ' +\n            window.Messages.strAddInnerRing + '</a><br><br>';\n\n        $a.before(html);\n        $noOfPolygonsInput.val(noOfPolygons + 1);\n    });\n\n    /**\n     * Handles adding geoms\n     */\n    $(document).on('click', '#gis_editor a.addJs.addGeom', function () {\n        var $a = $(this);\n        var prefix = 'gis_data[GEOMETRYCOLLECTION]';\n        // Find the number of geoms\n        var $noOfGeomsInput = $('input[name=\\'' + prefix + '[geom_count]' + '\\']');\n        var noOfGeoms = parseInt($noOfGeomsInput.val(), 10);\n\n        var html1 = window.Messages.strGeometry + ' ' + (noOfGeoms + 1) + ':<br>';\n        var $geomType = $('select[name=\\'gis_data[' + (noOfGeoms - 1) + '][gis_type]\\']').clone();\n        $geomType.attr('name', 'gis_data[' + noOfGeoms + '][gis_type]').val('POINT');\n        var html2 = '<br>' + window.Messages.strPoint + ' :' +\n            '<label for=\"x\"> ' + window.Messages.strX + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][x]\" value=\"\">' +\n            '<label for=\"y\"> ' + window.Messages.strY + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][y]\" value=\"\">' +\n            '<br><br>';\n\n        $a.before(html1);\n        $geomType.insertBefore($a);\n        $a.before(html2);\n        $noOfGeomsInput.val(noOfGeoms + 1);\n    });\n});\n"],"names":["$","AJAX","CommonParams","ajaxShowMessage","window","gisEditorLoaded","closeGISEditor","fadeOut","empty","prepareJSVersion","find","val","Messages","strCopy","insertAfter","before","prepend","strClose","strCancel","remove","each","$button","addClass","removeClass","classes","attr","replaceWith","addDataPoint","pointNumber","prefix","sprintf","strPointN","strX","strY","initGISEditorVisualization","storeGisSvgRef","selectVisualization","styleOSM","addZoomPanControllers","zoomAndPan","loadJSAndGISEditor","value","field","type","inputName","head","document","getElementsByTagName","script","createElement","src","appendChild","onreadystatechange","readyState","loadGISEditor","onload","onerror","$gisEditor","post","get","data","success","html","gis_editor","error","openGISEditor","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","popupWidth","popupHeight","popupOffsetTop","popupOffsetLeft","$background","css","append","themeImagePath","fadeIn","insertDataAndClose","$form","argsep","serialize","result","registerTeardown","off","registerOnload","on","event","preventDefault","visualization","eval","openLayers","$a","name","substring","length","$noOfPointsInput","noOfPoints","parseInt","slice","lastIndexOf","$noOfLinesInput","noOfLines","strLineString","strInnerRing","i","strAddPoint","$noOfPolygonsInput","noOfPolygons","strPolygon","strOuterRing","strAddInnerRing","$noOfGeomsInput","noOfGeoms","html1","strGeometry","$geomType","clone","html2","strPoint","insertBefore"],"sourceRoot":""}