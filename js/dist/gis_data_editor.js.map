{"version":3,"file":"gis_data_editor.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/gis_data_editor.js"],"sourcesContent":["/**\n * @fileoverview    functions used in GIS data editor\n *\n * @requires    jQuery\n *\n */\n\n/* global addZoomPanControllers, storeGisSvgRef, selectVisualization, styleOSM, zoomAndPan */ // js/table/gis_visualization.js\n/* global themeImagePath */ // templates/javascript/variables.twig\n\n// eslint-disable-next-line no-unused-vars\nvar gisEditorLoaded = false;\n\n/**\n * Closes the GIS data editor and perform necessary clean up work.\n */\nfunction closeGISEditor () {\n    $('#popup_background').fadeOut('fast');\n    $('#gis_editor').fadeOut('fast', function () {\n        $(this).empty();\n    });\n}\n\n/**\n * Prepares the HTML received via AJAX.\n */\nfunction prepareJSVersion () {\n    // Change the text on the submit button\n    $('#gis_editor').find('input[name=\\'gis_data[save]\\']')\n        .val(Messages.strCopy)\n        .insertAfter($('#gis_data_textarea'))\n        .before('<br><br>');\n\n    // Add close and cancel links\n    $('#gis_data_editor').prepend('<a class=\"close_gis_editor\" href=\"#\">' + Messages.strClose + '</a>');\n    $('<a class=\"cancel_gis_editor\" href=\"#\"> ' + Messages.strCancel + '</a>')\n        .insertAfter($('input[name=\\'gis_data[save]\\']'));\n\n    // Remove the unnecessary text\n    $('div#gis_data_output p').remove();\n\n    // Remove 'add' buttons and add links\n    $('#gis_editor').find('input.add').each(function () {\n        var $button = $(this);\n        $button.addClass('addJs').removeClass('add');\n        var classes = $button.attr('class');\n        $button.replaceWith(\n            '<a class=\"' + classes +\n            '\" name=\"' + $button.attr('name') +\n            '\" href=\"#\">+ ' + $button.val() + '</a>'\n        );\n    });\n}\n\n/**\n * Returns the HTML for a data point.\n *\n * @param {number} pointNumber point number\n * @param {string} prefix      prefix of the name\n * @return {string} the HTML for a data point\n */\nfunction addDataPoint (pointNumber, prefix) {\n    return '<br>' +\n        Functions.sprintf(Messages.strPointN, (pointNumber + 1)) + ': ' +\n        '<label for=\"x\">' + Messages.strX + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][x]\" value=\"\">' +\n        '<label for=\"y\">' + Messages.strY + '</label>' +\n        '<input type=\"text\" name=\"' + prefix + '[' + pointNumber + '][y]\" value=\"\">';\n}\n\n/**\n * Initialize the visualization in the GIS data editor.\n */\nfunction initGISEditorVisualization () {\n    storeGisSvgRef();\n    // Loads either SVG or OSM visualization based on the choice\n    selectVisualization();\n    // Adds necessary styles to the div that contains the openStreetMap\n    styleOSM();\n    // Adds controllers for zooming and panning\n    addZoomPanControllers();\n    zoomAndPan();\n}\n\n/**\n * Loads JavaScript files and the GIS editor.\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n * @param token      token\n */\n// eslint-disable-next-line no-unused-vars\nfunction loadJSAndGISEditor (value, field, type, inputName) {\n    var head = document.getElementsByTagName('head')[0];\n    var script;\n\n    // Loads a set of small JS file needed for the GIS editor\n    var smallScripts = ['js/vendor/jquery/jquery.mousewheel.js', 'js/dist/table/gis_visualization.js'];\n\n    for (var i = 0; i < smallScripts.length; i++) {\n        script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = smallScripts[i];\n        head.appendChild(script);\n    }\n\n    // OpenLayers.js is BIG and takes time. So asynchronous loading would not work.\n    // Load the JS and do a callback to load the content for the GIS Editor.\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onreadystatechange = function () {\n        if (this.readyState === 'complete') {\n            loadGISEditor(value, field, type, inputName);\n        }\n    };\n    script.onload = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n    script.onerror = function () {\n        loadGISEditor(value, field, type, inputName);\n    };\n\n    script.src = 'js/vendor/openlayers/OpenLayers.js';\n    head.appendChild(script);\n\n    gisEditorLoaded = true;\n}\n\n/**\n * Loads the GIS editor via AJAX\n *\n * @param value      current value of the geometry field\n * @param field      field name\n * @param type       geometry type\n * @param inputName name of the input field\n */\nfunction loadGISEditor (value, field, type, inputName) {\n    var $gisEditor = $('#gis_editor');\n    $.post('index.php?route=/gis-data-editor', {\n        'field' : field,\n        'value' : value,\n        'type' : type,\n        'input_name' : inputName,\n        'get_gis_editor' : true,\n        'ajax_request': true,\n        'server': CommonParams.get('server')\n    }, function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $gisEditor.html(data.gis_editor);\n            initGISEditorVisualization();\n            prepareJSVersion();\n        } else {\n            Functions.ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n}\n\n/**\n * Opens up the dialog for the GIS data editor.\n */\n// eslint-disable-next-line no-unused-vars\nfunction openGISEditor () {\n    // Center the popup\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    var popupWidth = windowWidth * 0.9;\n    var popupHeight = windowHeight * 0.9;\n    var popupOffsetTop = windowHeight / 2 - popupHeight / 2;\n    var popupOffsetLeft = windowWidth / 2 - popupWidth / 2;\n\n    var $gisEditor = $('#gis_editor');\n    var $background = $('#popup_background');\n\n    $gisEditor.css({ 'top': popupOffsetTop, 'left': popupOffsetLeft, 'width': popupWidth, 'height': popupHeight });\n    $background.css({ 'opacity' : '0.7' });\n\n    $gisEditor.append(\n        '<div id=\"gis_data_editor\">' +\n        '<img class=\"ajaxIcon\" id=\"loadingMonitorIcon\" src=\"' +\n        themeImagePath + 'ajax_clock_small.gif\" alt=\"\">' +\n        '</div>'\n    );\n\n    // Make it appear\n    $background.fadeIn('fast');\n    $gisEditor.fadeIn('fast');\n}\n\n/**\n * Prepare and insert the GIS data in Well Known Text format\n * to the input field.\n */\nfunction insertDataAndClose () {\n    var $form = $('form#gis_data_editor_form');\n    var inputName = $form.find('input[name=\\'input_name\\']').val();\n\n    var argsep = CommonParams.get('arg_separator');\n    $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n        if (typeof data !== 'undefined' && data.success === true) {\n            $('input[name=\\'' + inputName + '\\']').val(data.result);\n        } else {\n            Functions.ajaxShowMessage(data.error, false);\n        }\n    }, 'json');\n    closeGISEditor();\n}\n\n/**\n * Unbind all event handlers before tearing down a page\n */\nAJAX.registerTeardown('gis_data_editor.js', function () {\n    $(document).off('click', '#gis_editor input[name=\\'gis_data[save]\\']');\n    $(document).off('submit', '#gis_editor');\n    $(document).off('change', '#gis_editor input[type=\\'text\\']');\n    $(document).off('change', '#gis_editor select.gis_type');\n    $(document).off('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor');\n    $(document).off('click', '#gis_editor a.addJs.addPoint');\n    $(document).off('click', '#gis_editor a.addLine.addJs');\n    $(document).off('click', '#gis_editor a.addJs.addPolygon');\n    $(document).off('click', '#gis_editor a.addJs.addGeom');\n});\n\nAJAX.registerOnload('gis_data_editor.js', function () {\n    /**\n     * Prepares and insert the GIS data to the input field on clicking 'copy'.\n     */\n    $(document).on('click', '#gis_editor input[name=\\'gis_data[save]\\']', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Prepares and insert the GIS data to the input field on pressing 'enter'.\n     */\n    $(document).on('submit', '#gis_editor', function (event) {\n        event.preventDefault();\n        insertDataAndClose();\n    });\n\n    /**\n     * Trigger asynchronous calls on data change and update the output.\n     */\n    $(document).on('change', '#gis_editor input[type=\\'text\\']', function () {\n        var $form = $('form#gis_data_editor_form');\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'generate=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $('#gis_data_textarea').val(data.result);\n                $('#placeholder').empty().removeClass('hasSVG').html(data.visualization);\n                $('#openlayersmap').empty();\n                /* TODO: the gis_data_editor should rather return JSON than JS code to eval */\n                // eslint-disable-next-line no-eval\n                eval(data.openLayers);\n                initGISEditorVisualization();\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Update the form on change of the GIS type.\n     */\n    $(document).on('change', '#gis_editor select.gis_type', function () {\n        var $gisEditor = $('#gis_editor');\n        var $form = $('form#gis_data_editor_form');\n\n        var argsep = CommonParams.get('arg_separator');\n        $.post('index.php?route=/gis-data-editor', $form.serialize() + argsep + 'get_gis_editor=true' + argsep + 'ajax_request=true', function (data) {\n            if (typeof data !== 'undefined' && data.success === true) {\n                $gisEditor.html(data.gis_editor);\n                initGISEditorVisualization();\n                prepareJSVersion();\n            } else {\n                Functions.ajaxShowMessage(data.error, false);\n            }\n        }, 'json');\n    });\n\n    /**\n     * Handles closing of the GIS data editor.\n     */\n    $(document).on('click', '#gis_editor a.close_gis_editor, #gis_editor a.cancel_gis_editor', function () {\n        closeGISEditor();\n    });\n\n    /**\n     * Handles adding data points\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPoint', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOINT][add_point] => prefix = gis_data[0][MULTIPOINT]\n        var prefix = name.substring(0, name.length - 11);\n        // Find the number of points\n        var $noOfPointsInput = $('input[name=\\'' + prefix + '[no_of_points]' + '\\']');\n        var noOfPoints = parseInt($noOfPointsInput.val(), 10);\n        // Add the new data point\n        var html = addDataPoint(noOfPoints, prefix);\n        $a.before(html);\n        $noOfPointsInput.val(noOfPoints + 1);\n    });\n\n    /**\n     * Handles adding linestrings and inner rings\n     */\n    $(document).on('click', '#gis_editor a.addLine.addJs', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n\n        // Eg. name = gis_data[0][MULTILINESTRING][add_line] => prefix = gis_data[0][MULTILINESTRING]\n        var prefix = name.substring(0, name.length - 10);\n        var type = prefix.slice(prefix.lastIndexOf('[') + 1, prefix.lastIndexOf(']'));\n\n        // Find the number of lines\n        var $noOfLinesInput = $('input[name=\\'' + prefix + '[no_of_lines]' + '\\']');\n        var noOfLines = parseInt($noOfLinesInput.val(), 10);\n\n        // Add the new linesting of inner ring based on the type\n        var html = '<br>';\n        var noOfPoints;\n        if (type === 'MULTILINESTRING') {\n            html += Messages.strLineString + ' ' + (noOfLines + 1) + ':';\n            noOfPoints = 2;\n        } else {\n            html += Messages.strInnerRing + ' ' + noOfLines + ':';\n            noOfPoints = 4;\n        }\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfLines + '][no_of_points]\" value=\"' + noOfPoints + '\">';\n        for (var i = 0; i < noOfPoints; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfLines + ']'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfLines + '][add_point]\" href=\"#\">+ ' +\n            Messages.strAddPoint + '</a><br>';\n\n        $a.before(html);\n        $noOfLinesInput.val(noOfLines + 1);\n    });\n\n    /**\n     * Handles adding polygons\n     */\n    $(document).on('click', '#gis_editor a.addJs.addPolygon', function () {\n        var $a = $(this);\n        var name = $a.attr('name');\n        // Eg. name = gis_data[0][MULTIPOLYGON][add_polygon] => prefix = gis_data[0][MULTIPOLYGON]\n        var prefix = name.substring(0, name.length - 13);\n        // Find the number of polygons\n        var $noOfPolygonsInput = $('input[name=\\'' + prefix + '[no_of_polygons]' + '\\']');\n        var noOfPolygons = parseInt($noOfPolygonsInput.val(), 10);\n\n        // Add the new polygon\n        var html = Messages.strPolygon + ' ' + (noOfPolygons + 1) + ':<br>';\n        html += '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][no_of_lines]\" value=\"1\">' +\n            '<br>' + Messages.strOuterRing + ':' +\n            '<input type=\"hidden\" name=\"' + prefix + '[' + noOfPolygons + '][0][no_of_points]\" value=\"4\">';\n        for (var i = 0; i < 4; i++) {\n            html += addDataPoint(i, (prefix + '[' + noOfPolygons + '][0]'));\n        }\n        html += '<a class=\"addPoint addJs\" name=\"' + prefix + '[' + noOfPolygons + '][0][add_point]\" href=\"#\">+ ' +\n            Messages.strAddPoint + '</a><br>' +\n            '<a class=\"addLine addJs\" name=\"' + prefix + '[' + noOfPolygons + '][add_line]\" href=\"#\">+ ' +\n            Messages.strAddInnerRing + '</a><br><br>';\n\n        $a.before(html);\n        $noOfPolygonsInput.val(noOfPolygons + 1);\n    });\n\n    /**\n     * Handles adding geoms\n     */\n    $(document).on('click', '#gis_editor a.addJs.addGeom', function () {\n        var $a = $(this);\n        var prefix = 'gis_data[GEOMETRYCOLLECTION]';\n        // Find the number of geoms\n        var $noOfGeomsInput = $('input[name=\\'' + prefix + '[geom_count]' + '\\']');\n        var noOfGeoms = parseInt($noOfGeomsInput.val(), 10);\n\n        var html1 = Messages.strGeometry + ' ' + (noOfGeoms + 1) + ':<br>';\n        var $geomType = $('select[name=\\'gis_data[' + (noOfGeoms - 1) + '][gis_type]\\']').clone();\n        $geomType.attr('name', 'gis_data[' + noOfGeoms + '][gis_type]').val('POINT');\n        var html2 = '<br>' + Messages.strPoint + ' :' +\n            '<label for=\"x\"> ' + Messages.strX + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][x]\" value=\"\">' +\n            '<label for=\"y\"> ' + Messages.strY + ' </label>' +\n            '<input type=\"text\" name=\"gis_data[' + noOfGeoms + '][POINT][y]\" value=\"\">' +\n            '<br><br>';\n\n        $a.before(html1);\n        $geomType.insertBefore($a);\n        $a.before(html2);\n        $noOfGeomsInput.val(noOfGeoms + 1);\n    });\n});\n"],"names":["gisEditorLoaded","closeGISEditor","$","fadeOut","empty","prepareJSVersion","find","val","Messages","strCopy","insertAfter","before","prepend","strClose","strCancel","remove","each","$button","addClass","removeClass","classes","attr","replaceWith","addDataPoint","pointNumber","prefix","Functions","sprintf","strPointN","strX","strY","initGISEditorVisualization","storeGisSvgRef","selectVisualization","styleOSM","addZoomPanControllers","zoomAndPan","loadJSAndGISEditor","value","field","type","inputName","head","document","getElementsByTagName","script","smallScripts","i","length","createElement","src","appendChild","onreadystatechange","readyState","loadGISEditor","onload","onerror","$gisEditor","post","CommonParams","get","data","success","html","gis_editor","ajaxShowMessage","error","openGISEditor","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","popupWidth","popupHeight","popupOffsetTop","popupOffsetLeft","$background","css","append","themeImagePath","fadeIn","insertDataAndClose","$form","argsep","serialize","result","AJAX","registerTeardown","off","registerOnload","on","event","preventDefault","visualization","eval","openLayers","$a","name","substring","$noOfPointsInput","noOfPoints","parseInt","slice","lastIndexOf","$noOfLinesInput","noOfLines","strLineString","strInnerRing","strAddPoint","$noOfPolygonsInput","noOfPolygons","strPolygon","strOuterRing","strAddInnerRing","$noOfGeomsInput","noOfGeoms","html1","strGeometry","$geomType","clone","html2","strPoint","insertBefore"],"sourceRoot":""}