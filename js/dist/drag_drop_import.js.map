{"version":3,"file":"drag_drop_import.js","mappings":"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","sources":["webpack://phpmyadmin/./js/src/drag_drop_import.js"],"sourcesContent":["\n/* This script handles PMA Drag Drop Import, loaded only when configuration is enabled.*/\n\n/**\n * Class to handle PMA Drag and Drop Import\n *      feature\n */\nvar DragDropImport = {\n    /**\n     * @var {number}, count of total uploads in this view\n     */\n    uploadCount: 0,\n    /**\n     * @var {number}, count of live uploads\n     */\n    liveUploadCount: 0,\n    /**\n     * @var {string[]} array, allowed extensions\n     */\n    allowedExtensions: ['sql', 'xml', 'ldi', 'mediawiki', 'shp'],\n    /**\n     * @var {string[]} array, allowed extensions for compressed files\n     */\n    allowedCompressedExtensions: ['gz', 'bz2', 'zip'],\n    /**\n     * @var {object[]}, array to store message returned by /import-status\n     */\n    importStatus: [],\n    /**\n     * Checks if any dropped file has valid extension or not\n     *\n     * @param {string} file filename\n     *\n     * @return {string}, extension for valid extension, '' otherwise\n     */\n    getExtension: function (file) {\n        var arr = file.split('.');\n        var ext = arr[arr.length - 1];\n\n        // check if compressed\n        if (jQuery.inArray(ext.toLowerCase(),\n            DragDropImport.allowedCompressedExtensions) !== -1) {\n            ext = arr[arr.length - 2];\n        }\n\n        // Now check for extension\n        if (jQuery.inArray(ext.toLowerCase(),\n            DragDropImport.allowedExtensions) !== -1) {\n            return ext;\n        }\n        return '';\n    },\n    /**\n     * Shows upload progress for different sql uploads\n     *\n     * @param {string} hash, hash for specific file upload\n     * @param {number} percent (float), file upload percentage\n     *\n     * @return {void}\n     */\n    setProgress: function (hash, percent) {\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .children('progress').val(percent);\n    },\n    /**\n     * Function to upload the file asynchronously\n     *\n     * @param {object} formData FormData object for a specific file\n     * @param {string} hash hash of the current file upload\n     *\n     * @return {void}\n     */\n    sendFileToServer: function (formData, hash) {\n        var jqXHR = $.ajax({\n            xhr: function () {\n                var xhrobj = $.ajaxSettings.xhr();\n                if (xhrobj.upload) {\n                    xhrobj.upload.addEventListener('progress', function (event) {\n                        var percent = 0;\n                        var position = event.loaded || event.position;\n                        var total = event.total;\n                        if (event.lengthComputable) {\n                            percent = Math.ceil(position / total * 100);\n                        }\n                        // Set progress\n                        DragDropImport.setProgress(hash, percent);\n                    }, false);\n                }\n                return xhrobj;\n            },\n            url: 'index.php?route=/import',\n            type: 'POST',\n            contentType:false,\n            processData: false,\n            cache: false,\n            data: formData,\n            success: function (data) {\n                DragDropImport.importFinished(hash, false, data.success);\n                if (!data.success) {\n                    DragDropImport.importStatus[DragDropImport.importStatus.length] = {\n                        hash: hash,\n                        message: data.error\n                    };\n                }\n            }\n        });\n\n        // -- provide link to cancel the upload\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize').html('<span hash=\"' +\n            hash + '\" class=\"pma_drop_file_status\" task=\"cancel\">' +\n            Messages.dropImportMessageCancel + '</span>');\n\n        // -- add event listener to this link to abort upload operation\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize span.pma_drop_file_status')\n            .on('click', function () {\n                if ($(this).attr('task') === 'cancel') {\n                    jqXHR.abort();\n                    $(this).html('<span>' + Messages.dropImportMessageAborted + '</span>');\n                    DragDropImport.importFinished(hash, true, false);\n                } else if ($(this).children('span').html() ===\n                    Messages.dropImportMessageFailed) {\n                    // -- view information\n                    var $this = $(this);\n                    $.each(DragDropImport.importStatus,\n                        function (key, value) {\n                            if (value.hash === hash) {\n                                $('.pma_drop_result:visible').remove();\n                                var filename = $this.parent('span').attr('data-filename');\n                                $('body').append('<div class=\"pma_drop_result\"><h2>' +\n                                Messages.dropImportImportResultHeader + ' - ' +\n                                filename + '<span class=\"close\">x</span></h2>' + value.message + '</div>');\n                                $('.pma_drop_result').draggable();  // to make this dialog draggable\n                            }\n                        });\n                }\n            });\n    },\n    /**\n     * Triggered when an object is dragged into the PMA UI\n     *\n     * @param {MouseEvent} event obj\n     *\n     * @return {void}\n     */\n    dragEnter : function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n        if (!DragDropImport.hasFiles(event)) {\n            return;\n        }\n        if (CommonParams.get('db') === '') {\n            $('.pma_drop_handler').html(Messages.dropImportSelectDB);\n        } else {\n            $('.pma_drop_handler').html(Messages.dropImportDropFiles);\n        }\n        $('.pma_drop_handler').fadeIn();\n    },\n    /**\n     * Check if dragged element contains Files\n     *\n     * @param event the event object\n     *\n     * @return {boolean}\n     */\n    hasFiles: function (event) {\n        return !(typeof event.originalEvent.dataTransfer.types === 'undefined' ||\n            $.inArray('Files', event.originalEvent.dataTransfer.types) < 0 ||\n            $.inArray(\n                'application/x-moz-nativeimage',\n                event.originalEvent.dataTransfer.types\n            ) >= 0);\n    },\n    /**\n     * Triggered when dragged file is being dragged over PMA UI\n     *\n     * @param {MouseEvent} event obj\n     *\n     * @return {void}\n     */\n    dragOver: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n        if (!DragDropImport.hasFiles(event)) {\n            return;\n        }\n        $('.pma_drop_handler').fadeIn();\n    },\n    /**\n     * Triggered when dragged objects are left\n     *\n     * @param {MouseEvent} event obj\n     *\n     * @return {void}\n     */\n    dragLeave: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var $dropHandler = $('.pma_drop_handler');\n        $dropHandler.clearQueue().stop();\n        $dropHandler.fadeOut();\n        $dropHandler.html(Messages.dropImportDropFiles);\n    },\n    /**\n     * Called when upload has finished\n     *\n     * @param {string} hash unique hash for a certain upload\n     * @param {boolean} aborted true if upload was aborted\n     * @param {boolean} status status of sql upload, as sent by server\n     *\n     * @return {void}\n     */\n    importFinished: function (hash, aborted, status) {\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .children('progress').hide();\n        var icon = 'icon ic_s_success';\n        // -- provide link to view upload status\n        if (!aborted) {\n            if (status) {\n                $('.pma_sql_import_status div li[data-hash=\"' + hash +\n                   '\"] span.filesize span.pma_drop_file_status')\n                    .html('<span>' + Messages.dropImportMessageSuccess + '</a>');\n            } else {\n                $('.pma_sql_import_status div li[data-hash=\"' + hash +\n                   '\"] span.filesize span.pma_drop_file_status')\n                    .html('<span class=\"underline\">' + Messages.dropImportMessageFailed +\n                   '</a>');\n                icon = 'icon ic_s_error';\n            }\n        } else {\n            icon = 'icon ic_s_notice';\n        }\n        $('.pma_sql_import_status div li[data-hash=\"' + hash +\n            '\"] span.filesize span.pma_drop_file_status')\n            .attr('task', 'info');\n\n        // Set icon\n        $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n            .prepend('<img src=\"./themes/dot.gif\" title=\"finished\" class=\"' +\n            icon + '\"> ');\n\n        // Decrease liveUploadCount by one\n        $('.pma_import_count').html(--DragDropImport.liveUploadCount);\n        if (!DragDropImport.liveUploadCount) {\n            $('.pma_sql_import_status h2 .close').fadeIn();\n        }\n    },\n    /**\n     * Triggered when dragged objects are dropped to UI\n     * From this function, the AJAX Upload operation is initiated\n     *\n     * @param event object\n     *\n     * @return {void}\n     */\n    drop: function (event) {\n        // We don't want to prevent users from using\n        // browser's default drag-drop feature on some page(s)\n        if ($('.noDragDrop').length !== 0) {\n            return;\n        }\n\n        var dbname = CommonParams.get('db');\n        var server = CommonParams.get('server');\n\n        // if no database is selected -- no\n        if (dbname !== '') {\n            var files = event.originalEvent.dataTransfer.files;\n            if (!files || files.length === 0) {\n                // No files actually transferred\n                $('.pma_drop_handler').fadeOut();\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            $('.pma_sql_import_status').slideDown();\n            for (var i = 0; i < files.length; i++) {\n                var ext  = (DragDropImport.getExtension(files[i].name));\n                var hash = AJAX.hash(++DragDropImport.uploadCount);\n\n                var $sqlImportStatusDiv = $('.pma_sql_import_status div');\n                $sqlImportStatusDiv.append('<li data-hash=\"' + hash + '\">' +\n                    ((ext !== '') ? '' : '<img src=\"./themes/dot.gif\" title=\"invalid format\" class=\"icon ic_s_notice\"> ') +\n                    Functions.escapeHtml(files[i].name) + '<span class=\"filesize\" data-filename=\"' +\n                    Functions.escapeHtml(files[i].name) + '\">' + (files[i].size / 1024).toFixed(2) +\n                    ' kb</span></li>');\n\n                // scroll the UI to bottom\n                $sqlImportStatusDiv.scrollTop(\n                    $sqlImportStatusDiv.scrollTop() + 50\n                );  // 50 hardcoded for now\n\n                if (ext !== '') {\n                    // Increment liveUploadCount by one\n                    $('.pma_import_count').html(++DragDropImport.liveUploadCount);\n                    $('.pma_sql_import_status h2 .close').fadeOut();\n\n                    $('.pma_sql_import_status div li[data-hash=\"' + hash + '\"]')\n                        .append('<br><progress max=\"100\" value=\"2\"></progress>');\n\n                    // uploading\n                    var fd = new FormData();\n                    fd.append('import_file', files[i]);\n                    fd.append('noplugin', Math.random().toString(36).substring(2, 12));\n                    fd.append('db', dbname);\n                    fd.append('server', server);\n                    fd.append('token', CommonParams.get('token'));\n                    fd.append('import_type', 'database');\n                    // todo: method to find the value below\n                    fd.append('MAX_FILE_SIZE', '4194304');\n                    // todo: method to find the value below\n                    fd.append('charset_of_file','utf-8');\n                    // todo: method to find the value below\n                    fd.append('allow_interrupt', 'yes');\n                    fd.append('skip_queries', '0');\n                    fd.append('format',ext);\n                    fd.append('sql_compatibility','NONE');\n                    fd.append('sql_no_auto_value_on_zero','something');\n                    fd.append('ajax_request','true');\n                    fd.append('hash', hash);\n\n                    // init uploading\n                    DragDropImport.sendFileToServer(fd, hash);\n                } else if (!DragDropImport.liveUploadCount) {\n                    $('.pma_sql_import_status h2 .close').fadeIn();\n                }\n            }\n        }\n        $('.pma_drop_handler').fadeOut();\n        event.stopPropagation();\n        event.preventDefault();\n    }\n};\n\n/**\n * Called when some user drags, dragover, leave\n *       a file to the PMA UI\n * @param {object}, Event data\n * @return {void}\n */\n$(document).on('dragenter', DragDropImport.dragEnter);\n$(document).on('dragover', DragDropImport.dragOver);\n$(document).on('dragleave', '.pma_drop_handler', DragDropImport.dragLeave);\n\n// when file is dropped to PMA UI\n$(document).on('drop', 'body', DragDropImport.drop);\n\n// minimizing-maximizing the sql ajax upload status\n$(document).on('click', '.pma_sql_import_status h2 .minimize', function () {\n    if ($(this).attr('toggle') === 'off') {\n        $('.pma_sql_import_status div').css('height','270px');\n        $(this).attr('toggle','on');\n        $(this).html('-');  // to minimize\n    } else {\n        $('.pma_sql_import_status div').css('height','0px');\n        $(this).attr('toggle','off');\n        $(this).html('+');  // to maximise\n    }\n});\n\n// closing sql ajax upload status\n$(document).on('click', '.pma_sql_import_status h2 .close', function () {\n    $('.pma_sql_import_status').fadeOut(function () {\n        $('.pma_sql_import_status div').html('');\n        DragDropImport.importStatus = [];  // clear the message array\n    });\n});\n\n// Closing the import result box\n$(document).on('click', '.pma_drop_result h2 .close', function () {\n    $(this).parent('h2').parent('div').remove();\n});\n"],"names":["DragDropImport","uploadCount","liveUploadCount","allowedExtensions","allowedCompressedExtensions","importStatus","getExtension","file","arr","split","ext","length","jQuery","inArray","toLowerCase","setProgress","hash","percent","$","children","val","sendFileToServer","formData","jqXHR","ajax","xhr","xhrobj","ajaxSettings","upload","addEventListener","event","position","loaded","total","lengthComputable","Math","ceil","url","type","contentType","processData","cache","data","success","importFinished","message","error","html","Messages","dropImportMessageCancel","on","attr","abort","dropImportMessageAborted","dropImportMessageFailed","$this","each","key","value","remove","filename","parent","append","dropImportImportResultHeader","draggable","dragEnter","stopPropagation","preventDefault","hasFiles","CommonParams","get","dropImportSelectDB","dropImportDropFiles","fadeIn","originalEvent","dataTransfer","types","dragOver","dragLeave","$dropHandler","clearQueue","stop","fadeOut","aborted","status","hide","icon","dropImportMessageSuccess","prepend","drop","dbname","server","files","slideDown","i","name","AJAX","$sqlImportStatusDiv","Functions","escapeHtml","size","toFixed","scrollTop","fd","FormData","random","toString","substring","document","css"],"sourceRoot":""}